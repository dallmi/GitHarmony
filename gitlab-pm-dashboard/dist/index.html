<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHarmony - teams in tune</title>
    <script type="module" crossorigin>(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(a){if(a.ep)return;a.ep=!0;const d=r(a);fetch(a.href,d)}})();function Rm(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Wc={exports:{}},Io={};var dh;function Mm(){if(dh)return Io;dh=1;var o=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function r(l,a,d){var u=null;if(d!==void 0&&(u=""+d),a.key!==void 0&&(u=""+a.key),"key"in a){d={};for(var g in a)g!=="key"&&(d[g]=a[g])}else d=a;return a=d.ref,{$$typeof:o,type:l,key:u,ref:a!==void 0?a:null,props:d}}return Io.Fragment=c,Io.jsx=r,Io.jsxs=r,Io}var ph;function Im(){return ph||(ph=1,Wc.exports=Mm()),Wc.exports}var e=Im(),_c={exports:{}},Re={};var uh;function Nm(){if(uh)return Re;uh=1;var o=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function D(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,H={};function U(k,A,V){this.props=k,this.context=A,this.refs=H,this.updater=V||j}U.prototype.isReactComponent={},U.prototype.setState=function(k,A){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,A,"setState")},U.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function G(){}G.prototype=U.prototype;function $(k,A,V){this.props=k,this.context=A,this.refs=H,this.updater=V||j}var B=$.prototype=new G;B.constructor=$,w(B,U.prototype),B.isPureReactComponent=!0;var M=Array.isArray;function R(){}var L={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function y(k,A,V){var Q=V.ref;return{$$typeof:o,type:k,key:A,ref:Q!==void 0?Q:null,props:V}}function C(k,A){return y(k.type,A,k.props)}function I(k){return typeof k=="object"&&k!==null&&k.$$typeof===o}function _(k){var A={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(V){return A[V]})}var P=/\/+/g;function X(k,A){return typeof k=="object"&&k!==null&&k.key!=null?_(""+k.key):A.toString(36)}function z(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(R,R):(k.status="pending",k.then(function(A){k.status==="pending"&&(k.status="fulfilled",k.value=A)},function(A){k.status==="pending"&&(k.status="rejected",k.reason=A)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function T(k,A,V,Q,ae){var re=typeof k;(re==="undefined"||re==="boolean")&&(k=null);var ue=!1;if(k===null)ue=!0;else switch(re){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(k.$$typeof){case o:case c:ue=!0;break;case m:return ue=k._init,T(ue(k._payload),A,V,Q,ae)}}if(ue)return ae=ae(k),ue=Q===""?"."+X(k,0):Q,M(ae)?(V="",ue!=null&&(V=ue.replace(P,"$&/")+"/"),T(ae,A,V,"",function(ze){return ze})):ae!=null&&(I(ae)&&(ae=C(ae,V+(ae.key==null||k&&k.key===ae.key?"":(""+ae.key).replace(P,"$&/")+"/")+ue)),A.push(ae)),1;ue=0;var fe=Q===""?".":Q+":";if(M(k))for(var xe=0;xe<k.length;xe++)Q=k[xe],re=fe+X(Q,xe),ue+=T(Q,A,V,re,ae);else if(xe=D(k),typeof xe=="function")for(k=xe.call(k),xe=0;!(Q=k.next()).done;)Q=Q.value,re=fe+X(Q,xe++),ue+=T(Q,A,V,re,ae);else if(re==="object"){if(typeof k.then=="function")return T(z(k),A,V,Q,ae);throw A=String(k),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return ue}function N(k,A,V){if(k==null)return k;var Q=[],ae=0;return T(k,Q,"","",function(re){return A.call(V,re,ae++)}),Q}function K(k){if(k._status===-1){var A=k._result;A=A(),A.then(function(V){(k._status===0||k._status===-1)&&(k._status=1,k._result=V)},function(V){(k._status===0||k._status===-1)&&(k._status=2,k._result=V)}),k._status===-1&&(k._status=0,k._result=A)}if(k._status===1)return k._result.default;throw k._result}var te=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},q={map:N,forEach:function(k,A,V){N(k,function(){A.apply(this,arguments)},V)},count:function(k){var A=0;return N(k,function(){A++}),A},toArray:function(k){return N(k,function(A){return A})||[]},only:function(k){if(!I(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Re.Activity=b,Re.Children=q,Re.Component=U,Re.Fragment=r,Re.Profiler=a,Re.PureComponent=$,Re.StrictMode=l,Re.Suspense=f,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Re.__COMPILER_RUNTIME={__proto__:null,c:function(k){return L.H.useMemoCache(k)}},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(k,A,V){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var Q=w({},k.props),ae=k.key;if(A!=null)for(re in A.key!==void 0&&(ae=""+A.key),A)!O.call(A,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&A.ref===void 0||(Q[re]=A[re]);var re=arguments.length-2;if(re===1)Q.children=V;else if(1<re){for(var ue=Array(re),fe=0;fe<re;fe++)ue[fe]=arguments[fe+2];Q.children=ue}return y(k.type,ae,Q)},Re.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},Re.createElement=function(k,A,V){var Q,ae={},re=null;if(A!=null)for(Q in A.key!==void 0&&(re=""+A.key),A)O.call(A,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ae[Q]=A[Q]);var ue=arguments.length-2;if(ue===1)ae.children=V;else if(1<ue){for(var fe=Array(ue),xe=0;xe<ue;xe++)fe[xe]=arguments[xe+2];ae.children=fe}if(k&&k.defaultProps)for(Q in ue=k.defaultProps,ue)ae[Q]===void 0&&(ae[Q]=ue[Q]);return y(k,re,ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:g,render:k}},Re.isValidElement=I,Re.lazy=function(k){return{$$typeof:m,_payload:{_status:-1,_result:k},_init:K}},Re.memo=function(k,A){return{$$typeof:x,type:k,compare:A===void 0?null:A}},Re.startTransition=function(k){var A=L.T,V={};L.T=V;try{var Q=k(),ae=L.S;ae!==null&&ae(V,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(R,te)}catch(re){te(re)}finally{A!==null&&V.types!==null&&(A.types=V.types),L.T=A}},Re.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Re.use=function(k){return L.H.use(k)},Re.useActionState=function(k,A,V){return L.H.useActionState(k,A,V)},Re.useCallback=function(k,A){return L.H.useCallback(k,A)},Re.useContext=function(k){return L.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,A){return L.H.useDeferredValue(k,A)},Re.useEffect=function(k,A){return L.H.useEffect(k,A)},Re.useEffectEvent=function(k){return L.H.useEffectEvent(k)},Re.useId=function(){return L.H.useId()},Re.useImperativeHandle=function(k,A,V){return L.H.useImperativeHandle(k,A,V)},Re.useInsertionEffect=function(k,A){return L.H.useInsertionEffect(k,A)},Re.useLayoutEffect=function(k,A){return L.H.useLayoutEffect(k,A)},Re.useMemo=function(k,A){return L.H.useMemo(k,A)},Re.useOptimistic=function(k,A){return L.H.useOptimistic(k,A)},Re.useReducer=function(k,A,V){return L.H.useReducer(k,A,V)},Re.useRef=function(k){return L.H.useRef(k)},Re.useState=function(k){return L.H.useState(k)},Re.useSyncExternalStore=function(k,A,V){return L.H.useSyncExternalStore(k,A,V)},Re.useTransition=function(){return L.H.useTransition()},Re.version="19.2.0",Re}var xh;function ld(){return xh||(xh=1,_c.exports=Nm()),_c.exports}var W=ld();const Rh=Rm(W);var Lc={exports:{}},No={},$c={exports:{}},Pc={};var hh;function Om(){return hh||(hh=1,(function(o){function c(T,N){var K=T.length;T.push(N);e:for(;0<K;){var te=K-1>>>1,q=T[te];if(0<a(q,N))T[te]=N,T[K]=q,K=te;else break e}}function r(T){return T.length===0?null:T[0]}function l(T){if(T.length===0)return null;var N=T[0],K=T.pop();if(K!==N){T[0]=K;e:for(var te=0,q=T.length,k=q>>>1;te<k;){var A=2*(te+1)-1,V=T[A],Q=A+1,ae=T[Q];if(0>a(V,K))Q<q&&0>a(ae,V)?(T[te]=ae,T[Q]=K,te=Q):(T[te]=V,T[A]=K,te=A);else if(Q<q&&0>a(ae,K))T[te]=ae,T[Q]=K,te=Q;else break e}}return N}function a(T,N){var K=T.sortIndex-N.sortIndex;return K!==0?K:T.id-N.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var u=Date,g=u.now();o.unstable_now=function(){return u.now()-g}}var f=[],x=[],m=1,b=null,v=3,D=!1,j=!1,w=!1,H=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function B(T){for(var N=r(x);N!==null;){if(N.callback===null)l(x);else if(N.startTime<=T)l(x),N.sortIndex=N.expirationTime,c(f,N);else break;N=r(x)}}function M(T){if(w=!1,B(T),!j)if(r(f)!==null)j=!0,R||(R=!0,_());else{var N=r(x);N!==null&&z(M,N.startTime-T)}}var R=!1,L=-1,O=5,y=-1;function C(){return H?!0:!(o.unstable_now()-y<O)}function I(){if(H=!1,R){var T=o.unstable_now();y=T;var N=!0;try{e:{j=!1,w&&(w=!1,G(L),L=-1),D=!0;var K=v;try{t:{for(B(T),b=r(f);b!==null&&!(b.expirationTime>T&&C());){var te=b.callback;if(typeof te=="function"){b.callback=null,v=b.priorityLevel;var q=te(b.expirationTime<=T);if(T=o.unstable_now(),typeof q=="function"){b.callback=q,B(T),N=!0;break t}b===r(f)&&l(f),B(T)}else l(f);b=r(f)}if(b!==null)N=!0;else{var k=r(x);k!==null&&z(M,k.startTime-T),N=!1}}break e}finally{b=null,v=K,D=!1}N=void 0}}finally{N?_():R=!1}}}var _;if(typeof $=="function")_=function(){$(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,X=P.port2;P.port1.onmessage=I,_=function(){X.postMessage(null)}}else _=function(){U(I,0)};function z(T,N){L=U(function(){T(o.unstable_now())},N)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(T){T.callback=null},o.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<T?Math.floor(1e3/T):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_next=function(T){switch(v){case 1:case 2:case 3:var N=3;break;default:N=v}var K=v;v=N;try{return T()}finally{v=K}},o.unstable_requestPaint=function(){H=!0},o.unstable_runWithPriority=function(T,N){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var K=v;v=T;try{return N()}finally{v=K}},o.unstable_scheduleCallback=function(T,N,K){var te=o.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,T){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=K+q,T={id:m++,callback:N,priorityLevel:T,startTime:K,expirationTime:q,sortIndex:-1},K>te?(T.sortIndex=K,c(x,T),r(f)===null&&T===r(x)&&(w?(G(L),L=-1):w=!0,z(M,K-te))):(T.sortIndex=q,c(f,T),j||D||(j=!0,R||(R=!0,_()))),T},o.unstable_shouldYield=C,o.unstable_wrapCallback=function(T){var N=v;return function(){var K=v;v=N;try{return T.apply(this,arguments)}finally{v=K}}}})(Pc)),Pc}var gh;function Wm(){return gh||(gh=1,$c.exports=Om()),$c.exports}var Uc={exports:{}},zt={};var fh;function _m(){if(fh)return zt;fh=1;var o=ld();function c(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)x+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(c(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function d(f,x,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:f,containerInfo:x,implementation:m}}var u=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(f,x){if(f==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,zt.createPortal=function(f,x){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(c(299));return d(f,x,null,m)},zt.flushSync=function(f){var x=u.T,m=l.p;try{if(u.T=null,l.p=2,f)return f()}finally{u.T=x,l.p=m,l.d.f()}},zt.preconnect=function(f,x){typeof f=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,l.d.C(f,x))},zt.prefetchDNS=function(f){typeof f=="string"&&l.d.D(f)},zt.preinit=function(f,x){if(typeof f=="string"&&x&&typeof x.as=="string"){var m=x.as,b=g(m,x.crossOrigin),v=typeof x.integrity=="string"?x.integrity:void 0,D=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;m==="style"?l.d.S(f,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:D}):m==="script"&&l.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:D,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},zt.preinitModule=function(f,x){if(typeof f=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var m=g(x.as,x.crossOrigin);l.d.M(f,{crossOrigin:m,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&l.d.M(f)},zt.preload=function(f,x){if(typeof f=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var m=x.as,b=g(m,x.crossOrigin);l.d.L(f,m,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},zt.preloadModule=function(f,x){if(typeof f=="string")if(x){var m=g(x.as,x.crossOrigin);l.d.m(f,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:m,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else l.d.m(f)},zt.requestFormReset=function(f){l.d.r(f)},zt.unstable_batchedUpdates=function(f,x){return f(x)},zt.useFormState=function(f,x,m){return u.H.useFormState(f,x,m)},zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},zt.version="19.2.0",zt}var mh;function Lm(){if(mh)return Uc.exports;mh=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(c){console.error(c)}}return o(),Uc.exports=_m(),Uc.exports}var yh;function $m(){if(yh)return No;yh=1;var o=Wm(),c=ld(),r=Lm();function l(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function u(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function f(t){if(d(t)!==t)throw Error(l(188))}function x(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(l(188));return n!==t?null:t}for(var i=t,s=n;;){var p=i.return;if(p===null)break;var h=p.alternate;if(h===null){if(s=p.return,s!==null){i=s;continue}break}if(p.child===h.child){for(h=p.child;h;){if(h===i)return f(p),t;if(h===s)return f(p),n;h=h.sibling}throw Error(l(188))}if(i.return!==s.return)i=p,s=h;else{for(var S=!1,F=p.child;F;){if(F===i){S=!0,i=p,s=h;break}if(F===s){S=!0,s=p,i=h;break}F=F.sibling}if(!S){for(F=h.child;F;){if(F===i){S=!0,i=h,s=p;break}if(F===s){S=!0,s=h,i=p;break}F=F.sibling}if(!S)throw Error(l(189))}}if(i.alternate!==s)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?t:n}function m(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=m(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),$=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function _(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function X(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case U:return"Profiler";case H:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case y:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case $:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case B:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L:return n=t.displayName||null,n!==null?n:X(t.type)||"Memo";case O:n=t._payload,t=t._init;try{return X(t(n))}catch{}}return null}var z=Array.isArray,T=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],q=-1;function k(t){return{current:t}}function A(t){0>q||(t.current=te[q],te[q]=null,q--)}function V(t,n){q++,te[q]=t.current,t.current=n}var Q=k(null),ae=k(null),re=k(null),ue=k(null);function fe(t,n){switch(V(re,n),V(ae,t),V(Q,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Rx(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Rx(n),t=Mx(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}A(Q),V(Q,t)}function xe(){A(Q),A(ae),A(re)}function ze(t){t.memoizedState!==null&&V(ue,t);var n=Q.current,i=Mx(n,t.type);n!==i&&(V(ae,t),V(Q,i))}function ge(t){ae.current===t&&(A(Q),A(ae)),ue.current===t&&(A(ue),To._currentValue=K)}var Be,Je;function Ae(t){if(Be===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Be=n&&n[1]||"",Je=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+t+Je}var Ye=!1;function pe(t,n){if(!t||Ye)return"";Ye=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(n){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(oe){var se=oe}Reflect.construct(t,[],de)}else{try{de.call()}catch(oe){se=oe}t.call(de.prototype)}}else{try{throw Error()}catch(oe){se=oe}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=s.DetermineComponentFrameRoot(),S=h[0],F=h[1];if(S&&F){var Y=S.split(`
`),ie=F.split(`
`);for(p=s=0;s<Y.length&&!Y[s].includes("DetermineComponentFrameRoot");)s++;for(;p<ie.length&&!ie[p].includes("DetermineComponentFrameRoot");)p++;if(s===Y.length||p===ie.length)for(s=Y.length-1,p=ie.length-1;1<=s&&0<=p&&Y[s]!==ie[p];)p--;for(;1<=s&&0<=p;s--,p--)if(Y[s]!==ie[p]){if(s!==1||p!==1)do if(s--,p--,0>p||Y[s]!==ie[p]){var le=`
`+Y[s].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=s&&0<=p);break}}}finally{Ye=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Ae(i):""}function Qe(t,n){switch(t.tag){case 26:case 27:case 5:return Ae(t.type);case 16:return Ae("Lazy");case 13:return t.child!==n&&n!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return pe(t.type,!1);case 11:return pe(t.type.render,!1);case 1:return pe(t.type,!0);case 31:return Ae("Activity");default:return""}}function De(t){try{var n="",i=null;do n+=Qe(t,i),i=t,t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var jt=Object.prototype.hasOwnProperty,Z=o.unstable_scheduleCallback,we=o.unstable_cancelCallback,At=o.unstable_shouldYield,pn=o.unstable_requestPaint,Ue=o.unstable_now,Jt=o.unstable_getCurrentPriorityLevel,Vo=o.unstable_ImmediatePriority,qo=o.unstable_UserBlockingPriority,Xi=o.unstable_NormalPriority,Ca=o.unstable_LowPriority,Yo=o.unstable_IdlePriority,Ea=o.log,wa=o.unstable_setDisableYieldValue,Si=null,Tt=null;function mn(t){if(typeof Ea=="function"&&wa(t),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Si,t)}catch{}}var Ft=Math.clz32?Math.clz32:Aa,za=Math.log,ka=Math.LN2;function Aa(t){return t>>>=0,t===0?32:31-(za(t)/ka|0)|0}var Ki=256,Ji=262144,Zi=4194304;function yn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function es(t,n,i){var s=t.pendingLanes;if(s===0)return 0;var p=0,h=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var F=s&134217727;return F!==0?(s=F&~h,s!==0?p=yn(s):(S&=F,S!==0?p=yn(S):i||(i=F&~t,i!==0&&(p=yn(i))))):(F=s&~h,F!==0?p=yn(F):S!==0?p=yn(S):i||(i=s&~t,i!==0&&(p=yn(i)))),p===0?0:n!==0&&n!==p&&(n&h)===0&&(h=p&-p,i=n&-n,h>=i||h===32&&(i&4194048)!==0)?n:p}function Di(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Vs(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E(){var t=Zi;return Zi<<=1,(Zi&62914560)===0&&(Zi=4194304),t}function me(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function Ce(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function he(t,n,i,s,p,h){var S=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var F=t.entanglements,Y=t.expirationTimes,ie=t.hiddenUpdates;for(i=S&~i;0<i;){var le=31-Ft(i),de=1<<le;F[le]=0,Y[le]=-1;var se=ie[le];if(se!==null)for(ie[le]=null,le=0;le<se.length;le++){var oe=se[le];oe!==null&&(oe.lane&=-536870913)}i&=~de}s!==0&&je(t,s,0),h!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=h&~(S&~n))}function je(t,n,i){t.pendingLanes|=n,t.suspendedLanes&=~n;var s=31-Ft(n);t.entangledLanes|=n,t.entanglements[s]=t.entanglements[s]|1073741824|i&261930}function Ie(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var s=31-Ft(i),p=1<<s;p&n|t[s]&n&&(t[s]|=n),i&=~p}}function ke(t,n){var i=n&-n;return i=(i&42)!==0?1:ve(i),(i&(t.suspendedLanes|n))!==0?0:i}function ve(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function st(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Mt(){var t=N.p;return t!==0?t:(t=window.event,t===void 0?32:ih(t.type))}function ts(t,n){var i=N.p;try{return N.p=t,n()}finally{N.p=i}}var Zt=Math.random().toString(36).slice(2),Te="__reactFiber$"+Zt,He="__reactProps$"+Zt,ct="__reactContainer$"+Zt,nt="__reactEvents$"+Zt,It="__reactListeners$"+Zt,Cn="__reactHandles$"+Zt,En="__reactResources$"+Zt,vn="__reactMarker$"+Zt;function Bi(t){delete t[Te],delete t[He],delete t[nt],delete t[It],delete t[Cn]}function Nt(t){var n=t[Te];if(n)return n;for(var i=t.parentNode;i;){if(n=i[ct]||i[Te]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=$x(t);t!==null;){if(i=t[Te])return i;t=$x(t)}return n}t=i,i=t.parentNode}return null}function Ut(t){if(t=t[Te]||t[ct]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function wn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(l(33))}function ns(t){var n=t[En];return n||(n=t[En]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function St(t){t[vn]=!0}var jd=new Set,Sd={};function Ci(t,n){is(t,n),is(t+"Capture",n)}function is(t,n){for(Sd[t]=n,t=0;t<n.length;t++)jd.add(n[t])}var Dg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dd={},Bd={};function Bg(t){return jt.call(Bd,t)?!0:jt.call(Dd,t)?!1:Dg.test(t)?Bd[t]=!0:(Dd[t]=!0,!1)}function Qo(t,n,i){if(Bg(n))if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var s=n.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+i)}}function Xo(t,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+i)}}function zn(t,n,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(n,i,""+s)}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cd(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Cg(t,n,i){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,h=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return p.call(this)},set:function(S){i=""+S,h.call(this,S)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(S){i=""+S},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ta(t){if(!t._valueTracker){var n=Cd(t)?"checked":"value";t._valueTracker=Cg(t,n,""+t[n])}}function Ed(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),s="";return t&&(s=Cd(t)?t.checked?"true":"false":t.value),t=s,t!==i?(n.setValue(t),!0):!1}function Ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Eg=/[\n"\\]/g;function tn(t){return t.replace(Eg,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Fa(t,n,i,s,p,h,S,F){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),n!=null?S==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+en(n)):t.value!==""+en(n)&&(t.value=""+en(n)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),n!=null?Ra(t,S,en(n)):i!=null?Ra(t,S,en(i)):s!=null&&t.removeAttribute("value"),p==null&&h!=null&&(t.defaultChecked=!!h),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?t.name=""+en(F):t.removeAttribute("name")}function wd(t,n,i,s,p,h,S,F){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),n!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Ta(t);return}i=i!=null?""+en(i):"",n=n!=null?""+en(n):i,F||n===t.value||(t.value=n),t.defaultValue=n}s=s??p,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=F?t.checked:!!s,t.defaultChecked=!!s,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),Ta(t)}function Ra(t,n,i){n==="number"&&Ko(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function ss(t,n,i,s){if(t=t.options,n){n={};for(var p=0;p<i.length;p++)n["$"+i[p]]=!0;for(i=0;i<t.length;i++)p=n.hasOwnProperty("$"+t[i].value),t[i].selected!==p&&(t[i].selected=p),p&&s&&(t[i].defaultSelected=!0)}else{for(i=""+en(i),n=null,p=0;p<t.length;p++){if(t[p].value===i){t[p].selected=!0,s&&(t[p].defaultSelected=!0);return}n!==null||t[p].disabled||(n=t[p])}n!==null&&(n.selected=!0)}}function zd(t,n,i){if(n!=null&&(n=""+en(n),n!==t.value&&(t.value=n),i==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=i!=null?""+en(i):""}function kd(t,n,i,s){if(n==null){if(s!=null){if(i!=null)throw Error(l(92));if(z(s)){if(1<s.length)throw Error(l(93));s=s[0]}i=s}i==null&&(i=""),n=i}i=en(n),t.defaultValue=i,s=t.textContent,s===i&&s!==""&&s!==null&&(t.value=s),Ta(t)}function os(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var wg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ad(t,n,i){var s=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":s?t.setProperty(n,i):typeof i!="number"||i===0||wg.has(n)?n==="float"?t.cssFloat=i:t[n]=(""+i).trim():t[n]=i+"px"}function Td(t,n,i){if(n!=null&&typeof n!="object")throw Error(l(62));if(t=t.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||n!=null&&n.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var p in n)s=n[p],n.hasOwnProperty(p)&&i[p]!==s&&Ad(t,p,s)}else for(var h in n)n.hasOwnProperty(h)&&Ad(t,h,n[h])}function Ma(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(t){return kg.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function kn(){}var Ia=null;function Na(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ls=null,as=null;function Fd(t){var n=Ut(t);if(n&&(t=n.stateNode)){var i=t[He]||null;e:switch(t=n.stateNode,n.type){case"input":if(Fa(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+tn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var s=i[n];if(s!==t&&s.form===t.form){var p=s[He]||null;if(!p)throw Error(l(90));Fa(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<i.length;n++)s=i[n],s.form===t.form&&Ed(s)}break e;case"textarea":zd(t,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&ss(t,!!i.multiple,n,!1)}}}var Oa=!1;function Rd(t,n,i){if(Oa)return t(n,i);Oa=!0;try{var s=t(n);return s}finally{if(Oa=!1,(ls!==null||as!==null)&&(_l(),ls&&(n=ls,t=as,as=ls=null,Fd(n),t)))for(n=0;n<t.length;n++)Fd(t[n])}}function qs(t,n){var i=t.stateNode;if(i===null)return null;var s=i[He]||null;if(s===null)return null;i=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(l(231,n,typeof i));return i}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(An)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{Wa=!1}var Xn=null,_a=null,Zo=null;function Md(){if(Zo)return Zo;var t,n=_a,i=n.length,s,p="value"in Xn?Xn.value:Xn.textContent,h=p.length;for(t=0;t<i&&n[t]===p[t];t++);var S=i-t;for(s=1;s<=S&&n[i-s]===p[h-s];s++);return Zo=p.slice(t,1<s?1-s:void 0)}function el(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function tl(){return!0}function Id(){return!1}function Ot(t){function n(i,s,p,h,S){this._reactName=i,this._targetInst=p,this.type=s,this.nativeEvent=h,this.target=S,this.currentTarget=null;for(var F in t)t.hasOwnProperty(F)&&(i=t[F],this[F]=i?i(h):h[F]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?tl:Id,this.isPropagationStopped=Id,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),n}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=Ot(Ei),Qs=b({},Ei,{view:0,detail:0}),Ag=Ot(Qs),La,$a,Xs,il=b({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(La=t.screenX-Xs.screenX,$a=t.screenY-Xs.screenY):$a=La=0,Xs=t),La)},movementY:function(t){return"movementY"in t?t.movementY:$a}}),Nd=Ot(il),Tg=b({},il,{dataTransfer:0}),Fg=Ot(Tg),Rg=b({},Qs,{relatedTarget:0}),Pa=Ot(Rg),Mg=b({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Ig=Ot(Mg),Ng=b({},Ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Og=Ot(Ng),Wg=b({},Ei,{data:0}),Od=Ot(Wg),_g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$g={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pg(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=$g[t])?!!n[t]:!1}function Ua(){return Pg}var Ug=b({},Qs,{key:function(t){if(t.key){var n=_g[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=el(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(t){return t.type==="keypress"?el(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?el(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hg=Ot(Ug),Gg=b({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=Ot(Gg),Vg=b({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),qg=Ot(Vg),Yg=b({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qg=Ot(Yg),Xg=b({},il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kg=Ot(Xg),Jg=b({},Ei,{newState:0,oldState:0}),Zg=Ot(Jg),ef=[9,13,27,32],Ha=An&&"CompositionEvent"in window,Ks=null;An&&"documentMode"in document&&(Ks=document.documentMode);var tf=An&&"TextEvent"in window&&!Ks,_d=An&&(!Ha||Ks&&8<Ks&&11>=Ks),Ld=" ",$d=!1;function Pd(t,n){switch(t){case"keyup":return ef.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rs=!1;function nf(t,n){switch(t){case"compositionend":return Ud(n);case"keypress":return n.which!==32?null:($d=!0,Ld);case"textInput":return t=n.data,t===Ld&&$d?null:t;default:return null}}function sf(t,n){if(rs)return t==="compositionend"||!Ha&&Pd(t,n)?(t=Md(),Zo=_a=Xn=null,rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _d&&n.locale!=="ko"?null:n.data;default:return null}}var of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!of[t.type]:n==="textarea"}function Gd(t,n,i,s){ls?as?as.push(s):as=[s]:ls=s,n=Vl(n,"onChange"),0<n.length&&(i=new nl("onChange","change",null,i,s),t.push({event:i,listeners:n}))}var Js=null,Zs=null;function lf(t){wx(t,0)}function sl(t){var n=wn(t);if(Ed(n))return t}function Vd(t,n){if(t==="change")return n}var qd=!1;if(An){var Ga;if(An){var Va="oninput"in document;if(!Va){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),Va=typeof Yd.oninput=="function"}Ga=Va}else Ga=!1;qd=Ga&&(!document.documentMode||9<document.documentMode)}function Qd(){Js&&(Js.detachEvent("onpropertychange",Xd),Zs=Js=null)}function Xd(t){if(t.propertyName==="value"&&sl(Zs)){var n=[];Gd(n,Zs,t,Na(t)),Rd(lf,n)}}function af(t,n,i){t==="focusin"?(Qd(),Js=n,Zs=i,Js.attachEvent("onpropertychange",Xd)):t==="focusout"&&Qd()}function rf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sl(Zs)}function cf(t,n){if(t==="click")return sl(n)}function df(t,n){if(t==="input"||t==="change")return sl(n)}function pf(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ht=typeof Object.is=="function"?Object.is:pf;function eo(t,n){if(Ht(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),s=Object.keys(n);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var p=i[s];if(!jt.call(n,p)||!Ht(t[p],n[p]))return!1}return!0}function Kd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jd(t,n){var i=Kd(t);t=0;for(var s;i;){if(i.nodeType===3){if(s=t+i.textContent.length,t<=n&&s>=n)return{node:i,offset:n-t};t=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Kd(i)}}function Zd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Zd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ep(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ko(t.document);n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=Ko(t.document)}return n}function qa(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var uf=An&&"documentMode"in document&&11>=document.documentMode,cs=null,Ya=null,to=null,Qa=!1;function tp(t,n,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Qa||cs==null||cs!==Ko(s)||(s=cs,"selectionStart"in s&&qa(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),to&&eo(to,s)||(to=s,s=Vl(Ya,"onSelect"),0<s.length&&(n=new nl("onSelect","select",null,n,i),t.push({event:n,listeners:s}),n.target=cs)))}function wi(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var ds={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionrun:wi("Transition","TransitionRun"),transitionstart:wi("Transition","TransitionStart"),transitioncancel:wi("Transition","TransitionCancel"),transitionend:wi("Transition","TransitionEnd")},Xa={},np={};An&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function zi(t){if(Xa[t])return Xa[t];if(!ds[t])return t;var n=ds[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in np)return Xa[t]=n[i];return t}var ip=zi("animationend"),sp=zi("animationiteration"),op=zi("animationstart"),xf=zi("transitionrun"),hf=zi("transitionstart"),gf=zi("transitioncancel"),lp=zi("transitionend"),ap=new Map,Ka="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ka.push("scrollEnd");function un(t,n){ap.set(t,n),Ci(n,[t])}var ol=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},nn=[],ps=0,Ja=0;function ll(){for(var t=ps,n=Ja=ps=0;n<t;){var i=nn[n];nn[n++]=null;var s=nn[n];nn[n++]=null;var p=nn[n];nn[n++]=null;var h=nn[n];if(nn[n++]=null,s!==null&&p!==null){var S=s.pending;S===null?p.next=p:(p.next=S.next,S.next=p),s.pending=p}h!==0&&rp(i,p,h)}}function al(t,n,i,s){nn[ps++]=t,nn[ps++]=n,nn[ps++]=i,nn[ps++]=s,Ja|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Za(t,n,i,s){return al(t,n,i,s),rl(t)}function ki(t,n){return al(t,null,null,n),rl(t)}function rp(t,n,i){t.lanes|=i;var s=t.alternate;s!==null&&(s.lanes|=i);for(var p=!1,h=t.return;h!==null;)h.childLanes|=i,s=h.alternate,s!==null&&(s.childLanes|=i),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(p=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,p&&n!==null&&(p=31-Ft(i),t=h.hiddenUpdates,s=t[p],s===null?t[p]=[n]:s.push(n),n.lane=i|536870912),h):null}function rl(t){if(50<Bo)throw Bo=0,rc=null,Error(l(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var us={};function ff(t,n,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,n,i,s){return new ff(t,n,i,s)}function er(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tn(t,n){var i=t.alternate;return i===null?(i=Gt(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function cp(t,n){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,n=i.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function cl(t,n,i,s,p,h){var S=0;if(s=t,typeof t=="function")er(t)&&(S=1);else if(typeof t=="string")S=jm(t,i,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case y:return t=Gt(31,i,n,p),t.elementType=y,t.lanes=h,t;case w:return Ai(i.children,p,h,n);case H:S=8,p|=24;break;case U:return t=Gt(12,i,n,p|2),t.elementType=U,t.lanes=h,t;case M:return t=Gt(13,i,n,p),t.elementType=M,t.lanes=h,t;case R:return t=Gt(19,i,n,p),t.elementType=R,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:S=10;break e;case G:S=9;break e;case B:S=11;break e;case L:S=14;break e;case O:S=16,s=null;break e}S=29,i=Error(l(130,t===null?"null":typeof t,"")),s=null}return n=Gt(S,i,n,p),n.elementType=t,n.type=s,n.lanes=h,n}function Ai(t,n,i,s){return t=Gt(7,t,s,n),t.lanes=i,t}function tr(t,n,i){return t=Gt(6,t,null,n),t.lanes=i,t}function dp(t){var n=Gt(18,null,null,0);return n.stateNode=t,n}function nr(t,n,i){return n=Gt(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var pp=new WeakMap;function sn(t,n){if(typeof t=="object"&&t!==null){var i=pp.get(t);return i!==void 0?i:(n={value:t,source:n,stack:De(n)},pp.set(t,n),n)}return{value:t,source:n,stack:De(n)}}var xs=[],hs=0,dl=null,no=0,on=[],ln=0,Kn=null,bn=1,jn="";function Fn(t,n){xs[hs++]=no,xs[hs++]=dl,dl=t,no=n}function up(t,n,i){on[ln++]=bn,on[ln++]=jn,on[ln++]=Kn,Kn=t;var s=bn;t=jn;var p=32-Ft(s)-1;s&=~(1<<p),i+=1;var h=32-Ft(n)+p;if(30<h){var S=p-p%5;h=(s&(1<<S)-1).toString(32),s>>=S,p-=S,bn=1<<32-Ft(n)+p|i<<p|s,jn=h+t}else bn=1<<h|i<<p|s,jn=t}function ir(t){t.return!==null&&(Fn(t,1),up(t,1,0))}function sr(t){for(;t===dl;)dl=xs[--hs],xs[hs]=null,no=xs[--hs],xs[hs]=null;for(;t===Kn;)Kn=on[--ln],on[ln]=null,jn=on[--ln],on[ln]=null,bn=on[--ln],on[ln]=null}function xp(t,n){on[ln++]=bn,on[ln++]=jn,on[ln++]=Kn,bn=n.id,jn=n.overflow,Kn=t}var Bt=null,ot=null,Pe=!1,Jn=null,an=!1,or=Error(l(519));function Zn(t){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw io(sn(n,t)),or}function hp(t){var n=t.stateNode,i=t.type,s=t.memoizedProps;switch(n[Te]=t,n[He]=s,i){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(i=0;i<Eo.length;i++)_e(Eo[i],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":_e("invalid",n),wd(n,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":_e("invalid",n);break;case"textarea":_e("invalid",n),kd(n,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||s.suppressHydrationWarning===!0||Tx(n.textContent,i)?(s.popover!=null&&(_e("beforetoggle",n),_e("toggle",n)),s.onScroll!=null&&_e("scroll",n),s.onScrollEnd!=null&&_e("scrollend",n),s.onClick!=null&&(n.onclick=kn),n=!0):n=!1,n||Zn(t,!0)}function gp(t){for(Bt=t.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:an=!1;return;case 27:case 3:an=!0;return;default:Bt=Bt.return}}function gs(t){if(t!==Bt)return!1;if(!Pe)return gp(t),Pe=!0,!1;var n=t.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Dc(t.type,t.memoizedProps)),i=!i),i&&ot&&Zn(t),gp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ot=Lx(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ot=Lx(t)}else n===27?(n=ot,xi(t.type)?(t=zc,zc=null,ot=t):ot=n):ot=Bt?cn(t.stateNode.nextSibling):null;return!0}function Ti(){ot=Bt=null,Pe=!1}function lr(){var t=Jn;return t!==null&&($t===null?$t=t:$t.push.apply($t,t),Jn=null),t}function io(t){Jn===null?Jn=[t]:Jn.push(t)}var ar=k(null),Fi=null,Rn=null;function ei(t,n,i){V(ar,n._currentValue),n._currentValue=i}function Mn(t){t._currentValue=ar.current,A(ar)}function rr(t,n,i){for(;t!==null;){var s=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),t===i)break;t=t.return}}function cr(t,n,i,s){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var h=p.dependencies;if(h!==null){var S=p.child;h=h.firstContext;e:for(;h!==null;){var F=h;h=p;for(var Y=0;Y<n.length;Y++)if(F.context===n[Y]){h.lanes|=i,F=h.alternate,F!==null&&(F.lanes|=i),rr(h.return,i,t),s||(S=null);break e}h=F.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(l(341));S.lanes|=i,h=S.alternate,h!==null&&(h.lanes|=i),rr(S,i,t),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===t){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function fs(t,n,i,s){t=null;for(var p=n,h=!1;p!==null;){if(!h){if((p.flags&524288)!==0)h=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(l(387));if(S=S.memoizedProps,S!==null){var F=p.type;Ht(p.pendingProps.value,S.value)||(t!==null?t.push(F):t=[F])}}else if(p===ue.current){if(S=p.alternate,S===null)throw Error(l(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(To):t=[To])}p=p.return}t!==null&&cr(n,t,i,s),n.flags|=262144}function pl(t){for(t=t.firstContext;t!==null;){if(!Ht(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ri(t){Fi=t,Rn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ct(t){return fp(Fi,t)}function ul(t,n){return Fi===null&&Ri(t),fp(t,n)}function fp(t,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Rn===null){if(t===null)throw Error(l(308));Rn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Rn=Rn.next=n;return i}var mf=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(i,s){t.push(s)}};this.abort=function(){n.aborted=!0,t.forEach(function(i){return i()})}},yf=o.unstable_scheduleCallback,vf=o.unstable_NormalPriority,gt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dr(){return{controller:new mf,data:new Map,refCount:0}}function so(t){t.refCount--,t.refCount===0&&yf(vf,function(){t.controller.abort()})}var oo=null,pr=0,ms=0,ys=null;function bf(t,n){if(oo===null){var i=oo=[];pr=0,ms=hc(),ys={status:"pending",value:void 0,then:function(s){i.push(s)}}}return pr++,n.then(mp,mp),n}function mp(){if(--pr===0&&oo!==null){ys!==null&&(ys.status="fulfilled");var t=oo;oo=null,ms=0,ys=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function jf(t,n){var i=[],s={status:"pending",value:null,reason:null,then:function(p){i.push(p)}};return t.then(function(){s.status="fulfilled",s.value=n;for(var p=0;p<i.length;p++)(0,i[p])(n)},function(p){for(s.status="rejected",s.reason=p,p=0;p<i.length;p++)(0,i[p])(void 0)}),s}var yp=T.S;T.S=function(t,n){tx=Ue(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&bf(t,n),yp!==null&&yp(t,n)};var Mi=k(null);function ur(){var t=Mi.current;return t!==null?t:it.pooledCache}function xl(t,n){n===null?V(Mi,Mi.current):V(Mi,n.pool)}function vp(){var t=ur();return t===null?null:{parent:gt._currentValue,pool:t}}var vs=Error(l(460)),xr=Error(l(474)),hl=Error(l(542)),gl={then:function(){}};function bp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function jp(t,n,i){switch(i=t[i],i===void 0?t.push(n):i!==n&&(n.then(kn,kn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dp(t),t;default:if(typeof n.status=="string")n.then(kn,kn);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=n,t.status="pending",t.then(function(s){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=s}},function(s){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=s}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dp(t),t}throw Ni=n,vs}}function Ii(t){try{var n=t._init;return n(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ni=i,vs):i}}var Ni=null;function Sp(){if(Ni===null)throw Error(l(459));var t=Ni;return Ni=null,t}function Dp(t){if(t===vs||t===hl)throw Error(l(483))}var bs=null,lo=0;function fl(t){var n=lo;return lo+=1,bs===null&&(bs=[]),jp(bs,t,n)}function ao(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function ml(t,n){throw n.$$typeof===v?Error(l(525)):(t=Object.prototype.toString.call(n),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Bp(t){function n(ee,J){if(t){var ne=ee.deletions;ne===null?(ee.deletions=[J],ee.flags|=16):ne.push(J)}}function i(ee,J){if(!t)return null;for(;J!==null;)n(ee,J),J=J.sibling;return null}function s(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function p(ee,J){return ee=Tn(ee,J),ee.index=0,ee.sibling=null,ee}function h(ee,J,ne){return ee.index=ne,t?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<J?(ee.flags|=67108866,J):ne):(ee.flags|=67108866,J)):(ee.flags|=1048576,J)}function S(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function F(ee,J,ne,ce){return J===null||J.tag!==6?(J=tr(ne,ee.mode,ce),J.return=ee,J):(J=p(J,ne),J.return=ee,J)}function Y(ee,J,ne,ce){var Ee=ne.type;return Ee===w?le(ee,J,ne.props.children,ce,ne.key):J!==null&&(J.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===O&&Ii(Ee)===J.type)?(J=p(J,ne.props),ao(J,ne),J.return=ee,J):(J=cl(ne.type,ne.key,ne.props,null,ee.mode,ce),ao(J,ne),J.return=ee,J)}function ie(ee,J,ne,ce){return J===null||J.tag!==4||J.stateNode.containerInfo!==ne.containerInfo||J.stateNode.implementation!==ne.implementation?(J=nr(ne,ee.mode,ce),J.return=ee,J):(J=p(J,ne.children||[]),J.return=ee,J)}function le(ee,J,ne,ce,Ee){return J===null||J.tag!==7?(J=Ai(ne,ee.mode,ce,Ee),J.return=ee,J):(J=p(J,ne),J.return=ee,J)}function de(ee,J,ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=tr(""+J,ee.mode,ne),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case D:return ne=cl(J.type,J.key,J.props,null,ee.mode,ne),ao(ne,J),ne.return=ee,ne;case j:return J=nr(J,ee.mode,ne),J.return=ee,J;case O:return J=Ii(J),de(ee,J,ne)}if(z(J)||_(J))return J=Ai(J,ee.mode,ne,null),J.return=ee,J;if(typeof J.then=="function")return de(ee,fl(J),ne);if(J.$$typeof===$)return de(ee,ul(ee,J),ne);ml(ee,J)}return null}function se(ee,J,ne,ce){var Ee=J!==null?J.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ee!==null?null:F(ee,J,""+ne,ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case D:return ne.key===Ee?Y(ee,J,ne,ce):null;case j:return ne.key===Ee?ie(ee,J,ne,ce):null;case O:return ne=Ii(ne),se(ee,J,ne,ce)}if(z(ne)||_(ne))return Ee!==null?null:le(ee,J,ne,ce,null);if(typeof ne.then=="function")return se(ee,J,fl(ne),ce);if(ne.$$typeof===$)return se(ee,J,ul(ee,ne),ce);ml(ee,ne)}return null}function oe(ee,J,ne,ce,Ee){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ee=ee.get(ne)||null,F(J,ee,""+ce,Ee);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case D:return ee=ee.get(ce.key===null?ne:ce.key)||null,Y(J,ee,ce,Ee);case j:return ee=ee.get(ce.key===null?ne:ce.key)||null,ie(J,ee,ce,Ee);case O:return ce=Ii(ce),oe(ee,J,ne,ce,Ee)}if(z(ce)||_(ce))return ee=ee.get(ne)||null,le(J,ee,ce,Ee,null);if(typeof ce.then=="function")return oe(ee,J,ne,fl(ce),Ee);if(ce.$$typeof===$)return oe(ee,J,ne,ul(J,ce),Ee);ml(J,ce)}return null}function ye(ee,J,ne,ce){for(var Ee=null,Ge=null,Se=J,Oe=J=0,$e=null;Se!==null&&Oe<ne.length;Oe++){Se.index>Oe?($e=Se,Se=null):$e=Se.sibling;var Ve=se(ee,Se,ne[Oe],ce);if(Ve===null){Se===null&&(Se=$e);break}t&&Se&&Ve.alternate===null&&n(ee,Se),J=h(Ve,J,Oe),Ge===null?Ee=Ve:Ge.sibling=Ve,Ge=Ve,Se=$e}if(Oe===ne.length)return i(ee,Se),Pe&&Fn(ee,Oe),Ee;if(Se===null){for(;Oe<ne.length;Oe++)Se=de(ee,ne[Oe],ce),Se!==null&&(J=h(Se,J,Oe),Ge===null?Ee=Se:Ge.sibling=Se,Ge=Se);return Pe&&Fn(ee,Oe),Ee}for(Se=s(Se);Oe<ne.length;Oe++)$e=oe(Se,ee,Oe,ne[Oe],ce),$e!==null&&(t&&$e.alternate!==null&&Se.delete($e.key===null?Oe:$e.key),J=h($e,J,Oe),Ge===null?Ee=$e:Ge.sibling=$e,Ge=$e);return t&&Se.forEach(function(yi){return n(ee,yi)}),Pe&&Fn(ee,Oe),Ee}function Fe(ee,J,ne,ce){if(ne==null)throw Error(l(151));for(var Ee=null,Ge=null,Se=J,Oe=J=0,$e=null,Ve=ne.next();Se!==null&&!Ve.done;Oe++,Ve=ne.next()){Se.index>Oe?($e=Se,Se=null):$e=Se.sibling;var yi=se(ee,Se,Ve.value,ce);if(yi===null){Se===null&&(Se=$e);break}t&&Se&&yi.alternate===null&&n(ee,Se),J=h(yi,J,Oe),Ge===null?Ee=yi:Ge.sibling=yi,Ge=yi,Se=$e}if(Ve.done)return i(ee,Se),Pe&&Fn(ee,Oe),Ee;if(Se===null){for(;!Ve.done;Oe++,Ve=ne.next())Ve=de(ee,Ve.value,ce),Ve!==null&&(J=h(Ve,J,Oe),Ge===null?Ee=Ve:Ge.sibling=Ve,Ge=Ve);return Pe&&Fn(ee,Oe),Ee}for(Se=s(Se);!Ve.done;Oe++,Ve=ne.next())Ve=oe(Se,ee,Oe,Ve.value,ce),Ve!==null&&(t&&Ve.alternate!==null&&Se.delete(Ve.key===null?Oe:Ve.key),J=h(Ve,J,Oe),Ge===null?Ee=Ve:Ge.sibling=Ve,Ge=Ve);return t&&Se.forEach(function(Fm){return n(ee,Fm)}),Pe&&Fn(ee,Oe),Ee}function tt(ee,J,ne,ce){if(typeof ne=="object"&&ne!==null&&ne.type===w&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case D:e:{for(var Ee=ne.key;J!==null;){if(J.key===Ee){if(Ee=ne.type,Ee===w){if(J.tag===7){i(ee,J.sibling),ce=p(J,ne.props.children),ce.return=ee,ee=ce;break e}}else if(J.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===O&&Ii(Ee)===J.type){i(ee,J.sibling),ce=p(J,ne.props),ao(ce,ne),ce.return=ee,ee=ce;break e}i(ee,J);break}else n(ee,J);J=J.sibling}ne.type===w?(ce=Ai(ne.props.children,ee.mode,ce,ne.key),ce.return=ee,ee=ce):(ce=cl(ne.type,ne.key,ne.props,null,ee.mode,ce),ao(ce,ne),ce.return=ee,ee=ce)}return S(ee);case j:e:{for(Ee=ne.key;J!==null;){if(J.key===Ee)if(J.tag===4&&J.stateNode.containerInfo===ne.containerInfo&&J.stateNode.implementation===ne.implementation){i(ee,J.sibling),ce=p(J,ne.children||[]),ce.return=ee,ee=ce;break e}else{i(ee,J);break}else n(ee,J);J=J.sibling}ce=nr(ne,ee.mode,ce),ce.return=ee,ee=ce}return S(ee);case O:return ne=Ii(ne),tt(ee,J,ne,ce)}if(z(ne))return ye(ee,J,ne,ce);if(_(ne)){if(Ee=_(ne),typeof Ee!="function")throw Error(l(150));return ne=Ee.call(ne),Fe(ee,J,ne,ce)}if(typeof ne.then=="function")return tt(ee,J,fl(ne),ce);if(ne.$$typeof===$)return tt(ee,J,ul(ee,ne),ce);ml(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,J!==null&&J.tag===6?(i(ee,J.sibling),ce=p(J,ne),ce.return=ee,ee=ce):(i(ee,J),ce=tr(ne,ee.mode,ce),ce.return=ee,ee=ce),S(ee)):i(ee,J)}return function(ee,J,ne,ce){try{lo=0;var Ee=tt(ee,J,ne,ce);return bs=null,Ee}catch(Se){if(Se===vs||Se===hl)throw Se;var Ge=Gt(29,Se,null,ee.mode);return Ge.lanes=ce,Ge.return=ee,Ge}finally{}}}var Oi=Bp(!0),Cp=Bp(!1),ti=!1;function hr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gr(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ii(t,n,i){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(qe&2)!==0){var p=s.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),s.pending=n,n=rl(t),rp(t,null,i),n}return al(t,s,n,i),rl(t)}function ro(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var s=n.lanes;s&=t.pendingLanes,i|=s,n.lanes=i,Ie(t,i)}}function fr(t,n){var i=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var p=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var S={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?p=h=S:h=h.next=S,i=i.next}while(i!==null);h===null?p=h=n:h=h.next=n}else p=h=n;i={baseState:s.baseState,firstBaseUpdate:p,lastBaseUpdate:h,shared:s.shared,callbacks:s.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}var mr=!1;function co(){if(mr){var t=ys;if(t!==null)throw t}}function po(t,n,i,s){mr=!1;var p=t.updateQueue;ti=!1;var h=p.firstBaseUpdate,S=p.lastBaseUpdate,F=p.shared.pending;if(F!==null){p.shared.pending=null;var Y=F,ie=Y.next;Y.next=null,S===null?h=ie:S.next=ie,S=Y;var le=t.alternate;le!==null&&(le=le.updateQueue,F=le.lastBaseUpdate,F!==S&&(F===null?le.firstBaseUpdate=ie:F.next=ie,le.lastBaseUpdate=Y))}if(h!==null){var de=p.baseState;S=0,le=ie=Y=null,F=h;do{var se=F.lane&-536870913,oe=se!==F.lane;if(oe?(Le&se)===se:(s&se)===se){se!==0&&se===ms&&(mr=!0),le!==null&&(le=le.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var ye=t,Fe=F;se=n;var tt=i;switch(Fe.tag){case 1:if(ye=Fe.payload,typeof ye=="function"){de=ye.call(tt,de,se);break e}de=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Fe.payload,se=typeof ye=="function"?ye.call(tt,de,se):ye,se==null)break e;de=b({},de,se);break e;case 2:ti=!0}}se=F.callback,se!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=p.callbacks,oe===null?p.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:F.tag,payload:F.payload,callback:F.callback,next:null},le===null?(ie=le=oe,Y=de):le=le.next=oe,S|=se;if(F=F.next,F===null){if(F=p.shared.pending,F===null)break;oe=F,F=oe.next,oe.next=null,p.lastBaseUpdate=oe,p.shared.pending=null}}while(!0);le===null&&(Y=de),p.baseState=Y,p.firstBaseUpdate=ie,p.lastBaseUpdate=le,h===null&&(p.shared.lanes=0),ri|=S,t.lanes=S,t.memoizedState=de}}function Ep(t,n){if(typeof t!="function")throw Error(l(191,t));t.call(n)}function wp(t,n){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Ep(i[t],n)}var js=k(null),yl=k(0);function zp(t,n){t=Un,V(yl,t),V(js,n),Un=t|n.baseLanes}function yr(){V(yl,Un),V(js,js.current)}function vr(){Un=yl.current,A(js),A(yl)}var Vt=k(null),rn=null;function si(t){var n=t.alternate;V(ut,ut.current&1),V(Vt,t),rn===null&&(n===null||js.current!==null||n.memoizedState!==null)&&(rn=t)}function br(t){V(ut,ut.current),V(Vt,t),rn===null&&(rn=t)}function kp(t){t.tag===22?(V(ut,ut.current),V(Vt,t),rn===null&&(rn=t)):oi()}function oi(){V(ut,ut.current),V(Vt,Vt.current)}function qt(t){A(Vt),rn===t&&(rn=null),A(ut)}var ut=k(0);function vl(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Ec(i)||wc(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var In=0,Ne=null,Ze=null,ft=null,bl=!1,Ss=!1,Wi=!1,jl=0,uo=0,Ds=null,Sf=0;function dt(){throw Error(l(321))}function jr(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Ht(t[i],n[i]))return!1;return!0}function Sr(t,n,i,s,p,h){return In=h,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,T.H=t===null||t.memoizedState===null?uu:Or,Wi=!1,h=i(s,p),Wi=!1,Ss&&(h=Tp(n,i,s,p)),Ap(t),h}function Ap(t){T.H=go;var n=Ze!==null&&Ze.next!==null;if(In=0,ft=Ze=Ne=null,bl=!1,uo=0,Ds=null,n)throw Error(l(300));t===null||mt||(t=t.dependencies,t!==null&&pl(t)&&(mt=!0))}function Tp(t,n,i,s){Ne=t;var p=0;do{if(Ss&&(Ds=null),uo=0,Ss=!1,25<=p)throw Error(l(301));if(p+=1,ft=Ze=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}T.H=xu,h=n(i,s)}while(Ss);return h}function Df(){var t=T.H,n=t.useState()[0];return n=typeof n.then=="function"?xo(n):n,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ne.flags|=1024),n}function Dr(){var t=jl!==0;return jl=0,t}function Br(t,n,i){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i}function Cr(t){if(bl){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}bl=!1}In=0,ft=Ze=Ne=null,Ss=!1,uo=jl=0,Ds=null}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ne.memoizedState=ft=t:ft=ft.next=t,ft}function xt(){if(Ze===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var n=ft===null?Ne.memoizedState:ft.next;if(n!==null)ft=n,Ze=t;else{if(t===null)throw Ne.alternate===null?Error(l(467)):Error(l(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},ft===null?Ne.memoizedState=ft=t:ft=ft.next=t}return ft}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xo(t){var n=uo;return uo+=1,Ds===null&&(Ds=[]),t=jp(Ds,t,n),n=Ne,(ft===null?n.memoizedState:ft.next)===null&&(n=n.alternate,T.H=n===null||n.memoizedState===null?uu:Or),t}function Dl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xo(t);if(t.$$typeof===$)return Ct(t)}throw Error(l(438,String(t)))}function Er(t){var n=null,i=Ne.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var s=Ne.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(n={data:s.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Sl(),Ne.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(t),s=0;s<t;s++)i[s]=C;return n.index++,i}function Nn(t,n){return typeof n=="function"?n(t):n}function Bl(t){var n=xt();return wr(n,Ze,t)}function wr(t,n,i){var s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=i;var p=t.baseQueue,h=s.pending;if(h!==null){if(p!==null){var S=p.next;p.next=h.next,h.next=S}n.baseQueue=p=h,s.pending=null}if(h=t.baseState,p===null)t.memoizedState=h;else{n=p.next;var F=S=null,Y=null,ie=n,le=!1;do{var de=ie.lane&-536870913;if(de!==ie.lane?(Le&de)===de:(In&de)===de){var se=ie.revertLane;if(se===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),de===ms&&(le=!0);else if((In&se)===se){ie=ie.next,se===ms&&(le=!0);continue}else de={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Y===null?(F=Y=de,S=h):Y=Y.next=de,Ne.lanes|=se,ri|=se;de=ie.action,Wi&&i(h,de),h=ie.hasEagerState?ie.eagerState:i(h,de)}else se={lane:de,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Y===null?(F=Y=se,S=h):Y=Y.next=se,Ne.lanes|=de,ri|=de;ie=ie.next}while(ie!==null&&ie!==n);if(Y===null?S=h:Y.next=F,!Ht(h,t.memoizedState)&&(mt=!0,le&&(i=ys,i!==null)))throw i;t.memoizedState=h,t.baseState=S,t.baseQueue=Y,s.lastRenderedState=h}return p===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function zr(t){var n=xt(),i=n.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=t;var s=i.dispatch,p=i.pending,h=n.memoizedState;if(p!==null){i.pending=null;var S=p=p.next;do h=t(h,S.action),S=S.next;while(S!==p);Ht(h,n.memoizedState)||(mt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),i.lastRenderedState=h}return[h,s]}function Fp(t,n,i){var s=Ne,p=xt(),h=Pe;if(h){if(i===void 0)throw Error(l(407));i=i()}else i=n();var S=!Ht((Ze||p).memoizedState,i);if(S&&(p.memoizedState=i,mt=!0),p=p.queue,Tr(Ip.bind(null,s,p,t),[t]),p.getSnapshot!==n||S||ft!==null&&ft.memoizedState.tag&1){if(s.flags|=2048,Bs(9,{destroy:void 0},Mp.bind(null,s,p,i,n),null),it===null)throw Error(l(349));h||(In&127)!==0||Rp(s,n,i)}return i}function Rp(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=Ne.updateQueue,n===null?(n=Sl(),Ne.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Mp(t,n,i,s){n.value=i,n.getSnapshot=s,Np(n)&&Op(t)}function Ip(t,n,i){return i(function(){Np(n)&&Op(t)})}function Np(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Ht(t,i)}catch{return!0}}function Op(t){var n=ki(t,2);n!==null&&Pt(n,t,2)}function kr(t){var n=Rt();if(typeof t=="function"){var i=t;if(t=i(),Wi){mn(!0);try{i()}finally{mn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:t},n}function Wp(t,n,i,s){return t.baseState=i,wr(t,Ze,typeof s=="function"?s:Nn)}function Bf(t,n,i,s,p){if(wl(t))throw Error(l(485));if(t=n.action,t!==null){var h={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){h.listeners.push(S)}};T.T!==null?i(!0):h.isTransition=!1,s(h),i=n.pending,i===null?(h.next=n.pending=h,_p(n,h)):(h.next=i.next,n.pending=i.next=h)}}function _p(t,n){var i=n.action,s=n.payload,p=t.state;if(n.isTransition){var h=T.T,S={};T.T=S;try{var F=i(p,s),Y=T.S;Y!==null&&Y(S,F),Lp(t,n,F)}catch(ie){Ar(t,n,ie)}finally{h!==null&&S.types!==null&&(h.types=S.types),T.T=h}}else try{h=i(p,s),Lp(t,n,h)}catch(ie){Ar(t,n,ie)}}function Lp(t,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){$p(t,n,s)},function(s){return Ar(t,n,s)}):$p(t,n,i)}function $p(t,n,i){n.status="fulfilled",n.value=i,Pp(n),t.state=i,n=t.pending,n!==null&&(i=n.next,i===n?t.pending=null:(i=i.next,n.next=i,_p(t,i)))}function Ar(t,n,i){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do n.status="rejected",n.reason=i,Pp(n),n=n.next;while(n!==s)}t.action=null}function Pp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Up(t,n){return n}function Hp(t,n){if(Pe){var i=it.formState;if(i!==null){e:{var s=Ne;if(Pe){if(ot){t:{for(var p=ot,h=an;p.nodeType!==8;){if(!h){p=null;break t}if(p=cn(p.nextSibling),p===null){p=null;break t}}h=p.data,p=h==="F!"||h==="F"?p:null}if(p){ot=cn(p.nextSibling),s=p.data==="F!";break e}}Zn(s)}s=!1}s&&(n=i[0])}}return i=Rt(),i.memoizedState=i.baseState=n,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:n},i.queue=s,i=cu.bind(null,Ne,s),s.dispatch=i,s=kr(!1),h=Nr.bind(null,Ne,!1,s.queue),s=Rt(),p={state:n,dispatch:null,action:t,pending:null},s.queue=p,i=Bf.bind(null,Ne,p,h,i),p.dispatch=i,s.memoizedState=t,[n,i,!1]}function Gp(t){var n=xt();return Vp(n,Ze,t)}function Vp(t,n,i){if(n=wr(t,n,Up)[0],t=Bl(Nn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var s=xo(n)}catch(S){throw S===vs?hl:S}else s=n;n=xt();var p=n.queue,h=p.dispatch;return i!==n.memoizedState&&(Ne.flags|=2048,Bs(9,{destroy:void 0},Cf.bind(null,p,i),null)),[s,h,t]}function Cf(t,n){t.action=n}function qp(t){var n=xt(),i=Ze;if(i!==null)return Vp(n,i,t);xt(),n=n.memoizedState,i=xt();var s=i.queue.dispatch;return i.memoizedState=t,[n,s,!1]}function Bs(t,n,i,s){return t={tag:t,create:i,deps:s,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=Sl(),Ne.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,n.lastEffect=t),t}function Yp(){return xt().memoizedState}function Cl(t,n,i,s){var p=Rt();Ne.flags|=t,p.memoizedState=Bs(1|n,{destroy:void 0},i,s===void 0?null:s)}function El(t,n,i,s){var p=xt();s=s===void 0?null:s;var h=p.memoizedState.inst;Ze!==null&&s!==null&&jr(s,Ze.memoizedState.deps)?p.memoizedState=Bs(n,h,i,s):(Ne.flags|=t,p.memoizedState=Bs(1|n,h,i,s))}function Qp(t,n){Cl(8390656,8,t,n)}function Tr(t,n){El(2048,8,t,n)}function Ef(t){Ne.flags|=4;var n=Ne.updateQueue;if(n===null)n=Sl(),Ne.updateQueue=n,n.events=[t];else{var i=n.events;i===null?n.events=[t]:i.push(t)}}function Xp(t){var n=xt().memoizedState;return Ef({ref:n,nextImpl:t}),function(){if((qe&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function Kp(t,n){return El(4,2,t,n)}function Jp(t,n){return El(4,4,t,n)}function Zp(t,n){if(typeof n=="function"){t=t();var i=n(t);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function eu(t,n,i){i=i!=null?i.concat([t]):null,El(4,4,Zp.bind(null,n,t),i)}function Fr(){}function tu(t,n){var i=xt();n=n===void 0?null:n;var s=i.memoizedState;return n!==null&&jr(n,s[1])?s[0]:(i.memoizedState=[t,n],t)}function nu(t,n){var i=xt();n=n===void 0?null:n;var s=i.memoizedState;if(n!==null&&jr(n,s[1]))return s[0];if(s=t(),Wi){mn(!0);try{t()}finally{mn(!1)}}return i.memoizedState=[s,n],s}function Rr(t,n,i){return i===void 0||(In&1073741824)!==0&&(Le&261930)===0?t.memoizedState=n:(t.memoizedState=i,t=ix(),Ne.lanes|=t,ri|=t,i)}function iu(t,n,i,s){return Ht(i,n)?i:js.current!==null?(t=Rr(t,i,s),Ht(t,n)||(mt=!0),t):(In&42)===0||(In&1073741824)!==0&&(Le&261930)===0?(mt=!0,t.memoizedState=i):(t=ix(),Ne.lanes|=t,ri|=t,n)}function su(t,n,i,s,p){var h=N.p;N.p=h!==0&&8>h?h:8;var S=T.T,F={};T.T=F,Nr(t,!1,n,i);try{var Y=p(),ie=T.S;if(ie!==null&&ie(F,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var le=jf(Y,s);ho(t,n,le,Xt(t))}else ho(t,n,s,Xt(t))}catch(de){ho(t,n,{then:function(){},status:"rejected",reason:de},Xt())}finally{N.p=h,S!==null&&F.types!==null&&(S.types=F.types),T.T=S}}function wf(){}function Mr(t,n,i,s){if(t.tag!==5)throw Error(l(476));var p=ou(t).queue;su(t,p,n,K,i===null?wf:function(){return lu(t),i(s)})}function ou(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:K},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:i},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function lu(t){var n=ou(t);n.next===null&&(n=t.alternate.memoizedState),ho(t,n.next.queue,{},Xt())}function Ir(){return Ct(To)}function au(){return xt().memoizedState}function ru(){return xt().memoizedState}function zf(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var i=Xt();t=ni(i);var s=ii(n,t,i);s!==null&&(Pt(s,n,i),ro(s,n,i)),n={cache:dr()},t.payload=n;return}n=n.return}}function kf(t,n,i){var s=Xt();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},wl(t)?du(n,i):(i=Za(t,n,i,s),i!==null&&(Pt(i,t,s),pu(i,n,s)))}function cu(t,n,i){var s=Xt();ho(t,n,i,s)}function ho(t,n,i,s){var p={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(wl(t))du(n,p);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var S=n.lastRenderedState,F=h(S,i);if(p.hasEagerState=!0,p.eagerState=F,Ht(F,S))return al(t,n,p,0),it===null&&ll(),!1}catch{}finally{}if(i=Za(t,n,p,s),i!==null)return Pt(i,t,s),pu(i,n,s),!0}return!1}function Nr(t,n,i,s){if(s={lane:2,revertLane:hc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},wl(t)){if(n)throw Error(l(479))}else n=Za(t,i,s,2),n!==null&&Pt(n,t,2)}function wl(t){var n=t.alternate;return t===Ne||n!==null&&n===Ne}function du(t,n){Ss=bl=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function pu(t,n,i){if((i&4194048)!==0){var s=n.lanes;s&=t.pendingLanes,i|=s,n.lanes=i,Ie(t,i)}}var go={readContext:Ct,use:Dl,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};go.useEffectEvent=dt;var uu={readContext:Ct,use:Dl,useCallback:function(t,n){return Rt().memoizedState=[t,n===void 0?null:n],t},useContext:Ct,useEffect:Qp,useImperativeHandle:function(t,n,i){i=i!=null?i.concat([t]):null,Cl(4194308,4,Zp.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Cl(4194308,4,t,n)},useInsertionEffect:function(t,n){Cl(4,2,t,n)},useMemo:function(t,n){var i=Rt();n=n===void 0?null:n;var s=t();if(Wi){mn(!0);try{t()}finally{mn(!1)}}return i.memoizedState=[s,n],s},useReducer:function(t,n,i){var s=Rt();if(i!==void 0){var p=i(n);if(Wi){mn(!0);try{i(n)}finally{mn(!1)}}}else p=n;return s.memoizedState=s.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},s.queue=t,t=t.dispatch=kf.bind(null,Ne,t),[s.memoizedState,t]},useRef:function(t){var n=Rt();return t={current:t},n.memoizedState=t},useState:function(t){t=kr(t);var n=t.queue,i=cu.bind(null,Ne,n);return n.dispatch=i,[t.memoizedState,i]},useDebugValue:Fr,useDeferredValue:function(t,n){var i=Rt();return Rr(i,t,n)},useTransition:function(){var t=kr(!1);return t=su.bind(null,Ne,t.queue,!0,!1),Rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,i){var s=Ne,p=Rt();if(Pe){if(i===void 0)throw Error(l(407));i=i()}else{if(i=n(),it===null)throw Error(l(349));(Le&127)!==0||Rp(s,n,i)}p.memoizedState=i;var h={value:i,getSnapshot:n};return p.queue=h,Qp(Ip.bind(null,s,h,t),[t]),s.flags|=2048,Bs(9,{destroy:void 0},Mp.bind(null,s,h,i,n),null),i},useId:function(){var t=Rt(),n=it.identifierPrefix;if(Pe){var i=jn,s=bn;i=(s&~(1<<32-Ft(s)-1)).toString(32)+i,n="_"+n+"R_"+i,i=jl++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Sf++,n="_"+n+"r_"+i.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Ir,useFormState:Hp,useActionState:Hp,useOptimistic:function(t){var n=Rt();n.memoizedState=n.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Nr.bind(null,Ne,!0,i),i.dispatch=n,[t,n]},useMemoCache:Er,useCacheRefresh:function(){return Rt().memoizedState=zf.bind(null,Ne)},useEffectEvent:function(t){var n=Rt(),i={impl:t};return n.memoizedState=i,function(){if((qe&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},Or={readContext:Ct,use:Dl,useCallback:tu,useContext:Ct,useEffect:Tr,useImperativeHandle:eu,useInsertionEffect:Kp,useLayoutEffect:Jp,useMemo:nu,useReducer:Bl,useRef:Yp,useState:function(){return Bl(Nn)},useDebugValue:Fr,useDeferredValue:function(t,n){var i=xt();return iu(i,Ze.memoizedState,t,n)},useTransition:function(){var t=Bl(Nn)[0],n=xt().memoizedState;return[typeof t=="boolean"?t:xo(t),n]},useSyncExternalStore:Fp,useId:au,useHostTransitionStatus:Ir,useFormState:Gp,useActionState:Gp,useOptimistic:function(t,n){var i=xt();return Wp(i,Ze,t,n)},useMemoCache:Er,useCacheRefresh:ru};Or.useEffectEvent=Xp;var xu={readContext:Ct,use:Dl,useCallback:tu,useContext:Ct,useEffect:Tr,useImperativeHandle:eu,useInsertionEffect:Kp,useLayoutEffect:Jp,useMemo:nu,useReducer:zr,useRef:Yp,useState:function(){return zr(Nn)},useDebugValue:Fr,useDeferredValue:function(t,n){var i=xt();return Ze===null?Rr(i,t,n):iu(i,Ze.memoizedState,t,n)},useTransition:function(){var t=zr(Nn)[0],n=xt().memoizedState;return[typeof t=="boolean"?t:xo(t),n]},useSyncExternalStore:Fp,useId:au,useHostTransitionStatus:Ir,useFormState:qp,useActionState:qp,useOptimistic:function(t,n){var i=xt();return Ze!==null?Wp(i,Ze,t,n):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Er,useCacheRefresh:ru};xu.useEffectEvent=Xp;function Wr(t,n,i,s){n=t.memoizedState,i=i(s,n),i=i==null?n:b({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var _r={enqueueSetState:function(t,n,i){t=t._reactInternals;var s=Xt(),p=ni(s);p.payload=n,i!=null&&(p.callback=i),n=ii(t,p,s),n!==null&&(Pt(n,t,s),ro(n,t,s))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var s=Xt(),p=ni(s);p.tag=1,p.payload=n,i!=null&&(p.callback=i),n=ii(t,p,s),n!==null&&(Pt(n,t,s),ro(n,t,s))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Xt(),s=ni(i);s.tag=2,n!=null&&(s.callback=n),n=ii(t,s,i),n!==null&&(Pt(n,t,i),ro(n,t,i))}};function hu(t,n,i,s,p,h,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,h,S):n.prototype&&n.prototype.isPureReactComponent?!eo(i,s)||!eo(p,h):!0}function gu(t,n,i,s){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,s),n.state!==t&&_r.enqueueReplaceState(n,n.state,null)}function _i(t,n){var i=n;if("ref"in n){i={};for(var s in n)s!=="ref"&&(i[s]=n[s])}if(t=t.defaultProps){i===n&&(i=b({},i));for(var p in t)i[p]===void 0&&(i[p]=t[p])}return i}function fu(t){ol(t)}function mu(t){console.error(t)}function yu(t){ol(t)}function zl(t,n){try{var i=t.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(s){setTimeout(function(){throw s})}}function vu(t,n,i){try{var s=t.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Lr(t,n,i){return i=ni(i),i.tag=3,i.payload={element:null},i.callback=function(){zl(t,n)},i}function bu(t){return t=ni(t),t.tag=3,t}function ju(t,n,i,s){var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var h=s.value;t.payload=function(){return p(h)},t.callback=function(){vu(n,i,s)}}var S=i.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){vu(n,i,s),typeof p!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var F=s.stack;this.componentDidCatch(s.value,{componentStack:F!==null?F:""})})}function Af(t,n,i,s,p){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(n=i.alternate,n!==null&&fs(n,i,p,!0),i=Vt.current,i!==null){switch(i.tag){case 31:case 13:return rn===null?Ll():i.alternate===null&&pt===0&&(pt=3),i.flags&=-257,i.flags|=65536,i.lanes=p,s===gl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([s]):n.add(s),pc(t,s,p)),!1;case 22:return i.flags|=65536,s===gl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([s]):i.add(s)),pc(t,s,p)),!1}throw Error(l(435,i.tag))}return pc(t,s,p),Ll(),!1}if(Pe)return n=Vt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,s!==or&&(t=Error(l(422),{cause:s}),io(sn(t,i)))):(s!==or&&(n=Error(l(423),{cause:s}),io(sn(n,i))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,s=sn(s,i),p=Lr(t.stateNode,s,p),fr(t,p),pt!==4&&(pt=2)),!1;var h=Error(l(520),{cause:s});if(h=sn(h,i),Do===null?Do=[h]:Do.push(h),pt!==4&&(pt=2),n===null)return!0;s=sn(s,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,t=p&-p,i.lanes|=t,t=Lr(i.stateNode,s,t),fr(i,t),!1;case 1:if(n=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ci===null||!ci.has(h))))return i.flags|=65536,p&=-p,i.lanes|=p,p=bu(p),ju(p,t,i,s),fr(i,p),!1}i=i.return}while(i!==null);return!1}var $r=Error(l(461)),mt=!1;function Et(t,n,i,s){n.child=t===null?Cp(n,null,i,s):Oi(n,t.child,i,s)}function Su(t,n,i,s,p){i=i.render;var h=n.ref;if("ref"in s){var S={};for(var F in s)F!=="ref"&&(S[F]=s[F])}else S=s;return Ri(n),s=Sr(t,n,i,S,h,p),F=Dr(),t!==null&&!mt?(Br(t,n,p),On(t,n,p)):(Pe&&F&&ir(n),n.flags|=1,Et(t,n,s,p),n.child)}function Du(t,n,i,s,p){if(t===null){var h=i.type;return typeof h=="function"&&!er(h)&&h.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=h,Bu(t,n,h,s,p)):(t=cl(i.type,null,s,n,n.mode,p),t.ref=n.ref,t.return=n,n.child=t)}if(h=t.child,!Qr(t,p)){var S=h.memoizedProps;if(i=i.compare,i=i!==null?i:eo,i(S,s)&&t.ref===n.ref)return On(t,n,p)}return n.flags|=1,t=Tn(h,s),t.ref=n.ref,t.return=n,n.child=t}function Bu(t,n,i,s,p){if(t!==null){var h=t.memoizedProps;if(eo(h,s)&&t.ref===n.ref)if(mt=!1,n.pendingProps=s=h,Qr(t,p))(t.flags&131072)!==0&&(mt=!0);else return n.lanes=t.lanes,On(t,n,p)}return Pr(t,n,i,s,p)}function Cu(t,n,i,s){var p=s.children,h=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|i:i,t!==null){for(s=n.child=t.child,p=0;s!==null;)p=p|s.lanes|s.childLanes,s=s.sibling;s=p&~h}else s=0,n.child=null;return Eu(t,n,h,i,s)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&xl(n,h!==null?h.cachePool:null),h!==null?zp(n,h):yr(),kp(n);else return s=n.lanes=536870912,Eu(t,n,h!==null?h.baseLanes|i:i,i,s)}else h!==null?(xl(n,h.cachePool),zp(n,h),oi(),n.memoizedState=null):(t!==null&&xl(n,null),yr(),oi());return Et(t,n,p,i),n.child}function fo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Eu(t,n,i,s,p){var h=ur();return h=h===null?null:{parent:gt._currentValue,pool:h},n.memoizedState={baseLanes:i,cachePool:h},t!==null&&xl(n,null),yr(),kp(n),t!==null&&fs(t,n,s,!0),n.childLanes=p,null}function kl(t,n){return n=Tl({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function wu(t,n,i){return Oi(n,t.child,null,i),t=kl(n,n.pendingProps),t.flags|=2,qt(n),n.memoizedState=null,t}function Tf(t,n,i){var s=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Pe){if(s.mode==="hidden")return t=kl(n,s),n.lanes=536870912,fo(null,t);if(br(n),(t=ot)?(t=_x(t,an),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Kn!==null?{id:bn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},i=dp(t),i.return=n,n.child=i,Bt=n,ot=null)):t=null,t===null)throw Zn(n);return n.lanes=536870912,null}return kl(n,s)}var h=t.memoizedState;if(h!==null){var S=h.dehydrated;if(br(n),p)if(n.flags&256)n.flags&=-257,n=wu(t,n,i);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(l(558));else if(mt||fs(t,n,i,!1),p=(i&t.childLanes)!==0,mt||p){if(s=it,s!==null&&(S=ke(s,i),S!==0&&S!==h.retryLane))throw h.retryLane=S,ki(t,S),Pt(s,t,S),$r;Ll(),n=wu(t,n,i)}else t=h.treeContext,ot=cn(S.nextSibling),Bt=n,Pe=!0,Jn=null,an=!1,t!==null&&xp(n,t),n=kl(n,s),n.flags|=4096;return n}return t=Tn(t.child,{mode:s.mode,children:s.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Al(t,n){var i=n.ref;if(i===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(t===null||t.ref!==i)&&(n.flags|=4194816)}}function Pr(t,n,i,s,p){return Ri(n),i=Sr(t,n,i,s,void 0,p),s=Dr(),t!==null&&!mt?(Br(t,n,p),On(t,n,p)):(Pe&&s&&ir(n),n.flags|=1,Et(t,n,i,p),n.child)}function zu(t,n,i,s,p,h){return Ri(n),n.updateQueue=null,i=Tp(n,s,i,p),Ap(t),s=Dr(),t!==null&&!mt?(Br(t,n,h),On(t,n,h)):(Pe&&s&&ir(n),n.flags|=1,Et(t,n,i,h),n.child)}function ku(t,n,i,s,p){if(Ri(n),n.stateNode===null){var h=us,S=i.contextType;typeof S=="object"&&S!==null&&(h=Ct(S)),h=new i(s,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=_r,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=s,h.state=n.memoizedState,h.refs={},hr(n),S=i.contextType,h.context=typeof S=="object"&&S!==null?Ct(S):us,h.state=n.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(Wr(n,i,S,s),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(S=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),S!==h.state&&_r.enqueueReplaceState(h,h.state,null),po(n,s,h,p),co(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),s=!0}else if(t===null){h=n.stateNode;var F=n.memoizedProps,Y=_i(i,F);h.props=Y;var ie=h.context,le=i.contextType;S=us,typeof le=="object"&&le!==null&&(S=Ct(le));var de=i.getDerivedStateFromProps;le=typeof de=="function"||typeof h.getSnapshotBeforeUpdate=="function",F=n.pendingProps!==F,le||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(F||ie!==S)&&gu(n,h,s,S),ti=!1;var se=n.memoizedState;h.state=se,po(n,s,h,p),co(),ie=n.memoizedState,F||se!==ie||ti?(typeof de=="function"&&(Wr(n,i,de,s),ie=n.memoizedState),(Y=ti||hu(n,i,Y,s,se,ie,S))?(le||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=ie),h.props=s,h.state=ie,h.context=S,s=Y):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{h=n.stateNode,gr(t,n),S=n.memoizedProps,le=_i(i,S),h.props=le,de=n.pendingProps,se=h.context,ie=i.contextType,Y=us,typeof ie=="object"&&ie!==null&&(Y=Ct(ie)),F=i.getDerivedStateFromProps,(ie=typeof F=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(S!==de||se!==Y)&&gu(n,h,s,Y),ti=!1,se=n.memoizedState,h.state=se,po(n,s,h,p),co();var oe=n.memoizedState;S!==de||se!==oe||ti||t!==null&&t.dependencies!==null&&pl(t.dependencies)?(typeof F=="function"&&(Wr(n,i,F,s),oe=n.memoizedState),(le=ti||hu(n,i,le,s,se,oe,Y)||t!==null&&t.dependencies!==null&&pl(t.dependencies))?(ie||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,oe,Y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,oe,Y)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||S===t.memoizedProps&&se===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&se===t.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=oe),h.props=s,h.state=oe,h.context=Y,s=le):(typeof h.componentDidUpdate!="function"||S===t.memoizedProps&&se===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&se===t.memoizedState||(n.flags|=1024),s=!1)}return h=s,Al(t,n),s=(n.flags&128)!==0,h||s?(h=n.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,t!==null&&s?(n.child=Oi(n,t.child,null,p),n.child=Oi(n,null,i,p)):Et(t,n,i,p),n.memoizedState=h.state,t=n.child):t=On(t,n,p),t}function Au(t,n,i,s){return Ti(),n.flags|=256,Et(t,n,i,s),n.child}var Ur={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hr(t){return{baseLanes:t,cachePool:vp()}}function Gr(t,n,i){return t=t!==null?t.childLanes&~i:0,n&&(t|=Qt),t}function Tu(t,n,i){var s=n.pendingProps,p=!1,h=(n.flags&128)!==0,S;if((S=h)||(S=t!==null&&t.memoizedState===null?!1:(ut.current&2)!==0),S&&(p=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,t===null){if(Pe){if(p?si(n):oi(),(t=ot)?(t=_x(t,an),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Kn!==null?{id:bn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},i=dp(t),i.return=n,n.child=i,Bt=n,ot=null)):t=null,t===null)throw Zn(n);return wc(t)?n.lanes=32:n.lanes=536870912,null}var F=s.children;return s=s.fallback,p?(oi(),p=n.mode,F=Tl({mode:"hidden",children:F},p),s=Ai(s,p,i,null),F.return=n,s.return=n,F.sibling=s,n.child=F,s=n.child,s.memoizedState=Hr(i),s.childLanes=Gr(t,S,i),n.memoizedState=Ur,fo(null,s)):(si(n),Vr(n,F))}var Y=t.memoizedState;if(Y!==null&&(F=Y.dehydrated,F!==null)){if(h)n.flags&256?(si(n),n.flags&=-257,n=qr(t,n,i)):n.memoizedState!==null?(oi(),n.child=t.child,n.flags|=128,n=null):(oi(),F=s.fallback,p=n.mode,s=Tl({mode:"visible",children:s.children},p),F=Ai(F,p,i,null),F.flags|=2,s.return=n,F.return=n,s.sibling=F,n.child=s,Oi(n,t.child,null,i),s=n.child,s.memoizedState=Hr(i),s.childLanes=Gr(t,S,i),n.memoizedState=Ur,n=fo(null,s));else if(si(n),wc(F)){if(S=F.nextSibling&&F.nextSibling.dataset,S)var ie=S.dgst;S=ie,s=Error(l(419)),s.stack="",s.digest=S,io({value:s,source:null,stack:null}),n=qr(t,n,i)}else if(mt||fs(t,n,i,!1),S=(i&t.childLanes)!==0,mt||S){if(S=it,S!==null&&(s=ke(S,i),s!==0&&s!==Y.retryLane))throw Y.retryLane=s,ki(t,s),Pt(S,t,s),$r;Ec(F)||Ll(),n=qr(t,n,i)}else Ec(F)?(n.flags|=192,n.child=t.child,n=null):(t=Y.treeContext,ot=cn(F.nextSibling),Bt=n,Pe=!0,Jn=null,an=!1,t!==null&&xp(n,t),n=Vr(n,s.children),n.flags|=4096);return n}return p?(oi(),F=s.fallback,p=n.mode,Y=t.child,ie=Y.sibling,s=Tn(Y,{mode:"hidden",children:s.children}),s.subtreeFlags=Y.subtreeFlags&65011712,ie!==null?F=Tn(ie,F):(F=Ai(F,p,i,null),F.flags|=2),F.return=n,s.return=n,s.sibling=F,n.child=s,fo(null,s),s=n.child,F=t.child.memoizedState,F===null?F=Hr(i):(p=F.cachePool,p!==null?(Y=gt._currentValue,p=p.parent!==Y?{parent:Y,pool:Y}:p):p=vp(),F={baseLanes:F.baseLanes|i,cachePool:p}),s.memoizedState=F,s.childLanes=Gr(t,S,i),n.memoizedState=Ur,fo(t.child,s)):(si(n),i=t.child,t=i.sibling,i=Tn(i,{mode:"visible",children:s.children}),i.return=n,i.sibling=null,t!==null&&(S=n.deletions,S===null?(n.deletions=[t],n.flags|=16):S.push(t)),n.child=i,n.memoizedState=null,i)}function Vr(t,n){return n=Tl({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Tl(t,n){return t=Gt(22,t,null,n),t.lanes=0,t}function qr(t,n,i){return Oi(n,t.child,null,i),t=Vr(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Fu(t,n,i){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n),rr(t.return,n,i)}function Yr(t,n,i,s,p,h){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:p,treeForkCount:h}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=s,S.tail=i,S.tailMode=p,S.treeForkCount=h)}function Ru(t,n,i){var s=n.pendingProps,p=s.revealOrder,h=s.tail;s=s.children;var S=ut.current,F=(S&2)!==0;if(F?(S=S&1|2,n.flags|=128):S&=1,V(ut,S),Et(t,n,s,i),s=Pe?no:0,!F&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fu(t,i,n);else if(t.tag===19)Fu(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(i=n.child,p=null;i!==null;)t=i.alternate,t!==null&&vl(t)===null&&(p=i),i=i.sibling;i=p,i===null?(p=n.child,n.child=null):(p=i.sibling,i.sibling=null),Yr(n,!1,p,i,h,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,p=n.child,n.child=null;p!==null;){if(t=p.alternate,t!==null&&vl(t)===null){n.child=p;break}t=p.sibling,p.sibling=i,i=p,p=t}Yr(n,!0,i,null,h,s);break;case"together":Yr(n,!1,null,null,void 0,s);break;default:n.memoizedState=null}return n.child}function On(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),ri|=n.lanes,(i&n.childLanes)===0)if(t!==null){if(fs(t,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(l(153));if(n.child!==null){for(t=n.child,i=Tn(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Tn(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Qr(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&pl(t)))}function Ff(t,n,i){switch(n.tag){case 3:fe(n,n.stateNode.containerInfo),ei(n,gt,t.memoizedState.cache),Ti();break;case 27:case 5:ze(n);break;case 4:fe(n,n.stateNode.containerInfo);break;case 10:ei(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,br(n),null;break;case 13:var s=n.memoizedState;if(s!==null)return s.dehydrated!==null?(si(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Tu(t,n,i):(si(n),t=On(t,n,i),t!==null?t.sibling:null);si(n);break;case 19:var p=(t.flags&128)!==0;if(s=(i&n.childLanes)!==0,s||(fs(t,n,i,!1),s=(i&n.childLanes)!==0),p){if(s)return Ru(t,n,i);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),V(ut,ut.current),s)break;return null;case 22:return n.lanes=0,Cu(t,n,i,n.pendingProps);case 24:ei(n,gt,t.memoizedState.cache)}return On(t,n,i)}function Mu(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps)mt=!0;else{if(!Qr(t,i)&&(n.flags&128)===0)return mt=!1,Ff(t,n,i);mt=(t.flags&131072)!==0}else mt=!1,Pe&&(n.flags&1048576)!==0&&up(n,no,n.index);switch(n.lanes=0,n.tag){case 16:e:{var s=n.pendingProps;if(t=Ii(n.elementType),n.type=t,typeof t=="function")er(t)?(s=_i(t,s),n.tag=1,n=ku(null,n,t,s,i)):(n.tag=0,n=Pr(null,n,t,s,i));else{if(t!=null){var p=t.$$typeof;if(p===B){n.tag=11,n=Su(null,n,t,s,i);break e}else if(p===L){n.tag=14,n=Du(null,n,t,s,i);break e}}throw n=X(t)||t,Error(l(306,n,""))}}return n;case 0:return Pr(t,n,n.type,n.pendingProps,i);case 1:return s=n.type,p=_i(s,n.pendingProps),ku(t,n,s,p,i);case 3:e:{if(fe(n,n.stateNode.containerInfo),t===null)throw Error(l(387));s=n.pendingProps;var h=n.memoizedState;p=h.element,gr(t,n),po(n,s,null,i);var S=n.memoizedState;if(s=S.cache,ei(n,gt,s),s!==h.cache&&cr(n,[gt],i,!0),co(),s=S.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=Au(t,n,s,i);break e}else if(s!==p){p=sn(Error(l(424)),n),io(p),n=Au(t,n,s,i);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=cn(t.firstChild),Bt=n,Pe=!0,Jn=null,an=!0,i=Cp(n,null,s,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ti(),s===p){n=On(t,n,i);break e}Et(t,n,s,i)}n=n.child}return n;case 26:return Al(t,n),t===null?(i=Gx(n.type,null,n.pendingProps,null))?n.memoizedState=i:Pe||(i=n.type,t=n.pendingProps,s=ql(re.current).createElement(i),s[Te]=n,s[He]=t,wt(s,i,t),St(s),n.stateNode=s):n.memoizedState=Gx(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ze(n),t===null&&Pe&&(s=n.stateNode=Px(n.type,n.pendingProps,re.current),Bt=n,an=!0,p=ot,xi(n.type)?(zc=p,ot=cn(s.firstChild)):ot=p),Et(t,n,n.pendingProps.children,i),Al(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Pe&&((p=s=ot)&&(s=rm(s,n.type,n.pendingProps,an),s!==null?(n.stateNode=s,Bt=n,ot=cn(s.firstChild),an=!1,p=!0):p=!1),p||Zn(n)),ze(n),p=n.type,h=n.pendingProps,S=t!==null?t.memoizedProps:null,s=h.children,Dc(p,h)?s=null:S!==null&&Dc(p,S)&&(n.flags|=32),n.memoizedState!==null&&(p=Sr(t,n,Df,null,null,i),To._currentValue=p),Al(t,n),Et(t,n,s,i),n.child;case 6:return t===null&&Pe&&((t=i=ot)&&(i=cm(i,n.pendingProps,an),i!==null?(n.stateNode=i,Bt=n,ot=null,t=!0):t=!1),t||Zn(n)),null;case 13:return Tu(t,n,i);case 4:return fe(n,n.stateNode.containerInfo),s=n.pendingProps,t===null?n.child=Oi(n,null,s,i):Et(t,n,s,i),n.child;case 11:return Su(t,n,n.type,n.pendingProps,i);case 7:return Et(t,n,n.pendingProps,i),n.child;case 8:return Et(t,n,n.pendingProps.children,i),n.child;case 12:return Et(t,n,n.pendingProps.children,i),n.child;case 10:return s=n.pendingProps,ei(n,n.type,s.value),Et(t,n,s.children,i),n.child;case 9:return p=n.type._context,s=n.pendingProps.children,Ri(n),p=Ct(p),s=s(p),n.flags|=1,Et(t,n,s,i),n.child;case 14:return Du(t,n,n.type,n.pendingProps,i);case 15:return Bu(t,n,n.type,n.pendingProps,i);case 19:return Ru(t,n,i);case 31:return Tf(t,n,i);case 22:return Cu(t,n,i,n.pendingProps);case 24:return Ri(n),s=Ct(gt),t===null?(p=ur(),p===null&&(p=it,h=dr(),p.pooledCache=h,h.refCount++,h!==null&&(p.pooledCacheLanes|=i),p=h),n.memoizedState={parent:s,cache:p},hr(n),ei(n,gt,p)):((t.lanes&i)!==0&&(gr(t,n),po(n,null,null,i),co()),p=t.memoizedState,h=n.memoizedState,p.parent!==s?(p={parent:s,cache:s},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),ei(n,gt,s)):(s=h.cache,ei(n,gt,s),s!==p.cache&&cr(n,[gt],i,!0))),Et(t,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Wn(t){t.flags|=4}function Xr(t,n,i,s,p){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(ax())t.flags|=8192;else throw Ni=gl,xr}else t.flags&=-16777217}function Iu(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xx(n))if(ax())t.flags|=8192;else throw Ni=gl,xr}function Fl(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?E():536870912,t.lanes|=n,zs|=n)}function mo(t,n){if(!Pe)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function lt(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,s=0;if(n)for(var p=t.child;p!==null;)i|=p.lanes|p.childLanes,s|=p.subtreeFlags&65011712,s|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)i|=p.lanes|p.childLanes,s|=p.subtreeFlags,s|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=s,t.childLanes=i,n}function Rf(t,n,i){var s=n.pendingProps;switch(sr(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(n),null;case 1:return lt(n),null;case 3:return i=n.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Mn(gt),xe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(gs(n)?Wn(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,lr())),lt(n),null;case 26:var p=n.type,h=n.memoizedState;return t===null?(Wn(n),h!==null?(lt(n),Iu(n,h)):(lt(n),Xr(n,p,null,s,i))):h?h!==t.memoizedState?(Wn(n),lt(n),Iu(n,h)):(lt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==s&&Wn(n),lt(n),Xr(n,p,t,s,i)),null;case 27:if(ge(n),i=re.current,p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==s&&Wn(n);else{if(!s){if(n.stateNode===null)throw Error(l(166));return lt(n),null}t=Q.current,gs(n)?hp(n):(t=Px(p,s,i),n.stateNode=t,Wn(n))}return lt(n),null;case 5:if(ge(n),p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==s&&Wn(n);else{if(!s){if(n.stateNode===null)throw Error(l(166));return lt(n),null}if(h=Q.current,gs(n))hp(n);else{var S=ql(re.current);switch(h){case 1:h=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:h=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":h=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":h=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":h=S.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof s.is=="string"?S.createElement("select",{is:s.is}):S.createElement("select"),s.multiple?h.multiple=!0:s.size&&(h.size=s.size);break;default:h=typeof s.is=="string"?S.createElement(p,{is:s.is}):S.createElement(p)}}h[Te]=n,h[He]=s;e:for(S=n.child;S!==null;){if(S.tag===5||S.tag===6)h.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break e;for(;S.sibling===null;){if(S.return===null||S.return===n)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}n.stateNode=h;e:switch(wt(h,p,s),p){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Wn(n)}}return lt(n),Xr(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,i),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==s&&Wn(n);else{if(typeof s!="string"&&n.stateNode===null)throw Error(l(166));if(t=re.current,gs(n)){if(t=n.stateNode,i=n.memoizedProps,s=null,p=Bt,p!==null)switch(p.tag){case 27:case 5:s=p.memoizedProps}t[Te]=n,t=!!(t.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Tx(t.nodeValue,i)),t||Zn(n,!0)}else t=ql(t).createTextNode(s),t[Te]=n,n.stateNode=t}return lt(n),null;case 31:if(i=n.memoizedState,t===null||t.memoizedState!==null){if(s=gs(n),i!==null){if(t===null){if(!s)throw Error(l(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[Te]=n}else Ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;lt(n),t=!1}else i=lr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return n.flags&256?(qt(n),n):(qt(n),null);if((n.flags&128)!==0)throw Error(l(558))}return lt(n),null;case 13:if(s=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=gs(n),s!==null&&s.dehydrated!==null){if(t===null){if(!p)throw Error(l(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(l(317));p[Te]=n}else Ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;lt(n),p=!1}else p=lr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(qt(n),n):(qt(n),null)}return qt(n),(n.flags&128)!==0?(n.lanes=i,n):(i=s!==null,t=t!==null&&t.memoizedState!==null,i&&(s=n.child,p=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(p=s.alternate.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==p&&(s.flags|=2048)),i!==t&&i&&(n.child.flags|=8192),Fl(n,n.updateQueue),lt(n),null);case 4:return xe(),t===null&&yc(n.stateNode.containerInfo),lt(n),null;case 10:return Mn(n.type),lt(n),null;case 19:if(A(ut),s=n.memoizedState,s===null)return lt(n),null;if(p=(n.flags&128)!==0,h=s.rendering,h===null)if(p)mo(s,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=vl(t),h!==null){for(n.flags|=128,mo(s,!1),t=h.updateQueue,n.updateQueue=t,Fl(n,t),n.subtreeFlags=0,t=i,i=n.child;i!==null;)cp(i,t),i=i.sibling;return V(ut,ut.current&1|2),Pe&&Fn(n,s.treeForkCount),n.child}t=t.sibling}s.tail!==null&&Ue()>Ol&&(n.flags|=128,p=!0,mo(s,!1),n.lanes=4194304)}else{if(!p)if(t=vl(h),t!==null){if(n.flags|=128,p=!0,t=t.updateQueue,n.updateQueue=t,Fl(n,t),mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!h.alternate&&!Pe)return lt(n),null}else 2*Ue()-s.renderingStartTime>Ol&&i!==536870912&&(n.flags|=128,p=!0,mo(s,!1),n.lanes=4194304);s.isBackwards?(h.sibling=n.child,n.child=h):(t=s.last,t!==null?t.sibling=h:n.child=h,s.last=h)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ue(),t.sibling=null,i=ut.current,V(ut,p?i&1|2:i&1),Pe&&Fn(n,s.treeForkCount),t):(lt(n),null);case 22:case 23:return qt(n),vr(),s=n.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(n.flags|=8192):s&&(n.flags|=8192),s?(i&536870912)!==0&&(n.flags&128)===0&&(lt(n),n.subtreeFlags&6&&(n.flags|=8192)):lt(n),i=n.updateQueue,i!==null&&Fl(n,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(n.flags|=2048),t!==null&&A(Mi),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Mn(gt),lt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function Mf(t,n){switch(sr(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Mn(gt),xe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return ge(n),null;case 31:if(n.memoizedState!==null){if(qt(n),n.alternate===null)throw Error(l(340));Ti()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(qt(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(l(340));Ti()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return A(ut),null;case 4:return xe(),null;case 10:return Mn(n.type),null;case 22:case 23:return qt(n),vr(),t!==null&&A(Mi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Mn(gt),null;case 25:return null;default:return null}}function Nu(t,n){switch(sr(n),n.tag){case 3:Mn(gt),xe();break;case 26:case 27:case 5:ge(n);break;case 4:xe();break;case 31:n.memoizedState!==null&&qt(n);break;case 13:qt(n);break;case 19:A(ut);break;case 10:Mn(n.type);break;case 22:case 23:qt(n),vr(),t!==null&&A(Mi);break;case 24:Mn(gt)}}function yo(t,n){try{var i=n.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var p=s.next;i=p;do{if((i.tag&t)===t){s=void 0;var h=i.create,S=i.inst;s=h(),S.destroy=s}i=i.next}while(i!==p)}}catch(F){Ke(n,n.return,F)}}function li(t,n,i){try{var s=n.updateQueue,p=s!==null?s.lastEffect:null;if(p!==null){var h=p.next;s=h;do{if((s.tag&t)===t){var S=s.inst,F=S.destroy;if(F!==void 0){S.destroy=void 0,p=n;var Y=i,ie=F;try{ie()}catch(le){Ke(p,Y,le)}}}s=s.next}while(s!==h)}}catch(le){Ke(n,n.return,le)}}function Ou(t){var n=t.updateQueue;if(n!==null){var i=t.stateNode;try{wp(n,i)}catch(s){Ke(t,t.return,s)}}}function Wu(t,n,i){i.props=_i(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(s){Ke(t,n,s)}}function vo(t,n){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof i=="function"?t.refCleanup=i(s):i.current=s}}catch(p){Ke(t,n,p)}}function Sn(t,n){var i=t.ref,s=t.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(p){Ke(t,n,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(p){Ke(t,n,p)}else i.current=null}function _u(t){var n=t.type,i=t.memoizedProps,s=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(p){Ke(t,t.return,p)}}function Kr(t,n,i){try{var s=t.stateNode;nm(s,t.type,i,n),s[He]=n}catch(p){Ke(t,t.return,p)}}function Lu(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&xi(t.type)||t.tag===4}function Jr(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zr(t,n,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(t),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=kn));else if(s!==4&&(s===27&&xi(t.type)&&(i=t.stateNode,n=null),t=t.child,t!==null))for(Zr(t,n,i),t=t.sibling;t!==null;)Zr(t,n,i),t=t.sibling}function Rl(t,n,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(s!==4&&(s===27&&xi(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Rl(t,n,i),t=t.sibling;t!==null;)Rl(t,n,i),t=t.sibling}function $u(t){var n=t.stateNode,i=t.memoizedProps;try{for(var s=t.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);wt(n,s,i),n[Te]=t,n[He]=i}catch(h){Ke(t,t.return,h)}}var _n=!1,yt=!1,ec=!1,Pu=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function If(t,n){if(t=t.containerInfo,jc=ea,t=ep(t),qa(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var p=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var S=0,F=-1,Y=-1,ie=0,le=0,de=t,se=null;t:for(;;){for(var oe;de!==i||p!==0&&de.nodeType!==3||(F=S+p),de!==h||s!==0&&de.nodeType!==3||(Y=S+s),de.nodeType===3&&(S+=de.nodeValue.length),(oe=de.firstChild)!==null;)se=de,de=oe;for(;;){if(de===t)break t;if(se===i&&++ie===p&&(F=S),se===h&&++le===s&&(Y=S),(oe=de.nextSibling)!==null)break;de=se,se=de.parentNode}de=oe}i=F===-1||Y===-1?null:{start:F,end:Y}}else i=null}i=i||{start:0,end:0}}else i=null;for(Sc={focusedElem:t,selectionRange:i},ea=!1,Dt=n;Dt!==null;)if(n=Dt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Dt=t;else for(;Dt!==null;){switch(n=Dt,h=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)p=t[i],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,i=n,p=h.memoizedProps,h=h.memoizedState,s=i.stateNode;try{var ye=_i(i.type,p);t=s.getSnapshotBeforeUpdate(ye,h),s.__reactInternalSnapshotBeforeUpdate=t}catch(Fe){Ke(i,i.return,Fe)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,i=t.nodeType,i===9)Cc(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=n.sibling,t!==null){t.return=n.return,Dt=t;break}Dt=n.return}}function Uu(t,n,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:$n(t,i),s&4&&yo(5,i);break;case 1:if($n(t,i),s&4)if(t=i.stateNode,n===null)try{t.componentDidMount()}catch(S){Ke(i,i.return,S)}else{var p=_i(i.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(p,n,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Ke(i,i.return,S)}}s&64&&Ou(i),s&512&&vo(i,i.return);break;case 3:if($n(t,i),s&64&&(t=i.updateQueue,t!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{wp(t,n)}catch(S){Ke(i,i.return,S)}}break;case 27:n===null&&s&4&&$u(i);case 26:case 5:$n(t,i),n===null&&s&4&&_u(i),s&512&&vo(i,i.return);break;case 12:$n(t,i);break;case 31:$n(t,i),s&4&&Vu(t,i);break;case 13:$n(t,i),s&4&&qu(t,i),s&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=Hf.bind(null,i),dm(t,i))));break;case 22:if(s=i.memoizedState!==null||_n,!s){n=n!==null&&n.memoizedState!==null||yt,p=_n;var h=yt;_n=s,(yt=n)&&!h?Pn(t,i,(i.subtreeFlags&8772)!==0):$n(t,i),_n=p,yt=h}break;case 30:break;default:$n(t,i)}}function Hu(t){var n=t.alternate;n!==null&&(t.alternate=null,Hu(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Bi(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,Wt=!1;function Ln(t,n,i){for(i=i.child;i!==null;)Gu(t,n,i),i=i.sibling}function Gu(t,n,i){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Si,i)}catch{}switch(i.tag){case 26:yt||Sn(i,n),Ln(t,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:yt||Sn(i,n);var s=at,p=Wt;xi(i.type)&&(at=i.stateNode,Wt=!1),Ln(t,n,i),zo(i.stateNode),at=s,Wt=p;break;case 5:yt||Sn(i,n);case 6:if(s=at,p=Wt,at=null,Ln(t,n,i),at=s,Wt=p,at!==null)if(Wt)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(i.stateNode)}catch(h){Ke(i,n,h)}else try{at.removeChild(i.stateNode)}catch(h){Ke(i,n,h)}break;case 18:at!==null&&(Wt?(t=at,Ox(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Ns(t)):Ox(at,i.stateNode));break;case 4:s=at,p=Wt,at=i.stateNode.containerInfo,Wt=!0,Ln(t,n,i),at=s,Wt=p;break;case 0:case 11:case 14:case 15:li(2,i,n),yt||li(4,i,n),Ln(t,n,i);break;case 1:yt||(Sn(i,n),s=i.stateNode,typeof s.componentWillUnmount=="function"&&Wu(i,n,s)),Ln(t,n,i);break;case 21:Ln(t,n,i);break;case 22:yt=(s=yt)||i.memoizedState!==null,Ln(t,n,i),yt=s;break;default:Ln(t,n,i)}}function Vu(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ns(t)}catch(i){Ke(n,n.return,i)}}}function qu(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ns(t)}catch(i){Ke(n,n.return,i)}}function Nf(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Pu),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Pu),n;default:throw Error(l(435,t.tag))}}function Ml(t,n){var i=Nf(t);n.forEach(function(s){if(!i.has(s)){i.add(s);var p=Gf.bind(null,t,s);s.then(p,p)}})}function _t(t,n){var i=n.deletions;if(i!==null)for(var s=0;s<i.length;s++){var p=i[s],h=t,S=n,F=S;e:for(;F!==null;){switch(F.tag){case 27:if(xi(F.type)){at=F.stateNode,Wt=!1;break e}break;case 5:at=F.stateNode,Wt=!1;break e;case 3:case 4:at=F.stateNode.containerInfo,Wt=!0;break e}F=F.return}if(at===null)throw Error(l(160));Gu(h,S,p),at=null,Wt=!1,h=p.alternate,h!==null&&(h.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Yu(n,t),n=n.sibling}var xn=null;function Yu(t,n){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_t(n,t),Lt(t),s&4&&(li(3,t,t.return),yo(3,t),li(5,t,t.return));break;case 1:_t(n,t),Lt(t),s&512&&(yt||i===null||Sn(i,i.return)),s&64&&_n&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var p=xn;if(_t(n,t),Lt(t),s&512&&(yt||i===null||Sn(i,i.return)),s&4){var h=i!==null?i.memoizedState:null;if(s=t.memoizedState,i===null)if(s===null)if(t.stateNode===null){e:{s=t.type,i=t.memoizedProps,p=p.ownerDocument||p;t:switch(s){case"title":h=p.getElementsByTagName("title")[0],(!h||h[vn]||h[Te]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=p.createElement(s),p.head.insertBefore(h,p.querySelector("head > title"))),wt(h,s,i),h[Te]=t,St(h),s=h;break e;case"link":var S=Yx("link","href",p).get(s+(i.href||""));if(S){for(var F=0;F<S.length;F++)if(h=S[F],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){S.splice(F,1);break t}}h=p.createElement(s),wt(h,s,i),p.head.appendChild(h);break;case"meta":if(S=Yx("meta","content",p).get(s+(i.content||""))){for(F=0;F<S.length;F++)if(h=S[F],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){S.splice(F,1);break t}}h=p.createElement(s),wt(h,s,i),p.head.appendChild(h);break;default:throw Error(l(468,s))}h[Te]=t,St(h),s=h}t.stateNode=s}else Qx(p,t.type,t.stateNode);else t.stateNode=qx(p,s,t.memoizedProps);else h!==s?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,s===null?Qx(p,t.type,t.stateNode):qx(p,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Kr(t,t.memoizedProps,i.memoizedProps)}break;case 27:_t(n,t),Lt(t),s&512&&(yt||i===null||Sn(i,i.return)),i!==null&&s&4&&Kr(t,t.memoizedProps,i.memoizedProps);break;case 5:if(_t(n,t),Lt(t),s&512&&(yt||i===null||Sn(i,i.return)),t.flags&32){p=t.stateNode;try{os(p,"")}catch(ye){Ke(t,t.return,ye)}}s&4&&t.stateNode!=null&&(p=t.memoizedProps,Kr(t,p,i!==null?i.memoizedProps:p)),s&1024&&(ec=!0);break;case 6:if(_t(n,t),Lt(t),s&4){if(t.stateNode===null)throw Error(l(162));s=t.memoizedProps,i=t.stateNode;try{i.nodeValue=s}catch(ye){Ke(t,t.return,ye)}}break;case 3:if(Xl=null,p=xn,xn=Yl(n.containerInfo),_t(n,t),xn=p,Lt(t),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Ns(n.containerInfo)}catch(ye){Ke(t,t.return,ye)}ec&&(ec=!1,Qu(t));break;case 4:s=xn,xn=Yl(t.stateNode.containerInfo),_t(n,t),Lt(t),xn=s;break;case 12:_t(n,t),Lt(t);break;case 31:_t(n,t),Lt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Ml(t,s)));break;case 13:_t(n,t),Lt(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Nl=Ue()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Ml(t,s)));break;case 22:p=t.memoizedState!==null;var Y=i!==null&&i.memoizedState!==null,ie=_n,le=yt;if(_n=ie||p,yt=le||Y,_t(n,t),yt=le,_n=ie,Lt(t),s&8192)e:for(n=t.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(i===null||Y||_n||yt||Li(t)),i=null,n=t;;){if(n.tag===5||n.tag===26){if(i===null){Y=i=n;try{if(h=Y.stateNode,p)S=h.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{F=Y.stateNode;var de=Y.memoizedProps.style,se=de!=null&&de.hasOwnProperty("display")?de.display:null;F.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ye){Ke(Y,Y.return,ye)}}}else if(n.tag===6){if(i===null){Y=n;try{Y.stateNode.nodeValue=p?"":Y.memoizedProps}catch(ye){Ke(Y,Y.return,ye)}}}else if(n.tag===18){if(i===null){Y=n;try{var oe=Y.stateNode;p?Wx(oe,!0):Wx(Y.stateNode,!1)}catch(ye){Ke(Y,Y.return,ye)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}s&4&&(s=t.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,Ml(t,i))));break;case 19:_t(n,t),Lt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Ml(t,s)));break;case 30:break;case 21:break;default:_t(n,t),Lt(t)}}function Lt(t){var n=t.flags;if(n&2){try{for(var i,s=t.return;s!==null;){if(Lu(s)){i=s;break}s=s.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var p=i.stateNode,h=Jr(t);Rl(t,h,p);break;case 5:var S=i.stateNode;i.flags&32&&(os(S,""),i.flags&=-33);var F=Jr(t);Rl(t,F,S);break;case 3:case 4:var Y=i.stateNode.containerInfo,ie=Jr(t);Zr(t,ie,Y);break;default:throw Error(l(161))}}catch(le){Ke(t,t.return,le)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Qu(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Qu(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function $n(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Uu(t,n.alternate,n),n=n.sibling}function Li(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:li(4,n,n.return),Li(n);break;case 1:Sn(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Wu(n,n.return,i),Li(n);break;case 27:zo(n.stateNode);case 26:case 5:Sn(n,n.return),Li(n);break;case 22:n.memoizedState===null&&Li(n);break;case 30:Li(n);break;default:Li(n)}t=t.sibling}}function Pn(t,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var s=n.alternate,p=t,h=n,S=h.flags;switch(h.tag){case 0:case 11:case 15:Pn(p,h,i),yo(4,h);break;case 1:if(Pn(p,h,i),s=h,p=s.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ie){Ke(s,s.return,ie)}if(s=h,p=s.updateQueue,p!==null){var F=s.stateNode;try{var Y=p.shared.hiddenCallbacks;if(Y!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Y.length;p++)Ep(Y[p],F)}catch(ie){Ke(s,s.return,ie)}}i&&S&64&&Ou(h),vo(h,h.return);break;case 27:$u(h);case 26:case 5:Pn(p,h,i),i&&s===null&&S&4&&_u(h),vo(h,h.return);break;case 12:Pn(p,h,i);break;case 31:Pn(p,h,i),i&&S&4&&Vu(p,h);break;case 13:Pn(p,h,i),i&&S&4&&qu(p,h);break;case 22:h.memoizedState===null&&Pn(p,h,i),vo(h,h.return);break;case 30:break;default:Pn(p,h,i)}n=n.sibling}}function tc(t,n){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&so(i))}function nc(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&so(t))}function hn(t,n,i,s){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xu(t,n,i,s),n=n.sibling}function Xu(t,n,i,s){var p=n.flags;switch(n.tag){case 0:case 11:case 15:hn(t,n,i,s),p&2048&&yo(9,n);break;case 1:hn(t,n,i,s);break;case 3:hn(t,n,i,s),p&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&so(t)));break;case 12:if(p&2048){hn(t,n,i,s),t=n.stateNode;try{var h=n.memoizedProps,S=h.id,F=h.onPostCommit;typeof F=="function"&&F(S,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Y){Ke(n,n.return,Y)}}else hn(t,n,i,s);break;case 31:hn(t,n,i,s);break;case 13:hn(t,n,i,s);break;case 23:break;case 22:h=n.stateNode,S=n.alternate,n.memoizedState!==null?h._visibility&2?hn(t,n,i,s):bo(t,n):h._visibility&2?hn(t,n,i,s):(h._visibility|=2,Cs(t,n,i,s,(n.subtreeFlags&10256)!==0||!1)),p&2048&&tc(S,n);break;case 24:hn(t,n,i,s),p&2048&&nc(n.alternate,n);break;default:hn(t,n,i,s)}}function Cs(t,n,i,s,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=t,S=n,F=i,Y=s,ie=S.flags;switch(S.tag){case 0:case 11:case 15:Cs(h,S,F,Y,p),yo(8,S);break;case 23:break;case 22:var le=S.stateNode;S.memoizedState!==null?le._visibility&2?Cs(h,S,F,Y,p):bo(h,S):(le._visibility|=2,Cs(h,S,F,Y,p)),p&&ie&2048&&tc(S.alternate,S);break;case 24:Cs(h,S,F,Y,p),p&&ie&2048&&nc(S.alternate,S);break;default:Cs(h,S,F,Y,p)}n=n.sibling}}function bo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=t,s=n,p=s.flags;switch(s.tag){case 22:bo(i,s),p&2048&&tc(s.alternate,s);break;case 24:bo(i,s),p&2048&&nc(s.alternate,s);break;default:bo(i,s)}n=n.sibling}}var jo=8192;function Es(t,n,i){if(t.subtreeFlags&jo)for(t=t.child;t!==null;)Ku(t,n,i),t=t.sibling}function Ku(t,n,i){switch(t.tag){case 26:Es(t,n,i),t.flags&jo&&t.memoizedState!==null&&Sm(i,xn,t.memoizedState,t.memoizedProps);break;case 5:Es(t,n,i);break;case 3:case 4:var s=xn;xn=Yl(t.stateNode.containerInfo),Es(t,n,i),xn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=jo,jo=16777216,Es(t,n,i),jo=s):Es(t,n,i));break;default:Es(t,n,i)}}function Ju(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function So(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Dt=s,ex(s,t)}Ju(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zu(t),t=t.sibling}function Zu(t){switch(t.tag){case 0:case 11:case 15:So(t),t.flags&2048&&li(9,t,t.return);break;case 3:So(t);break;case 12:So(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Il(t)):So(t);break;default:So(t)}}function Il(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Dt=s,ex(s,t)}Ju(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:li(8,n,n.return),Il(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Il(n));break;default:Il(n)}t=t.sibling}}function ex(t,n){for(;Dt!==null;){var i=Dt;switch(i.tag){case 0:case 11:case 15:li(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:so(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Dt=s;else e:for(i=t;Dt!==null;){s=Dt;var p=s.sibling,h=s.return;if(Hu(s),s===i){Dt=null;break e}if(p!==null){p.return=h,Dt=p;break e}Dt=h}}}var Of={getCacheForType:function(t){var n=Ct(gt),i=n.data.get(t);return i===void 0&&(i=t(),n.data.set(t,i)),i},cacheSignal:function(){return Ct(gt).controller.signal}},Wf=typeof WeakMap=="function"?WeakMap:Map,qe=0,it=null,We=null,Le=0,Xe=0,Yt=null,ai=!1,ws=!1,ic=!1,Un=0,pt=0,ri=0,$i=0,sc=0,Qt=0,zs=0,Do=null,$t=null,oc=!1,Nl=0,tx=0,Ol=1/0,Wl=null,ci=null,vt=0,di=null,ks=null,Hn=0,lc=0,ac=null,nx=null,Bo=0,rc=null;function Xt(){return(qe&2)!==0&&Le!==0?Le&-Le:T.T!==null?hc():Mt()}function ix(){if(Qt===0)if((Le&536870912)===0||Pe){var t=Ji;Ji<<=1,(Ji&3932160)===0&&(Ji=262144),Qt=t}else Qt=536870912;return t=Vt.current,t!==null&&(t.flags|=32),Qt}function Pt(t,n,i){(t===it&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(As(t,0),pi(t,Le,Qt,!1)),Ce(t,i),((qe&2)===0||t!==it)&&(t===it&&((qe&2)===0&&($i|=i),pt===4&&pi(t,Le,Qt,!1)),Dn(t))}function sx(t,n,i){if((qe&6)!==0)throw Error(l(327));var s=!i&&(n&127)===0&&(n&t.expiredLanes)===0||Di(t,n),p=s?$f(t,n):dc(t,n,!0),h=s;do{if(p===0){ws&&!s&&pi(t,n,0,!1);break}else{if(i=t.current.alternate,h&&!_f(i)){p=dc(t,n,!1),h=!1;continue}if(p===2){if(h=n,t.errorRecoveryDisabledLanes&h)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;e:{var F=t;p=Do;var Y=F.current.memoizedState.isDehydrated;if(Y&&(As(F,S).flags|=256),S=dc(F,S,!1),S!==2){if(ic&&!Y){F.errorRecoveryDisabledLanes|=h,$i|=h,p=4;break e}h=$t,$t=p,h!==null&&($t===null?$t=h:$t.push.apply($t,h))}p=S}if(h=!1,p!==2)continue}}if(p===1){As(t,0),pi(t,n,0,!0);break}e:{switch(s=t,h=p,h){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:pi(s,n,Qt,!ai);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(p=Nl+300-Ue(),10<p)){if(pi(s,n,Qt,!ai),es(s,0,!0)!==0)break e;Hn=n,s.timeoutHandle=Ix(ox.bind(null,s,i,$t,Wl,oc,n,Qt,$i,zs,ai,h,"Throttled",-0,0),p);break e}ox(s,i,$t,Wl,oc,n,Qt,$i,zs,ai,h,null,-0,0)}}break}while(!0);Dn(t)}function ox(t,n,i,s,p,h,S,F,Y,ie,le,de,se,oe){if(t.timeoutHandle=-1,de=n.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},Ku(n,h,de);var ye=(h&62914560)===h?Nl-Ue():(h&4194048)===h?tx-Ue():0;if(ye=Dm(de,ye),ye!==null){Hn=h,t.cancelPendingCommit=ye(xx.bind(null,t,n,h,i,s,p,S,F,Y,le,de,null,se,oe)),pi(t,h,S,!ie);return}}xx(t,n,h,i,s,p,S,F,Y)}function _f(t){for(var n=t;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var p=i[s],h=p.getSnapshot;p=p.value;try{if(!Ht(h(),p))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function pi(t,n,i,s){n&=~sc,n&=~$i,t.suspendedLanes|=n,t.pingedLanes&=~n,s&&(t.warmLanes|=n),s=t.expirationTimes;for(var p=n;0<p;){var h=31-Ft(p),S=1<<h;s[h]=-1,p&=~S}i!==0&&je(t,i,n)}function _l(){return(qe&6)===0?(Co(0),!1):!0}function cc(){if(We!==null){if(Xe===0)var t=We.return;else t=We,Rn=Fi=null,Cr(t),bs=null,lo=0,t=We;for(;t!==null;)Nu(t.alternate,t),t=t.return;We=null}}function As(t,n){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,om(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Hn=0,cc(),it=t,We=i=Tn(t.current,null),Le=n,Xe=0,Yt=null,ai=!1,ws=Di(t,n),ic=!1,zs=Qt=sc=$i=ri=pt=0,$t=Do=null,oc=!1,(n&8)!==0&&(n|=n&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=n;0<s;){var p=31-Ft(s),h=1<<p;n|=t[p],s&=~h}return Un=n,ll(),i}function lx(t,n){Ne=null,T.H=go,n===vs||n===hl?(n=Sp(),Xe=3):n===xr?(n=Sp(),Xe=4):Xe=n===$r?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Yt=n,We===null&&(pt=1,zl(t,sn(n,t.current)))}function ax(){var t=Vt.current;return t===null?!0:(Le&4194048)===Le?rn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===rn:!1}function rx(){var t=T.H;return T.H=go,t===null?go:t}function cx(){var t=T.A;return T.A=Of,t}function Ll(){pt=4,ai||(Le&4194048)!==Le&&Vt.current!==null||(ws=!0),(ri&134217727)===0&&($i&134217727)===0||it===null||pi(it,Le,Qt,!1)}function dc(t,n,i){var s=qe;qe|=2;var p=rx(),h=cx();(it!==t||Le!==n)&&(Wl=null,As(t,n)),n=!1;var S=pt;e:do try{if(Xe!==0&&We!==null){var F=We,Y=Yt;switch(Xe){case 8:cc(),S=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(n=!0);var ie=Xe;if(Xe=0,Yt=null,Ts(t,F,Y,ie),i&&ws){S=0;break e}break;default:ie=Xe,Xe=0,Yt=null,Ts(t,F,Y,ie)}}Lf(),S=pt;break}catch(le){lx(t,le)}while(!0);return n&&t.shellSuspendCounter++,Rn=Fi=null,qe=s,T.H=p,T.A=h,We===null&&(it=null,Le=0,ll()),S}function Lf(){for(;We!==null;)dx(We)}function $f(t,n){var i=qe;qe|=2;var s=rx(),p=cx();it!==t||Le!==n?(Wl=null,Ol=Ue()+500,As(t,n)):ws=Di(t,n);e:do try{if(Xe!==0&&We!==null){n=We;var h=Yt;t:switch(Xe){case 1:Xe=0,Yt=null,Ts(t,n,h,1);break;case 2:case 9:if(bp(h)){Xe=0,Yt=null,px(n);break}n=function(){Xe!==2&&Xe!==9||it!==t||(Xe=7),Dn(t)},h.then(n,n);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:bp(h)?(Xe=0,Yt=null,px(n)):(Xe=0,Yt=null,Ts(t,n,h,7));break;case 5:var S=null;switch(We.tag){case 26:S=We.memoizedState;case 5:case 27:var F=We;if(S?Xx(S):F.stateNode.complete){Xe=0,Yt=null;var Y=F.sibling;if(Y!==null)We=Y;else{var ie=F.return;ie!==null?(We=ie,$l(ie)):We=null}break t}}Xe=0,Yt=null,Ts(t,n,h,5);break;case 6:Xe=0,Yt=null,Ts(t,n,h,6);break;case 8:cc(),pt=6;break e;default:throw Error(l(462))}}Pf();break}catch(le){lx(t,le)}while(!0);return Rn=Fi=null,T.H=s,T.A=p,qe=i,We!==null?0:(it=null,Le=0,ll(),pt)}function Pf(){for(;We!==null&&!At();)dx(We)}function dx(t){var n=Mu(t.alternate,t,Un);t.memoizedProps=t.pendingProps,n===null?$l(t):We=n}function px(t){var n=t,i=n.alternate;switch(n.tag){case 15:case 0:n=zu(i,n,n.pendingProps,n.type,void 0,Le);break;case 11:n=zu(i,n,n.pendingProps,n.type.render,n.ref,Le);break;case 5:Cr(n);default:Nu(i,n),n=We=cp(n,Un),n=Mu(i,n,Un)}t.memoizedProps=t.pendingProps,n===null?$l(t):We=n}function Ts(t,n,i,s){Rn=Fi=null,Cr(n),bs=null,lo=0;var p=n.return;try{if(Af(t,p,n,i,Le)){pt=1,zl(t,sn(i,t.current)),We=null;return}}catch(h){if(p!==null)throw We=p,h;pt=1,zl(t,sn(i,t.current)),We=null;return}n.flags&32768?(Pe||s===1?t=!0:ws||(Le&536870912)!==0?t=!1:(ai=t=!0,(s===2||s===9||s===3||s===6)&&(s=Vt.current,s!==null&&s.tag===13&&(s.flags|=16384))),ux(n,t)):$l(n)}function $l(t){var n=t;do{if((n.flags&32768)!==0){ux(n,ai);return}t=n.return;var i=Rf(n.alternate,n,Un);if(i!==null){We=i;return}if(n=n.sibling,n!==null){We=n;return}We=n=t}while(n!==null);pt===0&&(pt=5)}function ux(t,n){do{var i=Mf(t.alternate,t);if(i!==null){i.flags&=32767,We=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(t=t.sibling,t!==null)){We=t;return}We=t=i}while(t!==null);pt=6,We=null}function xx(t,n,i,s,p,h,S,F,Y){t.cancelPendingCommit=null;do Pl();while(vt!==0);if((qe&6)!==0)throw Error(l(327));if(n!==null){if(n===t.current)throw Error(l(177));if(h=n.lanes|n.childLanes,h|=Ja,he(t,i,h,S,F,Y),t===it&&(We=it=null,Le=0),ks=n,di=t,Hn=i,lc=h,ac=p,nx=s,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Vf(Xi,function(){return yx(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||s){s=T.T,T.T=null,p=N.p,N.p=2,S=qe,qe|=4;try{If(t,n,i)}finally{qe=S,N.p=p,T.T=s}}vt=1,hx(),gx(),fx()}}function hx(){if(vt===1){vt=0;var t=di,n=ks,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=T.T,T.T=null;var s=N.p;N.p=2;var p=qe;qe|=4;try{Yu(n,t);var h=Sc,S=ep(t.containerInfo),F=h.focusedElem,Y=h.selectionRange;if(S!==F&&F&&F.ownerDocument&&Zd(F.ownerDocument.documentElement,F)){if(Y!==null&&qa(F)){var ie=Y.start,le=Y.end;if(le===void 0&&(le=ie),"selectionStart"in F)F.selectionStart=ie,F.selectionEnd=Math.min(le,F.value.length);else{var de=F.ownerDocument||document,se=de&&de.defaultView||window;if(se.getSelection){var oe=se.getSelection(),ye=F.textContent.length,Fe=Math.min(Y.start,ye),tt=Y.end===void 0?Fe:Math.min(Y.end,ye);!oe.extend&&Fe>tt&&(S=tt,tt=Fe,Fe=S);var ee=Jd(F,Fe),J=Jd(F,tt);if(ee&&J&&(oe.rangeCount!==1||oe.anchorNode!==ee.node||oe.anchorOffset!==ee.offset||oe.focusNode!==J.node||oe.focusOffset!==J.offset)){var ne=de.createRange();ne.setStart(ee.node,ee.offset),oe.removeAllRanges(),Fe>tt?(oe.addRange(ne),oe.extend(J.node,J.offset)):(ne.setEnd(J.node,J.offset),oe.addRange(ne))}}}}for(de=[],oe=F;oe=oe.parentNode;)oe.nodeType===1&&de.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<de.length;F++){var ce=de[F];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}ea=!!jc,Sc=jc=null}finally{qe=p,N.p=s,T.T=i}}t.current=n,vt=2}}function gx(){if(vt===2){vt=0;var t=di,n=ks,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=T.T,T.T=null;var s=N.p;N.p=2;var p=qe;qe|=4;try{Uu(t,n.alternate,n)}finally{qe=p,N.p=s,T.T=i}}vt=3}}function fx(){if(vt===4||vt===3){vt=0,pn();var t=di,n=ks,i=Hn,s=nx;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?vt=5:(vt=0,ks=di=null,mx(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(ci=null),st(i),n=n.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Si,n,void 0,(n.current.flags&128)===128)}catch{}if(s!==null){n=T.T,p=N.p,N.p=2,T.T=null;try{for(var h=t.onRecoverableError,S=0;S<s.length;S++){var F=s[S];h(F.value,{componentStack:F.stack})}}finally{T.T=n,N.p=p}}(Hn&3)!==0&&Pl(),Dn(t),p=t.pendingLanes,(i&261930)!==0&&(p&42)!==0?t===rc?Bo++:(Bo=0,rc=t):Bo=0,Co(0)}}function mx(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,so(n)))}function Pl(){return hx(),gx(),fx(),yx()}function yx(){if(vt!==5)return!1;var t=di,n=lc;lc=0;var i=st(Hn),s=T.T,p=N.p;try{N.p=32>i?32:i,T.T=null,i=ac,ac=null;var h=di,S=Hn;if(vt=0,ks=di=null,Hn=0,(qe&6)!==0)throw Error(l(331));var F=qe;if(qe|=4,Zu(h.current),Xu(h,h.current,S,i),qe=F,Co(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Si,h)}catch{}return!0}finally{N.p=p,T.T=s,mx(t,n)}}function vx(t,n,i){n=sn(i,n),n=Lr(t.stateNode,n,2),t=ii(t,n,2),t!==null&&(Ce(t,2),Dn(t))}function Ke(t,n,i){if(t.tag===3)vx(t,t,i);else for(;n!==null;){if(n.tag===3){vx(n,t,i);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ci===null||!ci.has(s))){t=sn(i,t),i=bu(2),s=ii(n,i,2),s!==null&&(ju(i,s,n,t),Ce(s,2),Dn(s));break}}n=n.return}}function pc(t,n,i){var s=t.pingCache;if(s===null){s=t.pingCache=new Wf;var p=new Set;s.set(n,p)}else p=s.get(n),p===void 0&&(p=new Set,s.set(n,p));p.has(i)||(ic=!0,p.add(i),t=Uf.bind(null,t,n,i),n.then(t,t))}function Uf(t,n,i){var s=t.pingCache;s!==null&&s.delete(n),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,it===t&&(Le&i)===i&&(pt===4||pt===3&&(Le&62914560)===Le&&300>Ue()-Nl?(qe&2)===0&&As(t,0):sc|=i,zs===Le&&(zs=0)),Dn(t)}function bx(t,n){n===0&&(n=E()),t=ki(t,n),t!==null&&(Ce(t,n),Dn(t))}function Hf(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),bx(t,i)}function Gf(t,n){var i=0;switch(t.tag){case 31:case 13:var s=t.stateNode,p=t.memoizedState;p!==null&&(i=p.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(n),bx(t,i)}function Vf(t,n){return Z(t,n)}var Ul=null,Fs=null,uc=!1,Hl=!1,xc=!1,ui=0;function Dn(t){t!==Fs&&t.next===null&&(Fs===null?Ul=Fs=t:Fs=Fs.next=t),Hl=!0,uc||(uc=!0,Yf())}function Co(t,n){if(!xc&&Hl){xc=!0;do for(var i=!1,s=Ul;s!==null;){if(t!==0){var p=s.pendingLanes;if(p===0)var h=0;else{var S=s.suspendedLanes,F=s.pingedLanes;h=(1<<31-Ft(42|t)+1)-1,h&=p&~(S&~F),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,Bx(s,h))}else h=Le,h=es(s,s===it?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(h&3)===0||Di(s,h)||(i=!0,Bx(s,h));s=s.next}while(i);xc=!1}}function qf(){jx()}function jx(){Hl=uc=!1;var t=0;ui!==0&&sm()&&(t=ui);for(var n=Ue(),i=null,s=Ul;s!==null;){var p=s.next,h=Sx(s,n);h===0?(s.next=null,i===null?Ul=p:i.next=p,p===null&&(Fs=i)):(i=s,(t!==0||(h&3)!==0)&&(Hl=!0)),s=p}vt!==0&&vt!==5||Co(t),ui!==0&&(ui=0)}function Sx(t,n){for(var i=t.suspendedLanes,s=t.pingedLanes,p=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var S=31-Ft(h),F=1<<S,Y=p[S];Y===-1?((F&i)===0||(F&s)!==0)&&(p[S]=Vs(F,n)):Y<=n&&(t.expiredLanes|=F),h&=~F}if(n=it,i=Le,i=es(t,t===n?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,i===0||t===n&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&we(s),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Di(t,i)){if(n=i&-i,n===t.callbackPriority)return n;switch(s!==null&&we(s),st(i)){case 2:case 8:i=qo;break;case 32:i=Xi;break;case 268435456:i=Yo;break;default:i=Xi}return s=Dx.bind(null,t),i=Z(i,s),t.callbackPriority=n,t.callbackNode=i,n}return s!==null&&s!==null&&we(s),t.callbackPriority=2,t.callbackNode=null,2}function Dx(t,n){if(vt!==0&&vt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Pl()&&t.callbackNode!==i)return null;var s=Le;return s=es(t,t===it?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(sx(t,s,n),Sx(t,Ue()),t.callbackNode!=null&&t.callbackNode===i?Dx.bind(null,t):null)}function Bx(t,n){if(Pl())return null;sx(t,n,!0)}function Yf(){lm(function(){(qe&6)!==0?Z(Vo,qf):jx()})}function hc(){if(ui===0){var t=ms;t===0&&(t=Ki,Ki<<=1,(Ki&261888)===0&&(Ki=256)),ui=t}return ui}function Cx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Jo(""+t)}function Ex(t,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,t.id&&i.setAttribute("form",t.id),n.parentNode.insertBefore(i,n),t=new FormData(t),i.parentNode.removeChild(i),t}function Qf(t,n,i,s,p){if(n==="submit"&&i&&i.stateNode===p){var h=Cx((p[He]||null).action),S=s.submitter;S&&(n=(n=S[He]||null)?Cx(n.formAction):S.getAttribute("formAction"),n!==null&&(h=n,S=null));var F=new nl("action","action",null,s,p);t.push({event:F,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ui!==0){var Y=S?Ex(p,S):new FormData(p);Mr(i,{pending:!0,data:Y,method:p.method,action:h},null,Y)}}else typeof h=="function"&&(F.preventDefault(),Y=S?Ex(p,S):new FormData(p),Mr(i,{pending:!0,data:Y,method:p.method,action:h},h,Y))},currentTarget:p}]})}}for(var gc=0;gc<Ka.length;gc++){var fc=Ka[gc],Xf=fc.toLowerCase(),Kf=fc[0].toUpperCase()+fc.slice(1);un(Xf,"on"+Kf)}un(ip,"onAnimationEnd"),un(sp,"onAnimationIteration"),un(op,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(xf,"onTransitionRun"),un(hf,"onTransitionStart"),un(gf,"onTransitionCancel"),un(lp,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eo));function wx(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var s=t[i],p=s.event;s=s.listeners;e:{var h=void 0;if(n)for(var S=s.length-1;0<=S;S--){var F=s[S],Y=F.instance,ie=F.currentTarget;if(F=F.listener,Y!==h&&p.isPropagationStopped())break e;h=F,p.currentTarget=ie;try{h(p)}catch(le){ol(le)}p.currentTarget=null,h=Y}else for(S=0;S<s.length;S++){if(F=s[S],Y=F.instance,ie=F.currentTarget,F=F.listener,Y!==h&&p.isPropagationStopped())break e;h=F,p.currentTarget=ie;try{h(p)}catch(le){ol(le)}p.currentTarget=null,h=Y}}}}function _e(t,n){var i=n[nt];i===void 0&&(i=n[nt]=new Set);var s=t+"__bubble";i.has(s)||(zx(n,t,2,!1),i.add(s))}function mc(t,n,i){var s=0;n&&(s|=4),zx(i,t,s,n)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[Gl]){t[Gl]=!0,jd.forEach(function(i){i!=="selectionchange"&&(Jf.has(i)||mc(i,!1,t),mc(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Gl]||(n[Gl]=!0,mc("selectionchange",!1,n))}}function zx(t,n,i,s){switch(ih(n)){case 2:var p=Em;break;case 8:p=wm;break;default:p=Rc}i=p.bind(null,n,i,t),p=void 0,!Wa||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),s?p!==void 0?t.addEventListener(n,i,{capture:!0,passive:p}):t.addEventListener(n,i,!0):p!==void 0?t.addEventListener(n,i,{passive:p}):t.addEventListener(n,i,!1)}function vc(t,n,i,s,p){var h=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var F=s.stateNode.containerInfo;if(F===p)break;if(S===4)for(S=s.return;S!==null;){var Y=S.tag;if((Y===3||Y===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;F!==null;){if(S=Nt(F),S===null)return;if(Y=S.tag,Y===5||Y===6||Y===26||Y===27){s=h=S;continue e}F=F.parentNode}}s=s.return}Rd(function(){var ie=h,le=Na(i),de=[];e:{var se=ap.get(t);if(se!==void 0){var oe=nl,ye=t;switch(t){case"keypress":if(el(i)===0)break e;case"keydown":case"keyup":oe=Hg;break;case"focusin":ye="focus",oe=Pa;break;case"focusout":ye="blur",oe=Pa;break;case"beforeblur":case"afterblur":oe=Pa;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=qg;break;case ip:case sp:case op:oe=Ig;break;case lp:oe=Qg;break;case"scroll":case"scrollend":oe=Ag;break;case"wheel":oe=Kg;break;case"copy":case"cut":case"paste":oe=Og;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Wd;break;case"toggle":case"beforetoggle":oe=Zg}var Fe=(n&4)!==0,tt=!Fe&&(t==="scroll"||t==="scrollend"),ee=Fe?se!==null?se+"Capture":null:se;Fe=[];for(var J=ie,ne;J!==null;){var ce=J;if(ne=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||ne===null||ee===null||(ce=qs(J,ee),ce!=null&&Fe.push(wo(J,ce,ne))),tt)break;J=J.return}0<Fe.length&&(se=new oe(se,ye,null,i,le),de.push({event:se,listeners:Fe}))}}if((n&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",se&&i!==Ia&&(ye=i.relatedTarget||i.fromElement)&&(Nt(ye)||ye[ct]))break e;if((oe||se)&&(se=le.window===le?le:(se=le.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(ye=i.relatedTarget||i.toElement,oe=ie,ye=ye?Nt(ye):null,ye!==null&&(tt=d(ye),Fe=ye.tag,ye!==tt||Fe!==5&&Fe!==27&&Fe!==6)&&(ye=null)):(oe=null,ye=ie),oe!==ye)){if(Fe=Nd,ce="onMouseLeave",ee="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=Wd,ce="onPointerLeave",ee="onPointerEnter",J="pointer"),tt=oe==null?se:wn(oe),ne=ye==null?se:wn(ye),se=new Fe(ce,J+"leave",oe,i,le),se.target=tt,se.relatedTarget=ne,ce=null,Nt(le)===ie&&(Fe=new Fe(ee,J+"enter",ye,i,le),Fe.target=ne,Fe.relatedTarget=tt,ce=Fe),tt=ce,oe&&ye)t:{for(Fe=Zf,ee=oe,J=ye,ne=0,ce=ee;ce;ce=Fe(ce))ne++;ce=0;for(var Ee=J;Ee;Ee=Fe(Ee))ce++;for(;0<ne-ce;)ee=Fe(ee),ne--;for(;0<ce-ne;)J=Fe(J),ce--;for(;ne--;){if(ee===J||J!==null&&ee===J.alternate){Fe=ee;break t}ee=Fe(ee),J=Fe(J)}Fe=null}else Fe=null;oe!==null&&kx(de,se,oe,Fe,!1),ye!==null&&tt!==null&&kx(de,tt,ye,Fe,!0)}}e:{if(se=ie?wn(ie):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var Ge=Vd;else if(Hd(se))if(qd)Ge=df;else{Ge=rf;var Se=af}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ie&&Ma(ie.elementType)&&(Ge=Vd):Ge=cf;if(Ge&&(Ge=Ge(t,ie))){Gd(de,Ge,i,le);break e}Se&&Se(t,se,ie),t==="focusout"&&ie&&se.type==="number"&&ie.memoizedProps.value!=null&&Ra(se,"number",se.value)}switch(Se=ie?wn(ie):window,t){case"focusin":(Hd(Se)||Se.contentEditable==="true")&&(cs=Se,Ya=ie,to=null);break;case"focusout":to=Ya=cs=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,tp(de,i,le);break;case"selectionchange":if(uf)break;case"keydown":case"keyup":tp(de,i,le)}var Oe;if(Ha)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else rs?Pd(t,i)&&($e="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&($e="onCompositionStart");$e&&(_d&&i.locale!=="ko"&&(rs||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&rs&&(Oe=Md()):(Xn=le,_a="value"in Xn?Xn.value:Xn.textContent,rs=!0)),Se=Vl(ie,$e),0<Se.length&&($e=new Od($e,t,null,i,le),de.push({event:$e,listeners:Se}),Oe?$e.data=Oe:(Oe=Ud(i),Oe!==null&&($e.data=Oe)))),(Oe=tf?nf(t,i):sf(t,i))&&($e=Vl(ie,"onBeforeInput"),0<$e.length&&(Se=new Od("onBeforeInput","beforeinput",null,i,le),de.push({event:Se,listeners:$e}),Se.data=Oe)),Qf(de,t,ie,i,le)}wx(de,n)})}function wo(t,n,i){return{instance:t,listener:n,currentTarget:i}}function Vl(t,n){for(var i=n+"Capture",s=[];t!==null;){var p=t,h=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||h===null||(p=qs(t,i),p!=null&&s.unshift(wo(t,p,h)),p=qs(t,n),p!=null&&s.push(wo(t,p,h))),t.tag===3)return s;t=t.return}return[]}function Zf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kx(t,n,i,s,p){for(var h=n._reactName,S=[];i!==null&&i!==s;){var F=i,Y=F.alternate,ie=F.stateNode;if(F=F.tag,Y!==null&&Y===s)break;F!==5&&F!==26&&F!==27||ie===null||(Y=ie,p?(ie=qs(i,h),ie!=null&&S.unshift(wo(i,ie,Y))):p||(ie=qs(i,h),ie!=null&&S.push(wo(i,ie,Y)))),i=i.return}S.length!==0&&t.push({event:n,listeners:S})}var em=/\r\n?/g,tm=/\u0000|\uFFFD/g;function Ax(t){return(typeof t=="string"?t:""+t).replace(em,`
`).replace(tm,"")}function Tx(t,n){return n=Ax(n),Ax(t)===n}function et(t,n,i,s,p,h){switch(i){case"children":typeof s=="string"?n==="body"||n==="textarea"&&s===""||os(t,s):(typeof s=="number"||typeof s=="bigint")&&n!=="body"&&os(t,""+s);break;case"className":Xo(t,"class",s);break;case"tabIndex":Xo(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Xo(t,i,s);break;case"style":Td(t,s,h);break;case"data":if(n!=="object"){Xo(t,"data",s);break}case"src":case"href":if(s===""&&(n!=="a"||i!=="href")){t.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(i);break}s=Jo(""+s),t.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(n!=="input"&&et(t,n,"name",p.name,p,null),et(t,n,"formEncType",p.formEncType,p,null),et(t,n,"formMethod",p.formMethod,p,null),et(t,n,"formTarget",p.formTarget,p,null)):(et(t,n,"encType",p.encType,p,null),et(t,n,"method",p.method,p,null),et(t,n,"target",p.target,p,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(i);break}s=Jo(""+s),t.setAttribute(i,s);break;case"onClick":s!=null&&(t.onclick=kn);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(p.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}i=Jo(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(i,""+s):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":s===!0?t.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(i,s):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(i,s):t.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(i):t.setAttribute(i,s);break;case"popover":_e("beforetoggle",t),_e("toggle",t),Qo(t,"popover",s);break;case"xlinkActuate":zn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":zn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":zn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":zn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":zn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":zn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":zn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":zn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":zn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Qo(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=zg.get(i)||i,Qo(t,i,s))}}function bc(t,n,i,s,p,h){switch(i){case"style":Td(t,s,h);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(p.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"children":typeof s=="string"?os(t,s):(typeof s=="number"||typeof s=="bigint")&&os(t,""+s);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"onClick":s!=null&&(t.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(p=i.endsWith("Capture"),n=i.slice(2,p?i.length-7:void 0),h=t[He]||null,h=h!=null?h[i]:null,typeof h=="function"&&t.removeEventListener(n,h,p),typeof s=="function")){typeof h!="function"&&h!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(n,s,p);break e}i in t?t[i]=s:s===!0?t.setAttribute(i,""):Qo(t,i,s)}}}function wt(t,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var s=!1,p=!1,h;for(h in i)if(i.hasOwnProperty(h)){var S=i[h];if(S!=null)switch(h){case"src":s=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:et(t,n,h,S,i,null)}}p&&et(t,n,"srcSet",i.srcSet,i,null),s&&et(t,n,"src",i.src,i,null);return;case"input":_e("invalid",t);var F=h=S=p=null,Y=null,ie=null;for(s in i)if(i.hasOwnProperty(s)){var le=i[s];if(le!=null)switch(s){case"name":p=le;break;case"type":S=le;break;case"checked":Y=le;break;case"defaultChecked":ie=le;break;case"value":h=le;break;case"defaultValue":F=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(l(137,n));break;default:et(t,n,s,le,i,null)}}wd(t,h,F,Y,ie,S,p,!1);return;case"select":_e("invalid",t),s=S=h=null;for(p in i)if(i.hasOwnProperty(p)&&(F=i[p],F!=null))switch(p){case"value":h=F;break;case"defaultValue":S=F;break;case"multiple":s=F;default:et(t,n,p,F,i,null)}n=h,i=S,t.multiple=!!s,n!=null?ss(t,!!s,n,!1):i!=null&&ss(t,!!s,i,!0);return;case"textarea":_e("invalid",t),h=p=s=null;for(S in i)if(i.hasOwnProperty(S)&&(F=i[S],F!=null))switch(S){case"value":s=F;break;case"defaultValue":p=F;break;case"children":h=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(91));break;default:et(t,n,S,F,i,null)}kd(t,s,p,h);return;case"option":for(Y in i)if(i.hasOwnProperty(Y)&&(s=i[Y],s!=null))switch(Y){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:et(t,n,Y,s,i,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(s=0;s<Eo.length;s++)_e(Eo[s],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in i)if(i.hasOwnProperty(ie)&&(s=i[ie],s!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:et(t,n,ie,s,i,null)}return;default:if(Ma(n)){for(le in i)i.hasOwnProperty(le)&&(s=i[le],s!==void 0&&bc(t,n,le,s,i,void 0));return}}for(F in i)i.hasOwnProperty(F)&&(s=i[F],s!=null&&et(t,n,F,s,i,null))}function nm(t,n,i,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,h=null,S=null,F=null,Y=null,ie=null,le=null;for(oe in i){var de=i[oe];if(i.hasOwnProperty(oe)&&de!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":Y=de;default:s.hasOwnProperty(oe)||et(t,n,oe,null,s,de)}}for(var se in s){var oe=s[se];if(de=i[se],s.hasOwnProperty(se)&&(oe!=null||de!=null))switch(se){case"type":h=oe;break;case"name":p=oe;break;case"checked":ie=oe;break;case"defaultChecked":le=oe;break;case"value":S=oe;break;case"defaultValue":F=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(l(137,n));break;default:oe!==de&&et(t,n,se,oe,s,de)}}Fa(t,S,F,Y,ie,le,h,p);return;case"select":oe=S=F=se=null;for(h in i)if(Y=i[h],i.hasOwnProperty(h)&&Y!=null)switch(h){case"value":break;case"multiple":oe=Y;default:s.hasOwnProperty(h)||et(t,n,h,null,s,Y)}for(p in s)if(h=s[p],Y=i[p],s.hasOwnProperty(p)&&(h!=null||Y!=null))switch(p){case"value":se=h;break;case"defaultValue":F=h;break;case"multiple":S=h;default:h!==Y&&et(t,n,p,h,s,Y)}n=F,i=S,s=oe,se!=null?ss(t,!!i,se,!1):!!s!=!!i&&(n!=null?ss(t,!!i,n,!0):ss(t,!!i,i?[]:"",!1));return;case"textarea":oe=se=null;for(F in i)if(p=i[F],i.hasOwnProperty(F)&&p!=null&&!s.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:et(t,n,F,null,s,p)}for(S in s)if(p=s[S],h=i[S],s.hasOwnProperty(S)&&(p!=null||h!=null))switch(S){case"value":se=p;break;case"defaultValue":oe=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(l(91));break;default:p!==h&&et(t,n,S,p,s,h)}zd(t,se,oe);return;case"option":for(var ye in i)if(se=i[ye],i.hasOwnProperty(ye)&&se!=null&&!s.hasOwnProperty(ye))switch(ye){case"selected":t.selected=!1;break;default:et(t,n,ye,null,s,se)}for(Y in s)if(se=s[Y],oe=i[Y],s.hasOwnProperty(Y)&&se!==oe&&(se!=null||oe!=null))switch(Y){case"selected":t.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:et(t,n,Y,se,s,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in i)se=i[Fe],i.hasOwnProperty(Fe)&&se!=null&&!s.hasOwnProperty(Fe)&&et(t,n,Fe,null,s,se);for(ie in s)if(se=s[ie],oe=i[ie],s.hasOwnProperty(ie)&&se!==oe&&(se!=null||oe!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(l(137,n));break;default:et(t,n,ie,se,s,oe)}return;default:if(Ma(n)){for(var tt in i)se=i[tt],i.hasOwnProperty(tt)&&se!==void 0&&!s.hasOwnProperty(tt)&&bc(t,n,tt,void 0,s,se);for(le in s)se=s[le],oe=i[le],!s.hasOwnProperty(le)||se===oe||se===void 0&&oe===void 0||bc(t,n,le,se,s,oe);return}}for(var ee in i)se=i[ee],i.hasOwnProperty(ee)&&se!=null&&!s.hasOwnProperty(ee)&&et(t,n,ee,null,s,se);for(de in s)se=s[de],oe=i[de],!s.hasOwnProperty(de)||se===oe||se==null&&oe==null||et(t,n,de,se,s,oe)}function Fx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function im(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var p=i[s],h=p.transferSize,S=p.initiatorType,F=p.duration;if(h&&F&&Fx(S)){for(S=0,F=p.responseEnd,s+=1;s<i.length;s++){var Y=i[s],ie=Y.startTime;if(ie>F)break;var le=Y.transferSize,de=Y.initiatorType;le&&Fx(de)&&(Y=Y.responseEnd,S+=le*(Y<F?1:(F-ie)/(Y-ie)))}if(--s,n+=8*(h+S)/(p.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var jc=null,Sc=null;function ql(t){return t.nodeType===9?t:t.ownerDocument}function Rx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mx(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Dc(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Bc=null;function sm(){var t=window.event;return t&&t.type==="popstate"?t===Bc?!1:(Bc=t,!0):(Bc=null,!1)}var Ix=typeof setTimeout=="function"?setTimeout:void 0,om=typeof clearTimeout=="function"?clearTimeout:void 0,Nx=typeof Promise=="function"?Promise:void 0,lm=typeof queueMicrotask=="function"?queueMicrotask:typeof Nx<"u"?function(t){return Nx.resolve(null).then(t).catch(am)}:Ix;function am(t){setTimeout(function(){throw t})}function xi(t){return t==="head"}function Ox(t,n){var i=n,s=0;do{var p=i.nextSibling;if(t.removeChild(i),p&&p.nodeType===8)if(i=p.data,i==="/$"||i==="/&"){if(s===0){t.removeChild(p),Ns(n);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")zo(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,zo(i);for(var h=i.firstChild;h;){var S=h.nextSibling,F=h.nodeName;h[vn]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&h.rel.toLowerCase()==="stylesheet"||i.removeChild(h),h=S}}else i==="body"&&zo(t.ownerDocument.body);i=p}while(i);Ns(n)}function Wx(t,n){var i=t;t=0;do{var s=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=s}while(i)}function Cc(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Cc(i),Bi(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function rm(t,n,i,s){for(;t.nodeType===1;){var p=i;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[vn])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var h=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=cn(t.nextSibling),t===null)break}return null}function cm(t,n,i){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=cn(t.nextSibling),t===null))return null;return t}function _x(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=cn(t.nextSibling),t===null))return null;return t}function Ec(t){return t.data==="$?"||t.data==="$~"}function wc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function dm(t,n){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||i.readyState!=="loading")n();else{var s=function(){n(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function cn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var zc=null;function Lx(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(n===0)return cn(t.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}t=t.nextSibling}return null}function $x(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return t;n--}else i!=="/$"&&i!=="/&"||n++}t=t.previousSibling}return null}function Px(t,n,i){switch(n=ql(i),t){case"html":if(t=n.documentElement,!t)throw Error(l(452));return t;case"head":if(t=n.head,!t)throw Error(l(453));return t;case"body":if(t=n.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function zo(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Bi(t)}var dn=new Map,Ux=new Set;function Yl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gn=N.d;N.d={f:pm,r:um,D:xm,C:hm,L:gm,m:fm,X:ym,S:mm,M:vm};function pm(){var t=Gn.f(),n=_l();return t||n}function um(t){var n=Ut(t);n!==null&&n.tag===5&&n.type==="form"?lu(n):Gn.r(t)}var Rs=typeof document>"u"?null:document;function Hx(t,n,i){var s=Rs;if(s&&typeof n=="string"&&n){var p=tn(n);p='link[rel="'+t+'"][href="'+p+'"]',typeof i=="string"&&(p+='[crossorigin="'+i+'"]'),Ux.has(p)||(Ux.add(p),t={rel:t,crossOrigin:i,href:n},s.querySelector(p)===null&&(n=s.createElement("link"),wt(n,"link",t),St(n),s.head.appendChild(n)))}}function xm(t){Gn.D(t),Hx("dns-prefetch",t,null)}function hm(t,n){Gn.C(t,n),Hx("preconnect",t,n)}function gm(t,n,i){Gn.L(t,n,i);var s=Rs;if(s&&t&&n){var p='link[rel="preload"][as="'+tn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(p+='[imagesrcset="'+tn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(p+='[imagesizes="'+tn(i.imageSizes)+'"]')):p+='[href="'+tn(t)+'"]';var h=p;switch(n){case"style":h=Ms(t);break;case"script":h=Is(t)}dn.has(h)||(t=b({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:t,as:n},i),dn.set(h,t),s.querySelector(p)!==null||n==="style"&&s.querySelector(ko(h))||n==="script"&&s.querySelector(Ao(h))||(n=s.createElement("link"),wt(n,"link",t),St(n),s.head.appendChild(n)))}}function fm(t,n){Gn.m(t,n);var i=Rs;if(i&&t){var s=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+tn(s)+'"][href="'+tn(t)+'"]',h=p;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Is(t)}if(!dn.has(h)&&(t=b({rel:"modulepreload",href:t},n),dn.set(h,t),i.querySelector(p)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Ao(h)))return}s=i.createElement("link"),wt(s,"link",t),St(s),i.head.appendChild(s)}}}function mm(t,n,i){Gn.S(t,n,i);var s=Rs;if(s&&t){var p=ns(s).hoistableStyles,h=Ms(t);n=n||"default";var S=p.get(h);if(!S){var F={loading:0,preload:null};if(S=s.querySelector(ko(h)))F.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},i),(i=dn.get(h))&&kc(t,i);var Y=S=s.createElement("link");St(Y),wt(Y,"link",t),Y._p=new Promise(function(ie,le){Y.onload=ie,Y.onerror=le}),Y.addEventListener("load",function(){F.loading|=1}),Y.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Ql(S,n,s)}S={type:"stylesheet",instance:S,count:1,state:F},p.set(h,S)}}}function ym(t,n){Gn.X(t,n);var i=Rs;if(i&&t){var s=ns(i).hoistableScripts,p=Is(t),h=s.get(p);h||(h=i.querySelector(Ao(p)),h||(t=b({src:t,async:!0},n),(n=dn.get(p))&&Ac(t,n),h=i.createElement("script"),St(h),wt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(p,h))}}function vm(t,n){Gn.M(t,n);var i=Rs;if(i&&t){var s=ns(i).hoistableScripts,p=Is(t),h=s.get(p);h||(h=i.querySelector(Ao(p)),h||(t=b({src:t,async:!0,type:"module"},n),(n=dn.get(p))&&Ac(t,n),h=i.createElement("script"),St(h),wt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(p,h))}}function Gx(t,n,i,s){var p=(p=re.current)?Yl(p):null;if(!p)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Ms(i.href),i=ns(p).hoistableStyles,s=i.get(n),s||(s={type:"style",instance:null,count:0,state:null},i.set(n,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Ms(i.href);var h=ns(p).hoistableStyles,S=h.get(t);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,S),(h=p.querySelector(ko(t)))&&!h._p&&(S.instance=h,S.state.loading=5),dn.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},dn.set(t,i),h||bm(p,t,i,S.state))),n&&s===null)throw Error(l(528,""));return S}if(n&&s!==null)throw Error(l(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Is(i),i=ns(p).hoistableScripts,s=i.get(n),s||(s={type:"script",instance:null,count:0,state:null},i.set(n,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Ms(t){return'href="'+tn(t)+'"'}function ko(t){return'link[rel="stylesheet"]['+t+"]"}function Vx(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function bm(t,n,i,s){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?s.loading=1:(n=t.createElement("link"),s.preload=n,n.addEventListener("load",function(){return s.loading|=1}),n.addEventListener("error",function(){return s.loading|=2}),wt(n,"link",i),St(n),t.head.appendChild(n))}function Is(t){return'[src="'+tn(t)+'"]'}function Ao(t){return"script[async]"+t}function qx(t,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var s=t.querySelector('style[data-href~="'+tn(i.href)+'"]');if(s)return n.instance=s,St(s),s;var p=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),St(s),wt(s,"style",p),Ql(s,i.precedence,t),n.instance=s;case"stylesheet":p=Ms(i.href);var h=t.querySelector(ko(p));if(h)return n.state.loading|=4,n.instance=h,St(h),h;s=Vx(i),(p=dn.get(p))&&kc(s,p),h=(t.ownerDocument||t).createElement("link"),St(h);var S=h;return S._p=new Promise(function(F,Y){S.onload=F,S.onerror=Y}),wt(h,"link",s),n.state.loading|=4,Ql(h,i.precedence,t),n.instance=h;case"script":return h=Is(i.src),(p=t.querySelector(Ao(h)))?(n.instance=p,St(p),p):(s=i,(p=dn.get(h))&&(s=b({},i),Ac(s,p)),t=t.ownerDocument||t,p=t.createElement("script"),St(p),wt(p,"link",s),t.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(s=n.instance,n.state.loading|=4,Ql(s,i.precedence,t));return n.instance}function Ql(t,n,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=s.length?s[s.length-1]:null,h=p,S=0;S<s.length;S++){var F=s[S];if(F.dataset.precedence===n)h=F;else if(h!==p)break}h?h.parentNode.insertBefore(t,h.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(t,n.firstChild))}function kc(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Ac(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Xl=null;function Yx(t,n,i){if(Xl===null){var s=new Map,p=Xl=new Map;p.set(i,s)}else p=Xl,s=p.get(i),s||(s=new Map,p.set(i,s));if(s.has(t))return s;for(s.set(t,null),i=i.getElementsByTagName(t),p=0;p<i.length;p++){var h=i[p];if(!(h[vn]||h[Te]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var S=h.getAttribute(n)||"";S=t+S;var F=s.get(S);F?F.push(h):s.set(S,[h])}}return s}function Qx(t,n,i){t=t.ownerDocument||t,t.head.insertBefore(i,n==="title"?t.querySelector("head > title"):null)}function jm(t,n,i){if(i===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Xx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Sm(t,n,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=Ms(s.href),h=n.querySelector(ko(p));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Kl.bind(t),n.then(t,t)),i.state.loading|=4,i.instance=h,St(h);return}h=n.ownerDocument||n,s=Vx(s),(p=dn.get(p))&&kc(s,p),h=h.createElement("link"),St(h);var S=h;S._p=new Promise(function(F,Y){S.onload=F,S.onerror=Y}),wt(h,"link",s),i.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Kl.bind(t),n.addEventListener("load",i),n.addEventListener("error",i))}}var Tc=0;function Dm(t,n){return t.stylesheets&&t.count===0&&Zl(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var s=setTimeout(function(){if(t.stylesheets&&Zl(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+n);0<t.imgBytes&&Tc===0&&(Tc=62500*im());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zl(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>Tc?50:800)+n);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(p)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Jl=null;function Zl(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Jl=new Map,n.forEach(Bm,t),Jl=null,Kl.call(t))}function Bm(t,n){if(!(n.state.loading&4)){var i=Jl.get(t);if(i)var s=i.get(null);else{i=new Map,Jl.set(t,i);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<p.length;h++){var S=p[h];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(i.set(S.dataset.precedence,S),s=S)}s&&i.set(null,s)}p=n.instance,S=p.getAttribute("data-precedence"),h=i.get(S)||s,h===s&&i.set(null,p),i.set(S,p),this.count++,s=Kl.bind(this),p.addEventListener("load",s),p.addEventListener("error",s),h?h.parentNode.insertBefore(p,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),n.state.loading|=4}}var To={$$typeof:$,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Cm(t,n,i,s,p,h,S,F,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.hiddenUpdates=me(null),this.identifierPrefix=s,this.onUncaughtError=p,this.onCaughtError=h,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Kx(t,n,i,s,p,h,S,F,Y,ie,le,de){return t=new Cm(t,n,i,S,Y,ie,le,de,F),n=1,h===!0&&(n|=24),h=Gt(3,null,null,n),t.current=h,h.stateNode=t,n=dr(),n.refCount++,t.pooledCache=n,n.refCount++,h.memoizedState={element:s,isDehydrated:i,cache:n},hr(h),t}function Jx(t){return t?(t=us,t):us}function Zx(t,n,i,s,p,h){p=Jx(p),s.context===null?s.context=p:s.pendingContext=p,s=ni(n),s.payload={element:i},h=h===void 0?null:h,h!==null&&(s.callback=h),i=ii(t,s,n),i!==null&&(Pt(i,t,n),ro(i,t,n))}function eh(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function Fc(t,n){eh(t,n),(t=t.alternate)&&eh(t,n)}function th(t){if(t.tag===13||t.tag===31){var n=ki(t,67108864);n!==null&&Pt(n,t,67108864),Fc(t,67108864)}}function nh(t){if(t.tag===13||t.tag===31){var n=Xt();n=ve(n);var i=ki(t,n);i!==null&&Pt(i,t,n),Fc(t,n)}}var ea=!0;function Em(t,n,i,s){var p=T.T;T.T=null;var h=N.p;try{N.p=2,Rc(t,n,i,s)}finally{N.p=h,T.T=p}}function wm(t,n,i,s){var p=T.T;T.T=null;var h=N.p;try{N.p=8,Rc(t,n,i,s)}finally{N.p=h,T.T=p}}function Rc(t,n,i,s){if(ea){var p=Mc(s);if(p===null)vc(t,n,s,ta,i),sh(t,s);else if(km(p,t,n,i,s))s.stopPropagation();else if(sh(t,s),n&4&&-1<zm.indexOf(t)){for(;p!==null;){var h=Ut(p);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var S=yn(h.pendingLanes);if(S!==0){var F=h;for(F.pendingLanes|=2,F.entangledLanes|=2;S;){var Y=1<<31-Ft(S);F.entanglements[1]|=Y,S&=~Y}Dn(h),(qe&6)===0&&(Ol=Ue()+500,Co(0))}}break;case 31:case 13:F=ki(h,2),F!==null&&Pt(F,h,2),_l(),Fc(h,2)}if(h=Mc(s),h===null&&vc(t,n,s,ta,i),h===p)break;p=h}p!==null&&s.stopPropagation()}else vc(t,n,s,null,i)}}function Mc(t){return t=Na(t),Ic(t)}var ta=null;function Ic(t){if(ta=null,t=Nt(t),t!==null){var n=d(t);if(n===null)t=null;else{var i=n.tag;if(i===13){if(t=u(n),t!==null)return t;t=null}else if(i===31){if(t=g(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return ta=t,null}function ih(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jt()){case Vo:return 2;case qo:return 8;case Xi:case Ca:return 32;case Yo:return 268435456;default:return 32}default:return 32}}var Nc=!1,hi=null,gi=null,fi=null,Fo=new Map,Ro=new Map,mi=[],zm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(t,n){switch(t){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Fo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(n.pointerId)}}function Mo(t,n,i,s,p,h){return t===null||t.nativeEvent!==h?(t={blockedOn:n,domEventName:i,eventSystemFlags:s,nativeEvent:h,targetContainers:[p]},n!==null&&(n=Ut(n),n!==null&&th(n)),t):(t.eventSystemFlags|=s,n=t.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),t)}function km(t,n,i,s,p){switch(n){case"focusin":return hi=Mo(hi,t,n,i,s,p),!0;case"dragenter":return gi=Mo(gi,t,n,i,s,p),!0;case"mouseover":return fi=Mo(fi,t,n,i,s,p),!0;case"pointerover":var h=p.pointerId;return Fo.set(h,Mo(Fo.get(h)||null,t,n,i,s,p)),!0;case"gotpointercapture":return h=p.pointerId,Ro.set(h,Mo(Ro.get(h)||null,t,n,i,s,p)),!0}return!1}function oh(t){var n=Nt(t.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=u(i),n!==null){t.blockedOn=n,ts(t.priority,function(){nh(i)});return}}else if(n===31){if(n=g(i),n!==null){t.blockedOn=n,ts(t.priority,function(){nh(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function na(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Mc(t.nativeEvent);if(i===null){i=t.nativeEvent;var s=new i.constructor(i.type,i);Ia=s,i.target.dispatchEvent(s),Ia=null}else return n=Ut(i),n!==null&&th(n),t.blockedOn=i,!1;n.shift()}return!0}function lh(t,n,i){na(t)&&i.delete(n)}function Am(){Nc=!1,hi!==null&&na(hi)&&(hi=null),gi!==null&&na(gi)&&(gi=null),fi!==null&&na(fi)&&(fi=null),Fo.forEach(lh),Ro.forEach(lh)}function ia(t,n){t.blockedOn===n&&(t.blockedOn=null,Nc||(Nc=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Am)))}var sa=null;function ah(t){sa!==t&&(sa=t,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){sa===t&&(sa=null);for(var n=0;n<t.length;n+=3){var i=t[n],s=t[n+1],p=t[n+2];if(typeof s!="function"){if(Ic(s||i)===null)continue;break}var h=Ut(i);h!==null&&(t.splice(n,3),n-=3,Mr(h,{pending:!0,data:p,method:i.method,action:s},s,p))}}))}function Ns(t){function n(Y){return ia(Y,t)}hi!==null&&ia(hi,t),gi!==null&&ia(gi,t),fi!==null&&ia(fi,t),Fo.forEach(n),Ro.forEach(n);for(var i=0;i<mi.length;i++){var s=mi[i];s.blockedOn===t&&(s.blockedOn=null)}for(;0<mi.length&&(i=mi[0],i.blockedOn===null);)oh(i),i.blockedOn===null&&mi.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var p=i[s],h=i[s+1],S=p[He]||null;if(typeof h=="function")S||ah(i);else if(S){var F=null;if(h&&h.hasAttribute("formAction")){if(p=h,S=h[He]||null)F=S.formAction;else if(Ic(p)!==null)continue}else F=S.action;typeof F=="function"?i[s+1]=F:(i.splice(s,3),s-=3),ah(i)}}}function rh(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function Oc(t){this._internalRoot=t}oa.prototype.render=Oc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(l(409));var i=n.current,s=Xt();Zx(i,s,t,n,null,null)},oa.prototype.unmount=Oc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Zx(t.current,2,null,t,null,null),_l(),n[ct]=null}};function oa(t){this._internalRoot=t}oa.prototype.unstable_scheduleHydration=function(t){if(t){var n=Mt();t={blockedOn:null,target:t,priority:n};for(var i=0;i<mi.length&&n!==0&&n<mi[i].priority;i++);mi.splice(i,0,t),i===0&&oh(t)}};var ch=c.version;if(ch!=="19.2.0")throw Error(l(527,ch,"19.2.0"));N.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=x(n),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var Tm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{Si=la.inject(Tm),Tt=la}catch{}}return No.createRoot=function(t,n){if(!a(t))throw Error(l(299));var i=!1,s="",p=fu,h=mu,S=yu;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=Kx(t,1,!1,null,null,i,s,null,p,h,S,rh),t[ct]=n.current,yc(t),new Oc(n)},No.hydrateRoot=function(t,n,i){if(!a(t))throw Error(l(299));var s=!1,p="",h=fu,S=mu,F=yu,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(S=i.onCaughtError),i.onRecoverableError!==void 0&&(F=i.onRecoverableError),i.formState!==void 0&&(Y=i.formState)),n=Kx(t,1,!0,n,i??null,s,p,Y,h,S,F,rh),n.context=Jx(null),i=n.current,s=Xt(),s=ve(s),p=ni(s),p.callback=null,ii(i,p,s),i=s,n.current.lanes=i,Ce(n,i),Dn(n),t[ct]=n.current,yc(t),new oa(n)},No.version="19.2.0",No}var vh;function Pm(){if(vh)return Lc.exports;vh=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(c){console.error(c)}}return o(),Lc.exports=$m(),Lc.exports}var Um=Pm();const rt={GITLAB_URL:"gitlab_url",GITLAB_TOKEN:"gitlab_token",PROJECT_ID:"gitlab_project",GROUP_PATH:"gitlab_group_path",FILTER_2025:"gitlab_filter_2025",MODE:"gitlab_mode",RISKS:"project_risks",PROJECTS:"portfolio_projects",ACTIVE_PROJECT:"active_project_id",GROUPS:"portfolio_groups",ACTIVE_GROUP:"active_group_id"};function ad(o){localStorage.setItem(rt.GITLAB_URL,o.gitlabUrl||""),localStorage.setItem(rt.GITLAB_TOKEN,o.token||""),localStorage.setItem(rt.PROJECT_ID,o.projectId||""),localStorage.setItem(rt.GROUP_PATH,o.groupPath||""),localStorage.setItem(rt.MODE,o.mode||"project"),o.filter2025!==void 0&&localStorage.setItem(rt.FILTER_2025,o.filter2025.toString())}function Kt(){const o=localStorage.getItem(rt.FILTER_2025),c=o!==null?o==="true":!1,r=localStorage.getItem(rt.MODE)||"project";return{gitlabUrl:localStorage.getItem(rt.GITLAB_URL)||"https://gitlab.com",token:localStorage.getItem(rt.GITLAB_TOKEN)||"",projectId:localStorage.getItem(rt.PROJECT_ID)||"",groupPath:localStorage.getItem(rt.GROUP_PATH)||"",mode:r,filter2025:c}}function qn(){const o=Kt();return o.mode==="group"?!!(o.gitlabUrl&&o.token&&o.groupPath):!!(o.gitlabUrl&&o.token&&o.projectId)}function bh(){const o=localStorage.getItem(rt.RISKS);return o?JSON.parse(o):[]}function Hm(o){localStorage.setItem(rt.RISKS,JSON.stringify(o))}function Qn(){const o=localStorage.getItem(rt.PROJECTS);return o?JSON.parse(o):[]}function Gm(o){const c=Qn(),r=c.findIndex(l=>l.id===o.id);return r>=0?c[r]={...c[r],...o}:c.push({id:o.id||Date.now().toString(),name:o.name,gitlabUrl:o.gitlabUrl,token:o.token,projectId:o.projectId,groupPath:o.groupPath||"",addedAt:new Date().toISOString()}),localStorage.setItem(rt.PROJECTS,JSON.stringify(c)),c}function Vm(o){const r=Qn().filter(l=>l.id!==o);return localStorage.setItem(rt.PROJECTS,JSON.stringify(r)),r}function fn(){return localStorage.getItem(rt.ACTIVE_PROJECT)}function da(o){localStorage.setItem(rt.ACTIVE_PROJECT,o);const r=Qn().find(l=>l.id===o);r&&ad({gitlabUrl:r.gitlabUrl,token:r.token,projectId:r.projectId,groupPath:r.groupPath})}function Hs(){const o=localStorage.getItem(rt.GROUPS);return o?JSON.parse(o):[]}function qm(o){const c=Hs(),r=c.findIndex(l=>l.id===o.id);return r>=0?c[r]={...c[r],...o}:c.push({id:o.id||Date.now().toString(),name:o.name,gitlabUrl:o.gitlabUrl,token:o.token,groupPath:o.groupPath,addedAt:new Date().toISOString()}),localStorage.setItem(rt.GROUPS,JSON.stringify(c)),c}function Ym(o){const r=Hs().filter(l=>l.id!==o);return localStorage.setItem(rt.GROUPS,JSON.stringify(r)),r}function $s(){return localStorage.getItem(rt.ACTIVE_GROUP)}function Mh(o){localStorage.setItem(rt.ACTIVE_GROUP,o);const r=Hs().find(l=>l.id===o);r&&ad({gitlabUrl:r.gitlabUrl,token:r.token,groupPath:r.groupPath,mode:"group"})}function Qm(){const o=$s();return o&&Hs().find(r=>r.id===o)||null}const Xm="modulepreload",Km=function(o,c){return new URL(o,c).href},jh={},pa=function(c,r,l){let a=Promise.resolve();if(r&&r.length>0){let x=function(m){return Promise.all(m.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const u=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),f=g?.nonce||g?.getAttribute("nonce");a=x(r.map(m=>{if(m=Km(m,l),m in jh)return;jh[m]=!0;const b=m.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(l)for(let j=u.length-1;j>=0;j--){const w=u[j];if(w.href===m&&(!b||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${v}`))return;const D=document.createElement("link");if(D.rel=b?"stylesheet":Xm,b||(D.as="script"),D.crossOrigin="",D.href=m,f&&D.setAttribute("nonce",f),document.head.appendChild(D),b)return new Promise((j,w)=>{D.addEventListener("load",j),D.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(u){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=u,window.dispatchEvent(g),!g.defaultPrevented)throw u}return a.then(u=>{for(const g of u||[])g.status==="rejected"&&d(g.reason);return c().catch(d)})};async function Jm(o,c,r){const l=encodeURIComponent(c),a=`${o}/api/v4/projects/${l}`;console.log("Validating project access..."),console.log("  URL:",a);const d=await fetch(a,{headers:{"PRIVATE-TOKEN":r}});if(!d.ok){const g=await d.text();throw console.error("Project validation failed:",g),d.status===404?new Error(`Project not found: "${c}"

Possible issues:
- Project ID might be incorrect
- Use either numeric ID (e.g., "12345") or full path (e.g., "namespace/project-name")
- Check if the token has access to this project
- Verify the GitLab URL is correct`):d.status===401?new Error("Authentication failed: Invalid or expired access token"):new Error(`Project validation error: ${d.status} - ${d.statusText}`)}const u=await d.json();return console.log(" Project validated:",u.name),console.log("  Full path:",u.path_with_namespace),console.log("  Numeric ID:",u.id),u}async function Ih(o,c,r){const l=encodeURIComponent(c);let a=[],d=1;const u=100;for(console.log("Fetching issues with pagination..."),console.log("  GitLab URL:",o),console.log("  Project ID:",c),console.log("  Encoded Project ID:",l);;){const g=`${o}/api/v4/projects/${l}/issues?per_page=${u}&page=${d}&scope=all&with_iterations=true`;console.log("  API Request URL:",g);const f=await fetch(g,{headers:{"PRIVATE-TOKEN":r}});if(!f.ok){const m=await f.text();throw console.error("API Error Response:",m),new Error(`Issues API Error: ${f.status} - ${f.statusText}
URL: ${g}
Project ID: ${c}
Encoded: ${l}
Response: ${m}`)}const x=await f.json();if(x.length===0||(a=a.concat(x),console.log(`  Fetched page ${d}: ${x.length} issues (total: ${a.length})`),x.length<u))break;d++}if(console.log(` Loaded ${a.length} total issues from ${d} page(s)`),a.length>0){console.log("=== ITERATION DEBUG ===");const g=Math.min(3,a.length);for(let m=0;m<g;m++){const b=a[m];console.log(`Issue #${b.iid} (${b.title}):`),console.log("  - iteration field:",b.iteration),console.log("  - labels:",b.labels)}const f=a.filter(m=>m.iteration).length,x=a.filter(m=>m.labels&&m.labels.some(b=>b.toLowerCase().startsWith("sprint")||b.toLowerCase().startsWith("iteration"))).length;console.log(`Summary: ${f} issues with iteration field, ${x} with iteration/sprint labels`),console.log("======================")}return a}async function Nh(o,c,r){const l=encodeURIComponent(c);let a=[],d=1;const u=100;for(console.log("Fetching milestones with pagination...");;){const g=await fetch(`${o}/api/v4/projects/${l}/milestones?per_page=${u}&page=${d}`,{headers:{"PRIVATE-TOKEN":r}});if(!g.ok)throw new Error(`Milestones API Error: ${g.status}`);const f=await g.json();if(f.length===0||(a=a.concat(f),console.log(`  Fetched page ${d}: ${f.length} milestones (total: ${a.length})`),f.length<u))break;d++}return console.log(` Loaded ${a.length} total milestones from ${d} page(s)`),a}async function Zm(o,c,r){if(!c)return[];const l=encodeURIComponent(c);let a=[],d=1;const u=100;console.log("Fetching epics with pagination..."),console.log("  GitLab URL:",o),console.log("  Group Path:",c),console.log("  Encoded Group Path:",l);try{for(;;){const g=`${o}/api/v4/groups/${l}/epics?per_page=${u}&page=${d}`;console.log("  Epic API Request URL:",g);const f=await fetch(g,{headers:{"PRIVATE-TOKEN":r}});if(console.log(`  Epic API Response Status: ${f.status}`),f.status===404)return console.warn("Epics not available (requires Premium/Ultimate)"),[];if(!f.ok){const m=await f.text();throw console.error("Epic API Error Response:",m),new Error(`Epics API Error: ${f.status} - ${m}`)}const x=await f.json();if(console.log(`  Epics returned on page ${d}:`,x.length),x.length===0||(a=a.concat(x),console.log(`  Fetched page ${d}: ${x.length} epics (total: ${a.length})`),x.length<u))break;d++}return console.log(` Loaded ${a.length} total epics from ${d} page(s)`),a}catch(g){return console.error("Epic fetch failed:",g),[]}}async function ey(o,c,r){const l=encodeURIComponent(c);try{const a=await fetch(`${o}/api/v4/projects/${l}/issues?per_page=1`,{headers:{"PRIVATE-TOKEN":r}});if(!a.ok)return{hasLabelHistory:!1,hasResourceEvents:!1};const d=await a.json();if(d.length===0)return{hasLabelHistory:!1,hasResourceEvents:!1};const u=d[0].iid,g=await fetch(`${o}/api/v4/projects/${l}/issues/${u}/resource_state_events`,{headers:{"PRIVATE-TOKEN":r}});if(g.status===404||g.status===403)return console.log("Resource State Events API not available (requires Premium/Ultimate)"),{hasLabelHistory:!1,hasResourceEvents:!1};const x=(await fetch(`${o}/api/v4/projects/${l}/issues/${u}/resource_label_events`,{headers:{"PRIVATE-TOKEN":r}})).ok,m=g.ok;return console.log("GitLab Premium Features:",{hasLabelHistory:x,hasResourceEvents:m}),{hasLabelHistory:x,hasResourceEvents:m}}catch(a){return console.error("Premium feature check failed:",a),{hasLabelHistory:!1,hasResourceEvents:!1}}}async function ty(o,c,r,l){const a=encodeURIComponent(c);try{const d=await fetch(`${o}/api/v4/projects/${a}/issues/${r}/resource_label_events`,{headers:{"PRIVATE-TOKEN":l}});return d.ok?d.json():null}catch(d){return console.error(`Failed to fetch label history for issue ${r}:`,d),null}}async function ny(o,c,r){const l=encodeURIComponent(c),a=`${o}/api/v4/groups/${l}`;console.log("Validating group access..."),console.log("  URL:",a);const d=await fetch(a,{headers:{"PRIVATE-TOKEN":r}});if(!d.ok){const g=await d.text();throw console.error("Group validation failed:",g),d.status===404?new Error(`Group not found: "${c}"

Possible issues:
- Group ID/path might be incorrect
- Use either numeric ID (e.g., "12345") or full path (e.g., "my-group" or "parent/child-group")
- Check if the token has access to this group
- Verify the GitLab URL is correct`):d.status===401?new Error("Authentication failed: Invalid or expired access token"):new Error(`Group validation error: ${d.status} - ${d.statusText}`)}const u=await d.json();return console.log(" Group validated:",u.name),console.log("  Full path:",u.full_path),console.log("  Numeric ID:",u.id),u}async function iy(o,c,r){const l=encodeURIComponent(c);let a=[],d=1;const u=100;for(console.log("Fetching all projects in group (including subgroups)..."),console.log("  Group Path:",c);;){const g=`${o}/api/v4/groups/${l}/projects?per_page=${u}&page=${d}&include_subgroups=true&archived=false`,f=await fetch(g,{headers:{"PRIVATE-TOKEN":r}});if(!f.ok){const m=await f.text();throw console.error("Group Projects API Error:",m),new Error(`Group Projects API Error: ${f.status} - ${m}`)}const x=await f.json();if(x.length===0||(a=a.concat(x),console.log(`  Fetched page ${d}: ${x.length} projects (total: ${a.length})`),x.length<u))break;d++}return console.log(` Found ${a.length} projects in group "${c}"`),a.length>0&&(console.log("  Projects:"),a.forEach(g=>{console.log(`    - ${g.path_with_namespace} (ID: ${g.id})`)})),a}async function sy(o,c,r,l=null){console.log(`Fetching issues from ${c.length} projects...`);const a=5;let d=[],u=0;for(let g=0;g<c.length;g+=a){const f=c.slice(g,g+a);(await Promise.all(f.map(async m=>{try{const b=await Ih(o,m.id,r);return{projectId:m.id,projectPath:m.path_with_namespace,issues:b}}catch(b){return console.warn(`Failed to fetch issues from project ${m.path_with_namespace}:`,b),{projectId:m.id,projectPath:m.path_with_namespace,issues:[]}}}))).forEach(({projectPath:m,issues:b})=>{b.length>0&&console.log(`   ${m}: ${b.length} issues`),d=d.concat(b)}),u+=f.length,l&&l(u,c.length)}return console.log(` Loaded ${d.length} total issues from ${c.length} projects`),d}async function oy(o,c,r){console.log(`Fetching milestones from ${c.length} projects...`);const l=5;let a=[];for(let u=0;u<c.length;u+=l){const g=c.slice(u,u+l);(await Promise.all(g.map(async x=>{try{const m=await Nh(o,x.id,r);return{projectPath:x.path_with_namespace,milestones:m}}catch(m){return console.warn(`Failed to fetch milestones from project ${x.path_with_namespace}:`,m),{projectPath:x.path_with_namespace,milestones:[]}}}))).forEach(({milestones:x})=>{a=a.concat(x)})}const d=Array.from(new Map(a.map(u=>[u.id,u])).values());return console.log(` Loaded ${d.length} unique milestones from ${c.length} projects`),d}function Hc(o,c){const r=new Date("2025-01-01").getTime();return o.filter(l=>c.some(a=>{const d=l[a];return d?new Date(d).getTime()>=r:!1}))}async function Oo(o){const{gitlabUrl:c,projectId:r,groupPath:l,groupPaths:a,token:d,filter2025:u,mode:g}=o;console.log("=== Starting GitLab Data Fetch ==="),console.log("Full config object:",o),console.log("Mode:",g||"project (default)");let f,x,m=[];const b=g!=="group";if(g==="group"){if(!l&&(!a||a.length===0))throw new Error("Group mode requires groupPath or groupPaths to be configured");const X=a&&a.length>0?a[0]:l;await ny(c,X,d),m=await iy(c,X,d),console.log(`
 GROUP MODE: Fetching data from ${m.length} projects in "${X}"
`);const[z,T]=await Promise.all([sy(c,m,d),oy(c,m,d)]);f=z,x=T}else{console.log("Config values:",{gitlabUrl:c,projectId:r,groupPath:l||"(none)",groupPathType:typeof l,groupPathLength:l?.length}),await Jm(c,r,d),console.log(`
 PROJECT MODE: Fetching data from single project "${r}"
`);const[X,z]=await Promise.all([Ih(c,r,d),Nh(c,r,d)]);f=X,x=z}const v=a&&Array.isArray(a)&&a.length>0?a:l?[l]:[],j=(await Promise.all(v.map(X=>Zm(c,X,d)))).flat(),w=Array.from(new Map(j.map(X=>[X.id,X])).values()),H=u!==!1,U=H?Hc(f,["created_at","updated_at","due_date"]):f,G=H?Hc(x,["start_date","due_date","created_at"]):x,$=H?Hc(w,["start_date","end_date","created_at"]):w;console.log(`Filtered data: ${f.length}  ${U.length} issues, ${x.length}  ${G.length} milestones, ${w.length}  ${$.length} epics ${H?"(>= 2025)":"(no filter)"}`),g==="group"&&console.log(`  Aggregated from ${m.length} projects in group`);const{linkCrossProjectIssues:B,enhanceEpicsWithCrossProjectData:M,buildEpicHierarchy:R,findOrphanedIssues:L}=await pa(async()=>{const{linkCrossProjectIssues:X,enhanceEpicsWithCrossProjectData:z,buildEpicHierarchy:T,findOrphanedIssues:N}=await Promise.resolve().then(()=>od);return{linkCrossProjectIssues:X,enhanceEpicsWithCrossProjectData:z,buildEpicHierarchy:T,findOrphanedIssues:N}},void 0,import.meta.url),O=B(U,$);O.singleProjectMode=b,O.selectedProjectId=b?r:null,O.limitedView=b,O.mode=g||"project",O.projectCount=g==="group"?m.length:1;const{rootEpics:y,epicMap:C}=R($),I=M($,O),_=L(U),P=I.map(X=>{const z=U.filter(T=>T.epic&&T.epic.id===X.id);return{...X,issues:z}});return console.log(` Loaded ${$.length} epics with ${P.reduce((X,z)=>X+z.issues.length,0)} total issues`),console.log(" Cross-project statistics:",O.statistics),_.length>0&&console.log(`  Found ${_.length} orphaned issues that might need epic assignment`),{issues:U,milestones:G,epics:P,projects:m,crossProjectData:{...O,epicHierarchy:{rootEpics:y,epicMap:C},orphanedIssues:_}}}const Oh="gitlab-pm-project-groups";function Uo(){try{const o=localStorage.getItem(Oh);if(o)return JSON.parse(o)}catch(o){console.error("Error loading project groups:",o)}return[]}function Wh(o){try{return localStorage.setItem(Oh,JSON.stringify(o)),!0}catch(c){return console.error("Error saving project groups:",c),!1}}function ly(o){const c=Uo();if(o.id){const r=c.findIndex(l=>l.id===o.id);r>=0?c[r]={...o,updatedAt:new Date().toISOString()}:c.push({...o,createdAt:new Date().toISOString()})}else{const r={...o,id:`group-${Date.now()}`,createdAt:new Date().toISOString()};c.push(r)}return Wh(c),c}function ay(o){const r=Uo().filter(l=>l.id!==o);return Wh(r),r}function _h(o){return Uo().find(r=>r.id===o)}function ry(o,c){const r=_h(o);return r?c.filter(l=>r.projectIds.includes(l.id)):[]}function cy(){const[o,c]=W.useState({issues:[],milestones:[],epics:[],crossProjectData:null}),[r,l]=W.useState(!1),[a,d]=W.useState(null),[u,g]=W.useState(null);W.useEffect(()=>{const m=Kt();console.log("useGitLabData: Loading config from storage:",m),console.log("  groupPath value:",m.groupPath),console.log("  groupPath type:",typeof m.groupPath),console.log("  groupPath length:",m.groupPath?.length),g(m)},[]);const f=W.useCallback(async()=>{const m=fn(),b=$s();if(b){console.log("useGitLabData: Pod mode detected, activeGroupId:",b);const v=Qm();if(!v){console.warn("useGitLabData: Pod not found:",b);return}l(!0),d(null);try{console.log(`useGitLabData: Fetching data for pod "${v.name}"...`),console.log("  Pod config:",v);const D={gitlabUrl:v.gitlabUrl,token:v.token,groupPath:v.groupPath,mode:"group",filter2025:Kt().filter2025},j=await Oo(D);console.log("useGitLabData: Pod data fetch complete:"),console.log(`  Pod: ${v.name}`),console.log(`  Total issues: ${j.issues.length}`),console.log(`  Total milestones: ${j.milestones.length}`),console.log(`  Total epics: ${j.epics.length}`),c(j)}catch(D){console.error("Pod data fetch failed:",D),d(D.message)}finally{l(!1)}return}if(m?.startsWith("group:")){console.log("useGitLabData: Project group mode detected");const v=m.replace("group:",""),D=_h(v);if(!D){console.warn("useGitLabData: Project group not found:",v);return}const j=Qn(),w=ry(v,j);if(w.length===0){console.warn("useGitLabData: No projects in group:",D.name);return}l(!0),d(null);try{console.log(`useGitLabData: Fetching data for project group "${D.name}" (${w.length} projects)...`);const H=w.map(async X=>{try{console.log(`  Fetching project: ${X.name}`);const z={gitlabUrl:X.gitlabUrl,token:X.token,projectId:X.projectId,groupPath:X.groupPath,groupPaths:X.groupPaths,filter2025:Kt().filter2025},T=await Oo(z);return{projectId:X.id,projectName:X.name,issues:T.issues.map(N=>({...N,_projectId:X.id,_projectName:X.name})),milestones:T.milestones.map(N=>({...N,_projectId:X.id,_projectName:X.name})),epics:T.epics.map(N=>({...N,_projectId:X.id,_projectName:X.name}))}}catch(z){return console.error(`  Failed to fetch project ${X.name}:`,z),{projectId:X.id,projectName:X.name,issues:[],milestones:[],epics:[],error:z.message}}}),U=await Promise.all(H);let G=[];if(D.sharedGroupPaths&&D.sharedGroupPaths.length>0){console.log(`  Fetching epics from ${D.sharedGroupPaths.length} shared group paths...`);const X=w[0],z=D.sharedGroupPaths.map(async N=>{try{console.log(`    Fetching shared group: ${N}`);const K={gitlabUrl:X.gitlabUrl,token:X.token,projectId:X.projectId,groupPaths:[N],filter2025:Kt().filter2025};return(await Oo(K)).epics.map(q=>({...q,_sharedSource:N}))}catch(K){return console.error(`    Failed to fetch shared group ${N}:`,K),[]}});G=(await Promise.all(z)).flat(),console.log(`  Found ${G.length} epics from shared groups`)}const{linkCrossProjectIssues:$,buildEpicHierarchy:B}=await pa(async()=>{const{linkCrossProjectIssues:X,buildEpicHierarchy:z}=await Promise.resolve().then(()=>od);return{linkCrossProjectIssues:X,buildEpicHierarchy:z}},void 0,import.meta.url),M=U.flatMap(X=>X.issues),R=[...U.flatMap(X=>X.epics),...G],L=U.flatMap(X=>X.milestones),O=new Map;R.forEach(X=>{O.has(X.id)||O.set(X.id,X)});const y=Array.from(O.values()),C=$(M,y),I=B(y);C.singleProjectMode=!1,C.limitedView=!1,C.projectGroupMode=!0,C.projectGroupName=D.name,C.projectCount=w.length;const _={issues:M,milestones:L,epics:y,crossProjectData:{...C,epicHierarchy:I}};console.log("useGitLabData: Project group aggregation complete:"),console.log(`  Group: ${D.name}`),console.log(`  Total issues: ${_.issues.length}`),console.log(`  Total milestones: ${_.milestones.length}`),console.log(`  Total epics: ${_.epics.length}`);const P=U.filter(X=>X.error);P.length>0&&console.warn(`  Failed projects: ${P.map(X=>X.projectName).join(", ")}`),c(_)}catch(H){console.error("Project group data fetch failed:",H),d(H.message)}finally{l(!1)}}else if(m==="cross-project"){console.log("useGitLabData: Cross-project mode detected");const v=Qn();if(v.length===0){console.warn("useGitLabData: No projects configured for cross-project view");return}l(!0),d(null);try{console.log(`useGitLabData: Fetching data from ${v.length} projects...`);const D=v.map(async O=>{try{console.log(`  Fetching project: ${O.name}`);const y={gitlabUrl:O.gitlabUrl,token:O.token,projectId:O.projectId,groupPath:O.groupPath,groupPaths:O.groupPaths,filter2025:Kt().filter2025},C=await Oo(y);return{projectId:O.id,projectName:O.name,issues:C.issues.map(I=>({...I,_projectId:O.id,_projectName:O.name})),milestones:C.milestones.map(I=>({...I,_projectId:O.id,_projectName:O.name})),epics:C.epics.map(I=>({...I,_projectId:O.id,_projectName:O.name}))}}catch(y){return console.error(`  Failed to fetch project ${O.name}:`,y),{projectId:O.id,projectName:O.name,issues:[],milestones:[],epics:[],error:y.message}}}),j=await Promise.all(D),{linkCrossProjectIssues:w,buildEpicHierarchy:H}=await pa(async()=>{const{linkCrossProjectIssues:O,buildEpicHierarchy:y}=await Promise.resolve().then(()=>od);return{linkCrossProjectIssues:O,buildEpicHierarchy:y}},void 0,import.meta.url),U=j.flatMap(O=>O.issues),G=j.flatMap(O=>O.epics),$=j.flatMap(O=>O.milestones),B=w(U,G),M=H(G);B.singleProjectMode=!1,B.limitedView=!1,B.projectCount=v.length;const R={issues:U,milestones:$,epics:G,crossProjectData:{...B,epicHierarchy:M}};console.log("useGitLabData: Cross-project aggregation complete:"),console.log(`  Total issues: ${R.issues.length}`),console.log(`  Total milestones: ${R.milestones.length}`),console.log(`  Total epics: ${R.epics.length}`);const L=j.filter(O=>O.error);L.length>0&&console.warn(`  Failed projects: ${L.map(O=>O.projectName).join(", ")}`),c(R)}catch(D){console.error("Cross-project data fetch failed:",D),d(D.message)}finally{l(!1)}}else{if(!u||!qn())return;l(!0),d(null);try{const v=await Oo(u);c(v)}catch(v){console.error("GitLab data fetch failed:",v),d(v.message)}finally{l(!1)}}},[u]);W.useEffect(()=>{const m=fn();($s()||m==="cross-project"||m?.startsWith("group:")||u&&qn())&&f()},[u,f]);const x=W.useCallback(()=>{const m=Kt();console.log("useGitLabData: Refreshing with fresh config:",m),console.log("  Fresh groupPath:",m.groupPath),g(m)},[]);return{issues:o.issues,milestones:o.milestones,epics:o.epics,crossProjectData:o.crossProjectData,loading:r,error:a,refresh:x,isConfigured:qn()}}const Kc={completion:.3,schedule:.25,blockers:.25,risk:.2},Jc={schedule:200,blockers:300,risk:200},Zc={good:80,warning:60},ua={mode:"iteration",days:90},Os={EXECUTIVE:"executive",MANAGER:"manager",TEAM:"team"},ed=[{id:"overview",label:"Overview",views:[{id:"executive",label:"Dashboard",roles:["executive","manager","team"]},{id:"insights",label:"Insights",roles:["executive","manager","team"]}]},{id:"planning",label:"Planning",views:[{id:"roadmap",label:"Milestones",roles:["executive","manager","team"]},{id:"epicmanagement",label:"Epics",roles:["manager","team"]},{id:"releases",label:"Releases",roles:["executive","manager","team"]},{id:"dependencies",label:"Dependencies",roles:["manager","team"]},{id:"crossteam",label:"Cross-Team Coordination",roles:["executive","manager"]}]},{id:"execution",label:"Execution",views:[{id:"sprintmanagement",label:"Sprints",roles:["manager","team"]},{id:"resources",label:"Current Capacity",roles:["manager","team"]},{id:"teammanagement",label:"Team Management",roles:["manager","team"]}]},{id:"analysis",label:"Analytics",views:[{id:"velocity",label:"Velocity",roles:["manager","team"]},{id:"cycletime",label:"Cycle Time",roles:["manager","team"]},{id:"compliance",label:"Quality",roles:["manager","team"]}]},{id:"governance",label:"Governance",views:[{id:"riskmanagement",label:"Risks",roles:["executive","manager"]},{id:"stakeholders",label:"Communication Hub",roles:["executive","manager"]},{id:"backup",label:"Backup & Restore",roles:["executive","manager","team"]}]}],dy=ed.flatMap(o=>o.views.map(c=>({id:c.id,label:c.label,group:o.id,groupLabel:o.label,roles:c.roles})));function Lh(o){return o.some(c=>c.toLowerCase().includes("blocker")||c.toLowerCase().includes("blocked"))}function py(o){const c=o.length,r=o.filter(f=>f.state==="opened").length,l=o.filter(f=>f.state==="closed").length,a=o.filter(f=>Lh(f.labels)).length,d=o.filter(f=>f.due_date&&new Date(f.due_date)<new Date&&f.state==="opened").length,u=o.filter(f=>{if(!f.due_date||f.state==="closed")return!1;const x=Math.floor((new Date(f.due_date)-new Date)/(1e3*60*60*24));return x<=7&&x>=0}).length,g=c>0?Math.round(l/c*100):0;return{total:c,open:r,closed:l,blockers:a,overdue:d,atRisk:u,completionRate:g}}function uy(){const o=localStorage.getItem("healthScoreConfig");if(o)try{return JSON.parse(o)}catch(c){console.error("Failed to parse health score config:",c)}return{weights:Kc,amplifiers:Jc,thresholds:Zc}}function xy(o){const c=uy(),{weights:r,amplifiers:l,thresholds:a}=c,d=o.completionRate,u=o.total>0?Math.max(0,100-o.overdue/o.total*l.schedule):100,g=o.total>0?Math.max(0,100-o.blockers/o.total*l.blockers):100,f=o.total>0?Math.max(0,100-o.atRisk/o.total*l.risk):100,x=Math.round(d*r.completion+u*r.schedule+g*r.blockers+f*r.risk);let m="red";return x>=a.good?m="green":x>=a.warning&&(m="amber"),{score:x,status:m,breakdown:{completionScore:d,scheduleScore:u,blockerScore:g,riskScore:f}}}function hy(o,c){if(!c||c.mode==="all")return o;if(c.mode==="days"){const r=new Date;return r.setDate(r.getDate()-c.days),o.filter(l=>l.state==="opened"?!0:l.closed_at?new Date(l.closed_at)>=r:l.state==="closed"&&l.updated_at?new Date(l.updated_at)>=r:!1)}return o}function gy(o,c=[]){const r=W.useMemo(()=>{if(!o||o.length===0)return null;const a=localStorage.getItem("healthScoreConfig");let d=ua;if(a)try{d=JSON.parse(a).timeframe||ua}catch(g){console.error("Failed to load health score timeframe config:",g)}const u=hy(o,d);return py(u)},[o,c]),l=W.useMemo(()=>r?xy(r):null,[r]);return{stats:r,healthScore:l,hasData:r!==null}}function rd(){const[o,c]=W.useState([]);W.useEffect(()=>{const m=bh();c(m)},[]),W.useEffect(()=>{(o.length>0||o.length!==bh().length)&&Hm(o)},[o]);const r=W.useCallback(m=>{const b={id:Date.now().toString(),title:m.title,description:m.description,probability:m.probability,impact:m.impact,status:m.status||"open",owner:m.owner||"",mitigations:[]};return c(v=>[...v,b]),b},[]),l=W.useCallback((m,b)=>{c(v=>v.map(D=>D.id===m?{...D,...b}:D))},[]),a=W.useCallback(m=>{c(b=>b.filter(v=>v.id!==m))},[]),d=W.useCallback((m,b)=>{const v={id:Date.now().toString(),description:b.description,owner:b.owner||"",deadline:b.deadline||null,status:b.status||"pending",completedDate:null};return c(D=>D.map(j=>j.id===m?{...j,mitigations:[...j.mitigations,v]}:j)),v},[]),u=W.useCallback((m,b,v)=>{c(D=>D.map(j=>j.id===m?{...j,mitigations:j.mitigations.map(w=>w.id===b?{...w,...v}:w)}:j))},[]),g=W.useCallback((m,b)=>{c(v=>v.map(D=>D.id===m?{...D,mitigations:D.mitigations.filter(j=>j.id!==b)}:D))},[]),f=W.useCallback(m=>m.probability*m.impact,[]),x=W.useCallback(()=>({high:o.filter(b=>f(b)>=6&&b.status==="open"),medium:o.filter(b=>f(b)>=3&&f(b)<6&&b.status==="open"),low:o.filter(b=>f(b)<3&&b.status==="open")}),[o,f]);return{risks:o,addRisk:r,updateRisk:l,deleteRisk:a,addMitigation:d,updateMitigation:u,deleteMitigation:g,getRiskScore:f,getRisksBySeverity:x}}function fy(o,c){if(!o)return null;const r=new Date(o),l=c?new Date(c):null,a=g=>{const f=g.getDate(),x=g.toLocaleString("en",{month:"short"}),m=g.getFullYear();return{day:f,month:x,year:m}},d=a(r);if(!l)return`${d.day} ${d.month} ${d.year}`;const u=a(l);return d.year===u.year?`${d.day} ${d.month}  ${u.day} ${u.month} ${u.year}`:`${d.day} ${d.month} ${d.year}  ${u.day} ${u.month} ${u.year}`}function Ps(o){if(!o)return null;if(typeof o=="string")return o;if(typeof o=="object"){if(o.title)return o.title;if(o.start_date){const c=fy(o.start_date,o.due_date);if(c)return c}if(o.iid!==void 0)return`Iteration ${o.iid}`;if(o.sequence!==void 0)return`Iteration ${o.sequence}`;if(o.id!==void 0)return`Iteration ${o.id}`}return null}function kt(o,c=null){const r=Ps(c);if(r)return r;if(!o||o.length===0)return null;const l=o.find(a=>{const d=a.toLowerCase();return d.startsWith("sprint")||d.startsWith("iteration")});return l||null}function my(o){if(!o||o.length===0)return"Medium";const c=o.find(l=>l.toLowerCase().includes("priority")||l.toLowerCase().includes("p1")||l.toLowerCase().includes("p2")||l.toLowerCase().includes("p3"));if(!c)return"Medium";const r=c.toLowerCase();return r.includes("high")||r.includes("p1")?"High":r.includes("low")||r.includes("p3")?"Low":"Medium"}function xa(o){return!o||o.length===0?!1:o.some(r=>{const l=r.toLowerCase(),a=l.includes("blocker")||l.includes("blocked");return a&&console.log(" BLOCKED ISSUE DETECTED:",{matchedLabel:r,allLabels:o}),a})}const $h=W.createContext();function yy({children:o,issues:c}){const[r,l]=W.useState([]),a=W.useMemo(()=>{if(!c||c.length===0)return[];const m=new Map;return c.forEach(b=>{const v=kt(b.labels,b.iteration);if(!v)return;if(!m.has(v)){const j=b.iteration?.start_date,w=b.iteration?.due_date;m.set(v,{name:v,startDate:j||null,dueDate:w||null,issueCount:0})}const D=m.get(v);D.issueCount++}),Array.from(m.values()).sort((b,v)=>b.startDate&&v.startDate?new Date(v.startDate)-new Date(b.startDate):b.startDate&&!v.startDate?-1:!b.startDate&&v.startDate?1:b.name.localeCompare(v.name))},[c]),d=W.useMemo(()=>c?r.length===0?c:c.filter(m=>{const b=kt(m.labels,m.iteration);return b&&r.includes(b)}):[],[c,r]),x={selectedIterations:r,availableIterations:a,filteredIssues:d,toggleIteration:m=>{l(b=>b.includes(m)?b.filter(v=>v!==m):[...b,m])},selectAllIterations:()=>{l([])},clearSelection:()=>{l([])},isFiltered:r.length>0};return e.jsx($h.Provider,{value:x,children:o})}function qi(){const o=W.useContext($h);if(!o)throw new Error("useIterationFilter must be used within IterationFilterProvider");return o}function vy({stats:o,healthScore:c,onRefresh:r,onConfigure:l,onChangeRole:a,loading:d}){return e.jsx("div",{className:"header",children:e.jsxs("div",{style:{width:"100%",padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"4px"},children:"GitHarmony"}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",marginBottom:"4px"},children:"Teams in Tune"}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:o&&e.jsxs(e.Fragment,{children:[o.total," Issues  ",o.open," Open  ",o.closed," Closed",o.blockers>0&&e.jsxs("span",{style:{marginLeft:"12px",color:"var(--danger)"},children:[o.blockers," Blockers"]})]})})]})}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[c&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"var(--bg-secondary)",borderRadius:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",textTransform:"uppercase",color:"var(--text-secondary)"},children:"Health Score"}),e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"700",color:"white",background:c.status==="green"?"var(--success)":c.status==="amber"?"var(--warning)":"var(--danger)"},children:c.score})]}),e.jsx("button",{className:"btn",onClick:r,disabled:d,style:{opacity:d?.6:1},children:d?"Loading...":"Refresh"}),e.jsx("button",{className:"btn btn-secondary",onClick:a,title:"Change your role to customize navigation",children:"Change Role"}),e.jsx("button",{className:"btn btn-primary",onClick:l,children:"Configure"})]})]})})}function by({activeView:o,onViewChange:c}){return e.jsx("div",{className:"tabs",children:dy.map(r=>e.jsx("button",{className:`tab ${o===r.id?"active":""}`,onClick:()=>c(r.id),children:r.label},r.id))})}const cd={USER_ROLE:"githarmony_user_role",VIEW_PREFERENCE:"githarmony_view_preference"};function dd(){return localStorage.getItem(cd.USER_ROLE)||"manager"}function jy(o){localStorage.setItem(cd.USER_ROLE,o)}function Sy(){return localStorage.getItem(cd.VIEW_PREFERENCE)||"grouped"}function Dy(o){const c=dd();return o.roles&&o.roles.includes(c)}function Gc(o){const c={executive:{label:"Executive",description:"High-level overview, strategic insights, and stakeholder reporting"},manager:{label:"Manager",description:"Full access to planning, execution, and team analytics"},team:{label:"Team Member",description:"Focus on execution, sprints, and operational metrics"}};return c[o]||c.manager}function By({onProjectChange:o}){const[c,r]=W.useState([]),[l,a]=W.useState([]),[d,u]=W.useState([]),[g,f]=W.useState(null),[x,m]=W.useState(null),[b,v]=W.useState(!1);W.useEffect(()=>{D()},[]);const D=()=>{const M=Qn();r(M);const R=Uo();a(R);const L=Hs();u(L);const O=fn();f(O);const y=$s();m(y)},j=M=>{da(M),f(M),m(null),v(!1),o&&o(M),window.location.reload()},w=M=>{Mh(M),m(M),f(null),v(!1),o&&o(`pod:${M}`),window.location.reload()},H=()=>{da("cross-project"),f("cross-project"),m(null),v(!1),o&&o("cross-project")};if(c.length<=1&&d.length===0)return null;const U=c.find(M=>M.id===g),G=g?.startsWith("group:")?l.find(M=>`group:${M.id}`===g):null,$=d.find(M=>M.id===x),B=g==="cross-project"?"Cross-Project View":$?` ${$.name}`:G?G.name:U?.name||"Select Project / Pod";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"13px",fontWeight:"600",color:"#6B7280"},children:"Project:"}),e.jsxs("div",{style:{position:"relative",minWidth:"200px"},children:[e.jsxs("button",{onClick:()=>v(!b),style:{width:"100%",padding:"6px 28px 6px 10px",background:"white",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:"500",color:"#1F2937",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s"},onMouseEnter:M=>{M.currentTarget.style.background="#F9FAFB",M.currentTarget.style.borderColor="#9CA3AF"},onMouseLeave:M=>{M.currentTarget.style.background="white",M.currentTarget.style.borderColor="#D1D5DB"},children:[e.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[g==="cross-project"&&" ",B]}),e.jsx("span",{style:{position:"absolute",right:"12px",fontSize:"12px",color:"#6B7280",transform:b?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>v(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}}),e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"400px",overflowY:"auto"},children:[e.jsxs("div",{onClick:H,style:{padding:"12px 16px",cursor:"pointer",background:g==="cross-project"?"#FEF2F2":"white",borderBottom:"1px solid #E5E7EB",transition:"background 0.2s"},onMouseEnter:M=>M.currentTarget.style.background="#FEF2F2",onMouseLeave:M=>{g!=="cross-project"&&(M.currentTarget.style.background="white")},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:"#E60000"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),"Cross-Project View"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px",marginLeft:"24px"},children:["Aggregate data across all ",c.length," projects"]})]}),d.length>0&&e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #E5E7EB"},children:[e.jsxs("div",{style:{padding:"6px 16px",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Pods (",d.length,")"]}),d.map(M=>{const R=x===M.id;return e.jsxs("div",{onClick:()=>w(M.id),style:{padding:"10px 16px",cursor:"pointer",background:R?"#FEF3C7":"white",borderLeft:R?"3px solid #F59E0B":"3px solid transparent",transition:"all 0.2s"},onMouseEnter:L=>L.currentTarget.style.background="#FEF3C7",onMouseLeave:L=>{R||(L.currentTarget.style.background="white")},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1F2937",marginBottom:"2px"},children:[" ",M.name]}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",fontFamily:"monospace"},children:M.groupPath})]},M.id)})]}),l.length>0&&e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #E5E7EB"},children:[e.jsxs("div",{style:{padding:"6px 16px",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Project Groups (",l.length,")"]}),l.map(M=>{const R=`group:${M.id}`,L=g===R;return e.jsxs("div",{onClick:()=>j(R),style:{padding:"10px 16px",cursor:"pointer",background:L?"#EFF6FF":"white",borderLeft:L?"3px solid #3B82F6":"3px solid transparent",transition:"all 0.2s"},onMouseEnter:O=>O.currentTarget.style.background="#EFF6FF",onMouseLeave:O=>{L||(O.currentTarget.style.background="white")},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1F2937",marginBottom:"2px"},children:[" ",M.name]}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[c.filter(O=>M.projectIds.includes(O.id)).length," projects"]})]},M.id)})]}),e.jsxs("div",{style:{padding:"8px 0"},children:[e.jsxs("div",{style:{padding:"6px 16px",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Projects (",c.length,")"]}),c.map(M=>{const R=M.id===g;return e.jsx("div",{onClick:()=>j(M.id),style:{padding:"10px 16px",cursor:"pointer",background:R?"#FEF2F2":"white",borderLeft:R?"3px solid #E60000":"3px solid transparent",transition:"all 0.2s"},onMouseEnter:L=>L.currentTarget.style.background="#FEF2F2",onMouseLeave:L=>{R||(L.currentTarget.style.background="white")},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:R?"600":"500",color:"#1F2937",marginBottom:"2px"},children:[M.name,R&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#E60000",fontWeight:"600"},children:""})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:M.projectId})]})})},M.id)})]}),e.jsx("div",{onClick:()=>{v(!1),o&&o("portfolio-manage")},style:{padding:"12px 16px",cursor:"pointer",background:"#F9FAFB",borderTop:"1px solid #E5E7EB",fontSize:"13px",fontWeight:"500",color:"#E60000",textAlign:"center",transition:"background 0.2s"},onMouseEnter:M=>M.currentTarget.style.background="#F3F4F6",onMouseLeave:M=>M.currentTarget.style.background="#F9FAFB",children:" Manage Portfolio Projects"})]})]})]})]})}function Cy({activeView:o,onViewChange:c,onProjectChange:r}){const[l,a]=W.useState(null),d=dd(),u=ed.map(v=>({...v,views:v.views.filter(D=>Dy(D))})).filter(v=>v.views.length>0),g=v=>{a(l===v?null:v)},f=v=>{c(v),a(null)},x=(v,D,j)=>{if(v.key==="Enter"||v.key===" ")v.preventDefault(),g(D);else if(v.key==="Escape"&&l===D)a(null);else if(v.key==="ArrowDown"&&l===D&&j.length>0){v.preventDefault();const w=v.currentTarget.parentElement.querySelector("[data-dropdown-item]");w&&w.focus()}},m=(v,D,j,w)=>{if(v.key==="Enter"||v.key===" ")v.preventDefault(),f(D);else if(v.key==="Escape")a(null),v.currentTarget.closest("[style]").querySelector("button").focus();else if(v.key==="ArrowDown"){v.preventDefault();const H=Math.min(w+1,j.length-1),U=v.currentTarget.parentElement.querySelectorAll("[data-dropdown-item]");U[H]&&U[H].focus()}else if(v.key==="ArrowUp"){v.preventDefault();const H=Math.max(w-1,0),U=v.currentTarget.parentElement.querySelectorAll("[data-dropdown-item]");U[H]&&U[H].focus()}},b=ed.find(v=>v.views.some(D=>D.id===o));return e.jsxs("div",{style:{display:"flex",gap:"4px",borderBottom:"1px solid var(--border-light)",background:"var(--bg-primary)",padding:"0 20px",position:"relative"},children:[u.map(v=>{const D=b?.id===v.id,j=l===v.id;return e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>g(v.id),onKeyDown:w=>x(w,v.id,v.views),"aria-label":`${v.label} navigation group`,"aria-expanded":j,"aria-haspopup":"true",style:{padding:"12px 20px",fontSize:"14px",fontWeight:"500",color:D?"var(--primary)":"var(--text-secondary)",background:"transparent",border:"none",borderBottom:`2px solid ${D?"var(--primary)":"transparent"}`,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px",outline:"none"},onMouseEnter:w=>{D||(w.target.style.color="var(--text-primary)")},onMouseLeave:w=>{D||(w.target.style.color="var(--text-secondary)")},onFocus:w=>{w.target.style.boxShadow="0 0 0 2px var(--primary)"},onBlur:w=>{w.target.style.boxShadow="none"},children:[e.jsx("span",{children:v.label}),e.jsx("span",{style:{fontSize:"10px",transition:"transform 0.2s",transform:j?"rotate(180deg)":"rotate(0deg)"},children:""})]}),j&&e.jsx("div",{role:"menu","aria-label":`${v.label} views`,style:{position:"absolute",top:"100%",left:0,background:"white",border:"1px solid var(--border-light)",borderRadius:"0 0 6px 6px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",minWidth:"200px",zIndex:1e3,marginTop:"-1px"},children:v.views.map((w,H)=>e.jsx("button",{"data-dropdown-item":!0,role:"menuitem","aria-label":`Navigate to ${w.label} view`,onClick:()=>f(w.id),onKeyDown:U=>m(U,w.id,v.views,H),style:{width:"100%",padding:"12px 20px",fontSize:"14px",fontWeight:w.id===o?"600":"400",color:w.id===o?"var(--primary)":"var(--text-primary)",background:w.id===o?"var(--bg-secondary)":"white",border:"none",textAlign:"left",cursor:"pointer",transition:"all 0.2s",borderBottom:"1px solid var(--border-light)",outline:"none"},onMouseEnter:U=>{w.id!==o&&(U.target.style.background="var(--bg-secondary)")},onMouseLeave:U=>{w.id!==o&&(U.target.style.background="white")},onFocus:U=>{U.target.style.boxShadow="inset 0 0 0 2px var(--primary)"},onBlur:U=>{U.target.style.boxShadow="none"},children:w.label},w.id))})]},v.id)}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"16px",padding:"12px 0"},children:[r&&e.jsx("div",{style:{marginRight:"8px"},children:e.jsx(By,{onProjectChange:r})}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:e.jsxs("span",{style:{background:"var(--bg-tertiary)",padding:"4px 12px",borderRadius:"12px",fontWeight:"600"},children:[d==="executive"&&"Executive",d==="manager"&&"Manager",d==="team"&&"Team"]})})]})]})}function Ey({show:o,onClose:c}){const[r,l]=W.useState(dd());if(!o)return null;const a=()=>{jy(r),c(),window.location.reload()},d=[{id:Os.EXECUTIVE,...Gc(Os.EXECUTIVE)},{id:Os.MANAGER,...Gc(Os.MANAGER)},{id:Os.TEAM,...Gc(Os.TEAM)}];return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal",onClick:u=>u.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Select Your Role"}),e.jsx("button",{onClick:c,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text-secondary)"},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"24px",color:"var(--text-secondary)"},children:"Choose your role to customize the navigation and features you see. This helps reduce clutter and focuses on the views most relevant to your responsibilities."}),e.jsx("div",{style:{display:"grid",gap:"16px"},children:d.map(u=>e.jsxs("div",{onClick:()=>l(u.id),style:{padding:"20px",border:`2px solid ${r===u.id?"var(--primary)":"var(--border-medium)"}`,borderRadius:"8px",cursor:"pointer",background:r===u.id?"var(--bg-secondary)":"white",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{children:e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)"},children:u.label})}),r===u.id&&e.jsx("span",{style:{marginLeft:"auto",color:"var(--primary)",fontSize:"20px"},children:""})]}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:u.description})]},u.id))}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"var(--bg-tertiary)",borderRadius:"6px",fontSize:"13px",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Note:"})," You can change your role anytime from the settings menu in the header."]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:c,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:a,children:"Save Role"})]})]})})}function wy(){const{selectedIterations:o,availableIterations:c,toggleIteration:r,clearSelection:l,isFiltered:a}=qi(),[d,u]=W.useState(!1),g=W.useRef(null);if(W.useEffect(()=>{function m(b){g.current&&!g.current.contains(b.target)&&u(!1)}if(d)return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[d]),c.length===0)return null;const f=o.length===0?"All Iterations":o.length===1?o[0]:`${o.length} iterations selected`,x=m=>{if(!m.startDate||!m.dueDate)return null;const b=new Date(m.startDate),v=new Date(m.dueDate),D=b.toLocaleDateString("de-DE",{month:"short",day:"numeric"}),j=v.toLocaleDateString("de-DE",{month:"short",day:"numeric",year:"numeric"});return`${D} - ${j}`};return e.jsxs("div",{ref:g,style:{position:"relative",width:"100%",maxWidth:"500px"},children:[e.jsxs("button",{onClick:()=>u(!d),style:{width:"100%",padding:"8px 36px 8px 12px",background:"white",border:`2px solid ${a?"#3B82F6":"#D1D5DB"}`,borderRadius:"6px",fontSize:"14px",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",color:a?"#1F2937":"#6B7280",fontWeight:a?"600":"400"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f}),e.jsx("span",{style:{position:"absolute",right:"12px",fontSize:"12px"},children:d?"":""})]}),d&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"1px solid #D1D5DB",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",maxHeight:"400px",overflowY:"auto",zIndex:1e3},children:[e.jsxs("div",{onClick:()=>{l(),u(!1)},style:{padding:"10px 12px",cursor:"pointer",background:o.length===0?"#EFF6FF":"white",borderBottom:"1px solid #E5E7EB",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",fontSize:"13px",color:"#1F2937"},onMouseEnter:m=>{o.length>0&&(m.target.style.background="#F9FAFB")},onMouseLeave:m=>{m.target.style.background=o.length===0?"#EFF6FF":"white"},children:[e.jsx("input",{type:"checkbox",checked:o.length===0,readOnly:!0,style:{cursor:"pointer"}}),e.jsxs("span",{children:["All Iterations (",c.reduce((m,b)=>m+b.issueCount,0)," issues)"]})]}),c.map(m=>{const b=o.includes(m.name),v=x(m);return e.jsxs("div",{onClick:()=>r(m.name),style:{padding:"10px 12px",cursor:"pointer",background:b?"#EFF6FF":"white",borderBottom:"1px solid #E5E7EB",display:"flex",alignItems:"flex-start",gap:"8px"},onMouseEnter:D=>{b||(D.target.style.background="#F9FAFB")},onMouseLeave:D=>{D.target.style.background=b?"#EFF6FF":"white"},children:[e.jsx("input",{type:"checkbox",checked:b,readOnly:!0,style:{marginTop:"2px",cursor:"pointer"}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m.name}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",display:"flex",gap:"8px"},children:[v&&e.jsx("span",{children:v}),e.jsx("span",{children:""}),e.jsxs("span",{children:[m.issueCount," issue",m.issueCount!==1?"s":""]})]})]})]},m.name)})]})]})}function zy({onSelect:o,onClose:c}){const[r,l]=W.useState(Uo()),[a,d]=W.useState(Qn()),[u,g]=W.useState(!1),[f,x]=W.useState(null),[m,b]=W.useState({name:"",projectIds:[],sharedGroupPaths:[""]});W.useEffect(()=>{d(Qn())},[]);const v=()=>{if(!m.name||m.projectIds.length===0){alert("Please provide a name and select at least one project");return}const $={...m,id:f?.id,sharedGroupPaths:m.sharedGroupPaths.filter(M=>M.trim()!=="")},B=ly($);l(B),b({name:"",projectIds:[],sharedGroupPaths:[""]}),g(!1),x(null)},D=$=>{x($),b({name:$.name,projectIds:$.projectIds||[],sharedGroupPaths:$.sharedGroupPaths&&$.sharedGroupPaths.length>0?$.sharedGroupPaths:[""]}),g(!0)},j=$=>{if(confirm("Delete this project group?")){const B=ay($);l(B)}},w=$=>{m.projectIds.includes($)?b({...m,projectIds:m.projectIds.filter(B=>B!==$)}):b({...m,projectIds:[...m.projectIds,$]})},H=()=>{b({...m,sharedGroupPaths:[...m.sharedGroupPaths,""]})},U=($,B)=>{const M=[...m.sharedGroupPaths];M[$]=B,b({...m,sharedGroupPaths:M})},G=$=>{m.sharedGroupPaths.length>1&&b({...m,sharedGroupPaths:m.sharedGroupPaths.filter((B,M)=>M!==$)})};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"4px"},children:"Project Groups"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6B7280"},children:"Create custom groupings of projects for flexible portfolio views"})]}),e.jsx("button",{onClick:()=>{g(!u),u&&(x(null),b({name:"",projectIds:[],sharedGroupPaths:[""]}))},style:{padding:"8px 16px",background:u?"#6B7280":"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:u?"Cancel":"+ New Group"})]}),u&&e.jsxs("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #E5E7EB"},children:[e.jsx("h4",{style:{marginTop:0},children:f?"Edit Project Group":"Create New Project Group"}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"600",fontSize:"14px"},children:"Group Name"}),e.jsx("input",{type:"text",value:m.name,onChange:$=>b({...m,name:$.target.value}),placeholder:"e.g., Astro Team Projects",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",fontSize:"14px"},children:["Select Projects (",m.projectIds.length," selected)"]}),a.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",background:"white",borderRadius:"6px",border:"1px solid #E5E7EB",color:"#6B7280"},children:"No projects configured. Add projects first in the Projects tab."}):e.jsx("div",{style:{display:"grid",gap:"8px",maxHeight:"200px",overflowY:"auto",padding:"8px",background:"white",borderRadius:"6px",border:"1px solid #E5E7EB"},children:a.map($=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:m.projectIds.includes($.id)?"#EFF6FF":"white",border:`1px solid ${m.projectIds.includes($.id)?"#3B82F6":"#E5E7EB"}`,borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:B=>{m.projectIds.includes($.id)||(B.currentTarget.style.background="#F9FAFB")},onMouseLeave:B=>{m.projectIds.includes($.id)||(B.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:m.projectIds.includes($.id),onChange:()=>w($.id),style:{width:"16px",height:"16px",cursor:"pointer"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"14px"},children:$.name}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:$.projectId})]})]},$.id))})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{style:{fontWeight:"600",fontSize:"14px"},children:"Shared Group Paths (Optional)"}),e.jsx("button",{type:"button",onClick:H,style:{padding:"4px 12px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"+ Add Path"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"8px"},children:"Add group paths to fetch additional epics beyond what's configured in individual projects"}),m.sharedGroupPaths.map(($,B)=>e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:$,onChange:M=>U(B,M.target.value),placeholder:"e.g., ubs-ag/shared-epics",style:{flex:1,padding:"8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}}),m.sharedGroupPaths.length>1&&e.jsx("button",{type:"button",onClick:()=>G(B),style:{padding:"8px 12px",background:"#DC2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},B))]}),e.jsx("button",{onClick:v,disabled:!m.name||m.projectIds.length===0,style:{width:"100%",padding:"10px",background:!m.name||m.projectIds.length===0?"#9CA3AF":"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:!m.name||m.projectIds.length===0?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px"},children:f?"Update Group":"Create Group"})]}),e.jsx("div",{children:r.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB",color:"#6B7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"No Project Groups Yet"}),e.jsx("div",{style:{fontSize:"14px"},children:"Create custom groupings to view subsets of your projects together"})]}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:r.map($=>{const B=a.filter(M=>$.projectIds.includes(M.id));return e.jsxs("div",{style:{padding:"16px",background:"white",border:"1px solid #E5E7EB",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0,marginBottom:"4px"},children:$.name}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280"},children:[B.length," project",B.length!==1?"s":"",$.sharedGroupPaths&&$.sharedGroupPaths.length>0&&e.jsxs("span",{children:["  ",$.sharedGroupPaths.length," shared group",$.sharedGroupPaths.length!==1?"s":""]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>{o&&o($.id)},style:{padding:"6px 12px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:"View"}),e.jsx("button",{onClick:()=>D($),style:{padding:"6px 12px",background:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Edit"}),e.jsx("button",{onClick:()=>j($.id),style:{padding:"6px 12px",background:"#DC2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Delete"})]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:B.map(M=>e.jsx("div",{style:{padding:"4px 8px",background:"#EFF6FF",color:"#1E40AF",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:M.name},M.id))}),$.sharedGroupPaths&&$.sharedGroupPaths.length>0&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Shared epic sources:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:$.sharedGroupPaths.map((M,R)=>e.jsx("div",{style:{padding:"4px 8px",background:"#FEF3C7",color:"#92400E",borderRadius:"4px",fontSize:"11px",fontFamily:"monospace"},children:M},R))})]})]},$.id)})})})]})}function ky({show:o,onClose:c,onSave:r,onProjectSwitch:l}){const a=Kt(),[d,u]=W.useState("connection"),[g,f]=W.useState(a.mode||"project"),[x,m]=W.useState(a.gitlabUrl||"https://gitlab.com"),[b,v]=W.useState(a.projectId||""),[D,j]=W.useState(a.groupPaths&&Array.isArray(a.groupPaths)?a.groupPaths:a.groupPath?[a.groupPath]:[""]),[w,H]=W.useState(a.token||""),[U,G]=W.useState(a.filter2025||!1),[$,B]=W.useState(Qn()),[M,R]=W.useState(!1),[L,O]=W.useState(null),[y,C]=W.useState({name:"",gitlabUrl:"https://gitlab.com",token:"",projectId:"",groupPaths:[""]}),[I,_]=W.useState(Hs()),[P,X]=W.useState(!1),[z,T]=W.useState(null),[N,K]=W.useState({name:"",gitlabUrl:"https://gitlab.com",token:"",groupPath:""});if(!o)return null;const te=()=>{const pe=D.filter(De=>De.trim()!==""),Qe={gitlabUrl:x,projectId:b,groupPath:pe[0]||"",token:w,mode:g,filter2025:U};ad(Qe),r(),c()},q=()=>{j([...D,""])},k=(pe,Qe)=>{const De=[...D];De[pe]=Qe,j(De)},A=pe=>{D.length>1&&j(D.filter((Qe,De)=>De!==pe))},V=()=>{C({...y,groupPaths:[...y.groupPaths,""]})},Q=(pe,Qe)=>{const De=[...y.groupPaths];De[pe]=Qe,C({...y,groupPaths:De})},ae=pe=>{y.groupPaths.length>1&&C({...y,groupPaths:y.groupPaths.filter((Qe,De)=>De!==pe)})},re=()=>{if(!y.name||!y.token||!y.projectId){alert("Please fill in all required fields");return}const pe=y.groupPaths.filter(jt=>jt.trim()!==""),Qe={...y,groupPath:pe[0]||"",groupPaths:pe},De=Gm(Qe);B(De),C({name:"",gitlabUrl:"https://gitlab.com",token:"",projectId:"",groupPaths:[""]}),R(!1),O(null)},ue=pe=>{O(pe.id),C({id:pe.id,name:pe.name,gitlabUrl:pe.gitlabUrl,token:pe.token,projectId:pe.projectId,groupPaths:pe.groupPaths&&Array.isArray(pe.groupPaths)&&pe.groupPaths.length>0?pe.groupPaths:pe.groupPath?[pe.groupPath]:[""]}),R(!0)},fe=()=>{R(!1),O(null),C({name:"",gitlabUrl:"https://gitlab.com",token:"",projectId:"",groupPath:""})},xe=pe=>{if(!confirm("Are you sure you want to remove this project?"))return;const Qe=Vm(pe);B(Qe)},ze=pe=>{da(pe),l&&l(pe),c()},ge=()=>{if(!N.name||!N.token||!N.groupPath){alert("Please fill in all required fields (Name, Token, and Group Path/ID)");return}const pe=qm(N);_(pe),K({name:"",gitlabUrl:"https://gitlab.com",token:"",groupPath:""}),X(!1),T(null)},Be=pe=>{T(pe.id),K({id:pe.id,name:pe.name,gitlabUrl:pe.gitlabUrl,token:pe.token,groupPath:pe.groupPath}),X(!0)},Je=()=>{X(!1),T(null),K({name:"",gitlabUrl:"https://gitlab.com",token:"",groupPath:""})},Ae=pe=>{if(!confirm("Are you sure you want to remove this group/pod?"))return;const Qe=Ym(pe);_(Qe)},Ye=pe=>{Mh(pe),l&&l(`pod:${pe}`),c()};return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal",onClick:pe=>pe.stopPropagation(),style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("h2",{children:"Configuration"})}),e.jsx("button",{className:"btn",onClick:c,style:{padding:"4px 8px"},children:""})]}),e.jsxs("div",{className:"tabs",style:{borderBottom:"1px solid var(--border-light)",margin:0},children:[e.jsx("button",{className:`tab ${d==="connection"?"active":""}`,onClick:()=>u("connection"),children:"Connection"}),e.jsx("button",{className:`tab ${d==="projects"?"active":""}`,onClick:()=>u("projects"),children:"Projects"}),e.jsx("button",{className:`tab ${d==="groups"?"active":""}`,onClick:()=>u("groups"),children:"Project Groups"}),e.jsx("button",{className:`tab ${d==="pods"?"active":""}`,onClick:()=>u("pods"),children:"Pods"})]}),e.jsxs("div",{className:"modal-body",children:[d==="connection"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GitLab URL"}),e.jsx("input",{type:"text",className:"form-input",value:x,onChange:pe=>m(pe.target.value),placeholder:"https://gitlab.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mode"}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",border:`2px solid ${g==="project"?"#3B82F6":"#E5E7EB"}`,borderRadius:"8px",cursor:"pointer",flex:1,background:g==="project"?"#EFF6FF":"white"},children:[e.jsx("input",{type:"radio",name:"mode",value:"project",checked:g==="project",onChange:pe=>f(pe.target.value),style:{accentColor:"#3B82F6"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#1F2937"},children:"Single Project"}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px"},children:"Fetch data from one specific project"})]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",border:`2px solid ${g==="group"?"#3B82F6":"#E5E7EB"}`,borderRadius:"8px",cursor:"pointer",flex:1,background:g==="group"?"#EFF6FF":"white"},children:[e.jsx("input",{type:"radio",name:"mode",value:"group",checked:g==="group",onChange:pe=>f(pe.target.value),style:{accentColor:"#3B82F6"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#1F2937"},children:"Entire Group"}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px"},children:"Aggregate data from all projects in a group"})]})]})]}),e.jsxs("div",{className:"text-small text-muted",style:{marginTop:"8px",padding:"8px",background:"#F0F9FF",borderRadius:"4px",border:"1px solid #BFDBFE"},children:[e.jsx("strong",{children:" Tip:"})," Use ",e.jsx("strong",{children:"Group Mode"})," for multi-project pods/teams. This will automatically fetch issues from all projects and subgroups."]})]}),g==="project"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Project ID"}),e.jsx("input",{type:"text",className:"form-input",value:b,onChange:pe=>v(pe.target.value),placeholder:"123 or group/project"}),e.jsx("div",{className:"text-small text-muted",style:{marginTop:"4px"},children:"Find this in your GitLab project settings"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{className:"form-label",style:{marginBottom:0},children:g==="group"?"Group Path (Required)":"Group Paths (Optional)"}),g==="project"&&e.jsx("button",{type:"button",onClick:q,style:{padding:"4px 12px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"+ Add Group"})]}),D.map((pe,Qe)=>e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",className:"form-input",value:pe,onChange:De=>k(Qe,De.target.value),placeholder:g==="group"?"12345 or GMDP Nova or parent-group/gmdp-nova":"my-group or parent-group/sub-group",style:{flex:1}}),g==="project"&&D.length>1&&e.jsx("button",{type:"button",onClick:()=>A(Qe),style:{padding:"8px 12px",background:"#DC2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},Qe)),e.jsx("div",{className:"text-small text-muted",style:{marginTop:"4px"},children:g==="group"?'Use numeric group ID (e.g., "12345") or group path (e.g., "GMDP Nova"). All projects in subgroups will be included automatically.':"Required for Epic support (Premium/Ultimate only). Add multiple groups to fetch epics from different parts of your hierarchy."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Access Token"}),e.jsx("input",{type:"password",className:"form-input",value:w,onChange:pe=>H(pe.target.value),placeholder:"glpat-xxxxxxxxxxxxxxxxxxxx"}),e.jsxs("div",{className:"text-small text-muted",style:{marginTop:"4px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Required:"})," Personal access token with ",e.jsx("code",{children:"api"})," and ",e.jsx("code",{children:"read_api"})," scopes"]}),e.jsxs("div",{style:{color:"#DC2626",fontSize:"13px"},children:[" ",e.jsx("strong",{children:"For Epic support:"})," Token must have group-level access. Project-only tokens cannot fetch epics."]}),e.jsx("div",{style:{marginTop:"6px",fontSize:"12px"},children:"Create at: GitLab  User Settings  Access Tokens (not Project Settings)"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("input",{type:"checkbox",id:"filter2025",checked:U,onChange:pe=>G(pe.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsxs("label",{htmlFor:"filter2025",style:{cursor:"pointer",flex:1,margin:0},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:"Filter data by year 2025+"}),e.jsxs("div",{className:"text-small text-muted",children:["When enabled, only shows issues, epics, and milestones with dates ",">="," 2025-01-01"]})]})]})})]}),d==="projects"&&e.jsx(e.Fragment,{children:e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:"Manage Projects"}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280"},children:"Add multiple projects and switch between them"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{M?fe():R(!0)},children:M?"Cancel":"+ Add Project"})]}),M&&e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"20px",background:"#F9FAFB"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px"},children:L?"Edit Project":"Add New Project"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Project Name"}),e.jsx("input",{type:"text",className:"form-input",value:y.name,onChange:pe=>C({...y,name:pe.target.value}),placeholder:"My Project"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GitLab URL"}),e.jsx("input",{type:"text",className:"form-input",value:y.gitlabUrl,onChange:pe=>C({...y,gitlabUrl:pe.target.value}),placeholder:"https://gitlab.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Project ID"}),e.jsx("input",{type:"text",className:"form-input",value:y.projectId,onChange:pe=>C({...y,projectId:pe.target.value}),placeholder:"123 or group/project"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("label",{className:"form-label",style:{marginBottom:0},children:"Group Paths (Optional)"}),e.jsx("button",{type:"button",onClick:V,style:{padding:"4px 12px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"+ Add Group"})]}),y.groupPaths.map((pe,Qe)=>e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",className:"form-input",value:pe,onChange:De=>Q(Qe,De.target.value),placeholder:"my-group or parent-group/sub-group",style:{flex:1}}),y.groupPaths.length>1&&e.jsx("button",{type:"button",onClick:()=>ae(Qe),style:{padding:"8px 12px",background:"#DC2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},Qe))]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Access Token"}),e.jsx("input",{type:"password",className:"form-input",value:y.token,onChange:pe=>C({...y,token:pe.target.value}),placeholder:"glpat-xxxxxxxxxxxxxxxxxxxx"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn",onClick:fe,children:"Cancel"}),e.jsxs("button",{className:"btn btn-primary",onClick:re,children:[L?"Update":"Add"," Project"]})]})]}),$.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Projects"}),e.jsx("p",{className:"text-muted",children:"Add your first project to get started"})]}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:$.map(pe=>e.jsxs("div",{className:"card",style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:pe.name}),e.jsxs("p",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"4px"},children:[pe.projectId,"  ",pe.gitlabUrl]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn",onClick:()=>ze(pe.id),style:{fontSize:"13px"},children:"Switch To"}),e.jsx("button",{className:"btn",onClick:()=>ue(pe),style:{fontSize:"13px"},children:"Edit"}),e.jsx("button",{className:"btn",onClick:()=>xe(pe.id),style:{fontSize:"13px",color:"#DC2626"},children:"Remove"})]})]},pe.id))})]})}),d==="groups"&&e.jsx(zy,{onSelect:pe=>{l&&(da(`group:${pe}`),l(`group:${pe}`),c())},onClose:c}),d==="pods"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"4px"},children:"GitLab Groups (Pods)"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:"var(--text-muted)"},children:"Configure multiple GitLab groups to track different teams/pods separately"})]}),e.jsx("button",{onClick:()=>X(!P),style:{padding:"8px 16px",background:P?"#6B7280":"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:P?"Cancel":"+ Add Pod"})]}),P&&e.jsxs("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #E5E7EB"},children:[e.jsx("h4",{style:{marginTop:0},children:z?"Edit Pod":"Add New Pod"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pod Name"}),e.jsx("input",{type:"text",className:"form-input",value:N.name,onChange:pe=>K({...N,name:pe.target.value}),placeholder:"e.g., Nova Pod, Astro Team"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"GitLab URL"}),e.jsx("input",{type:"text",className:"form-input",value:N.gitlabUrl,onChange:pe=>K({...N,gitlabUrl:pe.target.value}),placeholder:"https://gitlab.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Group ID or Path"}),e.jsx("input",{type:"text",className:"form-input",value:N.groupPath,onChange:pe=>K({...N,groupPath:pe.target.value}),placeholder:"12345 or GMDP Nova or parent-group/gmdp-nova"}),e.jsx("div",{className:"text-small text-muted",style:{marginTop:"4px"},children:'Use numeric group ID (e.g., "12345") or group path (e.g., "GMDP Nova"). All projects in subgroups will be included automatically.'})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Access Token"}),e.jsx("input",{type:"password",className:"form-input",value:N.token,onChange:pe=>K({...N,token:pe.target.value}),placeholder:"glpat-xxxxxxxxxxxxxxxxxxxx"}),e.jsx("div",{className:"text-small text-muted",style:{marginTop:"4px"},children:"Requires read_api scope"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:ge,style:{flex:1,padding:"10px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:z?"Update Pod":"Add Pod"}),e.jsx("button",{onClick:Je,style:{padding:"10px 20px",background:"#6B7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]}),I.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB",color:"#6B7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"No Pods Configured"}),e.jsx("div",{style:{fontSize:"14px"},children:"Add your first GitLab group to track team metrics"})]}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:I.map(pe=>e.jsx("div",{style:{padding:"16px",background:"white",border:"1px solid #E5E7EB",borderRadius:"8px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0,marginBottom:"4px"},children:pe.name}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",fontFamily:"monospace"},children:pe.groupPath}),e.jsx("div",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"4px"},children:pe.gitlabUrl})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>Ye(pe.id),style:{padding:"6px 12px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:"View"}),e.jsx("button",{onClick:()=>Be(pe),style:{padding:"6px 12px",background:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Edit"}),e.jsx("button",{onClick:()=>Ae(pe.id),style:{padding:"6px 12px",background:"#DC2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},children:"Delete"})]})]})},pe.id))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:c,children:"Close"}),d==="connection"&&e.jsx("button",{className:"btn btn-primary",onClick:te,disabled:!x||!b||!w,children:"Save Configuration"})]})]})})}function Ph(o,c){const r=new Map;return o.forEach(l=>{const a=l.labels?.find(d=>d.toLowerCase().startsWith("initiative::"));if(a){const d=a.toLowerCase(),u=a.replace(/initiative::/i,"").split("::")[0].replace(/-/g," ").replace(/\b\w/g,g=>g.toUpperCase());r.has(d)||r.set(d,{id:d,name:u,label:a,epics:[],issues:[],dueDate:null,startDate:null}),r.get(d).epics.push(l)}}),r.forEach(l=>{const a=new Set;l.epics.forEach(x=>{c.filter(b=>b.epic?.id===x.id||b.labels?.some(v=>v.toLowerCase()===l.label.toLowerCase())).forEach(b=>a.add(b.id))}),l.issues=Array.from(a).map(x=>c.find(m=>m.id===x)).filter(Boolean);const d=l.epics.filter(x=>x.due_date).map(x=>new Date(x.due_date)),u=l.epics.filter(x=>x.start_date).map(x=>new Date(x.start_date));d.length>0&&(l.dueDate=new Date(Math.max(...d))),u.length>0&&(l.startDate=new Date(Math.min(...u)));const g=l.issues.length,f=l.issues.filter(x=>x.state==="closed").length;l.progress=g>0?Math.round(f/g*100):0,l.totalIssues=g,l.closedIssues=f,l.openIssues=g-f,l.status=Ay(l.progress,l.dueDate,l.startDate)}),Array.from(r.values()).sort((l,a)=>l.dueDate&&a.dueDate?new Date(l.dueDate)-new Date(a.dueDate):l.dueDate?-1:a.dueDate?1:l.name.localeCompare(a.name))}function Ay(o,c,r){if(!c)return o>=80?"on-track":"at-risk";const l=new Date,a=new Date(c),d=r?new Date(r):new Date(a.getTime()-2160*60*60*1e3),u=a-d,g=l-d,f=Math.max(0,Math.min(100,g/u*100));return l>a&&o<100||o<f-20?"delayed":o<f-10?"at-risk":"on-track"}function Ty(o){const c={"on-track":{label:"On Track",icon:"",color:"#059669",background:"#D1FAE5"},"at-risk":{label:"At Risk",icon:"",color:"#D97706",background:"#FEF3C7"},delayed:{label:"Delayed",icon:"",color:"#DC2626",background:"#FEE2E2"}};return c[o]||c["at-risk"]}function Fy(o){if(!o)return"No date set";const c=new Date(o),r={month:"short",day:"numeric",year:"numeric"};return c.toLocaleDateString("en-US",r)}function Ry(o,c=30){const r=new Date;r.setHours(0,0,0,0);const l=new Date(r.getTime()+c*24*60*60*1e3);return o.filter(a=>{if(!a.due_date)return!1;const d=new Date(a.due_date);return d>=r&&d<=l}).map(a=>({...a,daysUntil:Uh(a.due_date),status:My(a)})).sort((a,d)=>a.daysUntil-d.daysUntil)}function Uh(o){const c=new Date;c.setHours(0,0,0,0);const l=new Date(o)-c;return Math.round(l/(1e3*60*60*24))}function My(o){const c=Uh(o.due_date);if(c<0&&o.state!=="closed")return"overdue";let r=0;return o.stats&&o.stats.total_issues>0&&(r=o.stats.closed_issues/o.stats.total_issues*100),r>=80||c>7?"on-track":"at-risk"}function Iy(o){const c={"on-track":{label:"On Track",icon:"",color:"#059669",background:"#D1FAE5"},"at-risk":{label:"At Risk",icon:"",color:"#D97706",background:"#FEF3C7"},overdue:{label:"Overdue",icon:"",color:"#DC2626",background:"#FEE2E2"}};return c[o]||c["at-risk"]}function Ny(o){const{initiatives:c,healthScore:r,burnupData:l,cycleTimeMetrics:a,deliveryConfidence:d,monthOverMonthMetrics:u,recentDecisions:g,upcomingMilestones:f,teamPerformance:x,forecastAccuracy:m}=o,b=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),v=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Executive Dashboard Report - ${b}</title>
  <style>
    @media print {
      body { margin: 0; }
      .page-break { page-break-before: always; }
      @page { margin: 0.75in; }
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.5;
      color: #111827;
      max-width: 100%;
      margin: 0;
      padding: 20px;
    }

    .content-wrapper {
      max-width: 100%;
      padding: 0;
      margin: 0 auto;
    }

    h1 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #111827;
    }

    h2 {
      font-size: 20px;
      font-weight: 600;
      margin-top: 32px;
      margin-bottom: 16px;
      color: #111827;
      border-bottom: 2px solid #E5E7EB;
      padding-bottom: 8px;
    }

    h3 {
      font-size: 16px;
      font-weight: 600;
      margin-top: 24px;
      margin-bottom: 12px;
      color: #374151;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 3px solid #2563EB;
    }

    .subtitle {
      font-size: 14px;
      color: #6B7280;
      margin-top: 8px;
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .metric-card {
      padding: 16px;
      background: #F9FAFB;
      border-radius: 8px;
      border: 1px solid #E5E7EB;
    }

    .metric-label {
      font-size: 11px;
      color: #6B7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .metric-value {
      font-size: 28px;
      font-weight: 700;
      color: #2563EB;
    }

    .metric-subtext {
      font-size: 12px;
      color: #6B7280;
      margin-top: 4px;
    }

    .confidence-section {
      background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%);
      border: 2px solid #E5E7EB;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .confidence-score {
      text-align: center;
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .factors-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .factor-card {
      padding: 12px;
      background: white;
      border-radius: 8px;
      border: 1px solid #E5E7EB;
      text-align: center;
    }

    .initiative-list, .decision-list, .milestone-list {
      margin-bottom: 20px;
    }

    .initiative-item, .decision-item, .milestone-item {
      padding: 12px;
      background: #F9FAFB;
      border-radius: 8px;
      margin-bottom: 12px;
      border-left: 4px solid #2563EB;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-on-track { background: #D1FAE5; color: #065F46; }
    .status-at-risk { background: #FEF3C7; color: #92400E; }
    .status-off-track { background: #FEE2E2; color: #991B1B; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #E5E7EB;
    }

    th {
      background: #F9FAFB;
      font-weight: 600;
      color: #374151;
    }

    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #E5E7EB;
      text-align: center;
      font-size: 12px;
      color: #6B7280;
    }

    .team-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .team-member-card {
      padding: 10px;
      background: #F9FAFB;
      border-radius: 6px;
      border: 1px solid #E5E7EB;
      text-align: center;
    }

    .burnout-alert {
      padding: 12px;
      background: #FEE2E2;
      border: 2px solid #DC2626;
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .risk-item {
      padding: 10px;
      background: white;
      border-radius: 6px;
      border-left: 4px solid #DC2626;
      margin-bottom: 8px;
    }

    .trend-metric {
      padding: 12px;
      background: #F9FAFB;
      border-radius: 8px;
      border: 1px solid #E5E7EB;
    }

    .trend-positive { color: #16A34A; }
    .trend-negative { color: #DC2626; }
    .trend-neutral { color: #6B7280; }

    .chart-placeholder {
      width: 100%;
      height: 200px;
      background: #F9FAFB;
      border: 1px solid #E5E7EB;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6B7280;
      font-size: 12px;
      margin-bottom: 20px;
    }

    .workload-bar {
      display: flex;
      align-items: center;
      padding: 8px 12px;
      background: #F9FAFB;
      border-radius: 6px;
      margin-bottom: 6px;
    }

    .workload-bar.overloaded {
      background: #FEF3C7;
      border-left: 3px solid #F59E0B;
    }

    .workload-bar.on-leave {
      background: #F3F4F6;
      opacity: 0.7;
    }

    .forecast-stats-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      margin-bottom: 16px;
    }

    .reliability-factors-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-bottom: 16px;
    }

    @media screen {
      .no-print {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
      }

      .print-button {
        padding: 12px 24px;
        background: #2563EB;
        color: white;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      }

      .print-button:hover {
        background: #1D4ED8;
      }
    }

    @media print {
      .no-print { display: none; }
    }
  </style>
</head>
<body>
  <div class="no-print">
    <button class="print-button" onclick="window.print()">Print / Save as PDF</button>
  </div>

  <div class="header">
    <h1>Executive Dashboard Report</h1>
    <div class="subtitle">${b}</div>
  </div>

  \x3C!-- Key Performance Indicators -->
  <h2>Key Performance Indicators</h2>
  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-label">Health Score</div>
      <div class="metric-value" style="color: ${r?.status==="green"?"#16A34A":r?.status==="amber"?"#EAB308":"#DC2626"}">
        ${r?.score||0}
      </div>
      <div class="metric-subtext">${r?.status||"unknown"}</div>
    </div>

    ${l?`
    <div class="metric-card">
      <div class="metric-label">Total Scope</div>
      <div class="metric-value">${l.totalScope}</div>
      <div class="metric-subtext">${l.completed} completed</div>
    </div>

    <div class="metric-card">
      <div class="metric-label">Scope Growth</div>
      <div class="metric-value" style="color: ${l.scopeGrowthPercent>25?"#DC2626":"#2563EB"}">
        ${l.scopeGrowthPercent}%
      </div>
      <div class="metric-subtext">+${l.scopeGrowth} items</div>
    </div>
    `:""}

    ${a?`
    <div class="metric-card">
      <div class="metric-label">Cycle Time</div>
      <div class="metric-value">${a.avgCycleTime}</div>
      <div class="metric-subtext">days average</div>
    </div>
    `:""}
  </div>

  \x3C!-- Delivery Confidence Score -->
  ${d?`
  <h2>Delivery Confidence Score</h2>
  <div class="confidence-section">
    <div class="confidence-score" style="color: ${d.statusColor}">
      ${d.score}%
    </div>
    <div style="text-align: center; font-size: 14px; font-weight: 600; text-transform: uppercase; color: ${d.statusColor}; margin-bottom: 20px;">
      ${d.status} CONFIDENCE
    </div>

    <h3>Confidence Factors</h3>
    <div class="factors-grid">
      ${d.factors.map(j=>{const w=Math.round(j.score/j.maxScore*100);return`
        <div class="factor-card">
          <div style="font-size: 11px; color: #6B7280; margin-bottom: 6px;">${j.name}</div>
          <div style="font-size: 20px; font-weight: 600; color: ${j.status==="good"?"#16A34A":j.status==="warning"?"#EAB308":"#DC2626"};">
            ${w}%
          </div>
          <div style="font-size: 10px; color: #6B7280; margin-top: 4px;">${j.detail}</div>
        </div>
        `}).join("")}
    </div>

    ${d.recommendations.length>0?`
    <h3>Top Recommendations</h3>
    <ul>
      ${d.recommendations.slice(0,3).map(j=>`
        <li><strong>[${j.priority.toUpperCase()}]</strong> ${j.title}: ${j.description}</li>
      `).join("")}
    </ul>
    `:""}
  </div>
  `:""}

  \x3C!-- Active Initiatives -->
  ${c&&c.length>0?`
  <div class="page-break"></div>
  <h2>Active Initiatives</h2>
  <div class="initiative-list">
    ${c.slice(0,5).map(j=>`
      <div class="initiative-item">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
          <strong style="font-size: 15px;">${j.name}</strong>
          <span class="status-badge status-${j.status.replace(" ","-")}">
            ${j.status}
          </span>
        </div>
        <div style="font-size: 13px; color: #6B7280; margin-bottom: 8px;">
          ${j.epics.length} epic(s)  ${j.totalIssues} issue(s)
        </div>
        <div style="font-size: 13px;">
          <strong>Progress:</strong> ${j.progress}%
          ${j.dueDate?`  <strong>Due:</strong> ${new Date(j.dueDate).toLocaleDateString()}`:""}
        </div>
      </div>
    `).join("")}
  </div>
  `:""}

  \x3C!-- Upcoming Milestones -->
  ${f&&f.length>0?`
  <h2>Upcoming Milestones (Next 30 Days)</h2>
  <div class="milestone-list">
    ${f.slice(0,5).map(j=>`
      <div class="milestone-item">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
          <strong style="font-size: 15px;">${j.title}</strong>
          <span style="font-weight: 600; color: #2563EB;">${j.daysUntil} day(s)</span>
        </div>
        <div style="font-size: 13px; color: #6B7280;">
          ${j.description||"No description"}
        </div>
      </div>
    `).join("")}
  </div>
  `:""}

  \x3C!-- Recent Decisions -->
  ${g&&g.length>0?`
  <h2>Recent Strategic Decisions</h2>
  <div class="decision-list">
    ${g.slice(0,5).map(j=>`
      <div class="decision-item">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
          <strong style="font-size: 14px;">${j.title}</strong>
          <span style="font-size: 11px; font-weight: 600; text-transform: uppercase; color: #DC2626;">
            ${j.impact}
          </span>
        </div>
        <div style="font-size: 12px; color: #6B7280; margin-bottom: 6px;">
          ${j.description}
        </div>
        <div style="font-size: 11px; color: #9CA3AF;">
          ${j.category}  ${j.date.toLocaleDateString()}
        </div>
      </div>
    `).join("")}
  </div>
  `:""}

  \x3C!-- Burnup Chart Visualization -->
  ${l&&l.dataPoints&&l.dataPoints.length>0?(()=>{const j=l.dataPoints,w=700,H=300,U={top:40,right:20,bottom:50,left:60},G=w-U.left-U.right,$=H-U.top-U.bottom,B=Math.max(...j.map(P=>P.totalScope),10),M=Math.ceil(B*1.1/10)*10,R=P=>U.left+P/(j.length-1||1)*G,L=P=>U.top+$-P/M*$,O=j.map((P,X)=>{const z=R(X),T=L(P.totalScope);return`${X===0?"M":"L"} ${z} ${T}`}).join(" "),y=j.map((P,X)=>{const z=R(X),T=L(P.completed);return`${X===0?"M":"L"} ${z} ${T}`}).join(" "),C=[];for(let P=0;P<=5;P++){const X=Math.round(M/5*P),z=L(X);C.push({value:X,y:z})}const I=Math.max(1,Math.floor(j.length/6)),_=j.filter((P,X)=>X%I===0||X===j.length-1).map((P,X)=>{const z=X*I;return z>=j.length?null:{label:new Date(P.date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"}),x:R(z)}}).filter(P=>P!==null);return`
  <div class="page-break"></div>
  <h2>Burnup Chart - Scope vs Completion</h2>
  <div style="margin-bottom: 20px;">
    <svg width="${w}" height="${H}" style="font-family: system-ui, sans-serif; display: block; margin: 0 auto;">
      \x3C!-- Background grid -->
      ${C.map((P,X)=>`
        <line x1="${U.left}" y1="${P.y}" x2="${U.left+G}" y2="${P.y}"
              stroke="#E5E7EB" stroke-width="1" stroke-dasharray="2,2"/>
      `).join("")}

      \x3C!-- Y Axis -->
      <line x1="${U.left}" y1="${U.top}" x2="${U.left}" y2="${U.top+$}"
            stroke="#9CA3AF" stroke-width="2"/>

      \x3C!-- X Axis -->
      <line x1="${U.left}" y1="${U.top+$}" x2="${U.left+G}" y2="${U.top+$}"
            stroke="#9CA3AF" stroke-width="2"/>

      \x3C!-- Y Axis Labels -->
      ${C.map(P=>`
        <text x="${U.left-10}" y="${P.y+4}" text-anchor="end" font-size="11" fill="#6B7280">
          ${P.value}
        </text>
      `).join("")}

      \x3C!-- X Axis Labels -->
      ${_.map(P=>`
        <text x="${P.x}" y="${U.top+$+20}" text-anchor="middle" font-size="10" fill="#6B7280">
          ${P.label}
        </text>
      `).join("")}

      \x3C!-- Fill area under completed line -->
      <path d="${y} L ${R(j.length-1)} ${U.top+$} L ${U.left} ${U.top+$} Z"
            fill="#10B981" fill-opacity="0.1"/>

      \x3C!-- Total Scope Line (red) -->
      <path d="${O}" fill="none" stroke="#EF4444" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>

      \x3C!-- Completed Work Line (green) -->
      <path d="${y}" fill="none" stroke="#10B981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>

      \x3C!-- Data points -->
      ${j.map((P,X)=>{const z=R(X),T=L(P.totalScope),N=L(P.completed);return`
        <circle cx="${z}" cy="${T}" r="3" fill="#EF4444" stroke="white" stroke-width="2"/>
        <circle cx="${z}" cy="${N}" r="3" fill="#10B981" stroke="white" stroke-width="2"/>
        `}).join("")}

      \x3C!-- Legend -->
      <g transform="translate(${U.left+20}, ${U.top-20})">
        <line x1="0" y1="0" x2="30" y2="0" stroke="#EF4444" stroke-width="2.5"/>
        <text x="35" y="4" font-size="11" fill="#374151">Total Scope</text>
        <line x1="130" y1="0" x2="160" y2="0" stroke="#10B981" stroke-width="2.5"/>
        <text x="165" y="4" font-size="11" fill="#374151">Completed</text>
      </g>

      \x3C!-- Chart Title -->
      <text x="${U.left+G/2}" y="20" text-anchor="middle" font-size="13" font-weight="600" fill="#111827">
        Burnup Chart - Progress Over Time
      </text>

      \x3C!-- Y Axis Label -->
      <text x="-${H/2}" y="15" text-anchor="middle" font-size="11" fill="#6B7280" transform="rotate(-90)">
        Issue Count
      </text>
    </svg>
  </div>

  \x3C!-- Summary Stats -->
  <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px;">
    <div class="metric-card">
      <div class="metric-label">Total Scope</div>
      <div class="metric-value" style="font-size: 24px; color: #EF4444;">
        ${l.totalScope}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Completed</div>
      <div class="metric-value" style="font-size: 24px; color: #10B981;">
        ${l.completed}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Remaining</div>
      <div class="metric-value" style="font-size: 24px; color: #6B7280;">
        ${l.totalScope-l.completed}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Progress</div>
      <div class="metric-value" style="font-size: 24px; color: #2563EB;">
        ${Math.round(l.completed/l.totalScope*100)}%
      </div>
    </div>
  </div>
    `})():""}

  \x3C!-- Trailing 30-Day Trends -->
  ${u?`
  <h2>Trailing 30-Day Trends</h2>
  <div style="font-size: 13px; color: #6B7280; margin-bottom: 16px;">
    Comparing ${u.currentPeriod.name} vs ${u.previousPeriod.name}
  </div>
  <div class="metrics-grid">
    <div class="trend-metric">
      <div class="metric-label">Issues Created</div>
      <div class="metric-value" style="font-size: 24px;">
        ${u.currentPeriod.issues}
      </div>
      <div class="metric-subtext ${u.percentChanges.issues>0?"trend-positive":u.percentChanges.issues<0?"trend-negative":"trend-neutral"}">
        ${u.percentChanges.issues>0?"":u.percentChanges.issues<0?"":""}
        ${Math.abs(u.percentChanges.issues)}%
      </div>
    </div>
    <div class="trend-metric">
      <div class="metric-label">Issues Completed</div>
      <div class="metric-value" style="font-size: 24px;">
        ${u.currentPeriod.completed}
      </div>
      <div class="metric-subtext ${u.percentChanges.completed>0?"trend-positive":u.percentChanges.completed<0?"trend-negative":"trend-neutral"}">
        ${u.percentChanges.completed>0?"":u.percentChanges.completed<0?"":""}
        ${Math.abs(u.percentChanges.completed)}%
      </div>
    </div>
    <div class="trend-metric">
      <div class="metric-label">Story Points</div>
      <div class="metric-value" style="font-size: 24px;">
        ${u.currentPeriod.points}
      </div>
      <div class="metric-subtext ${u.percentChanges.points>0?"trend-positive":u.percentChanges.points<0?"trend-negative":"trend-neutral"}">
        ${u.percentChanges.points>0?"":u.percentChanges.points<0?"":""}
        ${Math.abs(u.percentChanges.points)}%
      </div>
    </div>
    <div class="trend-metric">
      <div class="metric-label">Net Progress</div>
      <div class="metric-value" style="font-size: 24px;">
        ${u.currentPeriod.completed-u.currentPeriod.issues}
      </div>
      <div class="metric-subtext">
        Completed - Created
      </div>
    </div>
  </div>
  `:""}

  \x3C!-- Forecast Accuracy Tracking -->
  ${m&&m.reliability&&m.reliability.score!==null?`
  <div class="page-break"></div>
  <h2>Forecast Accuracy Tracking</h2>
  <div style="text-align: center; margin-bottom: 20px;">
    <div style="font-size: 48px; font-weight: 700; color: ${m.reliability.score>=80?"#16A34A":m.reliability.score>=60?"#EAB308":"#DC2626"};">
      ${m.reliability.score}
    </div>
    <div style="font-size: 12px; font-weight: 600; text-transform: uppercase; color: ${m.reliability.score>=80?"#16A34A":m.reliability.score>=60?"#EAB308":"#DC2626"};">
      Reliability Score
    </div>
  </div>

  <h3>Key Statistics</h3>
  <div class="forecast-stats-grid">
    <div class="metric-card">
      <div class="metric-label">Completed Forecasts</div>
      <div class="metric-value" style="font-size: 20px; color: #2563EB;">
        ${m.stats.completedForecasts}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">On Time</div>
      <div class="metric-value" style="font-size: 20px; color: #16A34A;">
        ${m.stats.onTimePercentage}%
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Avg Days Off</div>
      <div class="metric-value" style="font-size: 20px; color: #EAB308;">
        ${m.stats.avgDaysOff}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Early</div>
      <div class="metric-value" style="font-size: 20px; color: #3B82F6;">
        ${m.stats.earlyCount}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Late</div>
      <div class="metric-value" style="font-size: 20px; color: #DC2626;">
        ${m.stats.lateCount}
      </div>
    </div>
  </div>

  <h3>Reliability Factors</h3>
  <div class="reliability-factors-grid">
    ${m.reliability.factors.map(j=>{const w=Math.round(j.points/j.maxPoints*100);return`
      <div class="metric-card">
        <div class="metric-label">${j.name}</div>
        <div style="font-size: 18px; font-weight: 600; color: ${j.status==="good"?"#16A34A":j.status==="warning"?"#EAB308":"#DC2626"};">
          ${w}%
        </div>
        <div style="font-size: 10px; color: #6B7280; margin-top: 4px;">
          ${j.detail}
        </div>
      </div>
      `}).join("")}
  </div>

  <div style="padding: 12px; background: #EFF6FF; border-radius: 8px; border: 1px solid #BFDBFE;">
    <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Recommendation</div>
    <div style="font-size: 12px; color: #1E40AF;">${m.reliability.recommendation}</div>
  </div>
  `:""}

  \x3C!-- Team Performance & Workload -->
  ${x?`
  <div class="page-break"></div>
  <h2>Team Performance & Workload</h2>
  <div style="font-size: 13px; color: #6B7280; margin-bottom: 16px;">
    Individual contributions, workload distribution, and burnout risks
  </div>

  \x3C!-- Summary Stats -->
  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-label">Active Members</div>
      <div class="metric-value" style="font-size: 24px; color: #2563EB;">
        ${x.summary.activeMembers}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Issues Completed</div>
      <div class="metric-value" style="font-size: 24px; color: #16A34A;">
        ${x.summary.totalCompleted}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Story Points</div>
      <div class="metric-value" style="font-size: 24px; color: #2563EB;">
        ${x.summary.totalStoryPoints}
      </div>
    </div>
    <div class="metric-card">
      <div class="metric-label">Avg per Member</div>
      <div class="metric-value" style="font-size: 24px; color: #3B82F6;">
        ${x.summary.avgVelocityPerMember}
      </div>
    </div>
    <div class="metric-card" style="${x.summary.membersAtRisk>0?"background: #FEE2E2;":""}">
      <div class="metric-label">At Risk</div>
      <div class="metric-value" style="font-size: 24px; color: ${x.summary.membersAtRisk>0?"#DC2626":"#16A34A"};">
        ${x.summary.membersAtRisk}
      </div>
    </div>
  </div>

  \x3C!-- Top Contributors -->
  <h3>Top Contributors (Last 30 Days)</h3>
  <div class="team-grid">
    ${x.topContributors.slice(0,5).map((j,w)=>`
      <div class="team-member-card" style="${w===0?"background: #FEF3C7; border: 2px solid #F59E0B;":""}">
        ${w===0?'<div style="font-size: 20px; margin-bottom: 4px;"></div>':""}
        <div style="font-weight: 600; font-size: 13px; margin-bottom: 6px;">${j.name}</div>
        <div style="font-size: 11px; color: #6B7280; margin-bottom: 4px;">
          ${j.issuesCompleted} issues
        </div>
        <div style="font-size: 11px; color: #6B7280; margin-bottom: 4px;">
          ${j.storyPoints} pts
        </div>
        <div style="font-size: 11px; color: #6B7280;">
          ${j.avgCycleTime}d cycle
        </div>
      </div>
    `).join("")}
  </div>

  \x3C!-- Burnout Risks -->
  ${x.burnoutRisks.length>0?`
  <div class="burnout-alert">
    <h3 style="color: #DC2626; margin-bottom: 12px;"> Burnout Risk Alert</h3>
    <div style="font-size: 12px; color: #DC2626; margin-bottom: 12px;">
      ${x.burnoutRisks.length} team member${x.burnoutRisks.length!==1?"s":""} at risk of burnout
    </div>
    ${x.burnoutRisks.map(j=>`
      <div class="risk-item" style="border-left-color: ${j.riskLevel==="high"?"#DC2626":j.riskLevel==="medium"?"#F97316":"#EAB308"};">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
          <strong style="font-size: 13px;">${j.name}</strong>
          <span style="font-size: 11px; font-weight: 600; text-transform: uppercase; color: ${j.riskLevel==="high"?"#DC2626":j.riskLevel==="medium"?"#F97316":"#EAB308"};">
            ${j.riskLevel} RISK (${j.riskScore})
          </span>
        </div>
        <div style="font-size: 11px; color: #6B7280; margin-bottom: 4px;">
          ${j.openIssues} open issues  ${j.storyPoints} pts  ${j.overdueIssues} overdue
        </div>
        <div style="font-size: 11px; color: #374151;">
          Risk Factors: ${j.riskFactors.join("; ")}
        </div>
      </div>
    `).join("")}
  </div>
  `:""}

  \x3C!-- Workload Distribution -->
  <h3>Current Workload Distribution</h3>
  <div style="margin-bottom: 20px;">
    ${x.workloadDistribution.slice(0,8).map(j=>`
      <div class="workload-bar ${j.openIssues>10||j.storyPoints>30?"overloaded":""} ${j.isOnLeave?"on-leave":""}">
        <div style="flex: 1; font-weight: 600; font-size: 13px;">
          ${j.name}${j.role?` (${j.role})`:""}
          ${j.isOnLeave?" ":""}
        </div>
        <div style="font-size: 12px; color: #6B7280; margin-right: 12px;">
          ${j.openIssues} issues  ${j.storyPoints} pts
          ${j.overdueIssues>0?`  ${j.overdueIssues} overdue`:""}
        </div>
      </div>
      `).join("")}
  </div>
  `:""}

  <div class="footer">
    <p>Generated by GitLab PM Dashboard  ${b}</p>
    <p style="margin-top: 8px; font-size: 11px;">
      This report provides a snapshot of project health and progress at the time of generation.
    </p>
  </div>
</body>
</html>
  `,D=window.open("","_blank","width=900,height=800");D?(D.document.write(v),D.document.close(),setTimeout(()=>{D.focus()},500)):alert("Please allow pop-ups to generate the PDF report.")}function Oy({isOpen:o,onClose:c,onSave:r}){const[l,a]=W.useState({weights:{...Kc},amplifiers:{...Jc},thresholds:{...Zc},timeframe:{...ua}});W.useEffect(()=>{const x=localStorage.getItem("healthScoreConfig");if(x)try{const m=JSON.parse(x);a(m)}catch(m){console.error("Failed to load health score config:",m)}},[o]);const d=()=>{const x=Object.values(l.weights).reduce((m,b)=>m+b,0);if(Math.abs(x-1)>.01){alert("Weights must sum to 100% (1.0). Current sum: "+(x*100).toFixed(1)+"%");return}localStorage.setItem("healthScoreConfig",JSON.stringify(l)),r(l),c()},u=()=>{const x={weights:{...Kc},amplifiers:{...Jc},thresholds:{...Zc},timeframe:{...ua}};a(x),localStorage.setItem("healthScoreConfig",JSON.stringify(x))};if(!o)return null;const g=Object.values(l.weights).reduce((x,m)=>x+m,0),f=Math.abs(g-1)<.01;return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{className:"card",style:{width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:"Health Score Configuration"}),e.jsx("button",{onClick:c,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text-secondary)"},children:""})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Dimension Weights"}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Adjust the importance of each health dimension. Total must equal 100%."}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:Object.entries(l.weights).map(([x,m])=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr 100px",gap:"12px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:x}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:m,onChange:b=>a({...l,weights:{...l.weights,[x]:parseFloat(b.target.value)}}),style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"5",value:(m*100).toFixed(0),onChange:b=>{const v=parseFloat(b.target.value)||0,D=Math.max(0,Math.min(100,v));a({...l,weights:{...l.weights,[x]:D/100}})},style:{width:"60px",padding:"4px 8px",fontSize:"14px",fontWeight:"600",border:"1px solid var(--border-medium)",borderRadius:"4px",textAlign:"right"}}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"%"})]})]},x))}),e.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",background:f?"#D1FAE5":"#FEE2E2",border:`1px solid ${f?"#10B981":"#EF4444"}`,borderRadius:"6px",fontSize:"13px",color:f?"#065F46":"#991B1B"},children:["Total: ",(g*100).toFixed(1),"% ",f?"":" Must equal 100%"]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Penalty Amplifiers"}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Control how severely issues penalize the health score. Higher = more sensitive to problems."}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:Object.entries(l.amplifiers).map(([x,m])=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr 100px",gap:"12px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",textTransform:"capitalize"},children:x}),e.jsx("input",{type:"range",min:"100",max:"500",step:"50",value:m,onChange:b=>a({...l,amplifiers:{...l.amplifiers,[x]:parseInt(b.target.value)}}),style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:""}),e.jsx("input",{type:"number",min:"100",max:"500",step:"10",value:m,onChange:b=>{const v=parseInt(b.target.value)||100,D=Math.max(100,Math.min(500,v));a({...l,amplifiers:{...l.amplifiers,[x]:D}})},style:{width:"60px",padding:"4px 8px",fontSize:"14px",fontWeight:"600",border:"1px solid var(--border-medium)",borderRadius:"4px",textAlign:"right"}})]})]},x))}),e.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"#F0F9FF",border:"1px solid #3B82F6",borderRadius:"8px"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:"600",color:"#1E40AF",marginBottom:"12px"},children:"Impact Analysis"}),Object.entries(l.amplifiers).map(([x,m])=>{const b=(100/m*100).toFixed(1),v=(50/m*100).toFixed(1);(75/m*100).toFixed(1);const D=(100-.05*m).toFixed(0),j=Math.max(0,100-.1*m).toFixed(0);return Math.max(0,100-.2*m).toFixed(0),e.jsxs("div",{style:{marginBottom:x==="risk"?"0":"12px",paddingBottom:x==="risk"?"0":"12px",borderBottom:x==="risk"?"none":"1px solid #BFDBFE"},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1E40AF",marginBottom:"6px",textTransform:"capitalize"},children:[x," (",m,")"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"11px",color:"#1E3A8A"},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[b,"%"]})," ",x," issues  score drops to ",e.jsx("strong",{style:{color:"#DC2626"},children:"0"})]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[v,"%"]})," ",x," issues  score drops to ",e.jsx("strong",{style:{color:"#D97706"},children:"50"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"5%"})," ",x," issues  score: ",e.jsx("strong",{style:{color:D>=80?"#059669":D>=60?"#D97706":"#DC2626"},children:D})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"10%"})," ",x," issues  score: ",e.jsx("strong",{style:{color:j>=80?"#059669":j>=60?"#D97706":"#DC2626"},children:j})]})]})]},x)}),e.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#DBEAFE",borderRadius:"4px",fontSize:"11px",color:"#1E3A8A"},children:[e.jsx("strong",{children:"Tip:"})," Lower amplifiers = more tolerant (need more issues to drop score). Higher amplifiers = stricter (fewer issues cause bigger penalties)."]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Status Thresholds"}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Set the score boundaries for green/amber/red status indicators."}),e.jsxs("div",{style:{display:"grid",gap:"12px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr 100px",gap:"12px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500"},children:"Green (Good)"}),e.jsx("input",{type:"range",min:"60",max:"100",step:"5",value:l.thresholds.good,onChange:x=>a({...l,thresholds:{...l.thresholds,good:parseInt(x.target.value)}}),style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--success)"},children:""}),e.jsx("input",{type:"number",min:"60",max:"100",step:"5",value:l.thresholds.good,onChange:x=>{const m=parseInt(x.target.value)||60,b=Math.max(60,Math.min(100,m));a({...l,thresholds:{...l.thresholds,good:b}})},style:{width:"50px",padding:"4px 8px",fontSize:"14px",fontWeight:"600",border:"1px solid var(--border-medium)",borderRadius:"4px",textAlign:"right",color:"var(--success)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr 100px",gap:"12px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500"},children:"Amber (Warning)"}),e.jsx("input",{type:"range",min:"30",max:l.thresholds.good-5,step:"5",value:l.thresholds.warning,onChange:x=>a({...l,thresholds:{...l.thresholds,warning:parseInt(x.target.value)}}),style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--warning)"},children:""}),e.jsx("input",{type:"number",min:"30",max:l.thresholds.good-5,step:"5",value:l.thresholds.warning,onChange:x=>{const m=parseInt(x.target.value)||30,b=l.thresholds.good-5,v=Math.max(30,Math.min(b,m));a({...l,thresholds:{...l.thresholds,warning:v}})},style:{width:"50px",padding:"4px 8px",fontSize:"14px",fontWeight:"600",border:"1px solid var(--border-medium)",borderRadius:"4px",textAlign:"right",color:"var(--warning)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr 80px",gap:"12px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500"},children:"Red (Critical)"}),e.jsx("div",{style:{width:"100%",display:"flex",alignItems:"center"},children:e.jsx("div",{style:{flex:1,height:"4px",background:"var(--danger)",borderRadius:"2px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--danger)"},children:["<",l.thresholds.warning]})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Timeframe Mode"}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Choose which issues to include in health score calculation."}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"timeframe",value:"iteration",checked:l.timeframe.mode==="iteration",onChange:x=>a({...l,timeframe:{...l.timeframe,mode:x.target.value}})}),e.jsx("span",{style:{fontSize:"14px"},children:"Current Iteration/Sprint"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"timeframe",value:"days",checked:l.timeframe.mode==="days",onChange:x=>a({...l,timeframe:{...l.timeframe,mode:x.target.value}})}),e.jsx("span",{style:{fontSize:"14px"},children:"Last N Days"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"timeframe",value:"all",checked:l.timeframe.mode==="all",onChange:x=>a({...l,timeframe:{...l.timeframe,mode:x.target.value}})}),e.jsx("span",{style:{fontSize:"14px"},children:"All Issues"})]})]}),l.timeframe.mode==="days"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr 100px",gap:"12px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500"},children:"Days to include"}),e.jsx("input",{type:"range",min:"7",max:"365",step:"7",value:l.timeframe.days,onChange:x=>a({...l,timeframe:{...l.timeframe,days:parseInt(x.target.value)}}),style:{width:"100%"}}),e.jsx("input",{type:"number",min:"7",max:"365",step:"7",value:l.timeframe.days,onChange:x=>{const m=parseInt(x.target.value)||7,b=Math.max(7,Math.min(365,m));a({...l,timeframe:{...l.timeframe,days:b}})},style:{width:"60px",padding:"4px 8px",fontSize:"14px",fontWeight:"600",border:"1px solid var(--border-medium)",borderRadius:"4px",textAlign:"right"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:[e.jsx("button",{className:"btn",onClick:u,style:{background:"var(--bg-secondary)"},children:"Reset to Defaults"}),e.jsx("button",{className:"btn",onClick:c,style:{background:"var(--bg-secondary)"},children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:d,disabled:!f,children:"Save Configuration"})]})]})})}function Ho(o){if(!o||o.length===0)return[];const c=new Map;o.forEach(a=>{const d=kt(a.labels,a.iteration);if(!d)return;c.has(d)||c.set(d,{sprint:d,totalIssues:0,completedIssues:0,openIssues:0,totalPoints:0,completedPoints:0,openPoints:0,completedAt:[]});const u=c.get(d),g=a.weight||0;u.totalIssues++,u.totalPoints+=g,a.state==="closed"?(u.completedIssues++,u.completedPoints+=g,a.closed_at&&u.completedAt.push(new Date(a.closed_at))):(u.openIssues++,u.openPoints+=g)});const r=new Map;return o.forEach(a=>{const d=kt(a.labels,a.iteration);d&&a.iteration?.start_date&&!r.has(d)&&r.set(d,a.iteration.start_date)}),Array.from(c.values()).sort((a,d)=>{const u=r.get(a.sprint),g=r.get(d.sprint);if(u&&g)return new Date(u)-new Date(g);const f=typeof a.sprint=="number"?a.sprint:parseInt(a.sprint,10),x=typeof d.sprint=="number"?d.sprint:parseInt(d.sprint,10);return!isNaN(f)&&!isNaN(x)?f-x:String(a.sprint).localeCompare(String(d.sprint))}).map(a=>({...a,velocity:a.completedIssues,velocityPoints:a.completedPoints,completionRate:a.totalIssues>0?Math.round(a.completedIssues/a.totalIssues*100):0,completionRatePoints:a.totalPoints>0?Math.round(a.completedPoints/a.totalPoints*100):0}))}function Wy(o,c=3,r=null){if(!o||o.length===0)return{byIssues:0,byPoints:0};let l=o.length-1;if(r){const f=o.findIndex(x=>x.sprint===r);f>=0&&(l=f)}const a=Math.max(0,l-c+1),d=o.slice(a,l+1);if(d.length===0)return{byIssues:0,byPoints:0};const u=d.reduce((f,x)=>f+x.velocity,0),g=d.reduce((f,x)=>f+(x.velocityPoints||0),0);return{byIssues:Math.round(u/d.length),byPoints:Math.round(g/d.length)}}function pd(o,c=null,r="issues"){if(!o||o.length<2)return{shortTerm:0,longTerm:0};let l=o.length-1;if(c){const m=o.findIndex(b=>b.sprint===c);m>=0&&(l=m)}if(l<1)return{shortTerm:0,longTerm:0};const a=m=>r==="points"?m.velocityPoints||0:m.velocity,d=o[l],u=o[l-1];let g=0;const f=a(u);if(f>0){const m=a(d);g=Math.round((m-f)/f*100)}let x=0;if(l>=3){const m=Math.max(0,l-2),b=o.slice(m,l+1),v=b.reduce((H,U)=>H+a(U),0)/b.length,D=Math.max(0,m-3),j=m,w=o.slice(D,j);if(w.length>0){const H=w.reduce((U,G)=>U+a(G),0)/w.length;H>0&&(x=Math.round((v-H)/H*100))}}return{shortTerm:g,longTerm:x}}function Sh(o,c,r="issues"){if(!o||!c)return{actual:[],ideal:[],total:0,mode:r};const l=o.filter(I=>kt(I.labels,I.iteration)===c);if(l.length===0)return{actual:[],ideal:[],total:0,mode:r};let a=null,d=null;const u=l.find(I=>I.iteration?.start_date);if(u&&u.iteration&&(u.iteration.start_date&&(a=new Date(u.iteration.start_date),a.setHours(0,0,0,0)),u.iteration.due_date&&(d=new Date(u.iteration.due_date),d.setHours(23,59,59,999))),!a){const I=l.map(_=>new Date(_.created_at)).filter(_=>!isNaN(_));if(I.length===0)return{actual:[],ideal:[],total:0};a=new Date(Math.min(...I)),a.setHours(0,0,0,0)}d||(d=new Date(a.getTime()+12096e5),d.setHours(23,59,59,999));const g=new Date,f=new Date(g.getFullYear(),g.getMonth(),g.getDate()),x=l.length,m=l.reduce((I,_)=>I+(_.weight||0),0),b=r==="points"?m:x,v=[],D=(d-a)/(1440*60*1e3),j=Math.round(D);for(let I=0;I<=j;I++){const _=new Date(a.getTime()+I*24*60*60*1e3);if(_>d)break;const P=_.getFullYear(),X=String(_.getMonth()+1).padStart(2,"0"),z=String(_.getDate()).padStart(2,"0"),T=`${P}-${X}-${z}`,N=b-b/j*I;v.push({date:T,remaining:Math.max(0,Math.round(N))})}const w=l.filter(I=>I.state==="closed"&&I.closed_at).map(I=>({date:new Date(I.closed_at),issue:I,value:r==="points"?I.weight||0:1})).sort((I,_)=>I.date-_.date),H=[];let U=b;const G=new Map;w.forEach(({date:I,value:_})=>{const P=new Date(I);P.setHours(0,0,0,0);const X=P.getFullYear(),z=String(P.getMonth()+1).padStart(2,"0"),T=String(P.getDate()).padStart(2,"0"),N=`${X}-${z}-${T}`;G.set(N,(G.get(N)||0)+_)}),console.log("Burndown generation:",{sprintStart:a.toISOString(),sprintEnd:d.toISOString(),today:f.toISOString(),days:j,total:b,mode:r});for(let I=0;I<=j;I++){const _=new Date(a.getTime()+I*24*60*60*1e3),P=new Date(_.getFullYear(),_.getMonth(),_.getDate());if(P>f)break;const X=P.getFullYear(),z=String(P.getMonth()+1).padStart(2,"0"),T=String(P.getDate()).padStart(2,"0"),N=`${X}-${z}-${T}`;console.log(`Day ${I}: ${N}, cleanDate > today: ${P>f}, cleanDate: ${P.toISOString()}, today: ${f.toISOString()}`),I>0&&G.has(N)&&(U-=G.get(N)),H.push({date:N,remaining:Math.max(0,U)})}console.log("Actual data points generated:",H.length,"Last date:",H[H.length-1]?.date);const $=a.getFullYear(),B=String(a.getMonth()+1).padStart(2,"0"),M=String(a.getDate()).padStart(2,"0"),R=`${$}-${B}-${M}`,L=d.getFullYear(),O=String(d.getMonth()+1).padStart(2,"0"),y=String(d.getDate()).padStart(2,"0"),C=`${L}-${O}-${y}`;return{actual:H,ideal:v,total:b,totalIssues:x,totalPoints:m,mode:r,sprintStart:R,sprintEnd:C}}function _y(o,c){if(!o||c===0)return null;const r=o.filter(g=>g.state==="opened").length;if(r===0)return{date:new Date().toISOString().split("T")[0],sprintsRemaining:0,confidence:100};const l=Math.ceil(r/c),a=new Date,d=new Date(a.getTime()+l*14*24*60*60*1e3),u=Math.min(95,60+c*2);return{date:d.toISOString().split("T")[0],sprintsRemaining:l,confidence:Math.round(u),openIssues:r}}function Hh(o,c=null,r=26,l=12){if(!o||o.length===0)return{dataPoints:[],totalScope:0,completed:0,remaining:0,scopeGrowth:0,projectedCompletion:null};let a;if(c)a=new Date(c);else{const G=new Date;a=new Date(G.getFullYear(),G.getMonth()-l,G.getDate())}a.setHours(0,0,0,0);const d=new Date;d.setHours(0,0,0,0);const u=Math.floor((d-a)/(1440*60*1e3)),g=Math.max(1,Math.ceil(u/r)),f=[];let x=new Date(a);for(;x<=d;){const G=o.filter(R=>{const L=R.created_at?new Date(R.created_at):null;return L&&L<=x}),$=G.filter(R=>R.state!=="closed"||!R.closed_at?!1:new Date(R.closed_at)<=x),B=G.reduce((R,L)=>R+(L.weight||0),0),M=$.reduce((R,L)=>R+(L.weight||0),0);f.push({date:x.toISOString().split("T")[0],totalScope:G.length,completed:$.length,remaining:G.length-$.length,scopePoints:B,completedPoints:M,remainingPoints:B-M}),x=new Date(x.getTime()+g*24*60*60*1e3)}if(f.length===0||f[f.length-1].date!==d.toISOString().split("T")[0]){const G=o,$=o.filter(B=>B.state==="closed");f.push({date:d.toISOString().split("T")[0],totalScope:G.length,completed:$.length,remaining:G.length-$.length,scopePoints:G.reduce((B,M)=>B+(M.weight||0),0),completedPoints:$.reduce((B,M)=>B+(M.weight||0),0),remainingPoints:G.reduce((B,M)=>B+(M.weight||0),0)-$.reduce((B,M)=>B+(M.weight||0),0)})}const m=f[0]?.totalScope||0,v=(f[f.length-1]?.totalScope||0)-m,D=m>0?Math.round(v/m*100):0,j=f.slice(-6);let w=0;if(j.length>=2){const G=j[j.length-1].completed-j[0].completed,$=j.length-1;w=$>0?G/$:0}let H=null;const U=f[f.length-1];if(w>0&&U&&U.remaining>0){const G=Math.ceil(U.remaining/w);H=new Date(d.getTime()+G*g*24*60*60*1e3).toISOString().split("T")[0]}return{dataPoints:f,totalScope:U?.totalScope||0,completed:U?.completed||0,remaining:U?.remaining||0,scopeGrowth:v,scopeGrowthPercent:D,initialScope:m,avgVelocity:Math.round(w*10)/10,projectedCompletion:H,chartStartDate:a.toISOString().split("T")[0]}}function Ly(o,c=null,r=null){if(!o||o.length===0)return{score:0,status:"unknown",factors:[],recommendations:[],breakdown:{}};const l=[];let a=0,d=0;const u=Ho(o);if(u.length>=3){const O=u.slice(-3).map(X=>X.velocity),y=O.reduce((X,z)=>X+z,0)/O.length,C=O.reduce((X,z)=>X+Math.pow(z-y,2),0)/O.length,I=Math.sqrt(C),_=y>0?I/y*100:100;let P=0;_<15?P=30:_<30?P=20:_<50?P=10:P=0,a+=P,d+=30,l.push({name:"Velocity Consistency",score:P,maxScore:30,status:P>=20?"good":P>=10?"warning":"risk",detail:`Coefficient of variation: ${Math.round(_)}%`})}const g=Hh(o);let f=0,x="";if(g.dataPoints&&g.dataPoints.length>=2){const O=g.dataPoints[0],y=g.dataPoints[g.dataPoints.length-1],C=O.remaining,_=y.remaining-C,P=C>0?Math.round(_/C*100):0;P<=-20?(f=25,x=`Gap shrinking: ${Math.abs(P)}% (${Math.abs(_)} fewer items)`):P<=0?(f=22,x=`Gap shrinking: ${Math.abs(P)}% (${Math.abs(_)} fewer items)`):P<=10?(f=18,x=`Gap growing slowly: +${P}% (+${_} items)`):P<=25?(f=12,x=`Gap growing: +${P}% (+${_} items)`):P<=50?(f=6,x=`Gap growing significantly: +${P}% (+${_} items)`):(f=0,x=`Gap growing rapidly: +${P}% (+${_} items)`)}else g.scopeGrowthPercent<=5?f=25:g.scopeGrowthPercent<=15?f=20:g.scopeGrowthPercent<=30?f=10:f=0,x=`Scope growth: ${g.scopeGrowthPercent}% (+${g.scopeGrowth} items)`;a+=f,d+=25,l.push({name:"Scope Stability",score:f,maxScore:25,status:f>=20?"good":f>=12?"warning":"risk",detail:x});const m=g.totalScope>0?g.completed/g.totalScope*100:0;let b=0;m>=80?b=20:m>=60?b=15:m>=40?b=10:m>=20?b=5:b=0,a+=b,d+=20,l.push({name:"Completion Progress",score:b,maxScore:20,status:b>=15?"good":b>=10?"warning":"risk",detail:`${Math.round(m)}% complete (${g.completed}/${g.totalScope})`});const v=o.filter(O=>O.state==="opened"),D=v.filter(O=>(O.labels?.map(C=>C.toLowerCase())||[]).some(C=>C.includes("blocker")||C.includes("blocked"))),j=v.length>0?D.length/v.length*100:0;let w=0;j===0?w=15:j<5?w=10:j<10?w=5:w=0,a+=w,d+=15,l.push({name:"Risk Profile",score:w,maxScore:15,status:w>=10?"good":w>=5?"warning":"risk",detail:`${D.length} blocker(s) (${Math.round(j)}% of open issues)`});const H=ud(o),U=pd(u,H),G=typeof U=="object"?U.longTerm:U;let $=0;G>10?$=10:G>0?$=8:G>=-10?$=5:$=0,a+=$,d+=10,l.push({name:"Velocity Trend",score:$,maxScore:10,status:$>=8?"good":$>=5?"warning":"risk",detail:`${G>=0?"+":""}${G}% long-term trend`});const B=d>0?Math.round(a/d*100):0;let M="unknown",R="#6B7280";B>=75?(M="high",R="#16A34A"):B>=50?(M="medium",R="#EAB308"):B>=25?(M="low",R="#F97316"):(M="critical",R="#DC2626");const L=[];if(l[0].score<20&&L.push({priority:"high",category:"velocity",title:"Stabilize velocity",description:"Velocity is inconsistent. Focus on predictable sprint planning and reducing interruptions."}),l[1].score<20){const O=l[1];O.detail.includes("growing")?L.push({priority:"high",category:"scope",title:"Address growing backlog",description:O.detail+". New work is being added faster than completion. Consider increasing capacity or reducing scope."}):L.push({priority:"medium",category:"scope",title:"Monitor scope stability",description:O.detail+". Keep monitoring to ensure the gap continues to shrink."})}return l[3].score<10&&L.push({priority:"critical",category:"blockers",title:"Address blockers immediately",description:`${D.length} blocker(s) are impacting delivery. Escalate and resolve critical impediments.`}),l[4].score<5&&L.push({priority:"high",category:"velocity",title:"Investigate velocity decline",description:"Velocity is declining. Review team capacity, technical debt, and process bottlenecks."}),m<50&&g.remaining>0&&L.push({priority:"medium",category:"progress",title:"Accelerate delivery pace",description:`${g.remaining} items remaining. Consider increasing team capacity or reducing scope.`}),{score:B,status:M,statusColor:R,factors:l,recommendations:L,breakdown:{totalScore:a,maxScore:d,completionRate:Math.round(m),blockerCount:D.length,scopeGrowth:g.scopeGrowthPercent,velocityTrend:G}}}function $y(o){if(!o||o.length===0)return{currentPeriod:{name:"",issues:0,completed:0,velocity:0,points:0},previousPeriod:{name:"",issues:0,completed:0,velocity:0,points:0},changes:{issues:0,completed:0,velocity:0,points:0},percentChanges:{issues:0,completed:0,velocity:0,points:0}};const c=new Date;c.setHours(23,59,59,999);const r=new Date(c),l=new Date(c);l.setDate(l.getDate()-29),l.setHours(0,0,0,0);const a=new Date(l);a.setHours(23,59,59,999),a.setDate(a.getDate()-1);const d=new Date(a);d.setDate(d.getDate()-29),d.setHours(0,0,0,0);const u=(L,O)=>{const y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=y[L.getMonth()],I=y[O.getMonth()],_=L.getDate(),P=O.getDate();return L.getMonth()===O.getMonth()?`${C} ${_}-${P}`:`${C} ${_} - ${I} ${P}`},g=u(l,r),f=u(d,a),x=o.filter(L=>{const O=L.created_at?new Date(L.created_at):null;return O&&O>=l&&O<=r}),m=o.filter(L=>{if(L.state!=="closed"||!L.closed_at)return!1;const O=new Date(L.closed_at);return O>=l&&O<=r}),b=m.reduce((L,O)=>L+(O.weight||0),0),v=m.length,D=o.filter(L=>{const O=L.created_at?new Date(L.created_at):null;return O&&O>=d&&O<=a}),j=o.filter(L=>{if(L.state!=="closed"||!L.closed_at)return!1;const O=new Date(L.closed_at);return O>=d&&O<=a}),w=j.reduce((L,O)=>L+(O.weight||0),0),H=j.length,U=x.length-D.length,G=v-H,$=b-w,B=D.length>0?Math.round(U/D.length*100):0,M=H>0?Math.round(G/H*100):0,R=w>0?Math.round($/w*100):0;return{currentPeriod:{name:g,issues:x.length,completed:v,velocity:v,points:b},previousPeriod:{name:f,issues:D.length,completed:H,velocity:H,points:w},changes:{issues:U,completed:G,velocity:G,points:$},percentChanges:{issues:B,completed:M,velocity:M,points:R}}}function ud(o){if(!o||o.length===0)return null;const c=new Map;o.forEach(g=>{const f=kt(g.labels,g.iteration);if(!f)return;const x=g.iteration?.start_date,m=g.iteration?.due_date;x&&m&&!c.has(f)&&c.set(f,{start:new Date(x),end:new Date(m)})});const r=new Date;r.setHours(0,0,0,0);for(const[g,f]of c.entries()){const x=new Date(f.start);x.setHours(0,0,0,0);const m=new Date(f.end);if(m.setHours(23,59,59,999),r>=x&&r<=m)return g}let l=null,a=null;if(c.forEach((g,f)=>{const x=new Date(g.end);x<r&&(!a||x>a)&&(a=x,l=f)}),l)return l;const d=o.filter(g=>g.state==="opened").map(g=>kt(g.labels,g.iteration)).filter(g=>g!==null);if(d.length===0)return null;const u=d.map(g=>typeof g=="number"?g:parseInt(g,10)).filter(g=>!isNaN(g));return u.length>0?Math.max(...u):d[0]}function fa(o){if(!o||o.length===0)return[];const c=new Set;return o.forEach(r=>{const l=kt(r.labels,r.iteration);l&&c.add(l)}),Array.from(c).sort((r,l)=>{const a=o.find(m=>kt(m.labels,m.iteration)===r),d=o.find(m=>kt(m.labels,m.iteration)===l),u=a?.iteration?.start_date,g=d?.iteration?.start_date;if(u&&g)return new Date(g)-new Date(u);if(u)return-1;if(g)return 1;const f=typeof r=="number"?r:parseInt(r,10),x=typeof l=="number"?l:parseInt(l,10);return!isNaN(f)&&!isNaN(x)?x-f:String(l).localeCompare(String(r))})}function Py(o,c,r,l){if(!o||!c)return{capacityLoss:0,totalCapacity:0,lossPercentage:0,absenceCount:0,affectedMembers:[],details:null};const a=o.filter(H=>kt(H.labels,H.iteration)===c);if(a.length===0)return{capacityLoss:0,totalCapacity:0,lossPercentage:0,absenceCount:0,affectedMembers:[],details:null};const d=a.find(H=>H.iteration?.start_date&&H.iteration?.due_date);if(!d)return{capacityLoss:0,totalCapacity:0,lossPercentage:0,absenceCount:0,affectedMembers:[],details:null};const u=new Date(d.iteration.start_date),g=new Date(d.iteration.due_date),f=l();if(!f.teamMembers||f.teamMembers.length===0)return{capacityLoss:0,totalCapacity:0,lossPercentage:0,absenceCount:0,affectedMembers:[],details:null};const m=Math.ceil((g-u)/(1e3*60*60*24))/7,b=f.teamMembers.reduce((H,U)=>{const G=U.defaultCapacity||40;return H+G*m},0),v=r(f.teamMembers,u,g),D=v.totalHoursImpact,j=b>0?Math.round(D/b*100):0,w=Object.entries(v.byMember).filter(([H,U])=>U.hoursLost>0).map(([H,U])=>({username:H,hoursLost:U.hoursLost,absenceCount:U.absenceCount,absences:U.absences}));return{capacityLoss:Math.round(D),totalCapacity:Math.round(b),lossPercentage:j,absenceCount:v.totalAbsences,affectedMembers:w,details:v}}const Hi={backlog:["backlog","new","open","todo","to do"],analysis:["analysis","analyzing","refinement","planning","design","in analysis"],inProgress:["in progress","doing","wip","development","started","active"],review:["review","code review","peer review","reviewing"],testing:["in testing","testing","qa","test","validation","verification"],awaitingTesting:["awaiting testing","awaiting qa","ready for testing","to test"],awaitingRelease:["awaiting release","ready for release","to release","pending release"],released:["released","deployed","in production"],cancelled:["cancelled","canceled","rejected","wont fix","won't fix"],done:["done","completed","closed","resolved","finished"],blocked:["blocked","blocker","on hold","paused"]};function Ws(o,c=Hi){if(!o.labels||o.labels.length===0)return o.state==="closed"?"done":"backlog";const r=o.labels.map(l=>l.toLowerCase());return r.some(l=>c.cancelled.some(a=>l.includes(a)))?"cancelled":r.some(l=>c.released.some(a=>l.includes(a)))?"released":r.some(l=>c.blocked.some(a=>l.includes(a)))?"blocked":r.some(l=>c.awaitingRelease.some(a=>l.includes(a)))?"awaitingRelease":r.some(l=>c.awaitingTesting.some(a=>l.includes(a)))?"awaitingTesting":r.some(l=>c.testing.some(a=>l.includes(a)))?"testing":r.some(l=>c.review.some(a=>l.includes(a)))?"review":r.some(l=>c.inProgress.some(a=>l.includes(a)))?"inProgress":r.some(l=>c.analysis.some(a=>l.includes(a)))?"analysis":r.some(l=>c.done.some(a=>l.includes(a)))?"done":r.some(l=>c.backlog.some(a=>l.includes(a)))?"backlog":o.state==="closed"?"done":"backlog"}function Gh(o){const c=new Date,r=new Date(o.updated_at),l=Math.abs(c-r);return Math.ceil(l/(1e3*60*60*24))}function Go(o){const c=new Date(o.created_at),r=o.closed_at?new Date(o.closed_at):new Date,l=Math.abs(r-c);return Math.ceil(l/(1e3*60*60*24))}function ma(o){if(!o.closed_at)return null;const c=new Date(o.created_at),r=new Date(o.closed_at),l=Math.abs(r-c);return Math.ceil(l/(1e3*60*60*24))}function Vh(o){const c=o.filter(v=>v.state==="closed");if(c.length===0)return{count:0,avgLeadTime:0,medianLeadTime:0,minLeadTime:0,maxLeadTime:0,leadTimes:[],avgCycleTime:0,medianCycleTime:0,minCycleTime:0,maxCycleTime:0,cycleTimes:[],avgWaitTime:0};const r=c.map(v=>Go(v)).sort((v,D)=>v-D),l=Math.round(r.reduce((v,D)=>v+D,0)/r.length),a=r[Math.floor(r.length/2)],u=c.map(v=>({issue:v,cycleTime:ma(v)})).filter(({cycleTime:v})=>v!==null).map(({cycleTime:v})=>v).sort((v,D)=>v-D);let g=0,f=0,x=0,m=0,b=0;if(u.length>0){if(g=Math.round(u.reduce((v,D)=>v+D,0)/u.length),u.length%2===0){const v=u[u.length/2-1],D=u[u.length/2];f=Math.round((v+D)/2)}else f=u[Math.floor(u.length/2)];x=u[0],m=u[u.length-1],b=Math.max(0,l-g)}return{count:c.length,avgLeadTime:l,medianLeadTime:a,minLeadTime:r[0],maxLeadTime:r[r.length-1],leadTimes:r,avgCycleTime:g,medianCycleTime:f,minCycleTime:x,maxCycleTime:m,cycleTimes:u,avgWaitTime:b}}function qh(o,c=Hi){const r={backlog:[],analysis:[],inProgress:[],review:[],testing:[],awaitingTesting:[],awaitingRelease:[],released:[],cancelled:[],done:[],blocked:[]};return o.forEach(l=>{const a=Ws(l,c);r[a]?r[a].push(l):r.backlog.push(l)}),r}function Uy(o){const c=o.filter(l=>l.state==="closed");if(c.length===0)return{backlog:0,analysis:0,inProgress:0,review:0,testing:0,total:0};const r=c.reduce((l,a)=>l+Go(a),0)/c.length;return{backlog:Math.round(r*.2),analysis:Math.round(r*.15),inProgress:Math.round(r*.4),review:Math.round(r*.1),testing:Math.round(r*.15),total:Math.round(r)}}function Hy(o){const c=qh(o.filter(u=>u.state==="opened")),r=[],a=[...Object.entries(c).map(([u,g])=>({phase:u,count:g.length,avgTimeInPhase:g.length>0?Math.round(g.reduce((f,x)=>f+Gh(x),0)/g.length):0,issues:g}))].sort((u,g)=>g.count-u.count),d=(u,g)=>{const f=[],x=[];return(u==="testing"||u==="awaitingTesting")&&(g.avgTimeInPhase>7&&(f.push("Security or QA team backlog"),x.push("Request additional QA resources or auto-approve low-risk changes")),g.count>5&&(f.push(`${g.count} issues waiting for testing`),x.push("Prioritize testing queue, enable parallel testing"))),u==="awaitingRelease"&&(g.avgTimeInPhase>5&&(f.push("Infrequent deployment schedule"),x.push("Enable more frequent deployments or continuous delivery")),g.count>3&&(f.push(`${g.count} issues ready but waiting for release window`),x.push("Deploy batches more frequently (daily vs weekly)"))),u==="review"&&g.avgTimeInPhase>3&&(f.push("Code review backlog or slow review process"),x.push("Assign dedicated reviewers, set SLA for reviews (24-48 hours)")),u==="blocked"&&(f.push("External dependencies or blockers"),x.push("Escalate blockers to management, find workarounds")),u==="inProgress"&&(g.count>8&&(f.push("Too much work in progress (WIP)"),x.push("Implement WIP limits, focus on completing vs starting")),g.avgTimeInPhase>10&&(f.push("Issues are more complex than estimated"),x.push("Break down large issues, improve estimation process"))),f.length===0&&g.count>5&&(f.push(`High volume of issues in ${Yn(u)}`),x.push("Increase throughput or reduce incoming work to this phase")),f.length===0&&g.avgTimeInPhase>10&&(f.push("Issues spending excessive time in this phase"),x.push("Investigate process inefficiencies or resource constraints")),{causes:f,actions:x}};return a.forEach((u,g)=>{if(u.count===0)return;let f="low",x="";if(g===0&&u.count>5?(f="high",x=`Highest concentration of issues (${u.count})`):u.avgTimeInPhase>14?(f="medium",x=`Long average time in phase (${u.avgTimeInPhase} days)`):u.count>3&&(f="low",x=`${u.count} issues currently in this phase`),f){const{causes:m,actions:b}=d(u.phase,u);r.push({phase:u.phase,count:u.count,avgTimeInPhase:u.avgTimeInPhase,severity:f,reason:x,rootCauses:m,recommendedActions:b})}}),r.filter(u=>u.count>0)}function td(o){return{iid:o.iid,title:o.title,state:o.state,currentPhase:Ws(o),createdAt:o.created_at,updatedAt:o.updated_at,closedAt:o.closed_at,leadTime:Go(o),cycleTime:ma(o),timeInCurrentPhase:Gh(o),labels:o.labels||[],assignees:o.assignees||[],milestone:o.milestone,epic:o.epic}}function Gy(o){const r=o.filter(a=>a.state==="closed").map(a=>Go(a)),l={"0-7 days":0,"8-14 days":0,"15-30 days":0,"31-60 days":0,"61-90 days":0,"90+ days":0};return r.forEach(a=>{a<=7?l["0-7 days"]++:a<=14?l["8-14 days"]++:a<=30?l["15-30 days"]++:a<=60?l["31-60 days"]++:a<=90?l["61-90 days"]++:l["90+ days"]++}),l}function Vy(o,c="leadTime"){const r=o.filter(D=>D.state==="closed"&&D.closed_at).sort((D,j)=>new Date(D.closed_at)-new Date(j.closed_at));if(r.length===0)return{dataPoints:[],average:0,median:0,percentile85:0,percentile95:0,upperControlLimit:0,lowerControlLimit:0};const l=r.map(D=>{const j=c==="cycleTime"?ma(D):Go(D);return{date:new Date(D.closed_at),dateStr:new Date(D.closed_at).toLocaleDateString(),value:j||0,issue:{iid:D.iid,title:D.title,web_url:D.web_url}}}).filter(D=>D.value>0);if(l.length===0)return{dataPoints:[],average:0,median:0,percentile85:0,percentile95:0,upperControlLimit:0,lowerControlLimit:0};const a=l.map(D=>D.value).sort((D,j)=>D-j),d=Math.round(a.reduce((D,j)=>D+j,0)/a.length),u=a[Math.floor(a.length*.5)],g=a[Math.floor(a.length*.85)],f=a[Math.floor(a.length*.95)],x=a.reduce((D,j)=>D+Math.pow(j-d,2),0)/a.length,m=Math.sqrt(x),b=Math.round(d+3*m),v=Math.max(0,Math.round(d-3*m));return{dataPoints:l,average:d,median:u,percentile85:g,percentile95:f,upperControlLimit:b,lowerControlLimit:v,stdDev:Math.round(m)}}function qy(o){const c=new Set;o.forEach(l=>{l.labels&&l.labels.forEach(a=>c.add(a))});const r={status:[],phase:[],workflow:[],other:[]};return Array.from(c).forEach(l=>{const a=l.toLowerCase();a.includes("status")?r.status.push(l):Object.values(Hi).flat().some(d=>a.includes(d))?r.phase.push(l):a.includes("workflow")||a.includes("work")?r.workflow.push(l):r.other.push(l)}),r}function Yy(o){const c=["Issue ID","Title","State","Current Phase","Lead Time (days)","Cycle Time (days)","Time in Current Phase (days)","Created At","Updated At","Closed At","Labels","Assignees","Milestone","Epic"],r=o.map(a=>{const d=td(a);return[d.iid,`"${d.title.replace(/"/g,'""')}"`,d.state,d.currentPhase,d.leadTime,d.cycleTime||"N/A",d.timeInCurrentPhase,new Date(d.createdAt).toLocaleDateString(),new Date(d.updatedAt).toLocaleDateString(),d.closedAt?new Date(d.closedAt).toLocaleDateString():"N/A",d.labels.join("; ")||"None",d.assignees.map(u=>u.name).join("; ")||"None",d.milestone?d.milestone.title:"None",d.epic?d.epic.title:"None"]});return[c.join(","),...r.map(a=>a.join(","))].join(`
`)}function Qy(o,c="cycle-time-report.csv"){const r=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),a=URL.createObjectURL(r);l.setAttribute("href",a),l.setAttribute("download",c),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Yn(o){return{backlog:"Backlog",analysis:"Analysis",inProgress:"In Progress",review:"Review",testing:"In Testing",awaitingTesting:"Awaiting Testing",awaitingRelease:"Awaiting Release",released:"Released",cancelled:"Cancelled",done:"Done",blocked:"Blocked"}[o]||o}function vi(o){return{backlog:"#6B7280",analysis:"#3B82F6",inProgress:"#F59E0B",review:"#8B5CF6",testing:"#EC4899",awaitingTesting:"#F59E0B",awaitingRelease:"#10B981",released:"#059669",cancelled:"#9CA3AF",done:"#10B981",blocked:"#EF4444"}[o]||"#6B7280"}function Xy(o,c){if(!o.closed_at||!c||c.length===0)return{cycleTime:null,workStartedAt:null,workEndedAt:new Date(o.closed_at||Date.now()),timeline:[],method:"none"};const r=[...c].sort((b,v)=>new Date(b.created_at)-new Date(v.created_at)),l=[];let a=new Set;o.labels&&o.labels.forEach(b=>a.add(b.toLowerCase())),r.forEach(b=>{if(!b.label||!b.label.name){console.warn("Skipping label event with null label:",b);return}const v=b.label.name.toLowerCase();b.action==="add"?(a.add(v),l.push({timestamp:new Date(b.created_at),action:"add",label:b.label.name,labelLower:v,labels:Array.from(a)})):b.action==="remove"&&(a.delete(v),l.push({timestamp:new Date(b.created_at),action:"remove",label:b.label.name,labelLower:v,labels:Array.from(a)}))});const d=[...Hi.analysis,...Hi.inProgress,...Hi.review,...Hi.testing];let u=null;for(const b of l)if(b.action==="add"&&d.some(D=>b.labelLower.includes(D))){u=b.timestamp;break}if(!u)return{cycleTime:null,workStartedAt:null,workEndedAt:new Date(o.closed_at),timeline:l,method:"no_work_start_found"};const g=new Date(o.closed_at),f=g-u,x=Math.ceil(f/(1e3*60*60*24)),m=new Date(o.created_at);return x<0?(console.warn(`Issue #${o.iid}: Invalid cycle time (${x} days). Work started after closed. Falling back to estimation.`),{cycleTime:null,workStartedAt:null,workEndedAt:g,timeline:l,method:"invalid_negative_cycle_time"}):u<m?(console.warn(`Issue #${o.iid}: Work started before issue created. This shouldn't happen. Falling back to estimation.`),{cycleTime:null,workStartedAt:null,workEndedAt:g,timeline:l,method:"invalid_work_before_creation"}):{cycleTime:x,workStartedAt:u,workEndedAt:g,timeline:l,method:"label_events"}}async function Ky(o,c,r=null){const{gitlabUrl:l,projectId:a,token:d}=c,u=new Map,g=o.filter(m=>m.state==="closed");console.log(`Fetching label events for ${g.length} closed issues...`);const f=10;let x=0;for(let m=0;m<g.length;m+=f){const b=g.slice(m,m+f);(await Promise.all(b.map(async D=>{try{const j=await ty(l,a,D.iid,d);return{iid:D.iid,events:j}}catch(j){return console.warn(`Failed to fetch label events for issue #${D.iid}:`,j),{iid:D.iid,events:null}}}))).forEach(({iid:D,events:j})=>{j&&u.set(D,j)}),x+=b.length,r&&r(x,g.length)}return console.log(` Fetched label events for ${u.size} issues`),u}function Yh(o,c){const r=o.filter(j=>j.state==="closed");if(r.length===0)return{count:0,avgCycleTime:0,medianCycleTime:0,minCycleTime:0,maxCycleTime:0,cycleTimes:[],accurateCount:0,estimatedCount:0,method:"none"};const l=r.map(j=>{const w=c.get(j.iid),H=Xy(j,w);if(H.cycleTime===null){const U=ma(j);return{issue:j,cycleTime:U,workStartedAt:U?new Date(j.created_at):null,workEndedAt:new Date(j.closed_at),method:"estimated"}}return{issue:j,cycleTime:H.cycleTime,workStartedAt:H.workStartedAt,workEndedAt:H.workEndedAt,method:H.method}}).filter(j=>j.cycleTime!==null);if(l.length===0)return{count:0,avgCycleTime:0,medianCycleTime:0,minCycleTime:0,maxCycleTime:0,cycleTimes:[],accurateCount:0,estimatedCount:0,method:"none"};const a=l.map(j=>j.cycleTime).sort((j,w)=>j-w),d=Math.round(a.reduce((j,w)=>j+w,0)/a.length);let u;if(a.length%2===0){const j=a[a.length/2-1],w=a[a.length/2];u=Math.round((j+w)/2)}else u=a[Math.floor(a.length/2)];const g=a[0],f=a[a.length-1],x=l.filter(j=>j.method==="label_events").length,m=l.filter(j=>j.method!=="label_events").length,b=l.map(j=>{const w=new Date(j.issue.created_at),U=new Date(j.issue.closed_at)-w;return Math.ceil(U/(1e3*60*60*24))}).sort((j,w)=>j-w),v=Math.round(b.reduce((j,w)=>j+w,0)/b.length);let D;if(b.length%2===0){const j=b[b.length/2-1],w=b[b.length/2];D=Math.round((j+w)/2)}else D=b[Math.floor(b.length/2)];return console.log("=== Enhanced Cycle Time Stats ==="),console.log("Sample Size:",l.length),console.log("Accurate (label events):",x),console.log("Estimated (fallback):",m),console.log(""),console.log("Avg Cycle Time:",d,"days"),console.log("Avg Lead Time:",v,"days"),console.log("Avg Wait Time:",v-d,"days"),console.log(""),console.log("Median Cycle Time:",u,"days"),console.log("Median Lead Time:",D,"days"),console.log(""),console.log("First 10 Cycle Times:",a.slice(0,10)),console.log("First 10 Lead Times:",b.slice(0,10)),console.log(""),console.log("Sample Issue Analysis (first 5):"),l.slice(0,5).forEach((j,w)=>{const H=Math.ceil((new Date(j.issue.closed_at)-new Date(j.issue.created_at))/864e5);console.log(`  #${j.issue.iid}:`,{cycleTime:j.cycleTime,leadTime:H,method:j.method,created:new Date(j.issue.created_at).toLocaleDateString("de-DE"),workStarted:j.workStartedAt?new Date(j.workStartedAt).toLocaleDateString("de-DE"):"N/A",closed:new Date(j.issue.closed_at).toLocaleDateString("de-DE")})}),console.log("================================"),d>v&&console.error(" DATA INCONSISTENCY: Avg Cycle Time > Avg Lead Time!",{avgCycleTime:d,avgLeadTime:v,diff:d-v}),{count:l.length,avgCycleTime:d,medianCycleTime:u,minCycleTime:g,maxCycleTime:f,cycleTimes:a,avgLeadTime:v,medianLeadTime:D,leadTimes:b,avgWaitTime:Math.max(0,v-d),accurateCount:x,estimatedCount:m,method:x>0?"label_events":"estimated",dataQuality:x>0?`${Math.round(x/l.length*100)}% accurate`:"estimated"}}let _o=null,ca=null;const Jy=300*1e3;async function Zy(o,c,r=null){const l=Date.now();return _o&&ca&&l-ca<Jy?(console.log("Using cached label events"),_o):(_o=await Ky(o,c,r),ca=l,_o)}function e0(){_o=null,ca=null}const t0="gitlab-pm-decisions";function n0(o){const c=fn();return!c||c==="cross-project"?o:`${o}_${c}`}function Qh(){try{const o=localStorage.getItem(n0(t0));if(o){const c=JSON.parse(o);return c.decisions&&(c.decisions=c.decisions.map(r=>({...r,date:new Date(r.date),lastUpdated:r.lastUpdated?new Date(r.lastUpdated):null}))),c}}catch(o){console.error("Error loading decisions:",o)}return{decisions:[],lastModified:new Date().toISOString()}}function i0(o=30){const c=Qh(),r=new Date;return r.setDate(r.getDate()-o),c.decisions.filter(l=>l.date>=r).sort((l,a)=>a.date-l.date)}function s0(){const o=Qh(),c={total:o.decisions.length,byCategory:{technical:0,business:0,process:0,resource:0,strategic:0},byImpact:{low:0,medium:0,high:0,critical:0},byStatus:{active:0,implemented:0,superseded:0,cancelled:0},recent30Days:0},r=new Date;return r.setDate(r.getDate()-30),o.decisions.forEach(l=>{l.category&&c.byCategory.hasOwnProperty(l.category)&&c.byCategory[l.category]++,l.impact&&c.byImpact.hasOwnProperty(l.impact)&&c.byImpact[l.impact]++,l.status&&c.byStatus.hasOwnProperty(l.status)&&c.byStatus[l.status]++,l.date>=r&&c.recent30Days++}),c}const Xh="gitlab_team_config",Kh="gitlab_sprint_capacity",Jh="gitlab_capacity_settings";function Gs(o){const c=$s();if(c)return console.log(`teamConfigService: Using pod-level key for groupId: ${c}`),`${o}_pod_${c}`;const r=fn();return!r||r==="cross-project"?o:(console.log(`teamConfigService: Using project-level key for projectId: ${r}`),`${o}_${r}`)}const Pi=["Data Engineer","Business Analyst","Scrum Master","SRE","Product Owner","Initiative Manager","Developer","QA Engineer","DevOps Engineer","Custom"],Zh={technical:["Developer","Data Engineer","SRE","DevOps Engineer","QA Engineer"],analysis:["Business Analyst","Product Owner","Initiative Manager"],management:["Scrum Master"]};function o0(o,c){if(o===c)return!0;if(o==="Custom"||c==="Custom")return!1;for(const r of Object.values(Zh))if(r.includes(o)&&r.includes(c))return!0;return!1}function Dh(o){if(o==="Custom")return[];for(const c of Object.values(Zh))if(c.includes(o))return c.filter(r=>r!==o);return[]}function l0(o){const c=o.filter(u=>u.state==="closed"&&u.weight>0&&u.time_stats?.total_time_spent>0);if(c.length===0)return{hoursPerStoryPoint:8,sampleSize:0,totalHours:0,totalPoints:0,confidence:"low"};const r=c.reduce((u,g)=>u+g.time_stats.total_time_spent/3600,0),l=c.reduce((u,g)=>u+g.weight,0),a=r/l;let d="low";return c.length>=50?d="high":c.length>=20&&(d="medium"),{hoursPerStoryPoint:Math.round(a*100)/100,sampleSize:c.length,totalHours:Math.round(r*10)/10,totalPoints:l,confidence:d}}function Gi(o,c,r={}){return r[o.id]?r[o.id]:o.weight&&o.weight>0?o.weight*c.hoursPerStoryPoint:c.defaultHoursPerIssue||4}function ht(){try{const o=Gs(Xh),c=localStorage.getItem(o);if(c){const r=JSON.parse(c);return console.log(`Loaded team config from ${o}:`,r),console.log(`  Team members: ${r.teamMembers?.length||0}`),r.teamMembers?.forEach(l=>{console.log(`    - ${l.username} (${l.role}): ${l.defaultCapacity}h/week`)}),r}console.log(`No saved team config found for key: ${o}`)}catch(o){console.error("Error loading team config:",o)}return{teamMembers:[],lastUpdated:null}}function Ui(o){try{const c=Gs(Xh),r={...o,lastUpdated:new Date().toISOString()};return localStorage.setItem(c,JSON.stringify(r)),!0}catch(c){return console.error("Error saving team config:",c),!1}}function Bh(o){const c=ht(),r=c.teamMembers.findIndex(a=>a.username===o.username);r>=0?(console.log(`Updating existing team member ${o.username}:`,o),c.teamMembers[r]=o):(console.log(`Adding new team member ${o.username}:`,o),c.teamMembers.push(o));const l=Ui(c);return console.log(`Team member ${o.username} saved successfully:`,l),console.log("Updated team config:",c),l}function a0(o){const c=ht();return c.teamMembers=c.teamMembers.filter(r=>r.username!==o),Ui(c)}function ya(){try{const o=Gs(Kh),c=localStorage.getItem(o);if(c)return JSON.parse(c)}catch(o){console.error("Error loading sprint capacity:",o)}return{sprints:[]}}function r0(o){try{const c=Gs(Kh);return localStorage.setItem(c,JSON.stringify(o)),!0}catch(c){return console.error("Error saving sprint capacity:",c),!1}}function c0(o,c,r,l,a=""){const d=ya();let u=d.sprints.find(f=>f.sprintId===o);u||(u={sprintId:o,sprintName:c,memberCapacity:[]},d.sprints.push(u));let g=u.memberCapacity.find(f=>f.username===r);return g?(g.availableHours=l,g.reason=a):u.memberCapacity.push({username:r,availableHours:l,reason:a}),r0(d)}function nd(o,c,r=40,l=null){const d=ya().sprints.find(u=>u.sprintId===o);if(d){const u=d.memberCapacity.find(g=>g.username===c);if(u)return u.availableHours}if(l&&l.startDate&&l.dueDate)try{const g=require("./absenceService.js").calculateSprintCapacityWithAbsences(c,l,r);if(g.hoursLost>0)return g.adjustedCapacity}catch(u){console.warn("Absence service not available:",u)}return r}function va(){try{const o=Gs(Jh),c=localStorage.getItem(o);if(c)return JSON.parse(c)}catch(o){console.error("Error loading capacity settings:",o)}return{hoursPerStoryPoint:8,defaultHoursPerIssue:4,defaultWeeklyCapacity:40,lastCalculated:null,historicalData:null}}function eg(o){try{const c=Gs(Jh);return localStorage.setItem(c,JSON.stringify(o)),!0}catch(c){return console.error("Error saving capacity settings:",c),!1}}function d0(o){const c=l0(o),r=va();return r.hoursPerStoryPoint=c.hoursPerStoryPoint,r.lastCalculated=new Date().toISOString(),r.historicalData=c,eg(r),r}function p0(o){const c=new Set;return o.forEach(r=>{r.assignees?.forEach(l=>{c.add(JSON.stringify({username:l.username,name:l.name,avatar:l.avatar_url}))})}),Array.from(c).map(r=>JSON.parse(r))}const Lo="gitlab-pm-absences";function tg(o){const c=$s();if(c)return console.log(`absenceService: Using pod-level key for groupId: ${c}`),`${o}_pod_${c}`;const r=fn();return!r||r==="cross-project"?o:(console.log(`absenceService: Using project-level key for projectId: ${r}`),`${o}_${r}`)}function Yi(){try{const o=localStorage.getItem(tg(Lo));if(o){const c=JSON.parse(o);return c.absences&&(c.absences=c.absences.map(r=>({...r,startDate:new Date(r.startDate),endDate:new Date(r.endDate)}))),c}}catch(o){console.error("Error loading absences:",o)}return{absences:[],lastModified:new Date().toISOString()}}function u0(){const o=[];for(let c=0;c<localStorage.length;c++){const r=localStorage.key(c);if(r&&r.startsWith(Lo))try{const l=localStorage.getItem(r);if(l){const a=JSON.parse(l);if(a.absences){const d=r===Lo?"default":r.replace(`${Lo}_`,""),u=a.absences.map(g=>({...g,startDate:new Date(g.startDate),endDate:new Date(g.endDate),_projectId:d}));o.push(...u)}}}catch(l){console.error(`Error loading absences from ${r}:`,l)}}return o}function ng(o){try{const c={...o,lastModified:new Date().toISOString()};return localStorage.setItem(tg(Lo),JSON.stringify(c)),!0}catch(c){return console.error("Error saving absences:",c),!1}}function x0(o,c,r,l="",a="vacation"){const d=Yi(),u=new Date(c.getFullYear(),c.getMonth(),c.getDate()),g=new Date(r.getFullYear(),r.getMonth(),r.getDate()),f={id:`${o}-${u.getTime()}-${g.getTime()}`,username:o,startDate:u,endDate:g,reason:l,type:a,createdAt:new Date().toISOString()};return d.absences=d.absences.filter(x=>x.username!==o||!f0(x.startDate,x.endDate,u,g)),d.absences.push(f),ng(d),f}function h0(o){const c=Yi();c.absences=c.absences.filter(r=>r.id!==o),ng(c)}function ig(o,c=null,r=null){let a=Yi().absences.filter(d=>d.username===o);return(c||r)&&(a=a.filter(d=>!(c&&d.endDate<c||r&&d.startDate>r))),a.sort((d,u)=>d.startDate-u.startDate)}function g0(o,c){return Yi().absences.filter(l=>l.startDate<=c&&l.endDate>=o).sort((l,a)=>l.startDate-a.startDate)}function f0(o,c,r,l){return o<=l&&r<=c}function Us(o,c){let r=0;const l=new Date(o);for(;l<=c;){const a=l.getDay();a!==0&&a!==6&&r++,l.setDate(l.getDate()+1)}return r}function sg(o,c,r,l){const a=ig(o,c,r);let d=0;a.forEach(g=>{const f=g.startDate>c?g.startDate:c,x=g.endDate<r?g.endDate:r,m=Us(f,x);d+=m});const u=l/5;return Math.round(d*u*10)/10}function m0(o,c,r){if(!c.startDate||!c.dueDate)return{adjustedCapacity:r,hoursLost:0,workingDaysLost:0,absences:[]};const l=new Date(c.startDate),a=new Date(c.dueDate),d=ig(o,l,a),u=Us(l,a),g=sg(o,l,a,r);let f=0;d.forEach(v=>{const D=v.startDate>l?v.startDate:l,j=v.endDate<a?v.endDate:a;f+=Us(D,j)});const x=u/5,m=x*r,b=Math.max(0,m-g);return{adjustedCapacity:Math.round(b*10)/10,hoursLost:Math.round(g*10)/10,workingDaysLost:f,absences:d,sprintWorkingDays:u,sprintWeeks:Math.round(x*10)/10}}function og(o,c,r){const l=g0(c,r),a={totalAbsences:l.length,byMember:{},byType:{vacation:0,sick:0,conference:0,training:0,other:0},totalDaysOff:0,totalHoursImpact:0};return o.forEach(d=>{const u=l.filter(x=>x.username===d.username),g=d.defaultCapacity!==void 0&&d.defaultCapacity!==null?d.defaultCapacity:40,f=sg(d.username,c,r,g);a.byMember[d.username]={absenceCount:u.length,hoursLost:f,absences:u},a.totalHoursImpact+=f,u.forEach(x=>{const m=Us(x.startDate>c?x.startDate:c,x.endDate<r?x.endDate:r);a.totalDaysOff+=m,a.byType[x.type]=(a.byType[x.type]||0)+1})}),a}function y0(o=null,c=null){let l=Yi().absences;(o||c)&&(l=l.filter(u=>!(o&&u.endDate<o||c&&u.startDate>c)));const a=`Username,Start Date,End Date,Reason,Type,Created At
`,d=l.map(u=>{const g=u.startDate.toISOString().split("T")[0],f=u.endDate.toISOString().split("T")[0],x=new Date(u.createdAt).toISOString().split("T")[0];return`${u.username},${g},${f},"${u.reason}",${u.type},${x}`}).join(`
`);return a+d}function v0(o,c=30){if(!o||o.length===0)return[];const r=new Date;r.setDate(r.getDate()-c);const l=o.filter(u=>u.closed_at?new Date(u.closed_at)>=r:!1),a={};return l.forEach(u=>{const g=u.assignees?.[0]?.name||u.assignee?.name||"Unassigned";a[g]||(a[g]={name:g,issuesCompleted:0,storyPoints:0,avgCycleTime:[],labels:{}}),a[g].issuesCompleted++;const f=xd(u);if(f>0&&(a[g].storyPoints+=f),u.created_at&&u.closed_at){const x=new Date(u.created_at),m=new Date(u.closed_at),b=Math.ceil((m-x)/(1e3*60*60*24));a[g].avgCycleTime.push(b)}u.labels?.forEach(x=>{a[g].labels[x]||(a[g].labels[x]=0),a[g].labels[x]++})}),Object.values(a).map(u=>{const g=u.avgCycleTime.length>0?Math.round(u.avgCycleTime.reduce((f,x)=>f+x,0)/u.avgCycleTime.length):0;return{name:u.name,issuesCompleted:u.issuesCompleted,storyPoints:u.storyPoints,avgCycleTime:g,velocity:u.storyPoints/(c/7),topLabels:Object.entries(u.labels).sort((f,x)=>x[1]-f[1]).slice(0,3).map(([f])=>f)}}).sort((u,g)=>g.issuesCompleted-u.issuesCompleted)}function lg(o){if(!o||o.length===0)return[];const r=ht().teamMembers||[],a=Yi().absences||[],d=new Date,u=o.filter(f=>f.state==="opened"),g={};return r.forEach(f=>{g[f.username]={name:f.username,role:f.role,openIssues:0,storyPoints:0,isOnLeave:!1,overdueIssues:0,avgIssueAge:[]},a.filter(m=>m.username===f.username).forEach(m=>{const b=new Date(m.startDate),v=new Date(m.endDate);d>=b&&d<=v&&(g[f.username].isOnLeave=!0)})}),u.forEach(f=>{const x=f.assignees?.[0]?.name||f.assignee?.name;if(x&&g[x]){g[x].openIssues++;const m=xd(f);if(m>0&&(g[x].storyPoints+=m),f.due_date&&new Date(f.due_date)<d&&g[x].overdueIssues++,f.created_at){const b=new Date(f.created_at),v=Math.ceil((d-b)/(1e3*60*60*24));g[x].avgIssueAge.push(v)}}}),Object.values(g).map(f=>{const x=f.avgIssueAge.length>0?Math.round(f.avgIssueAge.reduce((m,b)=>m+b,0)/f.avgIssueAge.length):0;return{name:f.name,role:f.role,openIssues:f.openIssues,storyPoints:f.storyPoints,overdueIssues:f.overdueIssues,avgIssueAge:x,isOnLeave:f.isOnLeave}}).sort((f,x)=>x.openIssues-f.openIssues)}function b0(o){const c=lg(o),r=[],l=c.filter(u=>!u.isOnLeave);if(l.length===0)return r;const a=l.reduce((u,g)=>u+g.openIssues,0)/l.length,d=l.reduce((u,g)=>u+g.storyPoints,0)/l.length;return c.forEach(u=>{if(u.isOnLeave)return;const g=[];let f=0;u.openIssues>a*1.5&&(g.push(`${u.openIssues} open issues (team avg: ${Math.round(a)})`),f+=30),u.storyPoints>d*1.5&&(g.push(`${u.storyPoints} story points (team avg: ${Math.round(d)})`),f+=25),u.overdueIssues>=3&&(g.push(`${u.overdueIssues} overdue issues`),f+=20),u.avgIssueAge>45&&(g.push(`Average issue age: ${u.avgIssueAge} days`),f+=15),u.openIssues>a*2&&(g.push("Critical overload"),f+=30),f>=30&&r.push({name:u.name,role:u.role,riskScore:f,riskLevel:f>=60?"high":f>=40?"medium":"low",riskFactors:g,openIssues:u.openIssues,storyPoints:u.storyPoints,overdueIssues:u.overdueIssues})}),r.sort((u,g)=>g.riskScore-u.riskScore)}function j0(o){if(!o||o.length===0)return[];const r=ht().teamMembers||[],l=4,a=new Date,d={};return r.forEach(u=>{d[u.username]={name:u.username,role:u.role,weeklyVelocity:Array(l).fill(0),weeklyIssues:Array(l).fill(0),trend:"stable"}}),o.filter(u=>u.closed_at).forEach(u=>{const g=new Date(u.closed_at),f=Math.floor((a-g)/(10080*60*1e3));if(f<l&&f>=0){const x=u.assignees?.[0]?.name||u.assignee?.name;if(x&&d[x]){const m=xd(u);d[x].weeklyVelocity[l-1-f]+=m,d[x].weeklyIssues[l-1-f]++}}}),Object.values(d).map(u=>{const g=u.weeklyVelocity.slice(-2),f=u.weeklyVelocity.slice(0,2),x=g.reduce((j,w)=>j+w,0)/2,m=f.reduce((j,w)=>j+w,0)/2;let b="stable";x>m*1.2?b="increasing":x<m*.8&&(b="decreasing");const D=u.weeklyVelocity.reduce((j,w)=>j+w,0)/l;return{name:u.name,role:u.role,weeklyVelocity:u.weeklyVelocity,weeklyIssues:u.weeklyIssues,avgVelocity:Math.round(D*10)/10,totalIssues:u.weeklyIssues.reduce((j,w)=>j+w,0),trend:b}}).sort((u,g)=>g.avgVelocity-u.avgVelocity)}function xd(o){if(o.weight!==void 0&&o.weight!==null)return o.weight;if(o.labels)for(const c of o.labels){const r=c.match(/^(?:story points?|sp|points?)[:=\s]*(\d+)$/i);if(r)return parseInt(r[1],10)}if(o.title){const c=o.title.match(/\[(\d+)\s*(?:sp|pts?|points?)?\]/i);if(c)return parseInt(c[1],10)}return 0}function S0(o,c=30){const r=v0(o,c),l=lg(o),a=b0(o),d=j0(o),u=r.reduce((x,m)=>x+m.issuesCompleted,0),g=r.reduce((x,m)=>x+m.storyPoints,0);let f=l.filter(x=>!x.isOnLeave).length;return f===0&&r.length>0&&(f=r.filter(x=>x.name!=="Unassigned").length),{topContributors:r.slice(0,5),workloadDistribution:l,burnoutRisks:a,velocityTrends:d,summary:{activeMembers:f,totalCompleted:u,totalStoryPoints:g,avgVelocityPerMember:f>0?Math.round(g/f*10)/10:0,membersAtRisk:a.length,membersOnLeave:l.filter(x=>x.isOnLeave).length}}}const D0="gitlab-pm-forecasts";function B0(o){const c=fn();return!c||c==="cross-project"?o:`${o}_${c}`}function hd(){try{const o=localStorage.getItem(B0(D0));if(o){const c=JSON.parse(o);return c.forecasts&&(c.forecasts=c.forecasts.map(r=>({...r,createdAt:new Date(r.createdAt),targetDate:new Date(r.targetDate),actualDate:r.actualDate?new Date(r.actualDate):null}))),c}}catch(o){console.error("Error loading forecast history:",o)}return{forecasts:[],lastModified:new Date().toISOString()}}function ag(){const o=hd(),c=o.forecasts.filter(U=>U.status==="completed"&&U.accuracy);if(c.length===0)return{totalForecasts:o.forecasts.length,completedForecasts:0,overallAccuracy:0,avgDaysOff:0,onTimeCount:0,earlyCount:0,lateCount:0,onTimePercentage:0,avgConfidenceScore:0,confidenceCorrelation:"unknown"};const r=c.reduce((U,G)=>U+Math.abs(G.accuracy.diffDays),0),l=Math.round(r/c.length),a=c.filter(U=>U.accuracy.wasOnTime).length,d=c.filter(U=>U.accuracy.wasEarly&&!U.accuracy.wasOnTime).length,u=c.filter(U=>U.accuracy.wasLate).length,g=Math.round(c.reduce((U,G)=>U+G.confidenceScore,0)/c.length),f=c.reduce((U,G)=>U+G.accuracy.percentageError,0)/c.length,x=Math.max(0,Math.round(100-f)),m=c.filter(U=>U.confidenceScore>=70),b=m.filter(U=>U.accuracy.wasOnTime).length,v=m.length>0?b/m.length*100:0,D=c.filter(U=>U.confidenceScore<50),j=D.filter(U=>U.accuracy.wasOnTime).length,w=D.length>0?j/D.length*100:0;let H="unknown";return m.length>=3&&D.length>=3&&(v>w+20?H="strong":v>w+10?H="moderate":H="weak"),{totalForecasts:o.forecasts.length,completedForecasts:c.length,overallAccuracy:x,avgDaysOff:l,onTimeCount:a,earlyCount:d,lateCount:u,onTimePercentage:Math.round(a/c.length*100),avgConfidenceScore:g,confidenceCorrelation:H,highConfidenceAccuracy:Math.round(v),lowConfidenceAccuracy:Math.round(w)}}function C0(o=6){const r=hd().forecasts.filter(a=>a.status==="completed"&&a.accuracy);if(r.length===0)return[];const l={};return r.forEach(a=>{const d=new Date(a.createdAt).toISOString().slice(0,7);l[d]||(l[d]={month:d,forecasts:[],onTime:0,early:0,late:0}),l[d].forecasts.push(a),a.accuracy.wasOnTime?l[d].onTime++:a.accuracy.wasEarly?l[d].early++:a.accuracy.wasLate&&l[d].late++}),Object.values(l).map(a=>({month:a.month,totalForecasts:a.forecasts.length,onTimePercentage:Math.round(a.onTime/a.forecasts.length*100),avgDaysOff:Math.round(a.forecasts.reduce((d,u)=>d+Math.abs(u.accuracy.diffDays),0)/a.forecasts.length),distribution:{onTime:a.onTime,early:a.early,late:a.late}})).sort((a,d)=>a.month.localeCompare(d.month)).slice(-o)}function E0(o=10){return hd().forecasts.sort((r,l)=>new Date(l.createdAt)-new Date(r.createdAt)).slice(0,o)}function w0(){const o=ag();if(o.completedForecasts<5)return{score:null,reason:"Insufficient data (need at least 5 completed forecasts)",recommendation:"Continue tracking forecasts to build confidence"};let c=0;const r=[],l=Math.round(o.onTimePercentage/100*40);c+=l,r.push({name:"On-Time Rate",points:l,maxPoints:40,detail:`${o.onTimePercentage}% on time`});const a=Math.round(o.overallAccuracy/100*30);c+=a,r.push({name:"Overall Accuracy",points:a,maxPoints:30,detail:`${o.overallAccuracy}% accurate`});let d=0;o.confidenceCorrelation==="strong"?d=20:o.confidenceCorrelation==="moderate"?d=12:o.confidenceCorrelation==="weak"&&(d=5),c+=d,r.push({name:"Confidence Reliability",points:d,maxPoints:20,detail:`${o.confidenceCorrelation} correlation`});const u=Math.min(10,Math.round(o.completedForecasts/20*10));c+=u,r.push({name:"Data Sample",points:u,maxPoints:10,detail:`${o.completedForecasts} forecasts`});let g="";return c>=80?g="Excellent forecast reliability. Predictions are highly trustworthy.":c>=60?g="Good forecast reliability. Continue monitoring and refining.":c>=40?g="Moderate reliability. Focus on improving accuracy factors.":g="Low reliability. Review forecasting methodology and assumptions.",{score:c,factors:r,recommendation:g,stats:o}}function z0({burnupData:o,width:c,height:r=300}){const[l,a]=W.useState(null),[d,u]=W.useState({x:0,y:0}),[g,f]=W.useState(c||600),x=W.useRef(null);if(W.useEffect(()=>{if(c){f(c);return}const y=()=>{x.current&&f(x.current.offsetWidth)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[c]),!o||!o.dataPoints||o.dataPoints.length===0)return e.jsx("div",{ref:x,style:{width:c?`${c}px`:"100%",height:`${r}px`,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-secondary)",borderRadius:"8px",color:"var(--text-tertiary)",fontSize:"14px"},children:"No data available"});const m={top:20,right:20,bottom:40,left:50},b=g-m.left-m.right,v=r-m.top-m.bottom,D=o.dataPoints,j=Math.max(...D.map(y=>y.totalScope),10),w=Math.ceil(j*1.1/10)*10,H=y=>m.left+y/(D.length-1||1)*b,U=y=>m.top+v-y/w*v,G=D.map((y,C)=>{const I=H(C),_=U(y.totalScope);return`${C===0?"M":"L"} ${I} ${_}`}).join(" "),$=D.map((y,C)=>{const I=H(C),_=U(y.completed);return`${C===0?"M":"L"} ${I} ${_}`}).join(" "),B=[];for(let y=0;y<=5;y++){const C=Math.round(w/5*y),I=U(C);B.push({value:C,y:I})}const M=Math.max(1,Math.floor(D.length/6)),R=D.filter((y,C)=>C%M===0||C===D.length-1).map((y,C)=>{const I=C*M;return I>=D.length?null:{label:new Date(y.date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"}),x:H(I)}}).filter(y=>y!==null),L=[];let O=null;return D.forEach((y,C)=>{const _=new Date(y.date).getFullYear();O!==null&&_!==O&&C>0&&L.push({index:C,year:_,x:H(C)}),O=_}),e.jsx("div",{ref:x,style:{width:c?`${c}px`:"100%"},children:e.jsxs("svg",{width:g,height:r,style:{fontFamily:"system-ui, sans-serif"},children:[B.map((y,C)=>e.jsx("line",{x1:m.left,y1:y.y,x2:m.left+b,y2:y.y,stroke:"#E5E7EB",strokeWidth:"1",strokeDasharray:"2,2"},`grid-${C}`)),e.jsx("line",{x1:m.left,y1:m.top,x2:m.left,y2:m.top+v,stroke:"#9CA3AF",strokeWidth:"2"}),e.jsx("line",{x1:m.left,y1:m.top+v,x2:m.left+b,y2:m.top+v,stroke:"#9CA3AF",strokeWidth:"2"}),L.map((y,C)=>e.jsxs("g",{children:[e.jsx("line",{x1:y.x,y1:m.top,x2:y.x,y2:m.top+v,stroke:"#3B82F6",strokeWidth:"1.5",strokeDasharray:"5,5",opacity:"0.6"}),e.jsx("text",{x:y.x,y:m.top+v+35,textAnchor:"middle",fontSize:"11",fontWeight:"600",fill:"#3B82F6",children:y.year})]},`year-${C}`)),B.map((y,C)=>e.jsx("text",{x:m.left-10,y:y.y+4,textAnchor:"end",fontSize:"11",fill:"#6B7280",children:y.value},`ylabel-${C}`)),R.map((y,C)=>e.jsx("text",{x:y.x,y:m.top+v+20,textAnchor:"middle",fontSize:"10",fill:"#6B7280",children:y.label},`xlabel-${C}`)),e.jsx("path",{d:G,fill:"none",stroke:"#EF4444",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:$,fill:"none",stroke:"#10B981",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:`${$} L ${H(D.length-1)} ${m.top+v} L ${m.left} ${m.top+v} Z`,fill:"#10B981",fillOpacity:"0.1"}),e.jsxs("g",{transform:`translate(${m.left+20}, ${m.top+10})`,children:[e.jsx("line",{x1:"0",y1:"0",x2:"30",y2:"0",stroke:"#EF4444",strokeWidth:"2.5"}),e.jsx("text",{x:"35",y:"4",fontSize:"11",fill:"#374151",children:"Total Scope"}),e.jsx("line",{x1:"130",y1:"0",x2:"160",y2:"0",stroke:"#10B981",strokeWidth:"2.5"}),e.jsx("text",{x:"165",y:"4",fontSize:"11",fill:"#374151",children:"Completed"})]}),e.jsx("text",{x:m.left+b/2,y:15,textAnchor:"middle",fontSize:"13",fontWeight:"600",fill:"#111827",children:"Burnup Chart - Scope vs Completion"}),e.jsx("text",{x:-r/2,y:15,textAnchor:"middle",fontSize:"11",fill:"#6B7280",transform:`rotate(-90, 15, ${r/2})`,children:"Issue Count"}),D.map((y,C)=>{const I=H(C),_=U(y.totalScope),P=U(y.completed),X=l===C;return e.jsxs("g",{children:[e.jsx("rect",{x:I-10,y:m.top,width:20,height:v,fill:"transparent",style:{cursor:"pointer"},onMouseEnter:z=>{a(C);const T=z.currentTarget.getBoundingClientRect();u({x:T.left+10,y:T.top})},onMouseLeave:()=>a(null)}),X&&e.jsx("line",{x1:I,y1:m.top,x2:I,y2:m.top+v,stroke:"#94A3B8",strokeWidth:"1",strokeDasharray:"4,4",pointerEvents:"none"}),e.jsx("circle",{cx:I,cy:_,r:X?5:3,fill:"#EF4444",stroke:"white",strokeWidth:"2",style:{cursor:"pointer",transition:"all 0.2s",pointerEvents:"none"}}),e.jsx("circle",{cx:I,cy:P,r:X?5:3,fill:"#10B981",stroke:"white",strokeWidth:"2",style:{cursor:"pointer",transition:"all 0.2s",pointerEvents:"none"}})]},`point-${C}`)}),l!==null&&(()=>{const C=H(l),_=C+150+20>g?C-150-10:C+10;return e.jsx("g",{children:e.jsx("foreignObject",{x:_,y:m.top+10,width:150,height:100,children:e.jsxs("div",{style:{background:"rgba(17, 24, 39, 0.95)",color:"white",padding:"10px 12px",borderRadius:"6px",fontSize:"11px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.2)",pointerEvents:"none"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"6px",fontSize:"12px"},children:new Date(D[l].date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsxs("div",{style:{marginBottom:"4px",color:"#FCA5A5"},children:[e.jsx("strong",{children:"Total Scope:"})," ",D[l].totalScope]}),e.jsxs("div",{style:{marginBottom:"4px",color:"#6EE7B7"},children:[e.jsx("strong",{children:"Completed:"})," ",D[l].completed]}),e.jsxs("div",{style:{color:"#D1D5DB"},children:[e.jsx("strong",{children:"Remaining:"})," ",D[l].totalScope-D[l].completed]})]})})})})()]})})}function rg(o){const[c,r]=W.useState(null),[l,a]=W.useState(!1),[d,u]=W.useState({current:0,total:0}),[g,f]=W.useState(null);return W.useEffect(()=>!o||o.length===0?void 0:((async()=>{try{a(!0),f(null);const b=Kt();if(!b){console.log("No config available, skipping label events fetch");return}const v=o.filter(j=>j.state==="closed").length;if(v===0){console.log("No closed issues, skipping label events fetch");return}console.log(`Fetching label events for ${v} closed issues...`);const D=await Zy(o,{gitlabUrl:b.gitlabUrl,projectId:b.projectId,token:b.token},(j,w)=>{u({current:j,total:w})});r(D),console.log(` Label events loaded: ${D.size} issues`)}catch(b){console.error("Failed to fetch label events:",b),f(b.message)}finally{a(!1)}})(),()=>{}),[o]),{labelEventsMap:c,loading:l,progress:d,error:g,refresh:()=>{e0(),r(null),u({current:0,total:0})},hasData:c!==null&&c.size>0}}function k0({stats:o,healthScore:c,issues:r,milestones:l,epics:a,risks:d}){const[u,g]=W.useState(!1),[f,x]=W.useState(0),[m,b]=W.useState({blockers:!1,overdue:!1,highPriority:!1}),v=z=>{b(T=>({...T,[z]:!T[z]}))},{filteredIssues:D}=qi(),{labelEventsMap:j,hasData:w}=rg(D),H=W.useMemo(()=>!a||!D?[]:Ph(a,D),[a,D]),U=W.useMemo(()=>l?Ry(l,30):[],[l]),G=W.useMemo(()=>{if(!D||D.length===0)return null;const z=new Date;z.setDate(z.getDate()-28);const N=(D.filter(q=>q.state!=="closed"||!q.closed_at?!1:new Date(q.closed_at)>=z).length/4).toFixed(1),K=new Map;D.filter(q=>q.state==="opened").forEach(q=>{q.assignees?.forEach(k=>{const A=K.get(k.id)||0;K.set(k.id,A+1)})});const te=K.size>0?(D.filter(q=>q.state==="opened"&&q.assignees?.length>0).length/K.size).toFixed(1):0;return{weeklyVelocity:N,activeMembers:K.size,avgIssuesPerPerson:te}},[D]),$=W.useMemo(()=>{if(!o)return null;const z=D.filter(T=>T.state!=="opened"?!1:(T.labels?.map(K=>K.toLowerCase())||[]).some(K=>K.includes("priority::high")||K.includes("critical")||K.includes("urgent"))).length;return{blockers:o.blockers,overdue:o.overdue,highPriority:z,total:o.blockers+o.overdue+z}},[D,o]);W.useMemo(()=>d?d.filter(z=>z.impact==="high"||z.impact==="medium"&&z.probability==="high").slice(0,3):[],[d]);const B=W.useMemo(()=>!D||D.length===0?null:Hh(D),[D]),M=W.useMemo(()=>{if(!D||D.length===0)return null;const z=Ho(D);if(z.length===0)return null;const T=ud(D),N=pd(z,T);let K=z.length-1;if(T){const xe=z.findIndex(ze=>ze.sprint===T);xe>=0&&(K=xe)}const te=Math.max(0,K-5),q=z.slice(te,K+1),k=q.reduce((xe,ze)=>xe+ze.velocity,0)/q.length,A=Math.max(...q.map(xe=>xe.velocity)),V=Math.min(...q.map(xe=>xe.velocity)),Q=q.slice(-3),ae=q.slice(0,3),re=Q.reduce((xe,ze)=>xe+ze.velocity,0),ue=ae.reduce((xe,ze)=>xe+ze.velocity,0),fe=ue>0?Math.round((re-ue)/ue*100):0;return{avgVelocity:Math.round(k),trend:N.longTerm,peakVelocity:A,lowVelocity:V,last6Sprints:q,recent3Total:re,previous3Total:ue,trendPercent:fe}},[D]),R=W.useMemo(()=>{if(!D||D.length===0)return null;if(w&&j){const z=Yh(D,j);return console.log("Using enhanced cycle time with label events:",{accurateCount:z.accurateCount,estimatedCount:z.estimatedCount,dataQuality:z.dataQuality}),z}return Vh(D)},[D,w,j]),L=W.useMemo(()=>{if(!D||D.length===0)return console.log("[DeliveryConfidence] No issues, returning null"),null;try{console.log("[DeliveryConfidence] Calculating with",D.length,"issues");const z=Ly(D);return console.log("[DeliveryConfidence] Result:",z),!z||typeof z.score>"u"?(console.warn("[DeliveryConfidence] Invalid result, returning null:",z),null):z}catch(z){return console.error("[DeliveryConfidence] Error calculating delivery confidence:",z),{score:0,status:"unknown",statusColor:"#6B7280",factors:[],recommendations:[],breakdown:{}}}},[D]),O=W.useMemo(()=>!D||D.length===0?null:$y(D),[D]),y=W.useMemo(()=>i0(30),[]),C=W.useMemo(()=>s0(),[]),I=W.useMemo(()=>!D||D.length===0?null:S0(D,30),[D]),_=W.useMemo(()=>{try{const z=ag(),T=C0(6),N=w0(),K=E0(5);return{stats:z,trends:T,reliability:N,recent:K}}catch(z){return console.error("Error loading forecast accuracy data:",z),{stats:null,trends:[],reliability:{score:null},recent:[]}}},[]),P=()=>{Ny({initiatives:H,healthScore:c,burnupData:B,cycleTimeMetrics:R,deliveryConfidence:L,monthOverMonthMetrics:O,recentDecisions:y,upcomingMilestones:U,teamPerformance:I,forecastAccuracy:_})},X=z=>{x(T=>T+1),window.location.reload()};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"30px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Executive Overview"}),e.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Comprehensive view of all initiatives and key performance indicators"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("button",{className:"btn",onClick:()=>g(!0),style:{display:"flex",alignItems:"center",gap:"8px",background:"var(--bg-secondary)"},title:"Configure health score calculation",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Health Score Settings"})]}),e.jsx("button",{className:"btn btn-primary",onClick:P,style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{children:" Export PDF"})})]})]}),e.jsx(Oy,{isOpen:u,onClose:()=>g(!1),onSave:X}),e.jsxs("div",{className:"grid grid-4",style:{marginBottom:"30px"},children:[e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Active Initiatives"}),e.jsx("div",{className:"metric-value",style:{color:"var(--info)"},children:H.filter(z=>z.openIssues>0).length}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:[H.filter(z=>z.status==="on-track").length," on track, ",H.filter(z=>z.status==="at-risk").length," at risk"]})]}),e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Health Score"}),e.jsx("div",{className:"metric-value",style:{color:c?.status==="green"?"var(--success)":c?.status==="amber"?"var(--warning)":"var(--danger)"},children:c?.score??0}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:"Overall project health"})]}),G&&e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Velocity & Capacity"}),e.jsx("div",{className:"metric-value",style:{color:"var(--primary)"},children:G.weeklyVelocity}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:["issues/week  ",G.activeMembers," members  ",G.avgIssuesPerPerson," avg/person"]})]}),$&&e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Risk Profile"}),e.jsx("div",{className:"metric-value",style:{color:$.total===0?"var(--success)":$.total<=5?"var(--warning)":"var(--danger)"},children:$.total}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:[$.blockers," blockers  ",$.overdue," overdue  ",$.highPriority," high priority"]})]})]}),e.jsxs("div",{className:"grid grid-3",style:{gap:"20px",marginBottom:"30px"},children:[B&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"16px",fontSize:"16px",fontWeight:"600"},children:"Scope Tracking"}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Total scope vs completed work over time"}),e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Total Scope"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:B.totalScope})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Completed"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--success)"},children:B.completed})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Remaining"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--text-secondary)"},children:B.remaining})]})]}),e.jsx("div",{style:{marginBottom:"16px",width:"100%"},children:e.jsx(z0,{burnupData:B,width:void 0,height:200})}),e.jsx("div",{style:{marginBottom:"12px"},children:e.jsx("div",{className:"progress-bar",style:{height:"8px"},children:e.jsx("div",{className:"progress-fill",style:{width:`${B.totalScope>0?B.completed/B.totalScope*100:0}%`,background:"var(--success)"}})})}),B.scopeGrowthPercent>0&&e.jsxs("div",{style:{padding:"8px 12px",background:B.scopeGrowthPercent>25?"#FEF3C7":"#EFF6FF",borderRadius:"6px",marginBottom:"12px"},children:[e.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:B.scopeGrowthPercent>25?"#92400E":"#1E40AF",marginBottom:"2px"},children:["Scope Growth: +",B.scopeGrowthPercent,"%"]}),e.jsxs("div",{style:{fontSize:"11px",color:B.scopeGrowthPercent>25?"#D97706":"#3B82F6"},children:["+",B.scopeGrowth," items added since start"]})]}),B.projectedCompletion&&e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:["Projected completion: ",new Date(B.projectedCompletion).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]})]}),M&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"16px",fontSize:"16px",fontWeight:"600"},children:"Velocity Trend (6 Iterations)"}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Historical delivery performance"}),e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"24px",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Average Velocity"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:M.avgVelocity}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:"issues per iteration"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Recent 3 Iterations"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#374151"},children:M.recent3Total}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:["vs ",M.previous3Total," previous"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",paddingBottom:"8px"},children:e.jsxs("span",{style:{fontSize:"18px",fontWeight:"600",color:M.trendPercent>=0?"#059669":"#DC2626"},children:[M.trendPercent>=0?"":""," ",Math.abs(M.trendPercent),"%"]})})]}),M.last6Sprints&&M.last6Sprints.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"12px",height:"180px",display:"flex",alignItems:"flex-end",gap:"4px"},children:M.last6Sprints.map((z,T)=>{const N=Math.max(...M.last6Sprints.map(q=>q.velocity)),K=N>0?z.velocity/N*100:0,te=T===M.last6Sprints.length-1;return e.jsx("div",{style:{flex:1,height:`${K}%`,minHeight:"12px",background:te?"#2563EB":"#93C5FD",borderRadius:"4px 4px 0 0",position:"relative",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"4px"},title:`${z.sprint}: ${z.velocity} issues`,children:e.jsx("span",{style:{fontSize:"10px",fontWeight:"600",color:te?"white":"#1E40AF"},children:z.velocity})},T)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"var(--text-tertiary)"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600"},children:"Low:"})," ",M.lowVelocity]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600"},children:"Peak:"})," ",M.peakVelocity]})]})]})]}),R&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:"Delivery Efficiency"}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"How quickly work flows through the system"})]}),R&&e.jsx("div",{style:{fontSize:"10px",padding:"4px 8px",borderRadius:"4px",background:w?"#DBEAFE":"#F3F4F6",color:w?"#1E40AF":"#6B7280",fontWeight:"600"},title:w?`${R.accurateCount||0} issues with accurate work start labels, ${R.estimatedCount||0} estimated from created_at`:"All cycle times estimated from created_at (label events not available)",children:w?` ${R.accurateCount||0}/${R.count} accurate`:"Estimated"})]}),R&&R.count>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Avg Cycle Time"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:R.avgCycleTime}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:"days (start to done)"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Avg Lead Time"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#374151"},children:R.avgLeadTime}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:"days (created to done)"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Median Cycle Time"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#6B7280"},children:[R.medianCycleTime," days"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Issues Closed"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#6B7280"},children:R.count})]})]}),e.jsx("div",{style:{borderTop:"1px solid #E5E7EB",paddingTop:"12px"},children:e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:R.avgCycleTime<7?"#059669":R.avgCycleTime<14?"#D97706":"#6B7280"},children:R.avgCycleTime<7?"Excellent efficiency (<7 days)":R.avgCycleTime<14?"Good efficiency (7-14 days)":"Target: <14 days for optimal flow"})})]}):e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"#9CA3AF"},children:[e.jsx("div",{style:{fontSize:"13px"},children:"No closed issues yet"}),e.jsx("div",{style:{fontSize:"11px",marginTop:"4px"},children:"Complete some issues to see delivery metrics"})]})]})]}),L&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%)",border:"2px solid #E5E7EB"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px"},children:"Delivery Confidence Score"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:"Will we hit our target? Comprehensive confidence analysis"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"48px",fontWeight:"700",color:L?.statusColor||"#6B7280"},children:[L?.score??0,"%"]}),e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",textTransform:"uppercase",color:L?.statusColor||"#6B7280",letterSpacing:"0.5px"},children:[L?.status||"Unknown"," Confidence"]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"12px",marginBottom:"20px"},children:L?.factors?.map((z,T)=>{const N=Math.round(z.score/z.maxScore*100);return e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:`1px solid ${z.status==="good"?"#D1FAE5":z.status==="warning"?"#FEF3C7":"#FEE2E2"}`},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"6px"},children:z.name}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:z.status==="good"?"#16A34A":z.status==="warning"?"#EAB308":"#DC2626",marginBottom:"4px"},children:[N,"%"]}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-secondary)"},children:z.detail})]},T)})}),L?.recommendations?.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"12px"},children:"Top Recommendations"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:L.recommendations.slice(0,3).map((z,T)=>e.jsxs("div",{style:{padding:"10px 12px",background:"white",borderRadius:"6px",borderLeft:`3px solid ${z.priority==="critical"?"#DC2626":z.priority==="high"?"#F97316":"#3B82F6"}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"700",textTransform:"uppercase",color:z.priority==="critical"?"#DC2626":z.priority==="high"?"#F97316":"#3B82F6",letterSpacing:"0.5px"},children:z.priority}),e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--text-primary)"},children:z.title})]}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:z.description})]},T))})]})]}),_?.reliability?.score!==null&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"linear-gradient(135deg, #EFF6FF 0%, #FFFFFF 100%)",border:"2px solid #BFDBFE"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px"},children:"Forecast Accuracy Tracking"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:"How reliable are our predictions? Historical performance"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"48px",fontWeight:"700",color:_.reliability.score>=80?"#16A34A":_.reliability.score>=60?"#EAB308":"#DC2626"},children:_.reliability.score}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",textTransform:"uppercase",color:_.reliability.score>=80?"#16A34A":_.reliability.score>=60?"#EAB308":"#DC2626",letterSpacing:"0.5px"},children:"Reliability Score"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"12px",marginBottom:"20px"},children:[e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Total Forecasts"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:_.stats.completedForecasts})]}),e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"On Time"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#16A34A"},children:[_.stats.onTimePercentage,"%"]})]}),e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Avg Days Off"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--warning)"},children:_.stats.avgDaysOff})]}),e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Early"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#3B82F6"},children:_.stats.earlyCount})]}),e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Late"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#DC2626"},children:_.stats.lateCount})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"Reliability Factors"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:_.reliability.factors.map((z,T)=>{const N=Math.round(z.points/z.maxPoints*100);return e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"6px"},children:z.name}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:N>=80?"#16A34A":N>=60?"#EAB308":"#DC2626",marginBottom:"4px"},children:[N,"%"]}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-secondary)"},children:z.detail})]},T)})})]}),e.jsxs("div",{style:{padding:"12px 16px",background:"white",borderRadius:"8px",border:"1px solid #BFDBFE"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1E40AF",marginBottom:"4px"},children:"Recommendation"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:_.reliability.recommendation})]})]}),_?.reliability?.score===null&&e.jsxs("div",{className:"card",style:{marginBottom:"30px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px"},children:"Forecast Accuracy Tracking"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:"Track prediction accuracy to build confidence in forecasting"})]})}),e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:_.reliability.reason}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:_.reliability.recommendation})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"30px",marginBottom:"30px"},children:[O&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px",fontWeight:"600"},children:"Trailing 30-Day Trends"}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"20px"},children:["Comparing ",O.currentPeriod.name," vs ",O.previousPeriod.name]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"6px"},children:"Issues Created"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:O.currentPeriod.issues}),e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:O.changes.issues>=0?"#16A34A":"#DC2626"},children:[O.changes.issues>=0?"":""," ",Math.abs(O.percentChanges.issues),"%"]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:["vs ",O.previousPeriod.issues," previous period"]})]}),e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"6px"},children:"Issues Completed"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--success)"},children:O.currentPeriod.completed}),e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:O.changes.completed>=0?"#16A34A":"#DC2626"},children:[O.changes.completed>=0?"":""," ",Math.abs(O.percentChanges.completed),"%"]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:["vs ",O.previousPeriod.completed," previous period"]})]}),e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"6px"},children:"Story Points"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:O.currentPeriod.points}),e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:O.changes.points>=0?"#16A34A":"#DC2626"},children:[O.changes.points>=0?"":""," ",Math.abs(O.percentChanges.points),"%"]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:["vs ",O.previousPeriod.points," previous period"]})]})]}),e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#F9FAFB",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"6px"},children:"30-Day Trend Summary"}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[O.changes.completed>0?`Delivery velocity increased by ${Math.abs(O.changes.completed)} issues in the last 30 days.`:O.changes.completed<0?`Delivery velocity decreased by ${Math.abs(O.changes.completed)} issues in the last 30 days.`:"Delivery velocity remained stable in the last 30 days."," ",O.changes.issues>0&&`New scope increased by ${Math.abs(O.changes.issues)} issues.`]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Recent Decisions"}),e.jsxs("div",{style:{padding:"4px 12px",background:"#DBEAFE",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:"#1E40AF"},children:[C.recent30Days," this month"]})]}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"20px"},children:"Key strategic and technical decisions"}),y.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"No decisions recorded"}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:"Track strategic decisions for better transparency"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:y.slice(0,5).map((z,T)=>{const K={critical:"#DC2626",high:"#F97316",medium:"#EAB308",low:"#10B981"}[z.impact]||"#6B7280";return e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px",borderLeft:`3px solid ${K}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--text-primary)",flex:1},children:z.title}),e.jsx("div",{style:{fontSize:"10px",fontWeight:"600",textTransform:"uppercase",color:K,marginLeft:"12px"},children:z.impact})]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:z.description}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",background:"#E5E7EB",borderRadius:"4px",color:"#6B7280"},children:z.category}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-tertiary)"},children:z.date.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]},z.id)})}),C.total>0&&e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"#F9FAFB",borderRadius:"8px"},children:e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",display:"flex",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600"},children:"Total:"})," ",C.total]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600"},children:"Active:"})," ",C.byStatus.active]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600"},children:"Implemented:"})," ",C.byStatus.implemented]})]})})]})]}),I&&e.jsxs("div",{className:"card",style:{marginBottom:"30px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px"},children:"Team Performance & Workload"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:"Individual contributions, workload distribution, and burnout risks"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:I.summary.activeMembers}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:"active members"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"20px"},children:[e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Completed (30d)"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--success)"},children:I.summary.totalCompleted})]}),e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Story Points"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--primary)"},children:I.summary.totalStoryPoints})]}),e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Avg per Member"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"var(--info)"},children:I.summary.avgVelocityPerMember})]}),e.jsxs("div",{style:{padding:"12px",background:I.summary.membersAtRisk>0?"#FEE2E2":"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"At Risk"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:I.summary.membersAtRisk>0?"#DC2626":"var(--success)"},children:I.summary.membersAtRisk})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--text-primary)"},children:"Top Contributors (Last 30 Days)"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"12px"},children:I.topContributors.slice(0,5).map((z,T)=>e.jsxs("div",{style:{padding:"12px",background:T===0?"linear-gradient(135deg, #FEF3C7 0%, #FFFBEB 100%)":"var(--bg-secondary)",borderRadius:"8px",border:T===0?"2px solid #F59E0B":"1px solid var(--border-light)",position:"relative"},children:[T===0&&e.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",width:"24px",height:"24px",background:"#F59E0B",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"8px"},children:z.name}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#16A34A",marginBottom:"4px"},children:z.issuesCompleted}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-tertiary)",marginBottom:"6px"},children:"issues completed"}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:[z.storyPoints," pts  ",z.avgCycleTime,"d avg"]})]},z.name))})]}),I.burnoutRisks.length>0&&e.jsxs("div",{style:{padding:"16px",background:"linear-gradient(135deg, #FEE2E2 0%, #FEF2F2 100%)",border:"2px solid #DC2626",borderRadius:"8px",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"24px",width:"40px",height:"40px",background:"#DC2626",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#991B1B"},children:"Burnout Risk Alert"}),e.jsxs("div",{style:{fontSize:"12px",color:"#DC2626"},children:[I.burnoutRisks.length," team member",I.burnoutRisks.length!==1?"s":""," at risk"]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:I.burnoutRisks.map(z=>e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px",borderLeft:`4px solid ${z.riskLevel==="high"?"#DC2626":z.riskLevel==="medium"?"#F97316":"#EAB308"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--text-primary)"},children:z.name}),e.jsxs("div",{style:{fontSize:"10px",fontWeight:"700",textTransform:"uppercase",color:z.riskLevel==="high"?"#DC2626":z.riskLevel==="medium"?"#F97316":"#EAB308",padding:"2px 8px",background:z.riskLevel==="high"?"#FEE2E2":z.riskLevel==="medium"?"#FFEDD5":"#FEF3C7",borderRadius:"4px"},children:[z.riskLevel," risk"]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[z.role,"  ",z.openIssues," open  ",z.storyPoints," pts",z.overdueIssues>0&&`  ${z.overdueIssues} overdue`]}),e.jsxs("div",{style:{fontSize:"11px",color:"#DC2626"},children:[e.jsx("strong",{children:"Factors:"})," ",z.riskFactors.join(", ")]})]},z.name))})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--text-primary)"},children:"Current Workload Distribution"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:I.workloadDistribution.slice(0,8).map(z=>{const T=z.openIssues>10||z.storyPoints>30;return e.jsxs("div",{style:{padding:"10px 12px",background:z.isOnLeave?"#F3F4F6":T?"#FEF3C7":"var(--bg-secondary)",borderRadius:"6px",display:"flex",alignItems:"center",gap:"12px",opacity:z.isOnLeave?.6:1},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--text-primary)"},children:[z.name," ",z.isOnLeave&&"(On Leave)"]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)"},children:z.role})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:T?"#D97706":"var(--primary)"},children:z.openIssues}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-tertiary)"},children:"open"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"var(--info)"},children:z.storyPoints}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-tertiary)"},children:"points"})]}),z.overdueIssues>0&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#DC2626"},children:z.overdueIssues}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-tertiary)"},children:"overdue"})]}),z.avgIssueAge>0&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-secondary)"},children:[z.avgIssueAge,"d"]}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-tertiary)"},children:"avg age"})]})]})]},z.name)})})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"30px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"20px",fontSize:"18px",fontWeight:"600"},children:"Active Initiatives"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Current status of ongoing strategic projects"}),H.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"No initiatives found"}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:'Tag epics with "initiative::name" labels to group them into initiatives'})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:H.slice(0,4).map(z=>{const T=Ty(z.status);return e.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-light)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:z.name}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[z.epics.length," epic",z.epics.length!==1?"s":"","  ",z.totalIssues," issue",z.totalIssues!==1?"s":""]})]}),e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",color:T.color,background:T.background,whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:T.icon}),e.jsx("span",{children:T.label})]})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Progress"}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:"600"},children:[z.progress,"%"]})]}),e.jsx("div",{className:"progress-bar",style:{height:"6px"},children:e.jsx("div",{className:"progress-fill",style:{width:`${z.progress}%`,background:z.status==="on-track"?"var(--success)":z.status==="at-risk"?"var(--warning)":"var(--danger)"}})})]}),z.dueDate&&e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:["Due: ",Fy(z.dueDate)]})]},z.id)})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"20px",fontSize:"18px",fontWeight:"600"},children:"Items Requiring Attention"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Blockers, overdue items, and high-priority issues"}),$&&$.total===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"No critical items requiring attention"})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[$&&$.blockers>0&&(()=>{const z=D.filter(te=>te.state!=="opened"?!1:Lh(te.labels||[])),T=m.blockers,N=T?z:z.slice(0,3),K=z.length>3;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",background:"#FEE2E2",borderRadius:"8px 8px 0 0",borderLeft:"4px solid var(--danger)"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--danger)"},children:[$.blockers," Blocker",$.blockers!==1?"s":""]}),e.jsx("div",{style:{marginLeft:"auto",fontSize:"11px",color:"#991B1B",fontWeight:"600"},children:"CRITICAL"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",background:"#FEF2F2",borderRadius:"0 0 8px 8px"},children:[N.map(te=>e.jsxs("a",{href:te.web_url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 12px",background:"white",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)",border:"1px solid #FECACA",transition:"all 0.2s"},onMouseEnter:q=>{q.currentTarget.style.borderColor="var(--danger)",q.currentTarget.style.transform="translateX(4px)"},onMouseLeave:q=>{q.currentTarget.style.borderColor="#FECACA",q.currentTarget.style.transform="translateX(0)"},children:[e.jsx("div",{style:{width:"4px",height:"100%",background:"var(--danger)",borderRadius:"2px",marginRight:"8px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"2px"},children:["#",te.iid," ",te.title]}),te.assignees&&te.assignees.length>0&&e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:["Assigned to: ",te.assignees[0].name]})]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--danger)",fontWeight:"600"},children:"View "})]},te.id)),K&&e.jsx("button",{onClick:()=>v("blockers"),style:{padding:"8px 12px",background:"white",border:"1px solid #FCA5A5",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:"#DC2626",cursor:"pointer",transition:"all 0.2s",marginTop:"4px"},onMouseEnter:te=>{te.currentTarget.style.background="#FEE2E2"},onMouseLeave:te=>{te.currentTarget.style.background="white"},children:T?" Show less":` Show all ${$.blockers} blockers`})]})]})})(),$&&$.overdue>0&&(()=>{const z=D.filter(te=>{if(te.state!=="opened"||!te.due_date)return!1;const q=new Date(te.due_date),k=new Date;return k.setHours(0,0,0,0),q<k}),T=m.overdue,N=T?z:z.slice(0,3),K=z.length>3;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",background:"#FEF3C7",borderRadius:"8px 8px 0 0",borderLeft:"4px solid var(--warning)"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#92400E"},children:[$.overdue," Overdue Issue",$.overdue!==1?"s":""]}),e.jsx("div",{style:{marginLeft:"auto",fontSize:"11px",color:"#92400E",fontWeight:"600"},children:"OVERDUE"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",background:"#FFFBEB",borderRadius:"0 0 8px 8px"},children:[N.map(te=>{const q=new Date(te.due_date),A=Math.floor((new Date-q)/(1440*60*1e3));return e.jsxs("a",{href:te.web_url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 12px",background:"white",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)",border:"1px solid #FDE68A",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.borderColor="var(--warning)",V.currentTarget.style.transform="translateX(4px)"},onMouseLeave:V=>{V.currentTarget.style.borderColor="#FDE68A",V.currentTarget.style.transform="translateX(0)"},children:[e.jsx("div",{style:{width:"4px",height:"100%",background:"var(--warning)",borderRadius:"2px",marginRight:"8px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"2px"},children:["#",te.iid," ",te.title]}),e.jsxs("div",{style:{fontSize:"11px",color:"#92400E"},children:[A," day",A!==1?"s":""," overdue"]})]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--warning)",fontWeight:"600"},children:"View "})]},te.id)}),K&&e.jsx("button",{onClick:()=>v("overdue"),style:{padding:"8px 12px",background:"white",border:"1px solid #FCD34D",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:"#D97706",cursor:"pointer",transition:"all 0.2s",marginTop:"4px"},onMouseEnter:te=>{te.currentTarget.style.background="#FEF3C7"},onMouseLeave:te=>{te.currentTarget.style.background="white"},children:T?" Show less":` Show all ${$.overdue} overdue issues`})]})]})})(),$&&$.highPriority>0&&(()=>{const z=D.filter(te=>te.state!=="opened"?!1:(te.labels?.map(k=>k.toLowerCase())||[]).some(k=>k.includes("priority::high")||k.includes("critical")||k.includes("urgent"))),T=m.highPriority,N=T?z:z.slice(0,3),K=z.length>3;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",background:"#DBEAFE",borderRadius:"8px 8px 0 0",borderLeft:"4px solid var(--info)"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1E40AF"},children:[$.highPriority," High Priority Issue",$.highPriority!==1?"s":""]}),e.jsx("div",{style:{marginLeft:"auto",fontSize:"11px",color:"#1E40AF",fontWeight:"600"},children:"HIGH PRIORITY"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",background:"#EFF6FF",borderRadius:"0 0 8px 8px"},children:[N.map(te=>e.jsxs("a",{href:te.web_url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 12px",background:"white",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)",border:"1px solid #BFDBFE",transition:"all 0.2s"},onMouseEnter:q=>{q.currentTarget.style.borderColor="var(--info)",q.currentTarget.style.transform="translateX(4px)"},onMouseLeave:q=>{q.currentTarget.style.borderColor="#BFDBFE",q.currentTarget.style.transform="translateX(0)"},children:[e.jsx("div",{style:{width:"4px",height:"100%",background:"var(--info)",borderRadius:"2px",marginRight:"8px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"2px"},children:["#",te.iid," ",te.title]}),te.assignees&&te.assignees.length>0&&e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:["Assigned to: ",te.assignees[0].name]})]}),e.jsx("div",{style:{fontSize:"11px",color:"var(--info)",fontWeight:"600"},children:"View "})]},te.id)),K&&e.jsx("button",{onClick:()=>v("highPriority"),style:{padding:"8px 12px",background:"white",border:"1px solid #93C5FD",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:"#2563EB",cursor:"pointer",transition:"all 0.2s",marginTop:"4px"},onMouseEnter:te=>{te.currentTarget.style.background="#DBEAFE"},onMouseLeave:te=>{te.currentTarget.style.background="white"},children:T?" Show less":` Show all ${$.highPriority} high priority issues`})]})]})})()]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"20px",fontSize:"18px",fontWeight:"600"},children:"Upcoming Milestones"}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px"},children:"Key deliverables and deadlines in the next 30 days"}),U.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"No upcoming milestones in the next 30 days"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:U.map(z=>{const T=Iy(z.status),N=z.stats&&z.stats.total_issues>0?Math.round(z.stats.closed_issues/z.stats.total_issues*100):0,K=z.stats?z.stats.total_issues-z.stats.closed_issues:0;let te=null;return z.status==="at-risk"?z.daysUntil<=3?te=`Due in ${z.daysUntil} day${z.daysUntil!==1?"s":""} with ${K} open issue${K!==1?"s":""} (${N}% complete)`:N<50&&z.daysUntil<=7?te=`Only ${N}% complete with ${z.daysUntil} days remaining`:K>0&&(te=`${K} open issue${K!==1?"s":""} remaining (${N}% complete)`):z.status==="overdue"&&(te=`Overdue with ${K} open issue${K!==1?"s":""}`),e.jsx("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px",borderLeft:z.status==="at-risk"||z.status==="overdue"?`4px solid ${T.color}`:"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{width:"80px",textAlign:"center",borderRight:"2px solid var(--border-light)",paddingRight:"20px"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--primary)"},children:z.daysUntil}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"2px"},children:z.daysUntil===1?"day":"days"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:z.title}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:te?"8px":"0"},children:z.description||"No description"}),te&&e.jsxs("div",{style:{padding:"8px 12px",background:z.status==="overdue"?"#FEE2E2":"#FEF3C7",borderRadius:"6px",marginTop:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:z.status==="overdue"?"#991B1B":"#92400E",marginBottom:"4px"},children:"Risk Factor:"}),e.jsx("div",{style:{fontSize:"12px",color:z.status==="overdue"?"#DC2626":"#D97706",lineHeight:"1.4"},children:te})]})]}),e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",color:T.color,background:T.background,whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"4px",alignSelf:"flex-start"},children:[e.jsx("span",{children:T.icon}),e.jsx("span",{children:T.label})]})]})},z.id)})})]})]})}function A0(o){return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function T0({issues:o,milestones:c}){if(c.length===0)return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Milestones"}),e.jsx("p",{className:"text-muted",children:"Create milestones in GitLab to see the roadmap view."})]})});const r=[...c].sort((l,a)=>l.due_date?a.due_date?new Date(a.due_date)-new Date(l.due_date):-1:1);return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx("h2",{style:{margin:0},children:"Milestones"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[r.map(l=>{const a=o.filter(v=>v.milestone?.id===l.id),d=a.filter(v=>v.state==="closed").length,u=a.length,g=u>0?Math.round(d/u*100):0,f=a.filter(v=>xa(v.labels)).length,x=a.filter(v=>my(v.labels)==="High").length,m=a.filter(v=>v.due_date&&Math.floor((new Date(v.due_date)-new Date)/(1e3*60*60*24))<=7&&v.state==="opened").length,b=a.filter(v=>v.due_date&&new Date(v.due_date)<new Date&&v.state==="opened").length;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{marginBottom:"8px"},children:l.title}),l.description&&e.jsx("p",{className:"text-muted mb-2",style:{fontSize:"14px"},children:l.description}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"13px"},children:[e.jsx("span",{className:l.state==="active"?"badge badge-success":"badge",children:l.state==="active"?"Active":"Closed"}),l.due_date&&e.jsxs("span",{className:"text-muted",children:[" ",A0(l.due_date)]}),f>0&&e.jsxs("span",{style:{color:"var(--danger)",fontWeight:"600"},children:[" ",f," Blockers"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"var(--primary)"},children:[g,"%"]}),e.jsxs("div",{className:"text-small text-muted",children:[d," / ",u]})]})]}),e.jsx("div",{className:"progress-bar mb-3",children:e.jsx("div",{className:"progress-fill",style:{width:`${g}%`}})}),e.jsxs("div",{className:"grid grid-3",style:{gap:"12px"},children:[e.jsxs("div",{className:"card",style:{background:"var(--bg-secondary)",padding:"12px",textAlign:"center"},children:[e.jsx("div",{className:"text-small text-muted mb-1",children:"HIGH PRIORITY"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700"},children:x})]}),e.jsxs("div",{className:"card",style:{background:"var(--bg-secondary)",padding:"12px",textAlign:"center"},children:[e.jsx("div",{className:"text-small text-muted mb-1",children:"AT RISK"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--warning)"},children:m})]}),e.jsxs("div",{className:"card",style:{background:"var(--bg-secondary)",padding:"12px",textAlign:"center"},children:[e.jsx("div",{className:"text-small text-muted mb-1",children:"OVERDUE"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--danger)"},children:b})]})]}),f>0&&e.jsxs("div",{style:{marginTop:"16px",background:"#FEE2E2",borderLeft:"4px solid var(--danger)",padding:"16px",borderRadius:"4px"},children:[e.jsx("h4",{style:{color:"var(--danger)",marginBottom:"12px",fontWeight:"600"},children:" Blockers"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.filter(v=>xa(v.labels)).map(v=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},children:[e.jsxs("span",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>window.open(v.web_url,"_blank"),children:["#",v.iid," ",v.title]}),e.jsx("span",{className:"text-muted",children:v.assignees?.[0]?.name||"Unassigned"})]},v.id))})]})]},l.id)}),o.filter(l=>!l.milestone).length>0&&e.jsxs("div",{className:"card",style:{background:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"mb-2",children:" Backlog"}),e.jsxs("p",{className:"text-muted",children:[o.filter(l=>!l.milestone).length," issues without milestone"]})]})]})]})}function F0(o){if(o==null)return"";const c=String(o);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c}function bi(o){return o.map(c=>F0(c)).join(",")}function Ch(o){if(!o||o.length===0)return"No data to export";const c=["Issue ID","Title","URL","State","Labels","Assignees","Epic","Milestone","Due Date","Created","Updated","Author","Priority","Weight","Time Estimate","Time Spent","Description"],r=o.map(a=>{const d=a.labels?.join("; ")||"",u=a.assignees?.map($=>$.name).join("; ")||"Unassigned",g=a.epic?.title||"",f=a.milestone?.title||"",x=a.due_date||a.dueDate||"",m=a.created_at||a.createdAt?new Date(a.created_at||a.createdAt).toLocaleDateString():"",b=a.updated_at||a.updatedAt?new Date(a.updated_at||a.updatedAt).toLocaleDateString():"",v=a.author?.name||"",D=a.labels?.find($=>$.toLowerCase().includes("priority"))?.split("::")[1]||"",j=a.weight||"",w=a.time_stats?.human_time_estimate||"",H=a.time_stats?.human_total_time_spent||"",U=a.description?.substring(0,500)||"",G=a.web_url||a.webUrl||"";return[a.iid||a.id,a.title,G,a.state,d,u,g,f,x,m,b,v,D,j,w,H,U]});return[bi(c),...r.map(a=>bi(a))].join(`
`)}function R0(o){if(!o||o.length===0)return"No data to export";const c=["Epic ID","Title","URL","State","Labels","Start Date","Due Date","Total Issues","Open Issues","Closed Issues","Completion %","Health Score","Author","Description"],r=o.map(a=>{const d=a.labels?.join("; ")||"",u=a.start_date||"",g=a.due_date||a.end_date||"",f=a.issues?.length||0,x=a.issues?.filter(H=>H.state==="opened").length||0,m=a.issues?.filter(H=>H.state==="closed").length||0,b=f>0?Math.round(m/f*100):0,v=a.health?.score||"",D=a.author?.name||"",j=a.description?.substring(0,500)||"",w=a.web_url||"";return[a.iid||a.id,a.title,w,a.state,d,u,g,f,x,m,`${b}%`,v,D,j]});return[bi(c),...r.map(a=>bi(a))].join(`
`)}function Bn(o,c){const r=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");if(navigator.msSaveBlob)navigator.msSaveBlob(r,c);else{const a=URL.createObjectURL(r);l.href=a,l.download=c,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}}function M0(o){if(!o||o.length===0)return"No data to export";const c=["Sprint","Velocity","Total Issues","Completed Issues","Open Issues","Completion Rate %","Sprint Start","Sprint End"],r=o.map(a=>[`Sprint ${a.sprint}`,a.velocity,a.totalIssues,a.closedIssues,a.openIssues,a.completionRate?`${a.completionRate}%`:"",a.startDate?new Date(a.startDate).toLocaleDateString():"",a.endDate?new Date(a.endDate).toLocaleDateString():""]);return[bi(c),...r.map(a=>bi(a))].join(`
`)}function I0(o){if(!o||o.length===0)return"No data to export";const c=["Risk Title","Description","Impact","Probability","Risk Score","Mitigation Strategy","Owner","Status","Created Date"],r=o.map(a=>[a.title,a.description||"",a.impact,a.probability,a.riskScore||"",a.mitigation||"",a.owner||"",a.status||"Open",a.createdAt?new Date(a.createdAt).toLocaleDateString():""]);return[bi(c),...r.map(a=>bi(a))].join(`
`)}function N0({issues:o}){const{filteredIssues:c,selectedIterations:r,isFiltered:l}=qi(),[a,d]=W.useState("issues"),u=(O,y,C,I,_,P)=>{if(!O||O.length<4)return{causes:[],actions:[]};const X=[],z=[];let T=O.length-1;if(I){const ge=O.findIndex(Be=>Be.sprint===I);ge>=0&&(T=ge)}if(T<3)return{causes:[],actions:[]};const N=P==="points"?"points":"issues";P==="points"?C.byPoints:C.byIssues;const K=typeof y=="object"?y.longTerm:y,te=typeof y=="object"?y.shortTerm:0,q=Math.max(0,T-2),k=O.slice(q,T+1),A=k.reduce((ge,Be)=>{const Je=P==="points"?Be.velocityPoints:Be.velocity;return ge+Je},0)/k.length,V=Math.max(0,q-3),Q=q,ae=O.slice(V,Q),re=ae.length>0?ae.reduce((ge,Be)=>{const Je=P==="points"?Be.velocityPoints:Be.velocity;return ge+Je},0)/ae.length:0,ue=O.slice(V,T+1),fe=ue.reduce((ge,Be)=>{const Je=P==="points"?Be.velocityPoints:Be.velocity;return ge+Je},0)/ue.length,xe=ue.map((ge,Be)=>{const Je=P==="points"?ge.velocityPoints:ge.velocity,Ae=(Je-fe)/fe*100;return{sprint:ge,val:Je,deviation:Ae,globalIndex:V+Be}}).filter(ge=>ge.deviation<-30).sort((ge,Be)=>ge.deviation-Be.deviation),ze=xe.map(ge=>{let Be=null;return _&&ge.sprint.sprint&&(Be=Py(_,ge.sprint.sprint,og,ht)),{...ge,capacityImpact:Be}});if(K<-10){const ge=Math.abs(K),Be=Math.round(re-A);if(X.push({severity:"critical",category:"velocity-decline",description:`Long-term velocity declining by ${ge}% over last 6 sprints`,impact:`Average dropped from ${Math.round(re)} to ${Math.round(A)} ${N}/sprint (${Be} ${N} less per sprint)`}),ze.length>0){ze.forEach((Ye,pe)=>{const Qe=Ye.sprint.sprint,De=Ye.capacityImpact&&Ye.capacityImpact.lossPercentage>=15?` due to ${Ye.capacityImpact.lossPercentage}% capacity reduction (${Ye.capacityImpact.absenceCount} team member(s) absent)`:"",jt=Ye.sprint.completionRate<70?` and low completion rate (${Ye.sprint.completionRate}%)`:"";X.push({severity:"warning",category:"outlier-sprint",description:`Sprint "${Qe}" dragged velocity down by ${Math.abs(Math.round(Ye.deviation))}%${De}${jt}`,impact:`Only ${Math.round(Ye.val)} ${N} completed vs ${Math.round(fe)} average`})});const Ae=ze.filter(Ye=>Ye.capacityImpact&&Ye.capacityImpact.lossPercentage>=15);Ae.length>0&&z.push({priority:"high",title:"Adjust for capacity fluctuations",description:`${Ae.length} sprint(s) had significant absences. Factor in planned time off when setting expectations and improve capacity planning.`,estimatedImpact:"Context-aware performance assessment"})}const Je=k.filter(Ae=>Ae.completionRate<70);Je.length>=2&&(X.push({severity:"warning",category:"completion-rate",description:`${Je.length} of last 3 sprints had completion rate below 70%`,impact:"Team consistently overcommitting"}),z.push({priority:"high",title:"Reduce sprint scope",description:"Team is taking on too much work. Reduce planned work by 20-30% for next 2 sprints",estimatedImpact:"Improve completion rate to 80%+ and stabilize velocity"})),z.push({priority:"high",title:"Investigate systemic issues",description:"Long-term decline suggests deeper problems. Review: technical debt, process bottlenecks, team morale, or changing requirements complexity.",estimatedImpact:"Identify and address root causes"})}else if(K>10){const ge=K,Be=Math.round(A-re);X.push({severity:"info",category:"velocity-improvement",description:`Long-term velocity improving by ${ge}% over last 6 sprints`,impact:`Average increased from ${Math.round(re)} to ${Math.round(A)} ${N}/sprint (+${Be} ${N} per sprint)`});const Je=k.filter(Ae=>Ae.completionRate>85);Je.length>=2&&(X.push({severity:"info",category:"high-completion",description:`${Je.length} of last 3 sprints exceeded 85% completion rate`,impact:"Team efficiently delivering planned work"}),z.push({priority:"low",title:"Consider scope increase",description:"Team showing consistent high performance. Test capacity with 10-15% scope increase",estimatedImpact:"Optimize team utilization"})),z.push({priority:"low",title:"Document and replicate success",description:"Capture improvements made over last 6 sprints (process changes, tooling, team dynamics) to sustain growth",estimatedImpact:"Maintain upward velocity trend"})}else{if(X.push({severity:"info",category:"velocity-stable",description:`Velocity stable over last 6 sprints at ~${Math.round(A)} ${N}/sprint`,impact:"Predictable and reliable delivery rate"}),xe.length>0){const ge=xe[0];X.push({severity:"info",category:"outlier-sprint",description:`Sprint "${ge.sprint.sprint}" was ${Math.abs(Math.round(ge.deviation))}% below average but overall trend remains stable`,impact:"One-time disruption, not a systemic issue"})}A<5&&k.some(ge=>ge.totalIssues>10)&&(X.push({severity:"warning",category:"low-velocity",description:`Velocity stable but low at ${Math.round(A)} ${N}/sprint despite significant work planned`,impact:"Team may be overloaded or work items too large"}),z.push({priority:"medium",title:"Break down work items",description:P==="points"?"Split large stories into smaller chunks (aim for 1-5 point stories)":"Split large issues into smaller chunks (aim for 1-3 day issues)",estimatedImpact:"Increase throughput and visibility"}))}return Math.abs(te)>20&&Math.abs(te-K)>15&&X.push({severity:"info",category:"short-term-note",description:`Note: Sprint-to-sprint change is ${te>=0?"+":""}${te}% which differs from long-term trend`,impact:"Recent sprint may be an outlier - focus on 6-sprint trend for strategic decisions"}),{causes:X,actions:z}},g=W.useMemo(()=>{if(!c||c.length===0)return null;const O=Ho(c);let y;l&&r.length===1||l&&r.length>1?y=r[0]:y=ud(c);const C=Wy(O,3,y),I=Sh(c,y,"issues"),_=Sh(c,y,"points"),P=_y(c,C.byIssues);return{velocityData:O,avgVelocity:C,currentSprint:y,burndownIssues:I,burndownPoints:_,prediction:P}},[c,r,l]);if(!g||g.velocityData.length===0)return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("h3",{className:"mb-2",children:"No Velocity Data"}),e.jsx("p",{className:"text-muted",children:'Add "Sprint X" labels to your issues to track velocity and burndown.'})]})});const{velocityData:f,avgVelocity:x,currentSprint:m,burndownIssues:b,burndownPoints:v,prediction:D}=g,j=pd(f,m,a),w=a==="points"?v:b,H=O=>O>10?{color:"#059669",icon:"",label:"Improving"}:O<-10?{color:"#DC2626",icon:"",label:"Declining"}:{color:"#D97706",icon:"",label:"Stable"},U=typeof j=="object"?j.shortTerm:j,G=typeof j=="object"?j.longTerm:0,$=typeof j=="object"&&f.length>=4,B=H(U),M=H(G),R=Math.max(...f.map(O=>a==="points"?O.velocityPoints:O.velocity),10);w.total;const L=()=>{const O=M0(f),y=new Date().toISOString().split("T")[0];Bn(O,`velocity-data-${y}.csv`)};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Velocity & Burndown Analytics"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Sprint velocity, trends, burndown chart, and predictive analytics"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",background:"#F3F4F6",borderRadius:"8px",padding:"4px"},children:[e.jsx("button",{onClick:()=>d("issues"),style:{padding:"6px 16px",background:a==="issues"?"white":"transparent",color:a==="issues"?"#1F2937":"#6B7280",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:a==="issues"?"600":"400",boxShadow:a==="issues"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:"Issue Count"}),e.jsx("button",{onClick:()=>d("points"),style:{padding:"6px 16px",background:a==="points"?"white":"transparent",color:a==="points"?"#1F2937":"#6B7280",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:a==="points"?"600":"400",boxShadow:a==="points"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:"Story Points"})]}),e.jsx("button",{className:"btn btn-primary",onClick:L,style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{children:"Export CSV"})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Current Sprint"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937"},children:["Sprint ",m||"N/A"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Avg. Velocity (Last 3)"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#2563EB"},children:[a==="points"?x.byPoints:x.byIssues," ",e.jsx("span",{style:{fontSize:"16px",color:"#6B7280"},children:a==="points"?"points/sprint":"issues/sprint"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"4px"},children:a==="points"?`${x.byIssues} issues/sprint`:`${x.byPoints} points/sprint`})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Velocity Trend"}),$?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:M.color,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:M.icon}),e.jsxs("span",{children:[Math.abs(G),"%"]})]}),e.jsxs("div",{style:{fontSize:"12px",color:M.color,marginTop:"4px"},children:[M.label," (6-Sprint Trend)"]}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("span",{style:{fontWeight:"600"},children:"Sprint-to-Sprint: "}),e.jsxs("span",{style:{color:B.color,fontWeight:"600"},children:[B.icon," ",Math.abs(U),"%"]}),e.jsxs("span",{children:[" (",B.label,")"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:B.color,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:B.icon}),e.jsxs("span",{children:[Math.abs(U),"%"]})]}),e.jsxs("div",{style:{fontSize:"12px",color:B.color,marginTop:"4px"},children:[B.label," (Sprint-to-Sprint)"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Predicted Completion"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#059669"},children:D?new Date(D.date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A"}),D&&e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[D.sprintsRemaining," sprints (",D.confidence,"% confidence)"]})]})]}),(()=>{const{causes:O,actions:y}=u(f,j,x,m,c,a);return O.length===0?null:e.jsxs("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Velocity Analysis"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"12px"},children:"Analysis:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:O.map((C,I)=>e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px",borderLeft:`4px solid ${C.severity==="critical"?"#DC2626":C.severity==="warning"?"#D97706":"#2563EB"}`},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"4px"},children:C.description}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:C.impact})]},I))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"12px"},children:"Recommended Actions:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.map((C,I)=>e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px",borderLeft:"4px solid #2563EB"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"4px"},children:C.title}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:C.description}),e.jsxs("div",{style:{fontSize:"11px",color:"#9CA3AF"},children:["Expected impact: ",C.estimatedImpact]})]},I))})]})]})]})})(),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"20px"},children:"Sprint Velocity"}),f.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280"},children:"No velocity data available"}):e.jsxs("div",{children:[e.jsxs("div",{style:{position:"relative",height:"300px",marginBottom:"20px"},children:[e.jsxs("div",{style:{position:"absolute",left:0,top:0,bottom:40,width:"40px",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"12px",color:"#6B7280",textAlign:"right",paddingRight:"8px"},children:[e.jsx("div",{children:R}),e.jsx("div",{children:Math.round(R*.75)}),e.jsx("div",{children:Math.round(R*.5)}),e.jsx("div",{children:Math.round(R*.25)}),e.jsx("div",{children:"0"})]}),e.jsx("div",{style:{position:"absolute",left:"50px",right:0,top:0,bottom:40,borderLeft:"2px solid #E5E7EB",borderBottom:"2px solid #E5E7EB",display:"flex",alignItems:"flex-end",gap:"8px",padding:"10px"},children:f.map((O,y)=>{const C=a==="points"?O.velocityPoints:O.velocity,I=C/R*100;let _=f.length-1;if(m){const T=f.findIndex(N=>N.sprint===m);T>=0&&(_=T)}const P=y>=Math.max(0,_-2)&&y<=_,z=Math.max(I/100*240,24);return e.jsx("div",{style:{flex:1,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:e.jsx("div",{style:{width:"100%",height:`${z}px`,background:P?"#2563EB":"#93C5FD",borderRadius:"4px 4px 0 0",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"600"},children:C})},O.sprint)})}),e.jsx("div",{style:{position:"absolute",left:"50px",right:0,bottom:0,height:"40px",display:"flex",gap:"8px",padding:"0 10px"},children:f.map(O=>e.jsx("div",{style:{flex:1,fontSize:"11px",color:"#6B7280",textAlign:"center",paddingTop:"8px",lineHeight:"1.2"},children:O.sprint},O.sprint))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"12px",background:"#F3F4F6",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"3px",background:"#2563EB"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Recent Sprint"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"3px",background:"#93C5FD"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Previous Sprint"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:["Sprint ",m," Burndown"]}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"0"},children:"Track daily progress vs. ideal burndown rate"})]}),l&&r.length>1?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",background:"#F9FAFB",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#6B7280",marginBottom:"8px"},children:"Multiple Iterations Selected"}),e.jsx("p",{style:{fontSize:"13px",color:"#9CA3AF"},children:"Burndown chart shows a single sprint. Please select one iteration to view its burndown chart."})]}):w.total===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280"},children:"No burndown data for current sprint"}):e.jsxs("div",{children:[e.jsxs("div",{style:{position:"relative",height:"300px",marginBottom:"20px"},children:[e.jsxs("div",{style:{position:"absolute",left:0,top:0,bottom:60,width:"40px",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"12px",color:"#6B7280",textAlign:"right",paddingRight:"8px"},children:[e.jsx("div",{children:w.total}),e.jsx("div",{children:Math.round(w.total*.75)}),e.jsx("div",{children:Math.round(w.total*.5)}),e.jsx("div",{children:Math.round(w.total*.25)}),e.jsx("div",{children:"0"})]}),e.jsx("div",{style:{position:"absolute",left:"50px",right:0,top:0,bottom:60,borderLeft:"2px solid #E5E7EB",borderBottom:"2px solid #E5E7EB"},children:e.jsx("svg",{width:"100%",height:"100%",style:{overflow:"visible"},children:(()=>{const O=new Date(w.sprintStart),y=new Date(w.sprintEnd),C=(y-O)/(1440*60*1e3),I=P=>`${(new Date(P)-O)/(1440*60*1e3)/C*100}%`,_=P=>`${100-P/w.total*100}%`;return e.jsxs(e.Fragment,{children:[w.ideal.length>0&&e.jsxs(e.Fragment,{children:[w.ideal.length>1&&w.ideal.slice(0,-1).map((P,X)=>{const z=w.ideal[X+1],T=I(P.date),N=_(P.remaining),K=I(z.date),te=_(z.remaining);return e.jsx("line",{x1:T,y1:N,x2:K,y2:te,stroke:"#9CA3AF",strokeWidth:"2",strokeDasharray:"4,3",strokeLinecap:"round"},`ideal-line-${X}`)}),w.ideal.map((P,X)=>{const z=I(P.date),T=_(P.remaining);return e.jsx("g",{children:e.jsx("circle",{cx:z,cy:T,r:"3",fill:"white",stroke:"#9CA3AF",strokeWidth:"1.5",style:{pointerEvents:"none"}})},`ideal-${X}`)})]}),w.actual.length>0&&e.jsxs(e.Fragment,{children:[w.actual.length>1&&w.actual.slice(0,-1).map((P,X)=>{const z=w.actual[X+1],T=I(P.date),N=_(P.remaining),K=I(z.date),te=_(z.remaining);return e.jsx("line",{x1:T,y1:N,x2:K,y2:te,stroke:"#DC2626",strokeWidth:"2.5",strokeLinecap:"round"},`actual-line-${X}`)}),w.actual.map((P,X)=>{const z=I(P.date),T=_(P.remaining),N=new Date(P.date),K=N.toLocaleDateString("de-DE",{weekday:"long"}),te=w.ideal.find(xe=>xe.date===P.date),q=te?P.remaining-te.remaining:0,A=((w.total-P.remaining)/w.total*100).toFixed(0),Q=((w.total-(te?te.remaining:0))/w.total*100).toFixed(0),ae=a==="points"?"point":"issue",re=a==="points"?"points":"issues";let ue="";q>0?ue=`Behind by ${q} ${q>1?re:ae}`:q<0?ue=`Ahead by ${Math.abs(q)} ${Math.abs(q)>1?re:ae}`:ue="On track";const fe=[`${K}, ${N.toLocaleDateString("de-DE",{month:"long",day:"numeric",year:"numeric"})}`,"",`Remaining: ${P.remaining} of ${w.total} ${re} (${A}% complete)`,`Ideal: ${te?te.remaining:0} remaining (${Q}% complete)`,"",`Status: ${ue}`].join(`
`);return e.jsxs("g",{children:[e.jsx("title",{children:fe}),e.jsx("circle",{cx:z,cy:T,r:"8",fill:"transparent",style:{cursor:"pointer",pointerEvents:"all"}}),e.jsx("circle",{cx:z,cy:T,r:"4",fill:"#DC2626",stroke:"white",strokeWidth:"1",style:{cursor:"pointer",transition:"all 0.2s",pointerEvents:"all"},onMouseEnter:xe=>{xe.target.setAttribute("r","5"),xe.target.setAttribute("stroke-width","1.5")},onMouseLeave:xe=>{xe.target.setAttribute("r","4"),xe.target.setAttribute("stroke-width","1")},children:e.jsx("title",{children:fe})})]},`actual-${X}`)})]}),(()=>{const P=[],X=Math.ceil(C);for(let T=0;T<=X;T+=7)if(T>0&&T<X){const N=`${T/C*100}%`;P.push(e.jsx("line",{x1:N,y1:"0%",x2:N,y2:"100%",stroke:"#E5E7EB",strokeWidth:"0.3",strokeDasharray:"1,1",opacity:"0.5",vectorEffect:"non-scaling-stroke"},`week-${T}`))}const z=new Date;if(z.setHours(0,0,0,0),z>=O&&z<=y){const N=`${(z-O)/864e5/C*100}%`;P.push(e.jsxs("g",{children:[e.jsx("line",{x1:N,y1:"-5%",x2:N,y2:"100%",stroke:"#EF4444",strokeWidth:"2",style:{cursor:"default"},children:e.jsx("title",{children:`Today: ${z.toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`})}),e.jsxs("text",{x:N,y:"-1%",textAnchor:"middle",fill:"#EF4444",fontSize:"12",fontWeight:"600",style:{cursor:"default"},children:[e.jsx("title",{children:`Today: ${z.toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}),"TODAY"]})]},"today-marker"))}return P})()]})})()})}),e.jsx("div",{style:{position:"absolute",left:"50px",right:0,bottom:0,height:"60px"},children:e.jsx("div",{style:{position:"relative",paddingTop:"8px",borderTop:"1px solid #E5E7EB",height:"100%"},children:w.sprintStart&&w.sprintEnd&&(()=>{const O=new Date(w.sprintStart),y=new Date(w.sprintEnd),C=new Date;C.setHours(0,0,0,0);const I=(y-O)/(1440*60*1e3),_=Math.ceil(I),P=[];let X;_<=7?X=1:_<=14?X=2:_<=21?X=3:X=5,P.push(e.jsxs("div",{style:{position:"absolute",left:"0%",fontSize:"11px",color:"#1F2937",textAlign:"left",transform:"translateX(0)",fontWeight:"600"},children:[e.jsx("div",{children:O.toLocaleDateString("de-DE",{month:"short",day:"numeric"})}),e.jsx("div",{style:{fontSize:"9px",color:"#9CA3AF",fontWeight:"400"},children:O.toLocaleDateString("de-DE",{weekday:"short"})})]},"start"));for(let z=X;z<_;z+=X){const T=new Date(O.getTime()+z*24*60*60*1e3),N=z/I*100,K=C>=O&&C<=y,q=(C-O)/(1440*60*1e3)/I*100;K&&Math.abs(N-q)<5||P.push(e.jsxs("div",{style:{position:"absolute",left:`${N}%`,fontSize:"10px",color:"#6B7280",textAlign:"center",transform:"translateX(-50%)"},children:[e.jsx("div",{children:T.toLocaleDateString("de-DE",{month:"short",day:"numeric"})}),e.jsx("div",{style:{fontSize:"8px",color:"#9CA3AF"},children:T.toLocaleDateString("de-DE",{weekday:"short"})})]},`day-${z}`))}if(C>=O&&C<=y){const T=(C-O)/864e5/I*100;P.push(e.jsxs("div",{style:{position:"absolute",left:`${T}%`,fontSize:"11px",color:"#EF4444",fontWeight:"700",textAlign:"center",transform:"translateX(-50%)",zIndex:10},children:[e.jsx("div",{children:"Today"}),e.jsx("div",{style:{fontSize:"9px",fontWeight:"600"},children:C.toLocaleDateString("de-DE",{weekday:"short"})})]},"today"))}return P.push(e.jsxs("div",{style:{position:"absolute",right:"0%",fontSize:"11px",color:"#1F2937",textAlign:"right",transform:"translateX(0)",fontWeight:"600"},children:[e.jsx("div",{children:y.toLocaleDateString("de-DE",{month:"short",day:"numeric"})}),e.jsx("div",{style:{fontSize:"9px",color:"#9CA3AF",fontWeight:"400"},children:y.toLocaleDateString("de-DE",{weekday:"short"})})]},"end")),P})()})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"12px",background:"#F3F4F6",borderRadius:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"3px",background:"#DC2626"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Actual Progress"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"3px",background:"#D1D5DB",borderTop:"2px dashed #D1D5DB"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Ideal Burndown"})]})]}),w.actual.length>0&&(()=>{const O=w.actual[w.actual.length-1],y=w.ideal[w.actual.length-1]||w.ideal[w.ideal.length-1],C=O.remaining,I=y?y.remaining:0,_=C-I,P=(w.total-C)/w.total*100,X=(w.total-I)/w.total*100,z=a==="points"?"point":"issue",T=a==="points"?"points":"issues";return e.jsxs("div",{style:{padding:"16px 20px",background:_>0?"#FEF2F2":_<0?"#ECFDF5":"#F9FAFB",borderRadius:"8px",border:`2px solid ${_>0?"#FEE2E2":_<0?"#D1FAE5":"#E5E7EB"}`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase",marginBottom:"8px"},children:"Current Sprint Status"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"32px",fontWeight:"700",color:"#1F2937"},children:C}),e.jsxs("span",{style:{fontSize:"16px",color:"#6B7280"},children:["/ ",w.total," ",T," remaining"]})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:[P.toFixed(0),"% complete  Ideal: ",X.toFixed(0),"%"]}),_!==0&&e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:_>0?"#DC2626":"#059669"},children:_>0?`${_} ${_!==1?T:z} behind schedule`:`${Math.abs(_)} ${Math.abs(_)!==1?T:z} ahead of schedule`}),_===0&&e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:"On track"})]})})()]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"20px"},children:"Sprint History"}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Sprint"}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Total",e.jsx("br",{}),"Issues"]}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Completed",e.jsx("br",{}),"Issues"]}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Open",e.jsx("br",{}),"Issues"]}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Velocity",e.jsx("br",{}),"(Issues)"]}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Total",e.jsx("br",{}),"Points"]}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Completed",e.jsx("br",{}),"Points"]}),e.jsxs("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["Velocity",e.jsx("br",{}),"(Points)"]}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Completion Rate"})]})}),e.jsx("tbody",{children:[...f].reverse().map(O=>e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsxs("td",{style:{padding:"12px",fontWeight:"600"},children:["Sprint ",O.sprint]}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:O.totalIssues}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#059669"},children:O.completedIssues}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#DC2626"},children:O.openIssues}),e.jsx("td",{style:{padding:"12px",textAlign:"center",fontWeight:"600",color:"#2563EB"},children:O.velocity}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#6B7280"},children:O.totalPoints}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#059669",fontWeight:"600"},children:O.completedPoints}),e.jsx("td",{style:{padding:"12px",textAlign:"center",fontWeight:"600",color:"#8B5CF6"},children:O.velocityPoints}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[e.jsx("div",{style:{flex:1,maxWidth:"100px",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${O.completionRate}%`,height:"100%",background:O.completionRate>=80?"#059669":O.completionRate>=50?"#D97706":"#DC2626"}})}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:"600",minWidth:"40px",color:"#2563EB"},children:[O.completionRate,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[e.jsx("div",{style:{flex:1,maxWidth:"100px",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${O.completionRatePoints}%`,height:"100%",background:O.completionRatePoints>=80?"#059669":O.completionRatePoints>=50?"#D97706":"#DC2626"}})}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:"600",minWidth:"40px",color:"#8B5CF6"},children:[O.completionRatePoints,"%"]})]})]})})]},O.sprint))})]})})]})]})}function O0({isOpen:o,onClose:c,issues:r}){const[l,a]=W.useState([]),[d,u]=W.useState({}),[g,f]=W.useState(null),[x,m]=W.useState(!1),[b,v]=W.useState(null),[D,j]=W.useState({username:"",name:"",role:Pi[0],customRole:"",defaultCapacity:40,email:""}),[w,H]=W.useState("members");W.useEffect(()=>{if(o){const y=ht();a(y.teamMembers||[]);const C=va();u(C),f(C.historicalData),m(!1),v(null)}},[o]);const U=()=>{m(!0),v(null),j({username:"",name:"",role:Pi[0],customRole:"",defaultCapacity:40,email:""})},G=y=>{m(!0),v(y),j({username:y.username,name:y.name,role:y.role,customRole:y.customRole||"",defaultCapacity:y.defaultCapacity,email:y.email||""})},$=()=>{m(!1),v(null),j({username:"",name:"",role:Pi[0],customRole:"",defaultCapacity:40,email:""})},B=()=>{const y=D.role==="Custom"?D.customRole:D.role;if(!D.username||!D.name||!y){alert("Username, name, and role are required");return}const C={username:D.username,name:D.name,role:y,customRole:D.role==="Custom"?D.customRole:"",defaultCapacity:D.defaultCapacity,email:D.email};Bh(C);const I=ht();a(I.teamMembers||[]),m(!1),v(null),j({username:"",name:"",role:Pi[0],customRole:"",defaultCapacity:40,email:""})},M=y=>{if(confirm(`Remove ${y} from team?`)){a0(y);const C=ht();a(C.teamMembers||[])}},R=()=>{const y=p0(r);if(y.length===0){alert("No assignees found in issues");return}y.forEach(I=>{if(!l.some(P=>P.username===I.username)){const P={username:I.username,name:I.name,role:"Developer",customRole:"",defaultCapacity:40,email:""};Bh(P)}});const C=ht();a(C.teamMembers||[]),alert(`Imported ${y.length} team members from issues`)},L=()=>{const y=d0(r);u(y),f(y.historicalData),alert(`Updated hours per story point to ${y.hoursPerStoryPoint} (based on ${y.historicalData.sampleSize} completed issues)`)},O=()=>{eg(d),alert("Capacity settings saved")};return o?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",width:"900px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Team Configuration"}),e.jsx("button",{onClick:c,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6B7280"},children:""})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E5E7EB",padding:"0 24px"},children:[e.jsxs("button",{onClick:()=>H("members"),style:{padding:"12px 20px",background:"none",border:"none",borderBottom:w==="members"?"2px solid #2563EB":"2px solid transparent",color:w==="members"?"#2563EB":"#6B7280",fontWeight:w==="members"?"600":"400",cursor:"pointer"},children:["Team Members (",l.length,")"]}),e.jsx("button",{onClick:()=>H("settings"),style:{padding:"12px 20px",background:"none",border:"none",borderBottom:w==="settings"?"2px solid #2563EB":"2px solid transparent",color:w==="settings"?"#2563EB":"#6B7280",fontWeight:w==="settings"?"600":"400",cursor:"pointer"},children:"Capacity Settings"})]}),e.jsxs("div",{style:{padding:"24px"},children:[w==="members"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:U,style:{padding:"8px 16px",background:"#2563EB",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"+ Add Team Member"}),e.jsx("button",{onClick:R,style:{padding:"8px 16px",background:"#10B981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Import from Issues"})]}),x&&e.jsxs("div",{style:{border:"2px solid #2563EB",borderRadius:"8px",padding:"16px",marginBottom:"20px",backgroundColor:"#EFF6FF"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px"},children:b?"Edit Team Member":"Add New Team Member"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:"Username *"}),e.jsx("input",{type:"text",value:D.username,onChange:y=>j({...D,username:y.target.value}),disabled:b!==null,style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:"Full Name *"}),e.jsx("input",{type:"text",value:D.name,onChange:y=>j({...D,name:y.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:"Role *"}),e.jsx("select",{value:D.role,onChange:y=>j({...D,role:y.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:Pi.map(y=>e.jsx("option",{value:y,children:y},y))})]}),D.role==="Custom"&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:"Custom Role Name *"}),e.jsx("input",{type:"text",value:D.customRole,onChange:y=>j({...D,customRole:y.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:"Default Weekly Capacity (hours)"}),e.jsx("input",{type:"number",value:D.defaultCapacity,onChange:y=>j({...D,defaultCapacity:parseFloat(y.target.value)}),min:"0",max:"80",step:"0.5",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:y=>j({...D,email:y.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),e.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:B,style:{padding:"8px 16px",background:"#2563EB",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Save Member"}),e.jsx("button",{onClick:$,style:{padding:"8px 16px",background:"#9CA3AF",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Cancel"})]})]}),l.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280",fontSize:"14px"},children:'No team members configured. Click "Add Team Member" or "Import from Issues" to get started.'}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Username"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Role"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Weekly Capacity"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Actions"})]})}),e.jsx("tbody",{children:l.map(y=>e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:y.username}),e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:y.name}),e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:e.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#EFF6FF",color:"#2563EB",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:y.role})}),e.jsxs("td",{style:{padding:"12px",fontSize:"14px"},children:[y.defaultCapacity,"h"]}),e.jsxs("td",{style:{padding:"12px",fontSize:"14px"},children:[e.jsx("button",{onClick:()=>G(y),style:{marginRight:"8px",padding:"4px 8px",background:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),e.jsx("button",{onClick:()=>M(y.username),style:{padding:"4px 8px",background:"#EF4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]},y.username))})]})]}),w==="settings"&&e.jsxs("div",{children:[g&&e.jsxs("div",{style:{padding:"16px",backgroundColor:"#F0F9FF",borderRadius:"8px",marginBottom:"20px",border:"1px solid #BAE6FD"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",color:"#0369A1"},children:"Historical Velocity Data"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",fontSize:"14px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6B7280",fontSize:"12px"},children:"Sample Size"}),e.jsxs("div",{style:{fontWeight:"600",fontSize:"18px",color:"#0369A1"},children:[g.sampleSize," issues"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6B7280",fontSize:"12px"},children:"Total Hours"}),e.jsxs("div",{style:{fontWeight:"600",fontSize:"18px",color:"#0369A1"},children:[g.totalHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6B7280",fontSize:"12px"},children:"Total Story Points"}),e.jsx("div",{style:{fontWeight:"600",fontSize:"18px",color:"#0369A1"},children:g.totalPoints})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6B7280",fontSize:"12px"},children:"Confidence"}),e.jsx("div",{style:{fontWeight:"600",fontSize:"18px",color:g.confidence==="high"?"#059669":g.confidence==="medium"?"#D97706":"#DC2626"},children:g.confidence.toUpperCase()})]})]})]}),e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"6px"},children:"Hours per Story Point"}),e.jsx("input",{type:"number",value:d.hoursPerStoryPoint||8,onChange:y=>u({...d,hoursPerStoryPoint:parseFloat(y.target.value)}),min:"0.5",max:"40",step:"0.1",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Used to convert story points to estimated hours for capacity planning"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"6px"},children:"Default Hours per Issue (without weight)"}),e.jsx("input",{type:"number",value:d.defaultHoursPerIssue||4,onChange:y=>u({...d,defaultHoursPerIssue:parseFloat(y.target.value)}),min:"0.5",max:"40",step:"0.5",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Used for issues that don't have story points assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"6px"},children:"Default Weekly Capacity"}),e.jsx("input",{type:"number",value:d.defaultWeeklyCapacity||40,onChange:y=>u({...d,defaultWeeklyCapacity:parseFloat(y.target.value)}),min:"1",max:"80",step:"0.5",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Default hours per week for new team members"})]})]}),e.jsxs("div",{style:{marginTop:"24px",display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:L,style:{padding:"10px 16px",background:"#10B981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Recalculate from History"}),e.jsx("button",{onClick:O,style:{padding:"10px 16px",background:"#2563EB",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Save Settings"})]}),d.lastCalculated&&e.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"#6B7280"},children:["Last calculated: ",new Date(d.lastCalculated).toLocaleString()]})]})]})]})}):null}function W0({isOpen:o,onClose:c,issues:r}){const[l,a]=W.useState([]),[d,u]=W.useState(null),[g,f]=W.useState({}),[x,m]=W.useState({}),b=W.useMemo(()=>fa(r).map(M=>{const R=r.find(L=>Ps(L.iteration)===M);return{name:M,id:R?.iteration?.id||M,startDate:R?.iteration?.start_date,dueDate:R?.iteration?.due_date}}).sort((M,R)=>M.startDate?R.startDate?new Date(R.startDate)-new Date(M.startDate):-1:1),[r]);W.useEffect(()=>{if(o){const B=ht();a(B.teamMembers||[]),b.length>0&&!d&&u(b[0])}},[o,b,d]),W.useEffect(()=>{if(d){const B={};l.forEach(L=>{const O=nd(d.id,L.username,L.defaultCapacity);B[L.username]={hours:O,reason:""}}),f(B);const R=ya().sprints.find(L=>L.sprintId===d.id);R&&R.memberCapacity.forEach(L=>{B[L.username]&&(B[L.username].reason=L.reason||"")}),f(B)}},[d,l]);const v=B=>{const M=b.find(R=>R.name===B);u(M),m({})},D=B=>{m({...x,[B]:!0})},j=B=>{const M=g[B];c0(d.id,d.name,B,M.hours,M.reason),m({...x,[B]:!1})},w=(B,M)=>{const R=nd(d.id,B,M.defaultCapacity);f({...g,[B]:{...g[B],hours:R}}),m({...x,[B]:!1})},H=(B,M,R)=>{f({...g,[B]:{hours:parseFloat(M),reason:R}})},U=W.useMemo(()=>Object.values(g).reduce((B,M)=>B+M.hours,0),[g]),G=W.useMemo(()=>l.reduce((B,M)=>B+M.defaultCapacity,0),[l]),$=U-G;return o?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",width:"900px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"Sprint Capacity Planning"}),e.jsx("button",{onClick:c,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6B7280"},children:""})]}),e.jsx("div",{style:{padding:"24px"},children:l.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280",fontSize:"14px"},children:"No team members configured. Please configure your team first in Team Configuration."}):b.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280",fontSize:"14px"},children:"No sprints found. Make sure your issues have iterations assigned."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"6px"},children:"Select Sprint"}),e.jsx("select",{value:d?.name||"",onChange:B=>v(B.target.value),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:b.map(B=>e.jsxs("option",{value:B.name,children:[B.name," ",B.startDate&&`(${new Date(B.startDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})`]},B.id))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px",padding:"16px",backgroundColor:"#F9FAFB",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Default Capacity"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#374151"},children:[G,"h"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Adjusted Capacity"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2563EB"},children:[U,"h"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Difference"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:$<0?"#DC2626":$>0?"#059669":"#6B7280"},children:[$>0?"+":"",$,"h"]})]})]}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Team Member"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Role"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Default"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Sprint Capacity"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Reason"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Actions"})]})}),e.jsx("tbody",{children:l.map(B=>{const M=g[B.username]||{hours:B.defaultCapacity,reason:""},R=x[B.username],L=M.hours!==B.defaultCapacity;return e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsxs("td",{style:{padding:"12px",fontSize:"14px"},children:[e.jsx("div",{style:{fontWeight:"500"},children:B.name}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:B.username})]}),e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:e.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#EFF6FF",color:"#2563EB",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:B.role})}),e.jsxs("td",{style:{padding:"12px",fontSize:"14px",color:"#6B7280"},children:[B.defaultCapacity,"h"]}),e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:R?e.jsx("input",{type:"number",value:M.hours,onChange:O=>H(B.username,O.target.value,M.reason),min:"0",max:B.defaultCapacity*2,step:"0.5",style:{width:"80px",padding:"6px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}}):e.jsxs("span",{style:{fontWeight:"600",color:L?M.hours<B.defaultCapacity?"#DC2626":"#059669":"#374151"},children:[M.hours,"h"]})}),e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:R?e.jsx("input",{type:"text",value:M.reason,onChange:O=>H(B.username,M.hours,O.target.value),placeholder:"Holiday, PTO, training...",style:{width:"100%",padding:"6px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}}):e.jsx("span",{style:{fontSize:"13px",color:"#6B7280",fontStyle:M.reason?"normal":"italic"},children:M.reason||"Standard capacity"})}),e.jsx("td",{style:{padding:"12px",fontSize:"14px"},children:R?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(B.username),style:{marginRight:"4px",padding:"4px 8px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Save"}),e.jsx("button",{onClick:()=>w(B.username,B),style:{padding:"4px 8px",background:"#9CA3AF",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Cancel"})]}):e.jsx("button",{onClick:()=>D(B.username),style:{padding:"4px 8px",background:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"})})]},B.username)})})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"#FEF3C7",border:"1px solid #FCD34D",borderRadius:"6px",fontSize:"13px",color:"#92400E"},children:[e.jsx("strong",{children:"Tip:"})," Adjust capacity for team members who will be on holiday, PTO, training, or have other commitments during this sprint. The system will use these values for capacity planning calculations."]})]})})]})}):null}const _s={DISCOVERY:{name:"Discovery",order:1,description:"Stakeholder conversations, requirement gathering",primaryRoles:["Product Owner","Business Analyst","Initiative Manager"],supportingRoles:["Scrum Master"],indicators:["requirement","stakeholder","analysis","research","discovery","explore","investigate"]},ANALYSIS:{name:"Analysis",order:2,description:"Technical analysis, data assessment, solution design",primaryRoles:["Business Analyst","Data Engineer","Developer"],supportingRoles:["Product Owner","Initiative Manager"],indicators:["analyze","design","architect","assess","evaluate","data analysis","technical design"]},PLANNING:{name:"Planning",order:3,description:"Sprint planning, task breakdown, estimation",primaryRoles:["Scrum Master","Product Owner","Developer"],supportingRoles:["Business Analyst","Initiative Manager"],indicators:["plan","estimate","breakdown","story point","sprint planning"]},IMPLEMENTATION:{name:"Implementation",order:4,description:"Development, coding, building features",primaryRoles:["Developer","Data Engineer","DevOps Engineer"],supportingRoles:["SRE","QA Engineer"],indicators:["implement","develop","code","build","create","feature","fix","refactor"]},TESTING:{name:"Testing",order:5,description:"Quality assurance, testing, validation",primaryRoles:["QA Engineer","Developer"],supportingRoles:["Business Analyst","Product Owner"],indicators:["test","qa","validate","verify","quality","bug","defect"]},DEPLOYMENT:{name:"Deployment",order:6,description:"Release, deployment, monitoring",primaryRoles:["DevOps Engineer","SRE"],supportingRoles:["Developer","QA Engineer"],indicators:["deploy","release","rollout","production","monitoring","ci/cd"]}},Ls={Developer:{primary:["IMPLEMENTATION","TESTING"],secondary:["ANALYSIS","PLANNING"],cannotDo:["DISCOVERY"]},"Data Engineer":{primary:["IMPLEMENTATION","ANALYSIS"],secondary:["TESTING","DEPLOYMENT"],cannotDo:["DISCOVERY"]},"Business Analyst":{primary:["DISCOVERY","ANALYSIS"],secondary:["PLANNING","TESTING"],cannotDo:["IMPLEMENTATION","DEPLOYMENT"]},"Product Owner":{primary:["DISCOVERY","PLANNING"],secondary:["ANALYSIS","TESTING"],cannotDo:["IMPLEMENTATION","DEPLOYMENT"]},"Initiative Manager":{primary:["DISCOVERY"],secondary:["ANALYSIS","PLANNING"],cannotDo:["IMPLEMENTATION","TESTING","DEPLOYMENT"]},"Scrum Master":{primary:["PLANNING"],secondary:["DISCOVERY"],cannotDo:["IMPLEMENTATION","ANALYSIS","TESTING","DEPLOYMENT"]},"QA Engineer":{primary:["TESTING"],secondary:["IMPLEMENTATION","DEPLOYMENT"],cannotDo:["DISCOVERY","ANALYSIS"]},"DevOps Engineer":{primary:["DEPLOYMENT","IMPLEMENTATION"],secondary:["TESTING"],cannotDo:["DISCOVERY","ANALYSIS"]},SRE:{primary:["DEPLOYMENT","IMPLEMENTATION"],secondary:["TESTING"],cannotDo:["DISCOVERY","ANALYSIS"]}};function _0(o){if(!o||o.length===0)return null;const c=o.filter(g=>g.state==="opened"),r=o.filter(g=>g.state==="closed"),l=o.length>0?r.length/o.length*100:0,a={};Object.entries(_s).forEach(([g,f])=>{a[g]=0,c.forEach(x=>{const m=(x.title||"").toLowerCase(),b=(x.description||"").toLowerCase(),v=(x.labels||[]).map(j=>j.toLowerCase()).join(" "),D=`${m} ${b} ${v}`;f.indicators.forEach(j=>{D.includes(j.toLowerCase())&&(a[g]+=1)})})});let d="IMPLEMENTATION",u=0;return Object.entries(a).forEach(([g,f])=>{f>u&&(u=f,d=g)}),l>80?d="TESTING":l>90?d="DEPLOYMENT":l<10&&c.length>0&&c.filter(f=>{const x=(f.labels||[]).map(m=>m.toLowerCase()).join(" ");return x.includes("analysis")||x.includes("discovery")||x.includes("requirement")}).length>c.length*.5&&(d="ANALYSIS"),{current:d,details:_s[d],scores:a,completionPercentage:Math.round(l)}}function Eh(o,c,r){const l=Ls[c];if(!l)return[];const a=[];return o.forEach(d=>{if(d.state!=="opened"||d.assignees?.length>0)return;const u=(d.title||"").toLowerCase(),g=(d.description||"").toLowerCase(),f=(d.labels||[]).map(b=>b.toLowerCase()).join(" "),x=`${u} ${g} ${f}`;[...l.primary||[],...l.secondary||[]].forEach(b=>{const v=_s[b];if(!v)return;let D=0;v.indicators.forEach(j=>{x.includes(j.toLowerCase())&&(D+=1)}),D>0&&a.push({issue:d,phase:b,matchScore:D,isPrimary:l.primary.includes(b),reason:`Suitable for ${v.name} work`})})}),a.sort((d,u)=>d.isPrimary!==u.isPrimary?d.isPrimary?-1:1:u.matchScore-d.matchScore),a.slice(0,5)}function L0(o,c,r,l){const a=[],d=o.role||"Developer",u=Ls[d];if(!u)return a;const g=u.primary.includes(c.current),f=g||u.secondary.includes(c.current);if(!f&&o.capacity.utilization<50){const x=c.details.order+1,m=Object.values(_s).find(b=>b.order===x);m&&u.primary.includes(Object.keys(_s).find(b=>_s[b]===m))&&a.push({type:"PREPARE_NEXT_PHASE",priority:"high",title:`Start ${m.name} for next sprint`,description:`As a ${d}, you can prepare for the upcoming ${m.name} phase while the team completes ${c.details.name}`,impact:"Accelerate next sprint startup",suggestedWork:Eh(r,d).slice(0,3)})}if(f&&o.capacity.utilization<60){const x=Eh(r,d);x.length>0&&a.push({type:"BACKLOG_PICKUP",priority:g?"high":"medium",title:"Pick up aligned backlog items",description:`You have ${100-o.capacity.utilization}% available capacity for additional ${c.details.name} work`,impact:`Increase sprint velocity by ~${Math.round((100-o.capacity.utilization)/20)} story points`,suggestedWork:x.slice(0,3)})}if(o.capacity.utilization<40&&!g){const x=l.filter(m=>m.capacity.utilization>80&&Ls[m.role]?.primary.includes(c.current));x.length>0&&a.push({type:"CROSS_TRAINING",priority:"low",title:"Cross-training opportunity",description:`Shadow ${x[0].name} to learn ${c.details.name} skills`,impact:"Build team resilience and flexibility",suggestedWork:[]})}return o.capacity.utilization<50&&a.push({type:"KNOWLEDGE_SHARING",priority:"low",title:"Document and share knowledge",description:`Use available capacity to document ${d} best practices or create knowledge base articles`,impact:"Improve team knowledge and onboarding",suggestedWork:[]}),a}function $0(o,c){let r=0,l=0;return o.forEach(a=>{a.type==="BACKLOG_PICKUP"&&a.suggestedWork&&a.suggestedWork.forEach(d=>{const u=d.issue.weight||0;r+=u,l+=u*(c.hoursPerStoryPoint||8)})}),{storyPoints:r,hours:l,velocityIncrease:r>0?`+${Math.round(r*100/20)}%`:"0%"}}function P0(o,c,r){const l=c.current,a=c.details,d=o.filter(m=>Ls[m.role]?.primary.includes(l)),u=o.filter(m=>Ls[m.role]?.secondary.includes(l)),g=o.filter(m=>Ls[m.role]?.cannotDo.includes(l)),f=o.length,x=f>0?Math.round((d.length*100+u.length*50)/f):0;return{phase:a.name,efficiencyScore:x,optimal:d.length,suboptimal:u.length,mismatched:g.length,recommendations:U0(x,d,u,g,a)}}function U0(o,c,r,l,a){const d=[];return o<50&&d.push({severity:"critical",title:"Phase-Role Mismatch",description:`Only ${c.length} team members are optimally suited for current ${a.name} phase`,action:"Consider phase-appropriate task distribution or timeline adjustment"}),l.length>0&&d.push({severity:"warning",title:"Underutilized Skills",description:`${l.length} team members cannot contribute effectively to ${a.name}`,action:"Assign preparatory work for upcoming phases or cross-training"}),r.length>c.length&&d.push({severity:"info",title:"Suboptimal Resource Allocation",description:`More team members in supporting roles than primary roles for ${a.name}`,action:"Consider skill development or team composition review"}),d}function H0({issues:o}){const{filteredIssues:c}=qi(),[r,l]=W.useState(!1),[a,d]=W.useState(!1),[u,g]=W.useState({teamMembers:[]}),[f,x]=W.useState({hoursPerStoryPoint:8,defaultHoursPerIssue:4,defaultWeeklyCapacity:40}),[m,b]=W.useState(null);W.useEffect(()=>{const y=ht(),C=va();g(y),x(C)},[r,a]);const v=W.useMemo(()=>fa(c).map(C=>{const I=c.find(_=>Ps(_.iteration)===C);return{name:C,id:I?.iteration?.id||C,startDate:I?.iteration?.start_date,dueDate:I?.iteration?.due_date}}).sort((C,I)=>C.startDate?I.startDate?new Date(I.startDate)-new Date(C.startDate):-1:1),[c]);W.useEffect(()=>{v.length>0&&!m&&b(v[0])},[v,m]);const D=W.useMemo(()=>{if(!c||c.length===0)return{members:[],unassigned:0,totalIssues:0,teamMetrics:null};const y=new Map;let C=0;c.filter(q=>q.state==="opened").forEach(q=>{const k=q.assignees||[];if(k.length===0){C++;return}k.forEach(A=>{const V=A.username;if(!y.has(V)){const ae=u.teamMembers.find(re=>re.username===A.username);y.set(V,{username:A.username,name:A.name,avatar:A.avatar_url,gpn:ae?.gpn,tNumber:ae?.tNumber,role:ae?.role||"Unknown",defaultCapacity:ae?.defaultCapacity||f.defaultWeeklyCapacity,openIssues:0,totalIssues:0,totalWeight:0,issues:[]})}const Q=y.get(V);Q.totalIssues++,Q.openIssues++,Q.issues.push(q),Q.totalWeight+=q.weight||0})});const _=Array.from(y.values()).map(q=>{let k=q.defaultCapacity,A=null;if(m&&m.startDate&&m.dueDate){const xe=Math.ceil((new Date(m.dueDate)-new Date(m.startDate))/864e5),ge=Math.floor(xe*(5/7))/5,Be=Math.round(ge*q.defaultCapacity),Je=m0(q.username,m,q.defaultCapacity),Ae=Je.hoursLost||0,Ye=Math.max(0,Be-Ae),pe=nd(m.id,q.username,q.defaultCapacity,m);k=ge>0?Math.round(pe/ge):q.defaultCapacity,(Ae>0||pe!==Be)&&(A={sprintDefaultCapacity:Be,hoursLost:Ae,daysLost:Je.workingDaysLost||0,autoAdjustedCapacity:Ye,finalCapacity:pe,absences:Je.absences||[]})}const V=q.issues.filter(xe=>xe.state==="opened").reduce((xe,ze)=>xe+Gi(ze,f),0),Q=k>0?V/k*100:0,ae=Math.max(0,k-V),re=k>0?Math.ceil(V/k):0;let ue="Available",fe="#059669";return k===0?(ue="Not Available",fe="#6B7280"):Q>=100?(ue="Overloaded",fe="#DC2626"):Q>=80?(ue="At Capacity",fe="#D97706"):Q>=60&&(ue="Busy",fe="#2563EB"),{...q,capacity:{weeklyCapacity:k,allocatedHours:Math.round(V*10)/10,availableHours:Math.round(ae*10)/10,utilization:Math.round(Q),weeksToComplete:re,status:ue,statusColor:fe,isSprintAdjusted:k!==q.defaultCapacity,absenceInfo:A}}}).sort((q,k)=>k.capacity.utilization-q.capacity.utilization),P=_.reduce((q,k)=>q+k.capacity.weeklyCapacity,0),X=_.reduce((q,k)=>q+k.capacity.allocatedHours,0),z=P-X,T=P>0?X/P*100:0,N=_.filter(q=>q.capacity.utilization>=100).length,K=_.filter(q=>q.capacity.utilization>=80&&q.capacity.utilization<100).length,te={totalCapacity:Math.round(P),totalAllocated:Math.round(X*10)/10,totalAvailable:Math.round(z*10)/10,teamUtilization:Math.round(T),overloadedMembers:N,atCapacityMembers:K,avgUtilization:_.length>0?Math.round(_.reduce((q,k)=>q+k.capacity.utilization,0)/_.length):0};return{members:_,unassigned:C,totalIssues:c.length,teamMetrics:te}},[c,f,u,m]),{members:j,unassigned:w,teamMetrics:H}=D,U=y=>{const C=[],I=[];if(y.capacity.utilization>=100){const _=y.capacity.allocatedHours-y.capacity.weeklyCapacity,P=new Map;y.issues.filter(T=>T.state==="opened").forEach(T=>{const N=T.epic?.id||"no-epic",K=T.epic?.title||"No Epic";P.has(N)||P.set(N,{title:K,count:0,weight:0});const te=P.get(N);te.count++,te.weight+=T.weight||0});const X=Array.from(P.values()).sort((T,N)=>N.count-T.count);X.length>2&&(C.push({severity:"critical",category:"multi-epic",description:`Assigned to ${X.length} different epics simultaneously`,impact:`Spread across: ${X.slice(0,3).map(T=>`${T.title} (${T.count} issues, ${T.weight} pts)`).join(", ")}`}),I.push({priority:"high",title:"Focus on fewer epics",description:`Reduce to 1-2 epics. Consider moving ${X[X.length-1].title} issues to another team member`,estimatedImpact:"Reduce context switching, improve focus"})),y.openIssues>8&&(C.push({severity:"critical",category:"wip",description:`Too many open issues (${y.openIssues}) - WIP limit exceeded`,impact:`${_.toFixed(1)} hours over capacity`}),I.push({priority:"high",title:"Implement WIP limits",description:`Move ${Math.ceil(y.openIssues*.3)} issues to available team members`,estimatedImpact:`Free up ${(_*.3).toFixed(1)} hours`}));const z=y.issues.filter(T=>T.state==="opened"&&(T.labels?.some(N=>N.toLowerCase().includes("blocked"))||T.labels?.some(N=>N.toLowerCase().includes("waiting"))));if(z.length>0){const T=z.reduce((N,K)=>N+Gi(K,f),0);C.push({severity:"warning",category:"blockers",description:`${z.length} blocked or waiting issues`,impact:`${T.toFixed(1)} hours tied up in blocked work`}),I.push({priority:"medium",title:"Resolve blockers",description:`Escalate blocked issues: ${z.slice(0,2).map(N=>N.title).join(", ")}`,estimatedImpact:`Free up ${T.toFixed(1)} hours`})}}else y.capacity.utilization>=80?(C.push({severity:"warning",category:"at-capacity",description:`Operating at ${y.capacity.utilization}% capacity`,impact:`Only ${y.capacity.availableHours} hours available`}),I.push({priority:"medium",title:"Monitor workload closely",description:"Avoid assigning new work until current issues are completed",estimatedImpact:"Prevent overload"})):y.capacity.utilization<50&&(C.push({severity:"info",category:"underutilized",description:`Operating at only ${y.capacity.utilization}% capacity`,impact:`${y.capacity.availableHours} hours available`}),I.push({priority:"low",title:"Assign more work",description:"Can take on additional work",estimatedImpact:"Better team balance"}));return{causes:C,actions:I}},$=(()=>{if(!j||j.length<2)return[];const y=j.filter(_=>_.capacity.utilization>100),C=j.filter(_=>_.capacity.utilization<80&&_.capacity.weeklyCapacity>0),I=[];return y.forEach(_=>{if(C.length===0)return;const P=C.filter(X=>{const z=_.role||"Developer",T=X.role||"Developer";return o0(z,T)});if(P.sort((X,z)=>X.capacity.utilization-z.capacity.utilization),P.length>0){const X=P[0],z=Math.ceil(_.openIssues*.3),T=_.capacity.allocatedHours*.3,N=_.capacity.utilization,K=Math.round(N-30);I.push({from:_.name,fromRole:_.role||"Developer",to:X.name,toRole:X.role||"Developer",issues:z,hours:Math.round(T*10)/10,impact:`Would reduce ${_.name}'s utilization from ${N}% to ~${K}%`,compatibilityReason:_.role===X.role?"Same role":`Compatible roles (${Dh(_.role||"Developer").join(", ")})`})}else I.push({from:_.name,fromRole:_.role||"Developer",to:null,toRole:null,issues:0,hours:0,impact:`No available team members with compatible role (${_.role||"Developer"})`,warning:!0,compatibilityReason:`Needs: ${Dh(_.role||"Developer").join(", ")||_.role}`})}),I})(),B=W.useMemo(()=>{if(!m||!c||c.length===0)return null;const y=c.filter(C=>Ps(C.iteration)===m.name);return _0(y)},[c,m]),M=W.useMemo(()=>o?o.filter(y=>{const C=y.iteration&&(y.iteration.title||y.iteration.name||y.iteration.id),I=y.assignees&&y.assignees.length>0;return!C&&!I&&y.state==="opened"}):[],[o]),R=W.useMemo(()=>{if(!j||!B||!M)return[];const y=[];return j.forEach(C=>{if(C.capacity.utilization<60&&C.capacity.weeklyCapacity>0){const I=L0(C,B,M,j);I.length>0&&y.push({member:C.name,role:C.role,utilization:C.capacity.utilization,recommendations:I})}}),y},[j,B,M]),L=W.useMemo(()=>!j||!B||!c?null:P0(j,B),[j,B,c]),O=W.useMemo(()=>{if(!R||R.length===0)return null;const y=R.flatMap(C=>C.recommendations);return $0(y,f)},[R,f]);return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Resource Capacity Planning"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Advanced resource management with capacity allocation and forecasting"})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F0F9FF",borderColor:"#BFDBFE"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"6px",color:"#1E40AF"},children:"Team Resource Management"}),e.jsx("div",{style:{fontSize:"13px",color:"#1E40AF"},children:"Configure your team, roles, and capacity settings to get accurate resource planning"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>l(!0),style:{padding:"10px 20px",background:"#2563EB",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Team Configuration"}),e.jsx("button",{onClick:()=>d(!0),style:{padding:"10px 20px",background:"#059669",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Sprint Capacity"})]})]}),f.historicalData&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"white",borderRadius:"6px",fontSize:"13px",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"Hours per Story Point:"})," ",e.jsxs("strong",{style:{color:"#1E40AF"},children:[f.hoursPerStoryPoint,"h"]}),e.jsxs("span",{style:{fontSize:"11px",color:"#9CA3AF",marginLeft:"6px"},children:["(based on ",f.historicalData.sampleSize," issues)"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"Default Hours per Issue:"})," ",e.jsxs("strong",{style:{color:"#1E40AF"},children:[f.defaultHoursPerIssue,"h"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"Team Members:"})," ",e.jsx("strong",{style:{color:"#1E40AF"},children:u.teamMembers.length})]})]})]}),e.jsx(O0,{isOpen:r,onClose:()=>l(!1),issues:c}),e.jsx(W0,{isOpen:a,onClose:()=>d(!1),issues:c}),H&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Team Utilization"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:H.teamUtilization>=90?"#DC2626":H.teamUtilization>=70?"#D97706":"#059669"},children:[H.teamUtilization,"%"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:["Avg: ",H.avgUtilization,"%"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Total Capacity"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937"},children:[H.totalCapacity,"h"]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"per week"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Allocated"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#DC2626"},children:[H.totalAllocated,"h"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[H.totalAvailable,"h available"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Capacity Issues"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:H.overloadedMembers>0?"#DC2626":"#059669"},children:H.overloadedMembers}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[H.atCapacityMembers," at capacity"]})]})]}),$.length>0&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#FEF3C7",borderColor:"#D97706"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400E",marginBottom:"8px"},children:" Workload Rebalancing Recommendations"}),e.jsx("p",{style:{fontSize:"13px",color:"#92400E",marginBottom:"16px"},children:"Suggestions respect role compatibility - only team members with compatible skills are considered"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:$.map((y,C)=>e.jsx("div",{style:{padding:"12px",background:y.warning?"#FEE2E2":"white",borderRadius:"6px",fontSize:"14px",borderLeft:y.warning?"4px solid #DC2626":"4px solid #059669"},children:y.warning?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#991B1B",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[y.from," (",y.fromRole,")"]})]}),e.jsx("div",{style:{fontSize:"12px",color:"#991B1B",marginBottom:"4px"},children:y.impact}),e.jsx("div",{style:{fontSize:"11px",color:"#7F1D1D",fontStyle:"italic"},children:y.compatibilityReason})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#78350F",marginBottom:"4px"},children:["Move ",y.issues," issue",y.issues>1?"s":""," (~",y.hours,"h) from ",y.from,"  ",y.to]}),e.jsx("div",{style:{fontSize:"12px",color:"#92400E",marginBottom:"4px"},children:y.impact}),e.jsxs("div",{style:{fontSize:"11px",color:"#78350F",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{padding:"2px 6px",background:"#FDE68A",borderRadius:"4px",fontWeight:"500"},children:y.fromRole}),e.jsx("span",{children:""}),e.jsx("span",{style:{padding:"2px 6px",background:"#FDE68A",borderRadius:"4px",fontWeight:"500"},children:y.toRole}),e.jsxs("span",{style:{marginLeft:"8px",fontStyle:"italic"},children:["(",y.compatibilityReason,")"]})]})]})},C))})]}),B&&L&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F0F9FF",borderColor:"#2563EB"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1E40AF",marginBottom:"8px"},children:" Sprint Workflow Intelligence"}),e.jsxs("p",{style:{fontSize:"13px",color:"#3B82F6",marginBottom:"0"},children:["Current Phase: ",e.jsx("strong",{children:B.details.name})," (",B.completionPercentage,"% complete)"]})]}),e.jsxs("div",{style:{padding:"8px 16px",background:L.efficiencyScore>=70?"#10B981":L.efficiencyScore>=50?"#F59E0B":"#EF4444",color:"white",borderRadius:"20px",fontSize:"14px",fontWeight:"600"},children:["Efficiency: ",L.efficiencyScore,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"16px"},children:[e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Optimal for phase"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#059669"},children:L.optimal}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:"team members"})]}),e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Can contribute"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#D97706"},children:L.suboptimal}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:"in supporting role"})]}),e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Mismatched"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#DC2626"},children:L.mismatched}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:"for current phase"})]})]}),L.recommendations&&L.recommendations.length>0&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:L.recommendations.map((y,C)=>e.jsxs("div",{style:{padding:"8px 12px",background:y.severity==="critical"?"#FEE2E2":y.severity==="warning"?"#FEF3C7":"#E0E7FF",borderRadius:"4px",fontSize:"12px",borderLeft:`3px solid ${y.severity==="critical"?"#DC2626":y.severity==="warning"?"#D97706":"#2563EB"}`},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"2px"},children:y.title}),e.jsx("div",{style:{marginBottom:"2px"},children:y.description}),e.jsxs("div",{style:{fontStyle:"italic",fontSize:"11px"},children:[" ",y.action]})]},C))})]}),R.length>0&&O&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F0FDF4",borderColor:"#10B981"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#14532D",marginBottom:"8px"},children:" Velocity Optimization Opportunities"}),e.jsx("p",{style:{fontSize:"13px",color:"#166534"},children:"Proactive recommendations for underutilized team members"})]}),O.storyPoints>0&&e.jsxs("div",{style:{padding:"8px 16px",background:"#10B981",color:"white",borderRadius:"20px",fontSize:"14px",fontWeight:"600"},children:["Potential: +",O.storyPoints," SP"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:R.map((y,C)=>e.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:y.member}),e.jsx("span",{style:{marginLeft:"8px",padding:"2px 8px",background:"#E0F2FE",color:"#0369A1",borderRadius:"12px",fontSize:"12px"},children:y.role})]}),e.jsxs("div",{style:{fontSize:"13px",color:y.utilization<30?"#DC2626":y.utilization<50?"#D97706":"#059669"},children:[y.utilization,"% utilized"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.recommendations.map((I,_)=>e.jsxs("div",{style:{padding:"10px",background:"#F9FAFB",borderRadius:"6px",borderLeft:`3px solid ${I.priority==="high"?"#DC2626":I.priority==="medium"?"#F59E0B":"#3B82F6"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px"},children:I.title}),e.jsx("div",{style:{padding:"2px 6px",background:I.priority==="high"?"#FEE2E2":I.priority==="medium"?"#FEF3C7":"#DBEAFE",color:I.priority==="high"?"#991B1B":I.priority==="medium"?"#92400E":"#1E3A8A",borderRadius:"4px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:I.priority})]}),e.jsx("div",{style:{fontSize:"12px",color:"#4B5563",marginBottom:"4px"},children:I.description}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",fontStyle:"italic"},children:["Impact: ",I.impact]}),I.suggestedWork&&I.suggestedWork.length>0&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"Suggested backlog items:"}),I.suggestedWork.map((P,X)=>e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginLeft:"12px"},children:[" ",P.issue.title," (",P.reason,")"]},X))]})]},_))})]},C))}),O.storyPoints>0&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#ECFDF5",borderRadius:"6px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{style:{fontSize:"24px"},children:""}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#065F46"},children:["Potential Velocity Increase: ",O.velocityIncrease]}),e.jsxs("div",{style:{fontSize:"12px",color:"#047857"},children:["By implementing these recommendations, the team could add ",O.storyPoints," story points (~",O.hours," hours) to the current sprint"]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",margin:0},children:"Team Capacity Planning"}),v.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("label",{style:{fontSize:"13px",fontWeight:"500",color:"#6B7280"},children:"Sprint:"}),e.jsx("select",{value:m?.id||"",onChange:y=>{const C=v.find(I=>I.id===y.target.value);b(C)},style:{padding:"8px 32px 8px 12px",fontSize:"14px",border:"1px solid #D1D5DB",borderRadius:"6px",background:"white",cursor:"pointer",minWidth:"250px"},children:v.map(y=>e.jsxs("option",{value:y.id,children:[y.name," ",y.startDate&&y.dueDate&&`(${new Date(y.startDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"})} - ${new Date(y.dueDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"})})`]},y.id))})]})]}),j.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280"},children:"No team members found. Assign issues to team members to see capacity planning."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:j.map(y=>{const C=y.capacity;return e.jsxs("div",{style:{padding:"16px",background:"#F9FAFB",borderRadius:"8px",border:`2px solid ${C.statusColor}20`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[y.avatar&&e.jsx("img",{src:y.avatar,alt:y.name,style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover"},onError:I=>{I.target.style.display="none"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:y.name}),y.role&&y.role!=="Unknown"&&e.jsx("span",{style:{padding:"3px 10px",backgroundColor:"#EFF6FF",color:"#2563EB",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:y.role})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[y.username&&e.jsxs("span",{children:["@",y.username]}),y.gpn&&e.jsxs("span",{children:["GPN: ",y.gpn]}),y.tNumber&&e.jsxs("span",{children:["T-Number: ",y.tNumber]})]})]}),e.jsx("div",{style:{padding:"6px 16px",background:C.statusColor+"20",color:C.statusColor,borderRadius:"12px",fontSize:"13px",fontWeight:"600"},children:C.status})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"UTILIZATION"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:C.statusColor},children:[C.utilization,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"ALLOCATED"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#DC2626"},children:[C.allocatedHours,"h"]}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",display:"flex",alignItems:"center",gap:"4px"},children:["of ",C.weeklyCapacity,"h/week",C.isSprintAdjusted&&e.jsx("span",{style:{fontSize:"10px",background:"#FEF3C7",color:"#92400E",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},title:`Default: ${y.defaultCapacity}h/week. Adjusted for this sprint (holidays, PTO, etc.)`,children:""})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"AVAILABLE"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#059669"},children:[C.availableHours,"h"]}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:"this week"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"TIME TO COMPLETE"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#2563EB"},children:[C.weeksToComplete,"w"]}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:"at current rate"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"OPEN ISSUES"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937"},children:y.openIssues}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[y.totalWeight," story points"]})]}),C.absenceInfo&&C.absenceInfo.hoursLost>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"ABSENCE IMPACT"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#D97706"},children:["-",C.absenceInfo.hoursLost,"h"]}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[C.absenceInfo.daysLost," day",C.absenceInfo.daysLost!==1?"s":""," off"]})]}),C.absenceInfo&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"SPRINT CAPACITY"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#2563EB"},children:[C.absenceInfo.finalCapacity,"h"]}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:["of ",C.absenceInfo.sprintDefaultCapacity,"h planned"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"6px"},children:["Capacity Utilization: ",C.allocatedHours,"h / ",C.weeklyCapacity,"h"]}),e.jsxs("div",{style:{width:"100%",height:"12px",background:"#E5E7EB",borderRadius:"6px",overflow:"hidden",position:"relative"},children:[e.jsx("div",{style:{width:`${Math.min(C.utilization,100)}%`,height:"100%",background:C.statusColor,transition:"width 0.3s ease"}}),C.utilization>100&&e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:`repeating-linear-gradient(45deg, ${C.statusColor}, ${C.statusColor} 10px, ${C.statusColor}dd 10px, ${C.statusColor}dd 20px)`}})]})]}),(()=>{const{causes:I,actions:_}=U(y);return I.length===0?null:e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#F3F4F6",borderRadius:"6px",fontSize:"13px"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:" Root Cause Analysis:"}),I.map((P,X)=>e.jsxs("div",{style:{marginBottom:"8px",paddingLeft:"8px",borderLeft:`3px solid ${P.severity==="critical"?"#DC2626":P.severity==="warning"?"#D97706":"#6B7280"}`},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"2px"},children:[P.severity==="critical"&&""," ",P.severity==="warning"&&""," ",P.severity==="info"&&""," ",P.description]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:P.impact})]},X))]}),_.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:" Recommended Actions:"}),_.map((P,X)=>e.jsxs("div",{style:{marginBottom:"8px",paddingLeft:"8px",borderLeft:"3px solid #2563EB"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"2px"},children:P.title}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"2px"},children:P.description}),e.jsxs("div",{style:{fontSize:"11px",color:"#9CA3AF"},children:["Impact: ",P.estimatedImpact]})]},X))]})]})})(),C.absenceInfo&&C.absenceInfo.absences.length>0&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#FEF3C7",borderRadius:"6px",border:"1px solid #F59E0B"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#92400E",marginBottom:"8px"},children:" Absences in Sprint:"}),C.absenceInfo.absences.map((I,_)=>e.jsxs("div",{style:{fontSize:"12px",color:"#92400E",marginBottom:"4px"},children:[" ",I.reason||I.type,": ",new Date(I.startDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"})," - ",new Date(I.endDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"})]},_)),e.jsxs("div",{style:{fontSize:"12px",color:"#92400E",marginTop:"8px",fontWeight:"600"},children:["Total capacity reduction: ",C.absenceInfo.hoursLost,"h (",C.absenceInfo.daysLost," working days)"]})]}),y.openIssues>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"12px"},children:["Remaining Work (",y.openIssues," open issues) - ",y.issues.filter(I=>I.state==="opened").reduce((I,_)=>I+(_.weight||0),0)," story points"]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#F9FAFB",borderBottom:"2px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280",whiteSpace:"nowrap"},children:"ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"Title"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"Epic"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280",whiteSpace:"nowrap"},children:"Weight"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280",whiteSpace:"nowrap"},children:"Est. Hours"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280",whiteSpace:"nowrap"},children:"Due Date"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"State"})]})}),e.jsx("tbody",{children:y.issues.filter(I=>I.state==="opened").sort((I,_)=>I.due_date&&_.due_date?new Date(I.due_date)-new Date(_.due_date):I.due_date?-1:_.due_date?1:(_.weight||0)-(I.weight||0)).map(I=>{const _=Gi(I,f),P=I.due_date&&new Date(I.due_date)<new Date,X=I.due_date&&!P&&new Date(I.due_date)-new Date<10080*60*1e3;return e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsxs("td",{style:{padding:"8px 12px",color:"#6B7280"},children:["#",I.iid]}),e.jsx("td",{style:{padding:"8px 12px"},children:e.jsx("div",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#374151"},children:I.title})}),e.jsx("td",{style:{padding:"8px 12px",fontSize:"12px",color:"#6B7280"},children:e.jsx("div",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.epic?.title||"-"})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:I.weight?e.jsx("span",{style:{padding:"3px 8px",background:"#DBEAFE",color:"#1E40AF",borderRadius:"4px",fontSize:"12px",fontWeight:"600"},children:I.weight}):e.jsx("span",{style:{color:"#9CA3AF",fontSize:"12px"},children:"-"})}),e.jsxs("td",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"600",color:"#374151"},children:[_.toFixed(1),"h"]}),e.jsx("td",{style:{padding:"8px 12px",fontSize:"12px"},children:I.due_date?e.jsxs("span",{style:{color:P?"#DC2626":X?"#D97706":"#6B7280",fontWeight:P||X?"600":"400"},children:[new Date(I.due_date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),P&&" "]}):e.jsx("span",{style:{color:"#9CA3AF"},children:"-"})}),e.jsx("td",{style:{padding:"8px 12px",fontSize:"12px"},children:e.jsx("span",{style:{padding:"3px 8px",background:"#FEF3C7",color:"#92400E",borderRadius:"4px",fontSize:"11px",fontWeight:"500"},children:I.state})})]},I.id)})})]})})]})]},y.username)})})]}),w>0&&e.jsx("div",{className:"card",style:{marginTop:"20px",background:"#FEF3C7",borderColor:"#D97706"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{fontSize:"24px"},children:""}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#92400E",marginBottom:"4px"},children:[w," Unassigned Issues"]}),e.jsxs("div",{style:{fontSize:"14px",color:"#78350F"},children:["Estimated impact: ",(w*f.defaultHoursPerIssue).toFixed(1)," hours of unallocated work"]})]})]})})]})}const bt={STAKEHOLDERS:"stakeholders",COMMUNICATION_HISTORY:"communication_history",TEMPLATES:"communication_templates",DECISIONS:"decisions",DOCUMENTS:"documents"};function gd(){const o=localStorage.getItem(bt.STAKEHOLDERS);return o?JSON.parse(o):[]}function G0(o){const c=gd(),r=c.findIndex(l=>l.id===o.id);return r>=0?c[r]={...c[r],...o}:c.push({id:o.id||Date.now().toString(),name:o.name,role:o.role,email:o.email,frequency:o.frequency||"weekly",interests:o.interests||[],createdAt:new Date().toISOString()}),localStorage.setItem(bt.STAKEHOLDERS,JSON.stringify(c)),c}function V0(o){const r=gd().filter(l=>l.id!==o);return localStorage.setItem(bt.STAKEHOLDERS,JSON.stringify(r)),r}function ji(){const o=localStorage.getItem(bt.COMMUNICATION_HISTORY);return o?JSON.parse(o):[]}function gn(o=null){const c=o||fn();return ji().filter(l=>(l.projectId||"default")===c||c==="default")}const id={EMAIL:{id:"email",label:"Email",color:"#3B82F6",icon:""},REQUIREMENTS_SIGNOFF:{id:"requirements_signoff",label:"Requirements Sign-Off",color:"#10B981",icon:""},INCIDENT:{id:"incident",label:"Incident",color:"#DC2626",icon:""},SCOPE_CHANGE:{id:"scope_change",label:"Scope Change",color:"#F59E0B",icon:""},PRIORITIZATION:{id:"prioritization",label:"Prioritization",color:"#8B5CF6",icon:""},MEETING_NOTES:{id:"meeting_notes",label:"Meeting Notes",color:"#64748B",icon:""},OTHER:{id:"other",label:"Other",color:"#6B7280",icon:""}};function Vc(o){const c=ji(),r=fn()||"default";c.unshift({id:o.id||Date.now().toString(),projectId:r,stakeholderIds:o.stakeholderIds||[],subject:o.subject,content:o.content,type:o.type||"status_update",sentAt:o.sentAt||new Date().toISOString(),from:o.from||null,timeImpact:o.timeImpact||"",originalDate:o.originalDate||null,newDate:o.newDate||null,rootCause:o.rootCause||"",linkedIssues:o.linkedIssues||[],linkedEpics:o.linkedEpics||[],affectedTeamMembers:o.affectedTeamMembers||[],supersedes:o.supersedes||null,supersededBy:o.supersededBy||null,relatedTo:o.relatedTo||[],tags:o.tags||[],comments:o.comments||[],attachments:o.attachments||[]});const l=c.slice(0,200);return localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(l)),l}function q0(o){const r=ji().filter(l=>l.id!==o);return localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(r)),r}function Y0(o,c){const r=ji(),l=r.findIndex(a=>a.id===o);return l>=0&&(r[l]={...r[l],...c,id:r[l].id,projectId:r[l].projectId,createdAt:r[l].createdAt||r[l].sentAt},localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(r))),r}function Q0(o,c){const r=ji(),l=r.find(a=>a.id===o);return l&&(l.comments||(l.comments=[]),l.comments.push({id:Date.now().toString(),text:c,createdAt:new Date().toISOString()}),localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(r))),r}function X0(o,c){const r=ji(),l=r.find(a=>a.id===o);return l&&(l.tags||(l.tags=[]),c.forEach(a=>{l.tags.includes(a)||l.tags.push(a)}),localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(r))),r}function K0(o,c){const r=ji(),l=r.find(a=>a.id===o);return l&&l.tags&&(l.tags=l.tags.filter(a=>a!==c),localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(r))),r}function cg(){const o=localStorage.getItem(bt.TEMPLATES);return o?JSON.parse(o):[{id:"weekly_status",name:"Weekly Status Update",subject:"Project Status Update - Week of {date}",body:`Hi {stakeholder_name},

Here's your weekly project status update for {project_name}:

**Overall Health:** {health_score}/100 ({health_label})
**Completion:** {completion_rate}%
**Open Issues:** {open_issues}
**Blockers:** {blockers}

{status_summary}

{upcoming_milestones}

Best regards,
{sender_name}`},{id:"milestone_complete",name:"Milestone Achievement",subject:"Milestone Achieved: {milestone_name}",body:`Hi {stakeholder_name},

Great news! We've successfully completed the {milestone_name} milestone.

**Achievement Highlights:**
- {completed_issues} issues completed
- Delivered on {milestone_date}
- {completion_rate}% completion rate

{next_steps}

Best regards,
{sender_name}`},{id:"risk_alert",name:"Risk Alert",subject:"Risk Alert: {risk_description}",body:`Hi {stakeholder_name},

I wanted to bring to your attention a risk that requires management awareness:

**Risk:** {risk_description}
**Probability:** {risk_probability}
**Impact:** {risk_impact}
**Mitigation Plan:** {risk_mitigation}

Please let me know if you'd like to discuss this further.

Best regards,
{sender_name}`},{id:"executive_summary",name:"Executive Summary",subject:"Executive Summary - {project_name}",body:`Hi {stakeholder_name},

Please find below the executive summary for {project_name}:

**Project Health:** {health_score}/100
**Status:** {health_label}

**Key Metrics:**
- Total Issues: {total_issues}
- Completion Rate: {completion_rate}%
- Active Blockers: {blockers}
- Team Utilization: {team_utilization}%

{ai_summary}

**Action Required:**
{action_items}

Best regards,
{sender_name}`}]}function J0(o){const c=cg(),r=c.findIndex(l=>l.id===o.id);return r>=0?c[r]=o:c.push({...o,id:o.id||Date.now().toString()}),localStorage.setItem(bt.TEMPLATES,JSON.stringify(c)),c}function qc(o,c){let r=o.body;const l={"{stakeholder_name}":c.stakeholderName||"all","{project_name}":c.projectName||"Project","{date}":new Date().toLocaleDateString(),"{health_score}":c.healthScore?.score||"N/A","{health_label}":c.healthScore?.label||"Unknown","{completion_rate}":c.stats?.completionRate||"0","{open_issues}":c.stats?.openIssues||"0","{total_issues}":c.stats?.totalIssues||"0","{blockers}":c.stats?.blockers||"0","{team_utilization}":c.teamUtilization||"N/A","{status_summary}":c.statusSummary||"","{upcoming_milestones}":c.upcomingMilestones||"","{action_items}":c.actionItems||"","{ai_summary}":c.aiSummary||"","{sender_name}":c.senderName||"Project Manager","{milestone_name}":c.milestoneName||"","{milestone_date}":c.milestoneDate||"","{completed_issues}":c.completedIssues||"0","{next_steps}":c.nextSteps||"","{risk_description}":c.riskDescription||"","{risk_probability}":c.riskProbability||"","{risk_impact}":c.riskImpact||"","{risk_mitigation}":c.riskMitigation||""};return Object.entries(l).forEach(([a,d])=>{r=r.replace(new RegExp(a,"g"),d)}),r}function ba(){const o=localStorage.getItem(bt.DECISIONS);return o?JSON.parse(o):[]}function Z0(o){const c=ba(),r={id:o.id||Date.now().toString(),title:o.title,description:o.description,decisionDate:o.decisionDate||new Date().toISOString(),stakeholderIds:o.stakeholderIds||[],linkedEpics:o.linkedEpics||[],linkedIssues:o.linkedIssues||[],status:o.status||"active",reversedBy:o.reversedBy||null,reversedDate:o.reversedDate||null,reversedReason:o.reversedReason||null,tags:o.tags||[],approvedBy:o.approvedBy||[],communicationId:o.communicationId||null,documentUrl:o.documentUrl||"",documentVersion:o.documentVersion||"",documentType:o.documentType||"",signOffDate:o.signOffDate||"",createdAt:o.createdAt||new Date().toISOString()},l=c.findIndex(a=>a.id===r.id);return l>=0?c[l]=r:c.unshift(r),localStorage.setItem(bt.DECISIONS,JSON.stringify(c)),c}function ev(o){const r=ba().filter(l=>l.id!==o);return localStorage.setItem(bt.DECISIONS,JSON.stringify(r)),r}function tv(o,c,r=null){const l=ba(),a=l.find(d=>d.id===o);return a&&(a.status=r?"superseded":"reversed",a.reversedDate=new Date().toISOString(),a.reversedReason=c,a.reversedBy=r,localStorage.setItem(bt.DECISIONS,JSON.stringify(l))),l}function nv(){const o=localStorage.getItem(bt.DOCUMENTS);return o?JSON.parse(o):[]}function iv(o){const c=nv(),r={id:o.id||Date.now().toString(),filename:o.filename,fileType:o.fileType,fileSize:o.fileSize,uploadDate:o.uploadDate||new Date().toISOString(),description:o.description||"",stakeholderIds:o.stakeholderIds||[],linkedEpics:o.linkedEpics||[],linkedIssues:o.linkedIssues||[],tags:o.tags||[],version:o.version||"1.0",status:o.status||"current",supersededBy:null,storageType:o.storageType||"metadata",base64Content:null,externalUrl:null,textContent:o.textContent||"",communicationId:o.communicationId||null,createdAt:o.createdAt||new Date().toISOString()},l=c.findIndex(a=>a.id===r.id);return l>=0?c[l]=r:c.unshift(r),localStorage.setItem(bt.DOCUMENTS,JSON.stringify(c)),c}function sv(o,c){const r=[],l=[...o.to,...o.cc].map(x=>x.email.toLowerCase());c.forEach(x=>{l.includes(x.email.toLowerCase())&&r.push(x.id)});const a=fn()||"default",d={id:Date.now().toString(),projectId:a,type:"email",source:"imported",from:o.from,to:o.to,cc:o.cc,stakeholderIds:r,subject:o.subject,content:o.body,sentAt:o.sentDate?o.sentDate.toISOString():o.date.toISOString(),messageId:o.messageId,tags:o.tags||[],references:o.references||[],linkedEpics:[],linkedIssues:[],attachments:o.attachments||[]},u=ji();u.unshift(d);const g=u.slice(0,100);localStorage.setItem(bt.COMMUNICATION_HISTORY,JSON.stringify(g));const f={id:`email-${d.id}`,filename:`${o.subject||"Untitled Email"}.eml`,fileType:"email/eml",fileSize:o.body?.length||0,uploadDate:new Date().toISOString(),description:`Email from ${o.from.name||o.from.email}`,stakeholderIds:r,linkedEpics:[],linkedIssues:[],tags:o.tags||[],version:"1.0",status:"current",storageType:"metadata",textContent:o.body||"",communicationId:d.id,createdAt:new Date().toISOString()};return iv(f),d}function ov(o){return Object.values(id).find(c=>c.id===o)||id.EMAIL}function lv({stats:o,healthScore:c}){const[r,l]=W.useState(gd()),[a,d]=W.useState(gn()),[u,g]=W.useState(cg()),[f,x]=W.useState(ba()),[m,b]=W.useState("communications"),[v,D]=W.useState(!1),[j,w]=W.useState(!1),[H,U]=W.useState(null),[G,$]=W.useState([]),[B,M]=W.useState(null),[R,L]=W.useState({subject:"",body:""}),[O,y]=W.useState(!1),[C,I]=W.useState(null),[_,P]=W.useState(!1),[X,z]=W.useState(!1),[T,N]=W.useState(""),[K,te]=W.useState("list"),[q,k]=W.useState(null),[A,V]=W.useState(!1),[Q,ae]=W.useState(""),[re,ue]=W.useState(""),[fe,xe]=W.useState(""),[ze,ge]=W.useState("all"),[Be,Je]=W.useState(new Date().getFullYear()),[Ae,Ye]=W.useState([1,2,3,4]),[pe,Qe]=W.useState(!1),[De,jt]=W.useState(null),[Z,we]=W.useState({type:"email",title:"",description:"",date:new Date().toISOString().slice(0,16),documentLink:"",from:"",to:"",cc:"",subject:"",body:"",attendees:"",meetingNotes:"",approvers:"",approvedBy:"",signOffDate:"",requirementsSummary:"",itoTicketNumber:"",itoTicketLink:"",severity:"medium",affectedSystems:"",incidentStatus:"open",resolution:"",resolutionDate:"",timeImpact:"",originalDate:"",newDate:"",rootCause:"",linkedIssues:"",linkedEpics:"",supersedes:""}),[At,pn]=W.useState({name:"",role:"",email:"",frequency:"weekly",interests:[]}),[Ue,Jt]=W.useState({title:"",description:"",decisionDate:new Date().toISOString().split("T")[0],stakeholderIds:[],linkedEpics:[],linkedIssues:[],tags:[],approvedBy:[],documentUrl:"",documentVersion:"",documentType:"",signOffDate:""}),Vo=()=>{const E=G0(At);l(E),pn({name:"",role:"",email:"",frequency:"weekly",interests:[]}),D(!1)},qo=E=>{if(confirm("Remove this stakeholder?")){const me=V0(E);l(me)}},Xi=E=>{U(E),L({subject:E.subject,body:E.body}),M(null),w(!0)},Ca=()=>{if(G.length===0){alert("Please select at least one stakeholder");return}const E=Kt();let me="all";if(G.length===1){const he=r.find(je=>je.id===G[0]);he&&he.name&&(me=he.name.split(" ")[0])}const Ce=qc(H,{stakeholderName:me,projectName:E.projectId||"Project",healthScore:c,stats:o,statusSummary:"Project is progressing as planned.",senderName:"Project Manager"});Vc({stakeholderIds:G,subject:H.subject,content:Ce,type:H.id}),d(gn()),w(!1),$([]),alert("Communication logged!")},Yo=E=>{if(confirm("Delete this communication from history?")){const me=q0(E);d(me)}},Ea=E=>{we({type:E.type||"email",title:E.title||"",description:E.description||"",date:E.sentAt?new Date(E.sentAt).toISOString().slice(0,16):new Date().toISOString().slice(0,16),documentLink:E.documentLink||"",from:E.from?typeof E.from=="string"?E.from:E.from.email:"",to:E.to?Array.isArray(E.to)?E.to.map(me=>me.email||me).join(", "):E.to:"",cc:E.cc?Array.isArray(E.cc)?E.cc.map(me=>me.email||me).join(", "):E.cc:"",subject:E.subject||"",body:E.content||"",attendees:E.attendees||"",meetingNotes:E.meetingNotes||"",approvers:E.approvers||"",approvedBy:E.approvedBy?Array.isArray(E.approvedBy)?E.approvedBy.join(", "):E.approvedBy:"",signOffDate:E.signOffDate||"",requirementsSummary:E.requirementsSummary||"",itoTicketNumber:E.itoTicketNumber||"",itoTicketLink:E.itoTicketLink||"",severity:E.severity||"medium",affectedSystems:E.affectedSystems||"",incidentStatus:E.incidentStatus||"open",resolution:E.resolution||"",resolutionDate:E.resolutionDate||"",timeImpact:E.timeImpact||"",originalDate:E.originalDate||"",newDate:E.newDate||"",rootCause:E.rootCause||"",linkedIssues:E.linkedIssues?Array.isArray(E.linkedIssues)?E.linkedIssues.join(", "):E.linkedIssues:"",linkedEpics:E.linkedEpics?Array.isArray(E.linkedEpics)?E.linkedEpics.join(", "):E.linkedEpics:"",supersedes:E.supersedes||""}),E.stakeholderIds&&Array.isArray(E.stakeholderIds)&&$(E.stakeholderIds),jt(E.id),w(!0)},wa=E=>{M(E.id),L({subject:E.subject,body:E.body})},Si=E=>{const me=u.find(he=>he.id===E),Ce=J0({...me,subject:R.subject,body:R.body});g(Ce),M(null)},Tt=()=>{if(G.length===0){alert("Please select at least one stakeholder");return}const E=Kt();let me="all";if(G.length===1){const ve=r.find(st=>st.id===G[0]);ve&&ve.name&&(me=ve.name.split(" ")[0])}const Ce=qc({...H,subject:R.subject,body:R.body},{stakeholderName:me,projectName:E.projectId||"Project",healthScore:c,stats:o,statusSummary:"Project is progressing as planned.",senderName:"Project Manager"}),he=r.filter(ve=>G.includes(ve.id)).map(ve=>ve.email).join(","),je=encodeURIComponent(R.subject),Ie=encodeURIComponent(Ce),ke=`mailto:${he}?subject=${je}&body=${Ie}`;window.location.href=ke,Vc({stakeholderIds:G,subject:R.subject,content:Ce,type:H.id}),d(gn()),w(!1),$([])},mn=()=>{sv(C,r),d(gn()),y(!1),I(null),alert("Email imported successfully!")},Ft=()=>{const E=je=>je?je.split(/[;,]/).map(Ie=>{const ke=Ie.trim(),ve=ke.match(/(.*?)<(.+?)>/);return ve?{name:ve[1].trim(),email:ve[2].trim()}:{name:"",email:ke}}).filter(Ie=>Ie.email):[],me=Z.linkedIssues?Z.linkedIssues.split(",").map(je=>je.trim()).filter(je=>je):[],Ce=Z.linkedEpics?Z.linkedEpics.split(",").map(je=>je.trim()).filter(je=>je):[],he={type:Z.type||"email",sentAt:new Date(Z.date).toISOString(),attachments:Z.documentLink?[{url:Z.documentLink,type:"link"}]:[],timeImpact:Z.timeImpact||"",originalDate:Z.originalDate||null,newDate:Z.newDate||null,rootCause:Z.rootCause||"",linkedIssues:me,linkedEpics:Ce,supersedes:Z.supersedes||null,tags:[],comments:[]};if(Z.type==="email"||Z.type==="status_update"){const je=E(Z.from)[0]||{name:"",email:Z.from},Ie=E(Z.to),ke=E(Z.cc),ve=[],st=[...Ie,...ke].map(Mt=>Mt.email.toLowerCase());r.forEach(Mt=>{st.includes(Mt.email.toLowerCase())&&ve.push(Mt.id)}),he.subject=Z.subject,he.content=Z.body,he.from=`${je.name} <${je.email}>`.trim(),he.stakeholderIds=ve}else if(Z.type==="meeting_notes")he.subject=Z.title,he.content=`Attendees: ${Z.attendees}

${Z.meetingNotes}`,he.stakeholderIds=[],he.title=Z.title,he.attendees=Z.attendees,he.meetingNotes=Z.meetingNotes;else if(Z.type==="requirements_signoff")he.subject=Z.title,he.content=`Approvers: ${Z.approvers}

${Z.requirementsSummary}`,he.stakeholderIds=[],he.title=Z.title,he.approvers=Z.approvers,he.approvedBy=Z.approvedBy?Z.approvedBy.split(",").map(je=>je.trim()).filter(Boolean):[],he.signOffDate=Z.signOffDate,he.requirementsSummary=Z.requirementsSummary;else if(Z.type==="scope_change")he.subject=Z.title,he.content=Z.approvedBy?`Approved By: ${Z.approvedBy}

${Z.description}`:Z.description,he.stakeholderIds=[],he.title=Z.title,he.description=Z.description,he.approvedBy=Z.approvedBy?Z.approvedBy.split(",").map(je=>je.trim()).filter(Boolean):[];else if(Z.type==="prioritization")he.subject=Z.title,he.content=Z.approvedBy?`Decided By: ${Z.approvedBy}

${Z.description}`:Z.description,he.stakeholderIds=[],he.title=Z.title,he.description=Z.description,he.approvedBy=Z.approvedBy?Z.approvedBy.split(",").map(je=>je.trim()).filter(Boolean):[];else if(Z.type==="incident"){he.subject=Z.title;let je=`Severity: ${Z.severity}
`;if(je+=`Status: ${Z.incidentStatus}
`,Z.itoTicketNumber&&(je+=`ITO Ticket: ${Z.itoTicketNumber}
`),Z.itoTicketLink&&(je+=`ITO Link: ${Z.itoTicketLink}
`),Z.affectedSystems&&(je+=`Affected Systems: ${Z.affectedSystems}
`),Z.resolutionDate){const Ie=new Date(Z.resolutionDate),ke=new Date(Z.date),ve=Ie-ke,st=Math.ceil(ve/(1e3*60*60*24));je+=`Resolution Date: ${Ie.toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}
`,je+=`Time to Resolution: ${st} day${st!==1?"s":""}
`}je+=`
Description:
${Z.description}`,Z.resolution&&(je+=`

Resolution:
${Z.resolution}`),he.content=je,he.stakeholderIds=[],he.itoTicketNumber=Z.itoTicketNumber,he.itoTicketLink=Z.itoTicketLink,he.severity=Z.severity,he.affectedSystems=Z.affectedSystems,he.incidentStatus=Z.incidentStatus,he.resolution=Z.resolution,he.resolutionDate=Z.resolutionDate,he.description=Z.description}else he.subject=Z.title,he.content=Z.description,he.stakeholderIds=[];if(De){const je=Y0(De,he);d(je),jt(null),alert("Communication updated successfully!")}else Vc(he),d(gn()),alert("Communication added successfully!");we({type:"email",title:"",description:"",date:new Date().toISOString().slice(0,16),documentLink:"",from:"",to:"",cc:"",subject:"",body:"",attendees:"",meetingNotes:"",approvers:"",approvedBy:"",signOffDate:"",requirementsSummary:"",itoTicketNumber:"",itoTicketLink:"",severity:"medium",affectedSystems:"",incidentStatus:"open",resolution:"",resolutionDate:"",timeImpact:"",originalDate:"",newDate:"",rootCause:"",linkedIssues:"",linkedEpics:"",supersedes:""})},za=(E,me)=>{if(!(me.ctrlKey||me.metaKey))Ye([E]);else if(Ae.includes(E)){if(Ae.length===1)return;E===Math.min(...Ae)?Ye(Ae.filter(he=>he!==E)):E===Math.max(...Ae)&&Ye(Ae.filter(he=>he!==E))}else{const he=[...Ae,E].sort((ve,st)=>ve-st),je=Math.min(...he),Ie=Math.max(...he),ke=[];for(let ve=je;ve<=Ie;ve++)ke.push(ve);Ye(ke)}},ka=()=>{Ye([1,2,3,4])},Aa=()=>{const E=Z0(Ue);x(E),Jt({title:"",description:"",decisionDate:new Date().toISOString().split("T")[0],stakeholderIds:[],linkedEpics:[],linkedIssues:[],tags:[],approvedBy:[],documentUrl:"",documentVersion:"",documentType:"",signOffDate:""}),P(!1)},Ki=E=>{if(confirm("Delete this decision?")){const me=ev(E);x(me)}},Ji=E=>{const me=prompt("Reason for reversing this decision:");if(me){const Ce=tv(E,me);x(Ce)}},Zi=E=>{if(Q.trim()&&(Q0(E,Q.trim()),d(gn()),ae(""),q&&q.data.id===E)){const Ce=gn().find(he=>he.id===E);Ce&&k({...q,data:Ce})}},yn=E=>{if(re.trim()&&(X0(E,[re.trim()]),d(gn()),ue(""),q&&q.data.id===E)){const Ce=gn().find(he=>he.id===E);Ce&&k({...q,data:Ce})}},es=(E,me)=>{if(K0(E,me),d(gn()),setDocuments(getDocuments()),q&&q.data.id===E){const he=gn().find(je=>je.id===E);he&&k({...q,data:he})}},Di=()=>{const E=Math.min(...Ae),me=Math.max(...Ae),Ce=new Date(Be,(E-1)*3,1),he=new Date(Be,me*3,0,23,59,59),je=a.filter(ve=>{const st=new Date(ve.sentAt);return st>=Ce&&st<=he}),Ie=f.filter(ve=>{const st=new Date(ve.decisionDate);return st>=Ce&&st<=he});return{total:je.length+Ie.length,communications:je.length,decisions:Ie.length,incidents:je.filter(ve=>ve.type==="incident").length,signoffs:je.filter(ve=>ve.type==="requirements_signoff").length,scopeChanges:je.filter(ve=>ve.type==="scope_change").length,meetings:je.filter(ve=>ve.type==="meeting_notes").length}},Vs=()=>{const E=[];a.forEach(ke=>{let ve="Unknown";ke.from&&(typeof ke.from=="object"?ve=ke.from.name||ke.from.email||"Unknown":ve=ke.from);const st=ov(ke.type);E.push({type:"communication",commType:st,date:new Date(ke.sentAt),title:ke.subject,description:ke.content?.substring(0,150),creator:ve,data:ke})}),f.forEach(ke=>{E.push({type:"decision",date:new Date(ke.decisionDate),title:ke.title,description:ke.description?.substring(0,150),data:ke})});const me=Math.min(...Ae),Ce=Math.max(...Ae),he=new Date(Be,(me-1)*3,1),je=new Date(Be,Ce*3,0,23,59,59);let Ie=E.filter(ke=>{const ve=ke.date;return ve>=he&&ve<=je});if(ze!=="all"&&(Ie=Ie.filter(ke=>ze==="decision"?ke.type==="decision":ke.type==="communication"&&ke.data.type===ze)),fe){const ke=fe.toLowerCase();Ie=Ie.filter(ve=>!!((ve.data.tags||[]).some(Mt=>Mt.toLowerCase().includes(ke))||ve.title&&ve.title.toLowerCase().includes(ke)||ve.data.content&&ve.data.content.toLowerCase().includes(ke)||ve.data.description&&ve.data.description.toLowerCase().includes(ke)||ve.data.body&&ve.data.body.toLowerCase().includes(ke)||ve.creator&&ve.creator.toLowerCase().includes(ke)||ve.data.filename&&ve.data.filename.toLowerCase().includes(ke)))}return Ie.sort((ke,ve)=>ve.date-ke.date)};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Communication Hub"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Track communications, decisions, and stakeholder engagement"})]}),e.jsx("div",{style:{borderBottom:"2px solid #E5E7EB",marginBottom:"30px"},children:e.jsx("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap"},children:[{id:"communications",label:"Communications"},{id:"timeline",label:"Timeline"},{id:"decisions",label:"Decisions"},{id:"stakeholders",label:"Stakeholders"},{id:"templates",label:"Templates"}].map(E=>e.jsx("button",{onClick:()=>b(E.id),style:{padding:"12px 0",background:"none",border:"none",borderBottom:m===E.id?"2px solid #E60000":"2px solid transparent",fontSize:"14px",fontWeight:"600",color:m===E.id?"#E60000":"#6B7280",cursor:"pointer"},children:E.label},E.id))})}),m==="stakeholders"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Stakeholder Registry"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>D(!v),children:v?"Cancel":"+ Add Stakeholder"})]}),v&&e.jsxs("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx("input",{type:"text",placeholder:"Name *",value:At.name,onChange:E=>pn({...At,name:E.target.value}),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}}),e.jsx("input",{type:"text",placeholder:"Role *",value:At.role,onChange:E=>pn({...At,role:E.target.value}),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}}),e.jsx("input",{type:"email",placeholder:"Email *",value:At.email,onChange:E=>pn({...At,email:E.target.value}),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}}),e.jsxs("select",{value:At.frequency,onChange:E=>pn({...At,frequency:E.target.value}),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"},children:[e.jsx("option",{value:"daily",children:"Daily Updates"}),e.jsx("option",{value:"weekly",children:"Weekly Updates"}),e.jsx("option",{value:"biweekly",children:"Bi-weekly Updates"}),e.jsx("option",{value:"monthly",children:"Monthly Updates"})]})]}),e.jsx("button",{className:"btn btn-primary",onClick:Vo,style:{marginTop:"16px"},children:"Add Stakeholder"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:r.map(E=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:E.name}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280"},children:E.role})]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>qo(E.id),style:{padding:"4px 8px",fontSize:"12px"},children:"Remove"})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"8px"},children:[" ",E.email]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:["Frequency: ",E.frequency]})]},E.id))}),r.length===0&&!v&&e.jsxs("div",{className:"card text-center",style:{padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{children:"No Stakeholders Yet"}),e.jsx("p",{className:"text-muted",children:"Add stakeholders to track communications"})]})]}),m==="templates"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:"Communication Templates"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:u.map(E=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:E.name}),B===E.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Subject:"}),e.jsx("input",{type:"text",value:R.subject,onChange:me=>L({...R,subject:me.target.value}),style:{width:"100%",padding:"6px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Body:"}),e.jsx("textarea",{value:R.body,onChange:me=>L({...R,body:me.target.value}),rows:10,style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>Si(E.id),style:{flex:1},children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>M(null),style:{flex:1},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"12px"},children:["Subject: ",E.subject]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",background:"#F3F4F6",padding:"12px",borderRadius:"6px",fontFamily:"monospace",maxHeight:"120px",overflow:"hidden",marginBottom:"12px"},children:[E.body.substring(0,150),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>Xi(E),style:{flex:1},children:"Use Template"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>wa(E),style:{flex:1},children:"Edit"})]})]})]},E.id))})]}),m==="communications"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Log Communication"}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280",marginTop:"8px"},children:"Track emails, meetings, sign-offs, scope changes, and other important communications"})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsxs("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB"},children:[e.jsxs("div",{style:{marginBottom:"24px",padding:"14px",background:"#F9FAFB",borderRadius:"6px",border:"1px solid #E5E7EB"},children:[e.jsx("label",{style:{fontSize:"13px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"8px"},children:"Step 1: Communication Type"}),e.jsx("select",{value:Z.type,onChange:E=>we({...Z,type:E.target.value}),style:{width:"100%",padding:"10px 14px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontWeight:"500",background:"white",cursor:"pointer"},children:Object.values(id).map(E=>e.jsx("option",{value:E.id,children:E.label},E.id))})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"700",color:"#374151",display:"block",marginBottom:"12px"},children:"Step 2: Communication Details"}),Z.type==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"From:"}),e.jsx("input",{type:"text",placeholder:"John Doe <john.doe@company.com>",value:Z.from,onChange:E=>we({...Z,from:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["To: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(semicolon-separated)"})]}),e.jsx("input",{type:"text",placeholder:"jane@company.com; bob@company.com",value:Z.to,onChange:E=>we({...Z,to:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Cc: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(optional)"})]}),e.jsx("input",{type:"text",placeholder:"manager@company.com",value:Z.cc,onChange:E=>we({...Z,cc:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Subject:"}),e.jsx("input",{type:"text",placeholder:"Project Status Update",value:Z.subject,onChange:E=>we({...Z,subject:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Date:"}),e.jsx("input",{type:"datetime-local",value:Z.date,onChange:E=>we({...Z,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Email Body:"}),e.jsx("textarea",{placeholder:"Paste email content here...",value:Z.body,onChange:E=>we({...Z,body:E.target.value}),rows:6,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px",fontFamily:"monospace"}})]})]}),Z.type==="meeting_notes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Meeting Title:"}),e.jsx("input",{type:"text",placeholder:"Weekly Project Sync",value:Z.title,onChange:E=>we({...Z,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Meeting Date:"}),e.jsx("input",{type:"datetime-local",value:Z.date,onChange:E=>we({...Z,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Attendees: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(comma-separated)"})]}),e.jsx("input",{type:"text",placeholder:"John Doe, Jane Smith, Bob Wilson",value:Z.attendees,onChange:E=>we({...Z,attendees:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Meeting Notes:"}),e.jsx("textarea",{placeholder:"Key discussion points, decisions made, action items...",value:Z.meetingNotes,onChange:E=>we({...Z,meetingNotes:E.target.value}),rows:6,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),Z.type==="requirements_signoff"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Title:"}),e.jsx("input",{type:"text",placeholder:"Q4 Requirements Sign-Off",value:Z.title,onChange:E=>we({...Z,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Sign-Off Date:"}),e.jsx("input",{type:"datetime-local",value:Z.signOffDate||Z.date,onChange:E=>we({...Z,signOffDate:E.target.value,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Approvers: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(comma-separated)"})]}),e.jsx("input",{type:"text",placeholder:"Jane Smith, Product Owner Bob",value:Z.approvers,onChange:E=>we({...Z,approvers:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Requirements Summary:"}),e.jsx("textarea",{placeholder:"Summary of what was approved...",value:Z.requirementsSummary,onChange:E=>we({...Z,requirementsSummary:E.target.value}),rows:4,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),Z.type==="scope_change"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Title:"}),e.jsx("input",{type:"text",placeholder:"Brief title for this change",value:Z.title,onChange:E=>we({...Z,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Date:"}),e.jsx("input",{type:"datetime-local",value:Z.date,onChange:E=>we({...Z,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Approved By: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(comma-separated, optional)"})]}),e.jsx("input",{type:"text",placeholder:"Product Owner, Tech Lead",value:Z.approvedBy,onChange:E=>we({...Z,approvedBy:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Description:"}),e.jsx("textarea",{placeholder:"Provide details about this change...",value:Z.description,onChange:E=>we({...Z,description:E.target.value}),rows:5,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),Z.type==="incident"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Incident Title:"}),e.jsx("input",{type:"text",placeholder:"Brief description of the incident",value:Z.title,onChange:E=>we({...Z,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Date/Time:"}),e.jsx("input",{type:"datetime-local",value:Z.date,onChange:E=>we({...Z,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"ITO Ticket Number:"}),e.jsx("input",{type:"text",placeholder:"INC12345",value:Z.itoTicketNumber,onChange:E=>we({...Z,itoTicketNumber:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Severity:"}),e.jsxs("select",{value:Z.severity,onChange:E=>we({...Z,severity:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"},children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"ITO Ticket Link:"}),e.jsx("input",{type:"url",placeholder:"https://...",value:Z.itoTicketLink,onChange:E=>we({...Z,itoTicketLink:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Resolution Date: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(optional)"})]}),e.jsx("input",{type:"datetime-local",value:Z.resolutionDate||"",onChange:E=>we({...Z,resolutionDate:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Status:"}),e.jsxs("select",{value:Z.incidentStatus,onChange:E=>we({...Z,incidentStatus:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"},children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"investigating",children:"Investigating"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Affected Systems: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(comma-separated)"})]}),e.jsx("input",{type:"text",placeholder:"System A, System B",value:Z.affectedSystems,onChange:E=>we({...Z,affectedSystems:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Incident Description:"}),e.jsx("textarea",{placeholder:"Detailed description of the incident...",value:Z.description,onChange:E=>we({...Z,description:E.target.value}),rows:3,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Resolution: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(if resolved)"})]}),e.jsx("textarea",{placeholder:"How was the incident resolved...",value:Z.resolution,onChange:E=>we({...Z,resolution:E.target.value}),rows:2,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),Z.type==="prioritization"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Title:"}),e.jsx("input",{type:"text",placeholder:"Brief title for this prioritization change",value:Z.title,onChange:E=>we({...Z,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Date:"}),e.jsx("input",{type:"datetime-local",value:Z.date,onChange:E=>we({...Z,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Decided By: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(comma-separated, optional)"})]}),e.jsx("input",{type:"text",placeholder:"Product Owner, Steering Committee",value:Z.approvedBy,onChange:E=>we({...Z,approvedBy:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Description:"}),e.jsx("textarea",{placeholder:"Describe the prioritization change and rationale...",value:Z.description,onChange:E=>we({...Z,description:E.target.value}),rows:5,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),!["email","requirements_signoff","scope_change","incident","prioritization"].includes(Z.type)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Title:"}),e.jsx("input",{type:"text",placeholder:"Brief title for this communication",value:Z.title,onChange:E=>we({...Z,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Date:"}),e.jsx("input",{type:"datetime-local",value:Z.date,onChange:E=>we({...Z,date:E.target.value}),style:{maxWidth:"300px",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Description:"}),e.jsx("textarea",{placeholder:"Provide details about this communication...",value:Z.description,onChange:E=>we({...Z,description:E.target.value}),rows:5,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Document Link: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(requirements, Fitnesse, OneDrive, optional)"})]}),e.jsx("input",{type:"url",placeholder:"https://...",value:Z.documentLink,onChange:E=>we({...Z,documentLink:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("button",{onClick:()=>Qe(!pe),style:{width:"100%",padding:"12px 16px",background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"13px",fontWeight:"700",color:"#374151",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left"},children:[e.jsx("span",{children:"Step 3 (Optional): Impact Tracking & Issue Linking"}),e.jsx("span",{style:{fontSize:"14px"},children:pe?"":""})]}),pe&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#FEF3C7",borderRadius:"6px",border:"1px solid #FDE68A"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Time Impact: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:'(e.g., "+2 days", "1 week delay")'})]}),e.jsx("input",{type:"text",placeholder:"+3 days, 2 weeks delay, etc.",value:Z.timeImpact,onChange:E=>we({...Z,timeImpact:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"Original Date:"}),e.jsx("input",{type:"date",value:Z.originalDate,onChange:E=>we({...Z,originalDate:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:"New Date:"}),e.jsx("input",{type:"date",value:Z.newDate,onChange:E=>we({...Z,newDate:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Root Cause: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(why did this happen?)"})]}),e.jsx("textarea",{placeholder:"e.g., PROD data showed unexpected values, requirement was ambiguous...",value:Z.rootCause,onChange:E=>we({...Z,rootCause:E.target.value}),rows:2,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Linked Issues: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(IDs)"})]}),e.jsx("input",{type:"text",placeholder:"123, 456, 789",value:Z.linkedIssues,onChange:E=>we({...Z,linkedIssues:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Linked Epics: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(IDs)"})]}),e.jsx("input",{type:"text",placeholder:"&10, &20",value:Z.linkedEpics,onChange:E=>we({...Z,linkedEpics:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]}),e.jsxs("div",{style:{marginBottom:"0"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",display:"block",marginBottom:"4px"},children:["Supersedes: ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(ID of previous communication)"})]}),e.jsx("input",{type:"text",placeholder:"Communication ID",value:Z.supersedes,onChange:E=>we({...Z,supersedes:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px"}})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn btn-primary",onClick:Ft,style:{flex:1},children:De?"Update Communication":"Add Communication"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{we({type:"email",title:"",description:"",date:new Date().toISOString().slice(0,16),documentLink:"",from:"",to:"",cc:"",subject:"",body:"",attendees:"",meetingNotes:"",approvers:"",approvedBy:"",signOffDate:"",requirementsSummary:"",itoTicketNumber:"",itoTicketLink:"",severity:"medium",affectedSystems:"",incidentStatus:"open",resolution:"",resolutionDate:"",timeImpact:"",originalDate:"",newDate:"",rootCause:"",linkedIssues:"",linkedEpics:"",supersedes:""}),jt(null)},style:{flex:1},children:De?"Cancel Edit":"Reset"})]})]})}),a.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{children:"No Communications Yet"}),e.jsx("p",{className:"text-muted",children:"Start using templates or import emails to track communications"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:a.slice(0,20).map(E=>e.jsxs("div",{className:"card",style:{background:"#F9FAFB"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"4px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:E.subject}),E.source==="imported"&&e.jsx("span",{style:{fontSize:"10px",background:"#DBEAFE",color:"#1E40AF",padding:"2px 6px",borderRadius:"4px"},children:"IMPORTED"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:new Date(E.sentAt).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),E.tags&&E.tags.length>0&&e.jsx("div",{style:{display:"flex",gap:"4px",marginTop:"4px"},children:E.tags.map(me=>e.jsx("span",{style:{fontSize:"10px",background:"#FEF3C7",color:"#92400E",padding:"2px 6px",borderRadius:"4px"},children:me},me))})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>Ea(E),style:{padding:"4px 8px",background:"#DBEAFE",color:"#1E40AF",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"Edit"}),e.jsx("button",{onClick:()=>Yo(E.id),style:{padding:"4px 8px",background:"#FEE2E2",color:"#DC2626",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",maxHeight:"100px",overflow:"hidden"},children:[E.content.substring(0,200),"..."]})]},E.id))})]}),m==="decisions"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Decision Log"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>P(!_),children:_?"Cancel":"+ Add Decision"})]}),_&&e.jsxs("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB"},children:[e.jsx("div",{style:{marginBottom:"12px"},children:e.jsx("input",{type:"text",placeholder:"Decision Title *",value:Ue.title,onChange:E=>Jt({...Ue,title:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}})}),e.jsx("div",{style:{marginBottom:"12px"},children:e.jsx("textarea",{placeholder:"Description *",value:Ue.description,onChange:E=>Jt({...Ue,description:E.target.value}),rows:4,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}})}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Decision Date:"}),e.jsx("input",{type:"date",value:Ue.decisionDate,onChange:E=>Jt({...Ue,decisionDate:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}})]}),e.jsxs("div",{style:{marginBottom:"12px",padding:"12px",background:"#EFF6FF",borderRadius:"6px",border:"1px solid #DBEAFE"},children:[e.jsx("h4",{style:{fontSize:"13px",fontWeight:"600",color:"#1E40AF",marginBottom:"12px"},children:" Requirements Sign-Off (Optional)"}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Document Type:"}),e.jsxs("select",{value:Ue.documentType,onChange:E=>Jt({...Ue,documentType:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"},children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"BRD",children:"BRD (Business Requirements Document)"}),e.jsx("option",{value:"Requirements",children:"Requirements Specification"}),e.jsx("option",{value:"Technical Spec",children:"Technical Specification"}),e.jsx("option",{value:"Design Doc",children:"Design Document"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Document URL (GitLab, SharePoint, etc.):"}),e.jsx("input",{type:"url",placeholder:"https://gitlab.com/project/docs/brd.pdf",value:Ue.documentUrl,onChange:E=>Jt({...Ue,documentUrl:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Document Version:"}),e.jsx("input",{type:"text",placeholder:"v1.0, v2.1, etc.",value:Ue.documentVersion,onChange:E=>Jt({...Ue,documentVersion:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}})]}),e.jsxs("div",{style:{marginBottom:"0"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Sign-Off Date:"}),e.jsx("input",{type:"date",value:Ue.signOffDate,onChange:E=>Jt({...Ue,signOffDate:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px"}})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Stakeholders Involved:"}),r.map(E=>e.jsxs("label",{style:{display:"block",marginBottom:"4px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:Ue.stakeholderIds.includes(E.id),onChange:me=>{me.target.checked?Jt({...Ue,stakeholderIds:[...Ue.stakeholderIds,E.id]}):Jt({...Ue,stakeholderIds:Ue.stakeholderIds.filter(Ce=>Ce!==E.id)})},style:{marginRight:"8px"}}),e.jsx("span",{style:{fontSize:"13px"},children:E.name})]},E.id))]}),e.jsx("button",{className:"btn btn-primary",onClick:Aa,children:"Add Decision"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:f.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{children:"No Decisions Yet"}),e.jsx("p",{className:"text-muted",children:"Track important project decisions and sign-offs"})]}):f.map(E=>e.jsx("div",{className:"card",style:{background:E.status!=="active"?"#FEF2F2":"#F9FAFB"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"4px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:E.title}),e.jsx("span",{style:{fontSize:"10px",background:E.status==="active"?"#D1FAE5":"#FEE2E2",color:E.status==="active"?"#065F46":"#991B1B",padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:E.status})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"8px"},children:new Date(E.decisionDate).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{style:{fontSize:"13px",color:"#374151",marginBottom:"8px"},children:E.description}),E.documentType&&e.jsxs("div",{style:{fontSize:"12px",marginTop:"8px",padding:"10px",background:"#EFF6FF",borderRadius:"6px",border:"1px solid #DBEAFE"},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1E40AF",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Requirements Sign-Off"})]}),e.jsxs("div",{style:{color:"#374151"},children:[e.jsx("strong",{children:"Type:"})," ",E.documentType]}),E.documentVersion&&e.jsxs("div",{style:{color:"#374151"},children:[e.jsx("strong",{children:"Version:"})," ",E.documentVersion]}),E.signOffDate&&e.jsxs("div",{style:{color:"#374151"},children:[e.jsx("strong",{children:"Signed Off:"})," ",new Date(E.signOffDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),E.documentUrl&&e.jsx("div",{style:{marginTop:"6px"},children:e.jsxs("a",{href:E.documentUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"none",fontSize:"12px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"View Document"})]})})]}),E.status!=="active"&&E.reversedReason&&e.jsxs("div",{style:{fontSize:"12px",color:"#DC2626",marginTop:"8px",padding:"8px",background:"#FEE2E2",borderRadius:"4px"},children:[e.jsx("strong",{children:"Reversed:"})," ",E.reversedReason]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[E.status==="active"&&e.jsx("button",{onClick:()=>Ji(E.id),style:{padding:"4px 8px",background:"#FEF3C7",color:"#92400E",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"Reverse"}),e.jsx("button",{onClick:()=>Ki(E.id),style:{padding:"4px 8px",background:"#FEE2E2",color:"#DC2626",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]})},E.id))})]}),m==="timeline"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Timeline"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>te("list"),style:{padding:"8px 16px",background:K==="list"?"#3B82F6":"white",color:K==="list"?"white":"#374151",border:K==="list"?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:K==="list"?"600":"500",cursor:"pointer",transition:"all 0.15s"},children:"List View"}),e.jsx("button",{onClick:()=>te("gantt"),style:{padding:"8px 16px",background:K==="gantt"?"#3B82F6":"white",color:K==="gantt"?"white":"#374151",border:K==="gantt"?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:K==="gantt"?"600":"500",cursor:"pointer",transition:"all 0.15s"},children:"Gantt View"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flex:1,minWidth:"300px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Type:"}),e.jsxs("select",{value:ze,onChange:E=>ge(E.target.value),style:{padding:"8px 12px",fontSize:"13px",border:"1px solid #D1D5DB",borderRadius:"6px",fontWeight:"500",cursor:"pointer",minWidth:"180px"},children:[e.jsx("option",{value:"all",children:"All Activity"}),e.jsx("option",{value:"decision",children:"Decisions"}),e.jsxs("optgroup",{label:"Communications",children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"incident",children:"Incident"}),e.jsx("option",{value:"requirements_signoff",children:"Requirements Sign-Off"}),e.jsx("option",{value:"scope_change",children:"Scope Change"}),e.jsx("option",{value:"prioritization",children:"Prioritization"}),e.jsx("option",{value:"meeting_notes",children:"Meeting Notes"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flex:1},children:[e.jsx("input",{type:"text",placeholder:"Search by tags, subject, content, creator...",value:fe,onChange:E=>xe(E.target.value),style:{flex:1,maxWidth:"400px",padding:"8px 12px",fontSize:"13px",border:"1px solid #D1D5DB",borderRadius:"6px"}}),fe&&e.jsx("button",{onClick:()=>xe(""),style:{padding:"8px 12px",fontSize:"13px",background:"#F3F4F6",border:"1px solid #D1D5DB",borderRadius:"6px",cursor:"pointer"},children:"Clear"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Year:"}),e.jsx("select",{value:Be,onChange:E=>Je(parseInt(E.target.value)),style:{padding:"6px 12px",fontSize:"13px",border:"1px solid #D1D5DB",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:[2023,2024,2025,2026].map(E=>e.jsx("option",{value:E,children:E},E))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Quarters:"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[[1,2,3,4].map(E=>{const me=Ae.includes(E);return e.jsxs("button",{onClick:Ce=>za(E,Ce),title:me?"Click to deselect, Ctrl+Click for range":"Click to select, Ctrl+Click for range",style:{padding:"6px 12px",background:me?"#3B82F6":"white",color:me?"white":"#374151",border:me?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px",fontWeight:me?"600":"500",cursor:"pointer",transition:"all 0.15s"},children:["Q",E]},E)}),e.jsx("button",{onClick:ka,style:{padding:"6px 12px",background:Ae.length===4?"#10B981":"white",color:Ae.length===4?"white":"#374151",border:Ae.length===4?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px",fontWeight:Ae.length===4?"600":"500",cursor:"pointer",transition:"all 0.15s"},children:"Full Year"})]})]})]})]}),(()=>{const E=Di();return e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Total"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151"},children:E.total})]}),e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Communications"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151"},children:E.communications})]}),e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Decisions"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151"},children:E.decisions})]}),e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Incidents"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#DC2626"},children:E.incidents})]}),e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Sign-Offs"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151"},children:E.signoffs})]}),e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Scope Changes"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151"},children:E.scopeChanges})]}),e.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",minWidth:"100px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#9CA3AF",fontWeight:"500",marginBottom:"2px"},children:"Meetings"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151"},children:E.meetings})]})]})})()]}),Vs().length===0?e.jsxs("div",{className:"card text-center",style:{padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{children:"No Activity Yet"}),e.jsx("p",{className:"text-muted",children:"Timeline will show all communications and decisions"})]}):K==="list"?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"20px",top:"0",bottom:"0",width:"2px",background:"#E5E7EB"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Vs().map((E,me)=>{const Ce=E.type==="communication"?E.commType?E.commType.color:"#3B82F6":E.type==="decision"?"#10B981":"#F59E0B",je=(Ie=>({"#10B981":"#D1FAE5","#F59E0B":"#FEF3C7","#EF4444":"#FEE2E2","#DC2626":"#FEE2E2","#8B5CF6":"#EDE9FE","#F97316":"#FFEDD5","#3B82F6":"#DBEAFE","#6B7280":"#F3F4F6"})[Ie]||"#F3F4F6")(Ce);return e.jsxs("div",{style:{position:"relative",paddingLeft:"50px"},children:[e.jsx("div",{style:{position:"absolute",left:"12px",top:"8px",width:"18px",height:"18px",borderRadius:"50%",background:Ce,border:"3px solid white",boxShadow:"0 0 0 2px #E5E7EB"}}),e.jsxs("div",{className:"card",style:{background:"#F9FAFB",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{k(E),V(!0)},onMouseEnter:Ie=>Ie.currentTarget.style.background="#EEF2FF",onMouseLeave:Ie=>Ie.currentTarget.style.background="#F9FAFB",children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"4px",flexWrap:"wrap"},children:[E.type==="communication"&&E.commType&&e.jsxs("span",{style:{fontSize:"10px",background:je,color:Ce,padding:"2px 6px",borderRadius:"4px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"3px"},children:[e.jsx("span",{children:E.commType.icon}),e.jsx("span",{children:E.commType.label.toUpperCase()})]}),E.type==="decision"&&e.jsx("span",{style:{fontSize:"10px",background:je,color:Ce,padding:"2px 6px",borderRadius:"4px",textTransform:"uppercase"},children:"DECISION"}),E.type==="decision"&&E.data.documentType&&e.jsxs("span",{style:{fontSize:"10px",background:"#EFF6FF",color:"#1E40AF",padding:"2px 6px",borderRadius:"4px",fontWeight:"600",border:"1px solid #DBEAFE",display:"inline-flex",alignItems:"center",gap:"3px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"REQUIREMENTS SIGN-OFF"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:E.date.toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"4px"},children:E.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:E.data.tags&&E.data.tags.length>0||E.data.timeImpact||E.data.linkedIssues?"8px":"0"},children:[E.description,"..."]}),(E.data.tags&&E.data.tags.length>0||E.data.timeImpact||E.data.linkedIssues&&E.data.linkedIssues.length>0)&&e.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[E.data.timeImpact&&e.jsxs("span",{style:{fontSize:"10px",background:"#FEE2E2",color:"#DC2626",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:[" ",E.data.timeImpact]}),E.data.linkedIssues&&E.data.linkedIssues.length>0&&e.jsxs("span",{style:{fontSize:"10px",background:"#E0E7FF",color:"#4338CA",padding:"2px 6px",borderRadius:"4px"},children:[" ",E.data.linkedIssues.length," issue",E.data.linkedIssues.length>1?"s":""]}),E.data.tags&&E.data.tags.map(Ie=>e.jsx("span",{style:{fontSize:"10px",background:"#FEF3C7",color:"#92400E",padding:"2px 6px",borderRadius:"4px"},children:Ie},Ie))]})]})]},`${E.type}-${E.data.id}`)})})]}):(()=>{const E=Vs(),me=Math.min(...Ae),Ce=Math.max(...Ae),he=(me-1)*3,je=Ce*3-1,Ie=new Date(Be,he,1);Ie.setHours(0,0,0,0);const ke=new Date(Be,je+1,0);ke.setHours(23,59,59,999);const ve=(ke-Ie)/(1e3*60*60*24),st=Ae.length===4?"year":Ae.length>=2?"quarter":"month",Mt=Te=>{const He=new Date(Te);return He.setHours(0,0,0,0),(He-Ie)/(1e3*60*60*24)/ve*100},ts=new Date;ts.setHours(0,0,0,0);const Zt=Mt(ts);return e.jsxs("div",{className:"card",style:{padding:"16px",position:"relative",overflow:"visible"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #E5E7EB",paddingBottom:"4px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"250px",fontWeight:"600",fontSize:"12px",color:"#6B7280",textTransform:"uppercase"},children:"Activity"}),e.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[st==="year"&&(()=>{const Te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:["Q1","Q2","Q3","Q4"].map((He,ct)=>e.jsxs("div",{style:{flex:1,textAlign:"center",borderRight:ct<3?"1px dashed #D1D5DB":"none"},children:[He," ",Be]},He))}),e.jsx("div",{style:{display:"flex",fontSize:"10px",color:"#9CA3AF",borderTop:"1px solid #E5E7EB",paddingTop:"4px"},children:Te.map((He,ct)=>e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:ct<11?"1px dotted #E5E7EB":"none",padding:"2px 0"},children:He},He))})]})})(),st==="quarter"&&(()=>{const Te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],He=[];for(let It=he;It<=je;It++)He.push({name:Te[It],index:It});const ct=[];let nt=new Date(Ie);for(;nt<=ke;)ct.push(new Date(nt)),nt.setDate(nt.getDate()+7);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:He.map((It,Cn)=>e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:Cn<He.length-1?"1px dashed #D1D5DB":"none"},children:It.name},It.index))}),e.jsx("div",{style:{display:"flex",fontSize:"9px",color:"#9CA3AF",borderTop:"1px solid #E5E7EB",paddingTop:"4px"},children:ct.map((It,Cn)=>e.jsxs("div",{style:{flex:1,textAlign:"center",borderRight:Cn<ct.length-1?"1px dotted #E5E7EB":"none",padding:"2px 0",fontSize:"9px"},title:It.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),children:[It.getDate(),"/",It.getMonth()+1]},Cn))})]})})(),st==="month"&&(()=>{const Te=[];let He=new Date(Ie);for(;He<=ke;)Te.push(new Date(He)),He.setDate(He.getDate()+7);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",fontSize:"11px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:Te.map((ct,nt)=>e.jsxs("div",{style:{flex:1,textAlign:"center",borderRight:nt<Te.length-1?"1px dashed #D1D5DB":"none"},children:["Week ",nt+1]},nt))}),e.jsx("div",{style:{display:"flex",fontSize:"9px",color:"#9CA3AF",borderTop:"1px solid #E5E7EB",paddingTop:"4px"},children:Te.map((ct,nt)=>e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:nt<Te.length-1?"1px dotted #E5E7EB":"none",padding:"2px 0"},children:ct.toLocaleDateString("de-DE",{month:"short",day:"numeric"})},nt))})]})})()]})]}),Zt>=0&&Zt<=100&&e.jsx("div",{style:{position:"absolute",left:`calc(250px + (100% - 250px - 32px) * ${Zt/100})`,top:"60px",bottom:"0",width:"2px",background:"#EF4444",zIndex:5},title:`Today: ${ts.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}`,children:e.jsx("div",{style:{position:"absolute",top:"0",left:"-18px",fontSize:"10px",color:"#EF4444",fontWeight:"600",whiteSpace:"nowrap",background:"white",padding:"2px 4px",borderRadius:"3px",border:"1px solid #EF4444"},children:"TODAY"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:E.map((Te,He)=>{const ct=Mt(Te.date),nt=Te.type==="communication"?Te.commType?Te.commType.color:"#3B82F6":Te.type==="decision"?"#10B981":"#F59E0B",Cn=(En=>({"#10B981":"#D1FAE5","#F59E0B":"#FEF3C7","#EF4444":"#FEE2E2","#DC2626":"#FEE2E2","#8B5CF6":"#EDE9FE","#F97316":"#FFEDD5","#3B82F6":"#DBEAFE","#6B7280":"#F3F4F6"})[En]||"#F3F4F6")(nt);return e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"40px",borderBottom:He<E.length-1?"1px solid #F3F4F6":"none",paddingBottom:"12px",cursor:"pointer",transition:"background 0.2s",padding:"8px",marginLeft:"-8px",marginRight:"-8px",borderRadius:"6px"},onClick:()=>{k(Te),V(!0)},onMouseEnter:En=>En.currentTarget.style.background="#F9FAFB",onMouseLeave:En=>En.currentTarget.style.background="transparent",children:[e.jsxs("div",{style:{width:"250px",paddingRight:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"2px"},children:[Te.type==="communication"&&Te.commType&&e.jsxs("span",{style:{fontSize:"9px",background:Cn,color:nt,padding:"2px 6px",borderRadius:"3px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"2px"},children:[e.jsx("span",{children:Te.commType.icon}),e.jsx("span",{children:Te.commType.label.toUpperCase()})]}),Te.type==="decision"&&e.jsx("span",{style:{fontSize:"9px",background:Cn,color:nt,padding:"2px 6px",borderRadius:"3px",textTransform:"uppercase",fontWeight:"600"},children:"DECISION"})]}),e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Te.title}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:Te.date.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsx("div",{style:{flex:1,position:"relative",height:"32px"},children:(()=>{if(Te.type==="communication"&&Te.data.resolutionDate){const vn=new Date(Te.data.sentAt),Bi=new Date(Te.data.resolutionDate),Nt=Mt(vn),Ut=Mt(Bi);if(Nt>=0&&Ut<=100&&Nt<Ut){const wn=Math.ceil((Bi-vn)/864e5);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:`${Nt}%`,width:`${Ut-Nt}%`,height:"8px",background:`linear-gradient(90deg, ${nt}40 0%, ${nt} 100%)`,borderRadius:"4px",top:"12px",border:`1px solid ${nt}`,zIndex:5},title:`Resolved in ${wn} day${wn!==1?"s":""}`}),e.jsx("div",{style:{position:"absolute",left:`${Nt}%`,width:"12px",height:"12px",borderRadius:"50%",background:nt,border:"2px solid white",boxShadow:"0 0 0 2px "+nt+"40",transform:"translateX(-50%)",top:"10px",zIndex:10},title:`Incident: ${vn.toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}`}),e.jsx("div",{style:{position:"absolute",left:`${Ut}%`,width:"12px",height:"12px",borderRadius:"50%",background:"#10B981",border:"2px solid white",boxShadow:"0 0 0 2px #10B98140",transform:"translateX(-50%)",top:"10px",zIndex:10},title:`Resolved: ${Bi.toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}`}),Ut-Nt>5&&e.jsxs("div",{style:{position:"absolute",left:`${(Nt+Ut)/2}%`,top:"22px",fontSize:"9px",color:nt,fontWeight:"600",transform:"translateX(-50%)",whiteSpace:"nowrap",background:"white",padding:"1px 4px",borderRadius:"3px",zIndex:11},children:[wn,"d"]})]})}}return ct>=0&&ct<=100?e.jsx("div",{style:{position:"absolute",left:`${ct}%`,width:"12px",height:"12px",borderRadius:"50%",background:nt,border:"2px solid white",boxShadow:"0 0 0 2px "+nt+"40",cursor:"pointer",transform:"translateX(-50%)",top:"10px",zIndex:10},title:`${Te.title}
${Te.date.toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}`}):null})()})]},`${Te.type}-${Te.data.id}`)})})]})})()]}),j&&H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",maxWidth:"700px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600"},children:De?"Edit Communication":`Compose: ${H.name}`})}),e.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",display:"block"},children:"Recipients"}),r.map(E=>e.jsxs("label",{style:{display:"block",marginBottom:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:G.includes(E.id),onChange:me=>{me.target.checked?$([...G,E.id]):$(G.filter(Ce=>Ce!==E.id))},style:{marginRight:"8px"}}),E.name," (",E.email,")"]},E.id))]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",display:"block"},children:"Subject"}),e.jsx("input",{type:"text",value:R.subject,onChange:E=>L({...R,subject:E.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",display:"block"},children:"Message Body"}),e.jsx("textarea",{value:qc({...H,subject:R.subject,body:R.body},{stakeholderName:G.length===1&&r.find(E=>E.id===G[0])?.name.split(" ")[0]||"all",projectName:Kt().projectId||"Project",healthScore:c,stats:o,statusSummary:"Project progressing as planned.",senderName:"Project Manager"}),onChange:E=>{L({...R,body:E.target.value})},rows:15,style:{width:"100%",padding:"12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontFamily:"monospace",whiteSpace:"pre-wrap"}})]})]}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid #E5E7EB",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{w(!1),$([])},children:"Cancel"}),e.jsx("button",{className:"btn",onClick:Tt,style:{background:"#10B981",color:"white",border:"none"},children:" Open in Email"}),e.jsx("button",{className:"btn btn-primary",onClick:Ca,children:"Log Communication"})]})]})}),O&&C&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",maxWidth:"700px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600"},children:"Import Email"})}),e.jsxs("div",{style:{flex:1,padding:"24px",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"From:"}),e.jsx("div",{style:{fontSize:"14px"},children:C.from.name?`${C.from.name} <${C.from.email}>`:C.from.email})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"To:"}),e.jsx("div",{style:{fontSize:"14px"},children:C.to.map(E=>E.email).join(", ")})]}),C.cc&&C.cc.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"CC:"}),e.jsx("div",{style:{fontSize:"14px"},children:C.cc.map(E=>E.email).join(", ")})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Subject:"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:C.subject})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:C.sentDate?"Sent:":"Date:"}),e.jsx("div",{style:{fontSize:"14px"},children:(C.sentDate||C.date).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),C.tags&&C.tags.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Auto-detected Tags:"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:C.tags.map(E=>e.jsx("span",{style:{fontSize:"11px",background:"#FEF3C7",color:"#92400E",padding:"4px 8px",borderRadius:"4px"},children:E},E))})]}),C.references&&C.references.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Detected References:"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:C.references.map((E,me)=>e.jsxs("span",{style:{fontSize:"11px",background:"#DBEAFE",color:"#1E40AF",padding:"4px 8px",borderRadius:"4px"},children:[E.type," #",E.id]},me))})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Body Preview:"}),e.jsxs("div",{style:{fontSize:"13px",background:"#F3F4F6",padding:"12px",borderRadius:"6px",maxHeight:"200px",overflowY:"auto",whiteSpace:"pre-wrap"},children:[C.body.substring(0,500),"..."]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"8px"},children:"Matched Stakeholders:"}),e.jsx("div",{style:{fontSize:"13px",color:"#374151"},children:(()=>{const E=[...C.to,...C.cc].map(Ce=>Ce.email.toLowerCase()),me=r.filter(Ce=>E.includes(Ce.email.toLowerCase()));return me.length>0?e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:me.map(Ce=>e.jsxs("li",{children:[Ce.name," (",Ce.email,")"]},Ce.id))}):e.jsx("div",{style:{color:"#6B7280",fontStyle:"italic"},children:"No stakeholders matched"})})()})]})]}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid #E5E7EB",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{y(!1),I(null)},children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:mn,children:"Import Email"})]})]})}),A&&q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>V(!1),children:e.jsxs("div",{style:{background:"white",borderRadius:"8px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},onClick:E=>E.stopPropagation(),children:[e.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #E5E7EB"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",background:q.type==="communication"?"#DBEAFE":q.type==="decision"?"#D1FAE5":"#FEF3C7",color:q.type==="communication"?"#1E40AF":q.type==="decision"?"#065F46":"#92400E",padding:"3px 8px",borderRadius:"4px",textTransform:"uppercase",fontWeight:"600"},children:q.type}),e.jsx("span",{style:{fontSize:"13px",color:"#6B7280"},children:q.date.toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"4px"},children:q.title})]}),e.jsx("button",{onClick:()=>V(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6B7280",padding:"0",marginLeft:"16px"},children:""})]})}),e.jsxs("div",{style:{padding:"24px"},children:[q.type==="communication"&&e.jsxs(e.Fragment,{children:[q.data.from&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"From:"}),e.jsx("div",{style:{fontSize:"14px"},children:typeof q.data.from=="object"?`${q.data.from.name||""} <${q.data.from.email||""}>`:q.data.from})]}),q.data.to&&q.data.to.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"To:"}),e.jsx("div",{style:{fontSize:"14px"},children:q.data.to.map((E,me)=>e.jsx("div",{children:typeof E=="object"?`${E.name||""} <${E.email||""}>`:E},me))})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Content:"}),e.jsx("div",{style:{fontSize:"14px",whiteSpace:"pre-wrap",lineHeight:"1.6"},children:q.data.content?.split(`
`).map((E,me)=>{const Ce=E.match(/^ITO Link:\s*(.+)$/);if(Ce){const he=Ce[1].trim();return e.jsxs("div",{children:["ITO Link: ",e.jsx("a",{href:he,target:"_blank",rel:"noopener noreferrer",style:{color:"#3B82F6",textDecoration:"underline"},children:he})]},me)}return e.jsx("div",{children:E||""},me)})})]}),q.data.type==="incident"&&q.data.resolutionDate&&e.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#F0FDF4",border:"1px solid #86EFAC",borderRadius:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsx("label",{style:{fontSize:"13px",fontWeight:"600",color:"#166534"},children:"Incident Resolved"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px"},children:"Resolution Date:"}),e.jsx("div",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"500"},children:new Date(q.data.resolutionDate).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px"},children:"Time to Resolution:"}),e.jsx("div",{style:{fontSize:"14px",color:"#1F2937",fontWeight:"500"},children:(()=>{const E=new Date(q.data.date),Ce=new Date(q.data.resolutionDate)-E,he=Math.floor(Ce/(1e3*60*60*24)),je=Math.floor(Ce%(1e3*60*60*24)/(1e3*60*60)),Ie=Math.floor(Ce%(1e3*60*60)/(1e3*60));return he>0?`${he}d ${je}h ${Ie}m`:je>0?`${je}h ${Ie}m`:`${Ie}m`})()})]})]})]}),e.jsxs("div",{style:{marginBottom:"16px",paddingTop:"16px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"8px"},children:"Tags:"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",marginBottom:"8px"},children:q.data.tags&&q.data.tags.length>0?q.data.tags.map((E,me)=>e.jsxs("span",{style:{fontSize:"12px",background:"#DBEAFE",color:"#1E40AF",padding:"4px 8px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[E,e.jsx("button",{onClick:()=>es(q.data.id,E),style:{background:"none",border:"none",cursor:"pointer",color:"#1E40AF",fontSize:"14px",padding:"0 2px",lineHeight:1},children:""})]},me)):e.jsx("span",{style:{fontSize:"13px",color:"#9CA3AF"},children:"No tags yet"})}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"Add tag...",value:re,onChange:E=>ue(E.target.value),onKeyPress:E=>{E.key==="Enter"&&yn(q.data.id)},style:{flex:1,padding:"8px 12px",fontSize:"13px",border:"1px solid #D1D5DB",borderRadius:"6px"}}),e.jsx("button",{onClick:()=>yn(q.data.id),style:{padding:"8px 16px",fontSize:"13px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Add"})]})]}),e.jsxs("div",{style:{paddingTop:"16px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"8px"},children:"Comments:"}),q.data.comments&&q.data.comments.length>0?e.jsx("div",{style:{marginBottom:"12px",display:"flex",flexDirection:"column",gap:"8px"},children:q.data.comments.map(E=>e.jsxs("div",{style:{background:"#F9FAFB",padding:"12px",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",marginBottom:"4px"},children:E.text}),e.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF"},children:new Date(E.createdAt).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},E.id))}):e.jsx("div",{style:{fontSize:"13px",color:"#9CA3AF",marginBottom:"12px"},children:"No comments yet"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("textarea",{placeholder:"Add comment...",value:Q,onChange:E=>ae(E.target.value),style:{flex:1,padding:"8px 12px",fontSize:"13px",border:"1px solid #D1D5DB",borderRadius:"6px",minHeight:"60px",resize:"vertical"}}),e.jsx("button",{onClick:()=>Zi(q.data.id),style:{padding:"8px 16px",fontSize:"13px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",alignSelf:"flex-start"},children:"Add"})]})]})]}),q.type==="decision"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Status:"}),e.jsx("span",{style:{fontSize:"12px",background:q.data.status==="active"?"#D1FAE5":"#FEE2E2",color:q.data.status==="active"?"#065F46":"#991B1B",padding:"4px 8px",borderRadius:"4px",textTransform:"uppercase"},children:q.data.status})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Description:"}),e.jsx("div",{style:{fontSize:"14px",whiteSpace:"pre-wrap",lineHeight:"1.6"},children:q.data.description})]}),q.data.tags&&q.data.tags.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Tags:"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:q.data.tags.map((E,me)=>e.jsx("span",{style:{fontSize:"11px",background:"#F3F4F6",color:"#374151",padding:"3px 8px",borderRadius:"4px"},children:E},me))})]})]}),q.type==="document"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"File Type:"}),e.jsx("div",{style:{fontSize:"14px"},children:q.data.fileType})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"File Size:"}),e.jsxs("div",{style:{fontSize:"14px"},children:[(q.data.fileSize/1024).toFixed(2)," KB"]})]}),q.data.description&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",display:"block",marginBottom:"4px"},children:"Description:"}),e.jsx("div",{style:{fontSize:"14px"},children:q.data.description})]})]})]})]})})]})}function av({issues:o,milestones:c,epics:r,stats:l,healthScore:a,risks:d}){const u=[],g=rv(o);u.push(...g);const f=cv(o);u.push(...f);const x=dv(o);u.push(...x);const m=pv(o,c);u.push(...m);const b=uv(r);u.push(...b);const v=xv(d);u.push(...v);const D=hv(o,l);u.push(...D);const j=gv(o);u.push(...j);const w={critical:0,warning:1,info:2,success:3};return u.sort((H,U)=>w[H.type]-w[U.type])}function rv(o){const c=[],r=Ho(o);if(r.length<2)return c;const l=r.slice(-3),a=l.reduce((m,b)=>m+b.velocity,0)/l.length,d=r.slice(-6,-3);if(d.length>0){const m=d.reduce((v,D)=>v+D.velocity,0)/d.length,b=(a-m)/m*100;b<-20?c.push({type:"critical",category:"Velocity",title:"Significant Velocity Decline",description:`Team velocity has dropped by ${Math.abs(Math.round(b))}% over the last 3 sprints (${Math.round(a)} vs ${Math.round(m)} issues/sprint).`,impact:"High - Delivery timeline at risk",recommendation:"Conduct retrospective to identify blockers. Review team capacity and workload distribution.",confidence:"High"}):b<-10?c.push({type:"warning",category:"Velocity",title:"Velocity Declining",description:`Team velocity decreased by ${Math.abs(Math.round(b))}% in recent sprints.`,impact:"Medium - Monitor closely",recommendation:"Review sprint planning and identify potential bottlenecks.",confidence:"Medium"}):b>20&&c.push({type:"success",category:"Velocity",title:"Velocity Improvement",description:`Team velocity increased by ${Math.round(b)}% - excellent progress!`,impact:"Positive - Ahead of schedule",recommendation:"Document what is working well to maintain momentum.",confidence:"High"})}const u=r.map(m=>m.velocity),g=fv(u),f=u.reduce((m,b)=>m+b,0)/u.length,x=g/f*100;return x>40&&c.push({type:"warning",category:"Velocity",title:"Inconsistent Velocity",description:`Velocity varies significantly between sprints (CV: ${Math.round(x)}%).`,impact:"Medium - Unpredictable delivery",recommendation:"Standardize sprint planning process. Ensure consistent team capacity.",confidence:"Medium"}),c}function cv(o){const c=[],r=o.filter(g=>g.state==="opened"),l=r.filter(g=>g.labels.some(f=>f.toLowerCase().includes("blocker")||f.toLowerCase().includes("blocked"))),a=l.length/r.length*100;a>20?c.push({type:"critical",category:"Bottlenecks",title:"High Blocker Rate",description:`${l.length} issues blocked (${Math.round(a)}% of open issues).`,impact:"Critical - Team productivity severely impacted",recommendation:"Immediate blocker resolution session required. Escalate to leadership if needed.",confidence:"High"}):a>10&&c.push({type:"warning",category:"Bottlenecks",title:"Elevated Blocker Count",description:`${l.length} issues are blocked.`,impact:"Medium - Productivity impact",recommendation:"Schedule daily blocker review. Assign owners to resolve each blocker.",confidence:"High"});const d=new Date;d.setDate(d.getDate()-30);const u=r.filter(g=>new Date(g.created_at)<d);return u.length>r.length*.3&&c.push({type:"warning",category:"Bottlenecks",title:"High Number of Stale Issues",description:`${u.length} issues open for >30 days (${Math.round(u.length/r.length*100)}%).`,impact:"Medium - Work in progress accumulation",recommendation:"Review and close or update stale issues. Consider breaking down large issues.",confidence:"Medium"}),c}function dv(o){const c=[],r=new Map;o.forEach(d=>{if(d.state!=="opened")return;(d.assignees||[]).forEach(g=>{const f=r.get(g.username)||0;r.set(g.username,f+1)})});const l=Array.from(r.entries()).filter(([d,u])=>u>8).sort((d,u)=>u[1]-d[1]);l.length>0&&c.push({type:"warning",category:"Resources",title:"Team Members Overloaded",description:`${l.length} team member(s) have >8 open issues. Most loaded: ${l[0][1]} issues.`,impact:"High - Risk of burnout and delays",recommendation:`Rebalance workload. Redistribute ${Math.ceil(l[0][1]*.3)} issues from most loaded member.`,confidence:"High"});const a=o.filter(d=>d.state==="opened"&&(!d.assignees||d.assignees.length===0));return a.length>10&&c.push({type:"warning",category:"Resources",title:"Many Unassigned Issues",description:`${a.length} issues are unassigned.`,impact:"Medium - Unclear ownership",recommendation:"Assign all issues to team members. Consider capacity planning.",confidence:"High"}),c}function pv(o,c){const r=[];return c.filter(a=>a.state==="active").forEach(a=>{const d=o.filter(f=>f.milestone?.id===a.id),u=d.filter(f=>f.state==="opened"),g=(d.length-u.length)/d.length*100;if(a.due_date){const f=new Date(a.due_date),m=Math.ceil((f-new Date)/(1e3*60*60*24));g<50&&m<14&&m>0&&r.push({type:"critical",category:"Milestones",title:`Milestone At Risk: ${a.title}`,description:`Only ${Math.round(g)}% complete with ${m} days remaining.`,impact:"Critical - Milestone deadline at risk",recommendation:`Escalate. Reduce scope or extend deadline. ${u.length} issues need completion.`,confidence:"High"}),m<0&&u.length>0&&r.push({type:"critical",category:"Milestones",title:`Milestone Overdue: ${a.title}`,description:`${Math.abs(m)} days overdue with ${u.length} open issues.`,impact:"Critical - Milestone missed",recommendation:"Immediate action required. Update timeline or close incomplete work.",confidence:"High"})}}),r}function uv(o){const c=[];return!o||o.length===0||o.forEach(r=>{const l=r.issues||[],a=l.filter(u=>u.state==="opened"),d=(l.length-a.length)/l.length*100;r.state==="opened"&&d<20&&l.length>5&&c.push({type:"info",category:"Epics",title:`Epic Needs Attention: ${r.title}`,description:`Only ${Math.round(d)}% complete with ${a.length} open issues.`,impact:"Medium - Epic progress slow",recommendation:"Review epic scope and prioritization. Consider breaking into smaller epics.",confidence:"Medium"})}),c}function xv(o){const c=[];if(!o||o.length===0)return c;const l=o.filter(a=>a.status==="active").filter(a=>a.probability==="high"&&a.impact==="high");return l.length>3&&c.push({type:"critical",category:"Risks",title:"Multiple High-Priority Risks",description:`${l.length} active high-probability, high-impact risks.`,impact:"Critical - Project success threatened",recommendation:"Executive risk review required. Implement mitigation plans immediately.",confidence:"High"}),c}function hv(o,c){const r=[],l=Ho(o);if(l.length<2)return r;const a=l.slice(-3).reduce((u,g)=>u+g.velocity,0)/Math.min(3,l.length),d=c.openIssues;if(a>0){const u=Math.ceil(d/(a/2)),g=new Date;g.setDate(g.getDate()+u*14),u>12?r.push({type:"warning",category:"Forecast",title:"Extended Completion Timeline",description:`At current velocity (${Math.round(a)} issues/sprint), ${u} weeks to complete.`,impact:"Medium - Long delivery timeline",recommendation:"Consider scope reduction or team augmentation.",confidence:"Medium"}):u<4&&r.push({type:"success",category:"Forecast",title:"On Track for Completion",description:`Estimated ${u} weeks to complete at current velocity.`,impact:"Positive - Delivery on schedule",recommendation:"Maintain current pace. Prepare for release activities.",confidence:"Medium"})}return r}function gv(o){const c=[];o.filter(a=>a.state==="closed");const r=o.filter(a=>a.labels.some(d=>d.toLowerCase().includes("bug"))),l=r.length/o.length*100;return l>30&&c.push({type:"warning",category:"Quality",title:"High Bug Rate",description:`${Math.round(l)}% of issues are bugs (${r.length} total).`,impact:"Medium - Quality concerns",recommendation:"Review testing processes. Consider adding automated tests.",confidence:"Medium"}),c}function fv(o){const c=o.reduce((l,a)=>l+a,0)/o.length,r=o.reduce((l,a)=>l+Math.pow(a-c,2),0)/o.length;return Math.sqrt(r)}function mv(o){return{total:o.length,critical:o.filter(c=>c.type==="critical").length,warning:o.filter(c=>c.type==="warning").length,info:o.filter(c=>c.type==="info").length,success:o.filter(c=>c.type==="success").length}}function yv(o){if(!o)return[];const c=[];return[/depends on #(\d+)/gi,/blocked by #(\d+)/gi,/requires #(\d+)/gi,/needs #(\d+)/gi,/waiting for #(\d+)/gi,/blocks? #(\d+)/gi,/dependency:? #(\d+)/gi,/(?:^|\s)#(\d+)(?:\s|$)/g].forEach(l=>{let a;for(;(a=l.exec(o))!==null;){const d=parseInt(a[1],10);d&&!c.includes(d)&&c.push(d)}}),c}function vv(o){return[]}function ja(o){const c=new Map,r=new Map;return o.forEach(l=>{c.set(l.iid,l)}),o.forEach(l=>{const a=`${l.title} ${l.description||""}`,d=yv(a),u=vv(),g=[...new Set([...d,...u])];if(g.length>0){const f=g.map(x=>c.get(x)).filter(x=>x!==void 0);f.length>0&&r.set(l.iid,{issue:l,dependencies:f,dependencyCount:f.length,openDependencies:f.filter(x=>x.state==="opened"),closedDependencies:f.filter(x=>x.state==="closed")})}}),r}function dg(o){const c=ja(o),r=[];return c.forEach((l,a)=>{if(l.openDependencies.length>0){const d=l.openDependencies.length;let u="low";d>=3?u="high":d>=1&&(u="medium");const g=[];c.forEach((f,x)=>{x!==a&&f.dependencies.some(b=>b.iid===a)&&g.push(f.issue)}),r.push({...l,severity:u,blocksCount:g.length,blocksIssues:g,impact:bv(d,g.length)})}}),r.sort((l,a)=>{const d={high:3,medium:2,low:1};return d[l.severity]!==d[a.severity]?d[a.severity]-d[l.severity]:a.impact-l.impact}),r}function bv(o,c){return o*10+c*20}function jv(o){const c=dg(o),r=ja(o),l=r.size,a=c.length,d=c.filter(f=>f.severity==="high").length,u=c.filter(f=>f.severity==="medium").length;let g=0;return r.forEach(f=>{g+=f.openDependencies.length}),{totalIssuesWithDependencies:l,totalBlockedIssues:a,highSeverityBlocked:d,mediumSeverityBlocked:u,totalOpenDependencies:g,hasBlockers:a>0}}function pg(o){const c=[];return o.severity==="high"&&c.push({priority:"urgent",action:"Escalate to leadership",details:`This issue is blocked by ${o.openDependencies.length} open dependencies. Consider daily standup focus.`}),o.blocksCount>0&&c.push({priority:"high",action:"Prioritize unblocking",details:`Unblocking this will unblock ${o.blocksCount} other issue(s).`}),o.openDependencies.forEach(r=>{r.state==="opened"&&!r.assignees?.length&&c.push({priority:"medium",action:`Assign dependency #${r.iid}`,details:`"${r.title}" has no assignee. Assign to accelerate unblocking.`})}),c.length===0&&c.push({priority:"low",action:"Monitor dependencies",details:"Track progress on open dependencies in daily standups."}),c}function Sv(o){const c=ja(o),r=[];c.forEach((a,d)=>{a.dependencies.forEach(u=>{const g=c.get(u.iid);g&&g.dependencies.some(x=>x.iid===d)&&r.push({issue1:a.issue,issue2:u,type:"circular"})})});const l=[];return r.forEach(a=>{l.some(u=>u.issue1.iid===a.issue1.iid&&u.issue2.iid===a.issue2.iid||u.issue1.iid===a.issue2.iid&&u.issue2.iid===a.issue1.iid)||l.push(a)}),l}function Dv(o){const c=["Issue ID","Title","State","Severity","Open Dependencies","Blocks Other Issues","Impact Score","Dependency Issues","Recommended Action","URL"],r=o.map(a=>{const d=a.openDependencies.map(f=>`#${f.iid}: ${f.title}`).join("; "),g=pg(a)[0]?.action||"Monitor";return[a.issue.iid,`"${a.issue.title.replace(/"/g,'""')}"`,a.issue.state,a.severity,a.openDependencies.length,a.blocksCount,a.impact,`"${d}"`,`"${g}"`,a.issue.web_url]});return[c.join(","),...r.map(a=>a.join(","))].join(`
`)}function Bv(o,c="dependency-blockers.csv"){const r=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),a=URL.createObjectURL(r);l.setAttribute("href",a),l.setAttribute("download",c),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Cv({issues:o}){const[c,r]=W.useState(null),l=dg(o),a=jv(o),d=Sv(o),u=()=>{const x=Dv(l);Bv(x)};if(!a.hasBlockers&&d.length===0)return e.jsxs("div",{className:"card",style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"12px"},children:" Dependency Blockers"}),e.jsxs("div",{style:{padding:"24px",background:"#F0FDF4",border:"1px solid #86EFAC",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#166534",marginBottom:"4px"},children:"No Dependency Blockers"}),e.jsx("div",{style:{fontSize:"14px",color:"#15803D"},children:"All issues are unblocked and ready to work on"})]})]});const g=x=>{switch(x){case"high":return"#EF4444";case"medium":return"#F59E0B";case"low":return"#10B981";default:return"#6B7280"}},f=x=>{const m=g(x);return e.jsx("span",{style:{display:"inline-block",padding:"4px 12px",background:`${m}15`,color:m,borderRadius:"12px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:x})};return e.jsxs("div",{className:"card",style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",margin:0},children:" Dependency Blockers"}),l.length>0&&e.jsx("button",{onClick:u,style:{padding:"6px 12px",background:"#E60000",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Export CSV"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"20px"},children:[e.jsxs("div",{style:{padding:"12px",background:"#F9FAFB",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#EF4444"},children:a.totalBlockedIssues}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Blocked Issues"})]}),e.jsxs("div",{style:{padding:"12px",background:"#F9FAFB",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#F59E0B"},children:a.totalOpenDependencies}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Open Dependencies"})]}),e.jsxs("div",{style:{padding:"12px",background:"#F9FAFB",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#EF4444"},children:a.highSeverityBlocked}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"High Severity"})]}),e.jsxs("div",{style:{padding:"12px",background:"#F9FAFB",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#A855F7"},children:d.length}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:"Circular Deps"})]})]}),d.length>0&&e.jsxs("div",{style:{padding:"12px",background:"#FEF3C7",border:"1px solid #F59E0B",borderRadius:"8px",marginBottom:"20px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#D97706",marginBottom:"8px"},children:" Circular Dependencies Detected"}),d.map((x,m)=>e.jsxs("div",{style:{fontSize:"13px",color:"#92400E",marginBottom:"4px"},children:["#",x.issue1.iid,"  #",x.issue2.iid,': "',x.issue1.title,'" and "',x.issue2.title,'"']},m))]}),l.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#4B5563",marginBottom:"12px"},children:["Blocked Issues (",l.length,")"]}),l.map(x=>{const m=c===x.issue.iid,b=pg(x);return e.jsxs("div",{style:{border:`2px solid ${g(x.severity)}`,borderRadius:"8px",marginBottom:"12px",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>r(m?null:x.issue.iid),style:{padding:"12px 16px",background:"#F9FAFB",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:["#",x.issue.iid]}),f(x.severity),x.blocksCount>0&&e.jsxs("span",{style:{fontSize:"12px",color:"#DC2626",fontWeight:"500"},children:[" Blocks ",x.blocksCount," issue",x.blocksCount>1?"s":""]})]}),e.jsx("div",{style:{fontSize:"13px",color:"#4B5563"},children:x.issue.title})]}),e.jsx("div",{style:{fontSize:"20px",color:"#6B7280",transform:m?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]}),m&&e.jsxs("div",{style:{padding:"16px",background:"white"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Open Dependencies (",x.openDependencies.length,"):"]}),x.openDependencies.map(v=>e.jsxs("div",{style:{padding:"8px 12px",background:"#FEF2F2",border:"1px solid #FCA5A5",borderRadius:"6px",marginBottom:"6px",fontSize:"13px"},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#DC2626",marginBottom:"2px"},children:["#",v.iid,": ",v.title]}),e.jsx("div",{style:{fontSize:"12px",color:"#991B1B"},children:v.assignees&&v.assignees.length>0?`Assigned to: ${v.assignees.map(D=>D.name).join(", ")}`:" No assignee"})]},v.iid))]}),x.closedDependencies.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["Resolved Dependencies (",x.closedDependencies.length,"):"]}),x.closedDependencies.map(v=>e.jsxs("div",{style:{padding:"6px 12px",background:"#F0FDF4",border:"1px solid #86EFAC",borderRadius:"6px",marginBottom:"4px",fontSize:"12px",color:"#166534"},children:[" #",v.iid,": ",v.title]},v.iid))]}),x.blocksCount>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:[" Blocks These Issues (",x.blocksCount,"):"]}),x.blocksIssues.map(v=>e.jsxs("div",{style:{padding:"6px 12px",background:"#FEF3C7",border:"1px solid #FCD34D",borderRadius:"6px",marginBottom:"4px",fontSize:"12px",color:"#92400E"},children:["#",v.iid,": ",v.title]},v.iid))]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:" Recommended Actions:"}),b.map((v,D)=>e.jsxs("div",{style:{padding:"8px 12px",background:v.priority==="urgent"?"#FEE2E2":"#EFF6FF",border:`1px solid ${v.priority==="urgent"?"#DC2626":"#3B82F6"}`,borderRadius:"6px",marginBottom:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:v.priority==="urgent"?"#DC2626":"#1E40AF",marginBottom:"2px"},children:v.action}),e.jsx("div",{style:{fontSize:"12px",color:v.priority==="urgent"?"#991B1B":"#1E3A8A"},children:v.details})]},D))]}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsx("a",{href:x.issue.web_url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"13px",color:"#E60000",textDecoration:"none",fontWeight:"500"},children:"View Issue in GitLab "})})]})]},x.issue.iid)})]})]})}function Ev({issues:o,milestones:c,epics:r,stats:l,healthScore:a,risks:d}){const u=W.useMemo(()=>!o||o.length===0?[]:av({issues:o,milestones:c,epics:r,stats:l,healthScore:a,risks:d}),[o,c,r,l,a,d]),g=mv(u),f=b=>{switch(b){case"critical":return"#DC2626";case"warning":return"#D97706";case"info":return"#2563EB";case"success":return"#059669";default:return"#6B7280"}},x=b=>{switch(b){case"critical":return"CRITICAL";case"warning":return"WARNING";case"info":return"INFO";case"success":return"SUCCESS";default:return"INSIGHT"}},m=b=>b;return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Insights"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Intelligent pattern detection and recommendations"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Total Insights"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937"},children:g.total})]}),e.jsxs("div",{className:"card",style:{borderLeft:"4px solid #DC2626"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Critical"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#DC2626"},children:g.critical})]}),e.jsxs("div",{className:"card",style:{borderLeft:"4px solid #D97706"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Warnings"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#D97706"},children:g.warning})]}),e.jsxs("div",{className:"card",style:{borderLeft:"4px solid #059669"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Success"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#059669"},children:g.success})]})]}),e.jsx(Cv,{issues:o}),u.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("h3",{className:"mb-2",children:"No Insights Available"}),e.jsxs("p",{className:"text-muted",children:["The AI engine needs more project data to generate insights.",e.jsx("br",{}),"Add more issues, milestones, and sprint data to see recommendations."]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:u.map((b,v)=>e.jsx("div",{className:"card",style:{borderLeft:`4px solid ${f(b.type)}`,background:b.type==="critical"?"#FEF2F2":b.type==="warning"?"#FFFBEB":b.type==="success"?"#F0FDF4":"white"},children:e.jsx("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px",marginBottom:"16px"},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("span",{style:{padding:"4px 12px",background:f(b.type),color:"white",borderRadius:"4px",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:x(b.type)}),e.jsx("span",{style:{padding:"4px 12px",background:"#F3F4F6",color:"#6B7280",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:m(b.category)})]}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:b.title}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"12px",lineHeight:"1.6"},children:b.description}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#1F2937"},children:"Impact: "}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:b.impact})]}),e.jsxs("div",{style:{padding:"12px 16px",background:"#F9FAFB",borderLeft:"3px solid "+f(b.type),borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:" Recommended Action"}),e.jsx("div",{style:{fontSize:"13px",color:"#374151",lineHeight:"1.5"},children:b.recommendation})]})]})})},v))})]})}const fd="gitlab-pm-quality-criteria-config",aa={staleThresholds:{warning:30,critical:60},criteria:{assignee:{name:"Assignee",description:"Issue must be assigned to a team member",enabled:!0,severity:"high"},weight:{name:"Weight/Estimation",description:"Issue must have story points or time estimate",enabled:!0,severity:"high"},epic:{name:"Epic Assignment",description:"Issue must be assigned to an epic",enabled:!0,severity:"medium"},description:{name:"Description",description:"Issue must have a meaningful description",enabled:!0,severity:"high",threshold:20},labels:{name:"Type Label",description:"Issue must have a type label (Bug, Feature, etc.)",enabled:!0,severity:"high"},milestone:{name:"Milestone",description:"Issue should be assigned to a milestone",enabled:!0,severity:"medium"},dueDate:{name:"Due Date",description:"Issue should have a due date (for tracking)",enabled:!0,severity:"low"},priority:{name:"Priority",description:"Issue should have a priority label",enabled:!0,severity:"medium"},stale:{name:"Stale Issue",description:"Issue has been open too long",enabled:!0,severity:"low"}}};function ha(){try{const o=localStorage.getItem(fd);if(!o)return aa;const c=JSON.parse(o);return{staleThresholds:{...aa.staleThresholds,...c.staleThresholds||{}},criteria:{...aa.criteria,...c.criteria||{}}}}catch(o){return console.error("Error loading criteria config:",o),aa}}function wv(o){try{return localStorage.setItem(fd,JSON.stringify(o)),!0}catch(c){return console.error("Error saving criteria config:",c),!1}}function zv(){try{return localStorage.removeItem(fd),!0}catch(o){return console.error("Error resetting criteria config:",o),!1}}function kv(){const o=ha(),c={};return Object.entries(o.criteria).forEach(([r,l])=>{l.enabled&&(c[r]={name:l.name,description:l.description,severity:l.severity,threshold:l.threshold})}),c}function Av(){return ha().staleThresholds}function md(){return Av()}md();function Tv(o){const c=new Date(o.created_at),l=Math.abs(new Date-c);return Math.ceil(l/(1e3*60*60*24))}function Sa(o){if(o.state!=="opened")return{isStale:!1,daysOpen:0,severity:null};const c=Tv(o),r=md();return c>=r.critical?{isStale:!0,daysOpen:c,severity:"critical"}:c>=r.warning?{isStale:!0,daysOpen:c,severity:"warning"}:{isStale:!1,daysOpen:c,severity:null}}const Fv={assignee:o=>o.assignees&&o.assignees.length>0,weight:o=>o.weight!==null&&o.weight!==void 0&&o.weight>0,epic:o=>o.epic!==null&&o.epic!==void 0,description:(o,c)=>{const r=c?.threshold||20;return o.description&&o.description.trim().length>=r},labels:o=>!o.labels||o.labels.length===0?!1:o.labels.some(r=>r.toLowerCase().includes("bug")||r.toLowerCase().includes("feature")||r.toLowerCase().includes("enhancement")||r.toLowerCase().includes("type::")),milestone:o=>o.milestone!==null&&o.milestone!==void 0,dueDate:o=>o.due_date!==null&&o.due_date!==void 0,priority:o=>!o.labels||o.labels.length===0?!1:o.labels.some(c=>c.toLowerCase().includes("priority")||c.toLowerCase().includes("p1")||c.toLowerCase().includes("p2")||c.toLowerCase().includes("p3")),stale:o=>!Sa(o).isStale},wh={stale:o=>{const c=Sa(o);return c.severity==="critical"?"high":c.severity==="warning"?"medium":"low"}};function Rv(){const o=kv(),c=md(),r={};return Object.entries(o).forEach(([l,a])=>{r[l]={name:a.name,description:a.description,severity:a.severity,validate:d=>{const u=Fv[l];return u?u(d,a):!0},...wh[l]&&{getDynamicSeverity:wh[l]}}}),r.stale&&(r.stale.description=`Issue has been open too long (Warning: ${c.warning} days, Critical: ${c.critical} days)`),r}const ga=Rv();function ug(o){const c=[],r=[],l=Sa(o);return Object.entries(ga).forEach(([a,d])=>{if(d.validate(o))r.push(a);else{const g=d.getDynamicSeverity?d.getDynamicSeverity(o):d.severity;c.push({criterion:a,name:d.name,description:d.description,severity:g,...a==="stale"&&{daysOpen:l.daysOpen}})}}),{issueId:o.id,iid:o.iid,title:o.title,state:o.state,violations:c,passed:r,complianceScore:Math.round(r.length/Object.keys(ga).length*100),isCompliant:c.length===0,staleStatus:l}}function Mv(o){return o.map(l=>({...ug(l),createdAt:l.created_at,updatedAt:l.updated_at,author:l.author,assignees:l.assignees||[],labels:l.labels||[],milestone:l.milestone,epic:l.epic,weight:l.weight,description:l.description,dueDate:l.due_date,webUrl:l.web_url})).filter(l=>!l.isCompliant).sort((l,a)=>l.complianceScore!==a.complianceScore?l.complianceScore-a.complianceScore:(a.staleStatus?.daysOpen||0)-(l.staleStatus?.daysOpen||0))}function xg(o){return o.filter(c=>c.state==="opened").map(c=>{const r=Sa(c);return{...c,staleStatus:r}}).filter(c=>c.staleStatus.isStale).sort((c,r)=>r.staleStatus.daysOpen-c.staleStatus.daysOpen)}function Iv(o){const c=o.map(ug),r=c.length,l=c.filter(D=>D.isCompliant).length,a=r-l,d=r>0?Math.round(l/r*100):0,u={};Object.keys(ga).forEach(D=>{u[D]=0}),c.forEach(D=>{D.violations.forEach(j=>{u[j.criterion]++})});const g=c.filter(D=>D.violations.some(j=>j.severity==="high")).length,f=c.filter(D=>D.violations.some(j=>j.severity==="medium")&&!D.violations.some(j=>j.severity==="high")).length,x=c.filter(D=>D.violations.some(j=>j.severity==="low")&&!D.violations.some(j=>j.severity==="high"||j.severity==="medium")).length,m=xg(o),b=m.filter(D=>D.staleStatus.severity==="warning").length,v=m.filter(D=>D.staleStatus.severity==="critical").length;return{total:r,compliant:l,nonCompliant:a,complianceRate:d,violationsByCriterion:u,highSeverity:g,mediumSeverity:f,lowSeverity:x,staleIssues:{total:m.length,warning:b,critical:v}}}function hg(){return Object.entries(ga).map(([o,c])=>({key:o,...c}))}function yd({value:o,onChange:c,placeholder:r="Search...",onClear:l}){return e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{position:"relative",maxWidth:"600px"},children:[e.jsx("input",{type:"text",value:o,onChange:a=>c(a.target.value),placeholder:r,style:{width:"100%",padding:"12px 45px 12px 45px",fontSize:"14px",border:"2px solid #D1D5DB",borderRadius:"8px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#2563EB",onBlur:a=>a.target.style.borderColor="#D1D5DB"}),e.jsx("div",{style:{position:"absolute",left:"15px",top:"50%",transform:"translateY(-50%)",color:"#6B7280",fontSize:"18px"},children:""}),o&&e.jsx("button",{onClick:()=>{c(""),l&&l()},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"#F3F4F6",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",transition:"background 0.2s"},onMouseEnter:a=>a.target.style.background="#E5E7EB",onMouseLeave:a=>a.target.style.background="#F3F4F6",children:""})]}),o&&e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"8px",marginLeft:"4px"},children:" Searching: title, labels, assignees, epic, milestone, description, ID"})]})}function gg(o,c){if(!c||c.trim()==="")return o;const r=c.toLowerCase().trim();return o.filter(l=>!!(l.title?.toLowerCase().includes(r)||l.description?.toLowerCase().includes(r)||l.labels?.some(a=>a.toLowerCase().includes(r))||l.assignees?.some(a=>a.name?.toLowerCase().includes(r)||a.username?.toLowerCase().includes(r))||l.epic?.title?.toLowerCase().includes(r)||l.milestone?.title?.toLowerCase().includes(r)||l.author?.name?.toLowerCase().includes(r)||l.author?.username?.toLowerCase().includes(r)||l.iid?.toString().includes(r)||l.id?.toString().includes(r)||l.references?.short?.toLowerCase().includes(r)))}function Nv(o,c){if(!c||c.trim()==="")return o;const r=c.toLowerCase().trim();return o.filter(l=>!!(l.title?.toLowerCase().includes(r)||l.description?.toLowerCase().includes(r)||l.labels?.some(a=>a.toLowerCase().includes(r))||l.author?.name?.toLowerCase().includes(r)||l.author?.username?.toLowerCase().includes(r)||l.iid?.toString().includes(r)||l.id?.toString().includes(r)))}function Ov({isOpen:o,onClose:c}){const[r,l]=W.useState(()=>ha()),[a,d]=W.useState(!1);if(!o)return null;const u=w=>{const H={...r,criteria:{...r.criteria,[w]:{...r.criteria[w],enabled:!r.criteria[w].enabled}}};l(H),d(!0)},g=(w,H)=>{const U={...r,criteria:{...r.criteria,[w]:{...r.criteria[w],severity:H}}};l(U),d(!0)},f=(w,H)=>{const U={...r,criteria:{...r.criteria,[w]:{...r.criteria[w],threshold:parseInt(H,10)}}};l(U),d(!0)},x=(w,H)=>{const U={...r,staleThresholds:{...r.staleThresholds,[w]:parseInt(H,10)}};l(U),d(!0)},m=()=>{wv(r),d(!1),c(),window.location.reload()},b=()=>{window.confirm("Reset to default quality criteria? This will remove all customizations.")&&(zv(),l(ha()),d(!0))},v=w=>{switch(w){case"high":return"#DC2626";case"medium":return"#F59E0B";case"low":return"#6B7280";default:return"#6B7280"}},D=Object.entries(r.criteria).map(([w,H])=>({key:w,...H})),j=D.filter(w=>w.enabled).length;return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"4px"},children:"Quality Criteria Configuration"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Enable/disable criteria and adjust severity levels"})]}),e.jsx("button",{onClick:c,style:{padding:"8px",background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#6B7280",lineHeight:1},children:""})]}),e.jsxs("div",{style:{padding:"16px 24px",background:"#F9FAFB",borderBottom:"1px solid #E5E7EB",display:"flex",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"2px"},children:"Active Criteria"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1F2937"},children:[j," / ",D.length]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"2px"},children:"Stale Warning"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#F59E0B"},children:[r.staleThresholds.warning,"d"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"2px"},children:"Stale Critical"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#DC2626"},children:[r.staleThresholds.critical,"d"]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#1F2937"},children:"Stale Issue Thresholds"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"#374151"},children:"Warning (days)"}),e.jsx("input",{type:"number",value:r.staleThresholds.warning,onChange:w=>x("warning",w.target.value),min:"1",max:"365",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Issues open longer than this are marked as warnings"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"#374151"},children:"Critical (days)"}),e.jsx("input",{type:"number",value:r.staleThresholds.critical,onChange:w=>x("critical",w.target.value),min:"1",max:"365",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Issues open longer than this are marked as critical"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#1F2937"},children:"Quality Criteria"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:D.map(w=>e.jsx("div",{style:{padding:"16px",background:w.enabled?"white":"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px",opacity:w.enabled?1:.6,transition:"all 0.2s"},children:e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[e.jsx("div",{style:{paddingTop:"4px"},children:e.jsx("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:e.jsx("input",{type:"checkbox",checked:w.enabled,onChange:()=>u(w.key),style:{width:"18px",height:"18px",cursor:"pointer"}})})}),e.jsx("div",{style:{width:"6px",alignSelf:"stretch",background:v(w.severity),borderRadius:"3px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"6px"},children:w.name}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"12px"},children:w.description}),e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"500",color:"#6B7280"},children:"Severity:"}),e.jsx("div",{style:{display:"flex",gap:"6px"},children:["high","medium","low"].map(H=>e.jsx("button",{onClick:()=>g(w.key,H),disabled:!w.enabled,style:{padding:"4px 10px",fontSize:"11px",fontWeight:"600",border:w.severity===H?"2px solid":"1px solid",borderColor:w.severity===H?v(H):"#D1D5DB",borderRadius:"4px",background:w.severity===H?`${v(H)}15`:"white",color:w.severity===H?v(H):"#6B7280",cursor:w.enabled?"pointer":"not-allowed",textTransform:"capitalize",transition:"all 0.2s"},children:H},H))})]}),w.key==="description"&&w.threshold!==void 0&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"500",color:"#6B7280"},children:"Min length:"}),e.jsx("input",{type:"number",value:w.threshold,onChange:H=>f(w.key,H.target.value),disabled:!w.enabled,min:"1",max:"1000",style:{width:"70px",padding:"4px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"12px"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"chars"})]})]})]})]})},w.key))})]})]}),e.jsxs("div",{style:{padding:"20px 24px",borderTop:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",gap:"12px"},children:[e.jsx("button",{onClick:b,style:{padding:"10px 20px",background:"white",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontWeight:"500",color:"#DC2626",cursor:"pointer"},children:"Reset to Defaults"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:c,style:{padding:"10px 20px",background:"white",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:m,disabled:!a,style:{padding:"10px 20px",background:a?"#E60000":"#D1D5DB",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",color:"white",cursor:a?"pointer":"not-allowed"},children:"Save Changes"})]})]})]})})}const Wv="dodTemplates",sd={feature:{name:"Feature",checklist:[{id:"code-review",label:"Code reviewed (2+ approvals)",required:!0},{id:"unit-tests",label:"Unit tests written (>80% coverage)",required:!0},{id:"integration-tests",label:"Integration tests passed",required:!0},{id:"documentation",label:"Documentation updated",required:!0},{id:"demo",label:"Demoed to Product Owner",required:!1},{id:"acceptance-criteria",label:"Acceptance criteria met",required:!0}]},bug:{name:"Bug Fix",checklist:[{id:"root-cause",label:"Root cause documented",required:!0},{id:"code-review",label:"Code reviewed",required:!0},{id:"test-case",label:"Test case added to prevent regression",required:!0},{id:"regression-test",label:"Regression test passed",required:!0},{id:"fix-verified",label:"Fix verified in staging",required:!0}]},enhancement:{name:"Enhancement",checklist:[{id:"code-review",label:"Code reviewed",required:!0},{id:"backward-compatible",label:"Backward compatible",required:!0},{id:"performance-tested",label:"Performance tested",required:!1},{id:"documentation",label:"Documentation updated",required:!0},{id:"acceptance-criteria",label:"Acceptance criteria met",required:!0}]}};function fg(){try{const o=localStorage.getItem(Wv);return o?JSON.parse(o):sd}catch(o){return console.error("Error loading DoD templates:",o),sd}}function _v(o){const c=fg(),r=o?.toLowerCase()||"feature";return c[r]?c[r]:c.feature||sd.feature}function Lv(o){if(!o.labels||o.labels.length===0)return"feature";const c=o.labels.map(r=>r.toLowerCase());return c.some(r=>r.includes("bug")||r.includes("defect"))?"bug":c.some(r=>r.includes("enhancement")||r.includes("improvement"))?"enhancement":"feature"}function mg(o){const c=Lv(o),r=_v(c),l=[],a=[];r.checklist.forEach(f=>{let x=!1;switch(f.id){case"code-review":x=o.description&&(o.description.includes("!")||o.description.toLowerCase().includes("merge request")||o.description.toLowerCase().includes("reviewed"));break;case"unit-tests":case"integration-tests":case"regression-test":x=o.description&&(o.description.toLowerCase().includes("test")||o.description.toLowerCase().includes("coverage"));break;case"documentation":x=o.description&&(o.description.toLowerCase().includes("documentation")||o.description.toLowerCase().includes("readme")||o.description.length>=200);break;case"acceptance-criteria":x=o.description&&(o.description.toLowerCase().includes("acceptance criteria")||o.description.toLowerCase().includes("acceptance:")||o.description.includes("- [ ]"));break;case"root-cause":x=o.description&&(o.description.toLowerCase().includes("root cause")||o.description.toLowerCase().includes("cause:")||o.description.toLowerCase().includes("reason:"));break;case"test-case":case"fix-verified":case"demo":case"backward-compatible":case"performance-tested":x=!1;break;default:x=!1}x?l.push(f):f.required&&a.push(f)});const d=r.checklist.filter(f=>f.required),u=l.filter(f=>f.required).length,g=d.length>0?Math.round(u/d.length*100):100;return{issueType:c,dodTemplate:r.name,totalItems:r.checklist.length,requiredItems:d.length,checkedItems:l,missingItems:a,compliancePercentage:g,isCompliant:a.length===0}}function $v(o){const r=o.filter(l=>l.state==="closed"||l.labels?.some(a=>a.toLowerCase().includes("review"))).map(l=>({issue:l,dod:mg(l)})).filter(l=>!l.dod.isCompliant);return r.sort((l,a)=>l.dod.compliancePercentage-a.dod.compliancePercentage),r}function Pv(o){const c=o.filter(g=>g.state==="closed"||g.labels?.some(f=>f.toLowerCase().includes("review")));if(c.length===0)return{totalIssues:0,compliantIssues:0,violatingIssues:0,complianceRate:100,avgCompliancePercentage:100};const r=c.map(g=>mg(g)),l=r.filter(g=>g.isCompliant).length,a=r.filter(g=>!g.isCompliant).length,d=Math.round(l/c.length*100),u=Math.round(r.reduce((g,f)=>g+f.compliancePercentage,0)/r.length);return{totalIssues:c.length,compliantIssues:l,violatingIssues:a,complianceRate:d,avgCompliancePercentage:u}}function Uv(o){const c=["Issue ID","Title","Type","State","DoD Template","Compliance %","Missing Items","URL"],r=o.map(({issue:a,dod:d})=>[a.iid,`"${a.title.replace(/"/g,'""')}"`,d.issueType,a.state,d.dodTemplate,`${d.compliancePercentage}%`,`"${d.missingItems.map(u=>u.label).join("; ")}"`,a.web_url]);return[c.join(","),...r.map(a=>a.join(","))].join(`
`)}function Hv(o,c="dod-violations.csv"){const r=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),a=URL.createObjectURL(r);l.setAttribute("href",a),l.setAttribute("download",c),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function Gv({issues:o}){const[c,r]=W.useState(null),l=$v(o),a=Pv(o),d=fg(),u=()=>{const f=Uv(l);Hv(f)},g=f=>f>=80?"#10B981":f>=60?"#F59E0B":"#EF4444";return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Compliance Rate"}),e.jsxs("div",{style:{fontSize:"36px",fontWeight:"700",color:g(a.complianceRate)},children:[a.complianceRate,"%"]})]}),e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Compliant Issues"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#10B981"},children:a.compliantIssues})]}),e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Violations"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#EF4444"},children:a.violatingIssues})]}),e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Avg Compliance"}),e.jsxs("div",{style:{fontSize:"36px",fontWeight:"700",color:g(a.avgCompliancePercentage)},children:[a.avgCompliancePercentage,"%"]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"24px",background:"#EFF6FF",borderColor:"#BFDBFE"},children:[e.jsx("div",{style:{marginBottom:"12px",fontSize:"14px",fontWeight:"600",color:"#1E40AF"},children:" Definition of Done Templates"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:Object.entries(d).map(([f,x])=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1E40AF",marginBottom:"4px"},children:x.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#1E3A8A"},children:[x.checklist.filter(m=>m.required).length," required items"]})]},f))})]}),l.length>0?e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",margin:0},children:["DoD Violations (",l.length,")"]}),e.jsx("button",{onClick:u,style:{padding:"6px 12px",background:"#E60000",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Export CSV"})]}),l.map(({issue:f,dod:x})=>{const m=c===f.iid;return e.jsxs("div",{style:{border:`2px solid ${g(x.compliancePercentage)}`,borderRadius:"8px",marginBottom:"12px",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>r(m?null:f.iid),style:{padding:"12px 16px",background:"#F9FAFB",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:["#",f.iid]}),e.jsxs("span",{style:{display:"inline-block",padding:"2px 8px",background:g(x.compliancePercentage)+"20",color:g(x.compliancePercentage),borderRadius:"10px",fontSize:"11px",fontWeight:"600"},children:[x.compliancePercentage,"% DoD"]}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"500"},children:x.dodTemplate})]}),e.jsx("div",{style:{fontSize:"13px",color:"#4B5563"},children:f.title})]}),e.jsx("div",{style:{fontSize:"20px",color:"#6B7280",transform:m?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]}),m&&e.jsxs("div",{style:{padding:"16px",background:"white"},children:[x.missingItems.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:[" Missing Required Items (",x.missingItems.length,"):"]}),x.missingItems.map(b=>e.jsx("div",{style:{padding:"8px 12px",background:"#FEF2F2",border:"1px solid #FCA5A5",borderRadius:"6px",marginBottom:"6px",fontSize:"13px",color:"#DC2626"},children:b.label},b.id))]}),x.checkedItems.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:[" Completed Items (",x.checkedItems.length,"):"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px"},children:x.checkedItems.map(b=>e.jsxs("div",{style:{padding:"6px 12px",background:"#F0FDF4",border:"1px solid #86EFAC",borderRadius:"6px",fontSize:"12px",color:"#166534"},children:[" ",b.label]},b.id))})]}),e.jsxs("div",{style:{padding:"12px",background:"#EFF6FF",border:"1px solid #3B82F6",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1E40AF",marginBottom:"4px"},children:" Recommendation:"}),e.jsxs("div",{style:{fontSize:"12px",color:"#1E3A8A"},children:["Update issue description to include missing DoD items before marking as Done.",x.missingItems.some(b=>b.id==="acceptance-criteria")&&e.jsx(e.Fragment,{children:' Add an "Acceptance Criteria" section with clear success criteria.'})]})]}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsx("a",{href:f.web_url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"13px",color:"#E60000",textDecoration:"none",fontWeight:"500"},children:"View Issue in GitLab "})})]})]},f.iid)})]}):e.jsxs("div",{className:"card",style:{padding:"40px",textAlign:"center",background:"#F0FDF4",border:"2px solid #86EFAC"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#166534",marginBottom:"8px"},children:"Perfect DoD Compliance!"}),e.jsx("div",{style:{fontSize:"14px",color:"#15803D"},children:"All closed issues meet the Definition of Done criteria."})]})]})}function Vv({nonCompliantIssues:o}){const[c,r]=W.useState(null),[l,a]=W.useState(null),d=hg(),u=W.useMemo(()=>{if(!o||o.length===0)return new Map;const m=new Map;return d.forEach(b=>{m.set(b.key,{key:b.key,name:b.name,description:b.description,severity:b.severity,issues:new Set,totalViolations:0})}),o.forEach(b=>{b.violations.forEach(v=>{const D=m.get(v.criterion);D&&(D.issues.add(b),D.totalViolations++)})}),m.forEach((b,v)=>{b.issues=Array.from(b.issues)}),m},[o,d]),g=W.useMemo(()=>{if(!c||!u.has(c))return[];const m=u.get(c),b=new Map;return m.issues.forEach(v=>{const D=[];if(v.assignees&&v.assignees.length>0)v.assignees.forEach(j=>{const w=j.name||j.username||"Unknown";D.push(w)});else if(v.author){const j=v.author.name||v.author.username||"Unknown";D.push(j)}else D.push("Unassigned");D.forEach(j=>{b.has(j)||b.set(j,{name:j,issues:[],violationCount:0});const w=b.get(j);w.issues.push(v);const H=v.violations.filter(U=>U.criterion===c).length;w.violationCount+=H})}),Array.from(b.values()).sort((v,D)=>D.issues.length-v.issues.length)},[c,u,o]),f=W.useMemo(()=>!l||!g?[]:g.find(b=>b.name===l)?.issues||[],[l,g]),x=m=>{switch(m){case"high":return"#DC2626";case"medium":return"#D97706";case"low":return"#2563EB";default:return"#6B7280"}};return!o||o.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"All Issues Compliant"}),e.jsx("p",{className:"text-muted",children:"No quality violations found. Great job!"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Step 1: Select a Quality Criterion"}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"16px"},children:"Choose a quality criterion to see how violations are distributed across team members."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"12px"},children:d.map(m=>{const b=u.get(m.key),v=c===m.key,D=b&&b.issues.length>0;return e.jsx("div",{onClick:()=>{D&&(r(v?null:m.key),a(null))},style:{padding:"16px",background:v?"#FEF2F2":"white",borderRadius:"8px",border:v?"2px solid #DC2626":"1px solid #E5E7EB",cursor:D?"pointer":"default",opacity:D?1:.5,transition:"all 0.2s",transform:v?"scale(0.98)":"scale(1)"},children:e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("div",{style:{width:"8px",background:x(m.severity),borderRadius:"4px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[m.name,v&&e.jsx("span",{style:{fontSize:"11px",padding:"2px 8px",background:"#DC2626",color:"white",borderRadius:"10px",fontWeight:"600"},children:"SELECTED"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"8px"},children:m.description}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:D?"#DC2626":"#6B7280"},children:b?e.jsxs(e.Fragment,{children:[b.issues.length," issue",b.issues.length!==1?"s":"",b.totalViolations>b.issues.length&&e.jsxs("span",{style:{fontSize:"11px",color:"#6B7280",marginLeft:"8px"},children:["(",b.totalViolations," total violations)"]})]}):"0 issues"}),D&&e.jsx("div",{style:{fontSize:"11px",color:"#3B82F6",fontWeight:"600"},children:"Click to analyze "})]})]})]})},m.key)})})]}),c&&g.length>0&&e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:['Step 2: Person Distribution for "',u.get(c)?.name,'"']}),e.jsxs("p",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"16px"},children:["Shows how the ",u.get(c)?.issues.length," issues with this violation are distributed across team members. Click on a person to see their specific issues."]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"12px"},children:g.map(m=>{const b=l===m.name,v=(m.issues.length/u.get(c).issues.length*100).toFixed(0);return e.jsxs("div",{onClick:()=>a(b?null:m.name),style:{padding:"16px",background:b?"#EFF6FF":"white",border:b?"2px solid #3B82F6":"1px solid #E5E7EB",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:m.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:[m.issues.length," issue",m.issues.length!==1?"s":"",m.violationCount>m.issues.length&&e.jsxs("span",{style:{fontSize:"11px",marginLeft:"4px"},children:["(",m.violationCount," violations)"]})]})]}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#DC2626"},children:m.issues.length})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:[v,"% of issues with this violation"]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#F3F4F6",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #3B82F6 0%, #60A5FA 100%)",transition:"width 0.3s"}})})]}),b&&e.jsx("div",{style:{fontSize:"11px",color:"#3B82F6",fontWeight:"600",textAlign:"center",marginTop:"8px"},children:"Click to hide issues"})]},m.name)})})]}),l&&f.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:[l,`'s Issues with "`,u.get(c)?.name,'" Violations']}),e.jsxs("p",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"16px"},children:[f.length," issue",f.length!==1?"s":""," found. Click on an issue to open it in GitLab."]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:f.map(m=>{const b=m.violations.filter(v=>v.criterion===c).length;return e.jsxs("a",{href:m.webUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"white",border:"1px solid #E5E7EB",borderRadius:"6px",textDecoration:"none",color:"#1F2937",transition:"all 0.2s"},onMouseEnter:v=>{v.currentTarget.style.borderColor="#3B82F6",v.currentTarget.style.background="#F0F9FF",v.currentTarget.style.transform="translateX(4px)"},onMouseLeave:v=>{v.currentTarget.style.borderColor="#E5E7EB",v.currentTarget.style.background="white",v.currentTarget.style.transform="translateX(0)"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:["#",m.iid," ",m.title]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:[m.state==="opened"?"Open":"Closed"," ",m.assignees&&m.assignees.length>0?e.jsxs("span",{children:[" Assigned to: ",m.assignees.map(v=>v.name||v.username).join(", ")]}):e.jsxs("span",{children:[" Created by: ",m.author?.name||m.author?.username||"Unknown"]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"4px"},children:[b," violation",b!==1?"s":""," of this criterion"]})]}),e.jsx("div",{style:{padding:"6px 12px",background:"#3B82F6",color:"white",borderRadius:"6px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"Open in GitLab "})]},m.id)})})]})]})}function qv({issues:o}){const{filteredIssues:c}=qi(),[r,l]=W.useState(""),[a,d]=W.useState(null),[u,g]=W.useState(!1),[f,x]=W.useState("quality"),[m,b]=W.useState(()=>localStorage.getItem("quality.showOpenOnly")!=="false"),[v,D]=W.useState(()=>localStorage.getItem("quality.legendCollapsed")==="true"),j=()=>{D(y=>{const C=!y;return localStorage.setItem("quality.legendCollapsed",String(C)),C})},w=()=>{b(y=>{const C=!y;return localStorage.setItem("quality.showOpenOnly",String(C)),C})},{nonCompliantIssues:H,stats:U,staleIssues:G}=W.useMemo(()=>{if(!c||c.length===0)return{nonCompliantIssues:[],stats:null,staleIssues:[]};const y=m?c.filter(P=>P.state==="opened"):c,C=Mv(y),I=Iv(y),_=xg(y);return{nonCompliantIssues:C,stats:I,staleIssues:_}},[c,m]),$=hg(),B=W.useMemo(()=>{let y=H;if(r&&(y=gg(y,r)),a)switch(a){case"highSeverity":y=y.filter(C=>C.violations.some(I=>I.severity==="high"));break;case"mediumSeverity":y=y.filter(C=>C.violations.some(I=>I.severity==="medium"));break;case"lowSeverity":y=y.filter(C=>C.violations.some(I=>I.severity==="low"));break;case"stale":y=y.filter(C=>C.staleStatus?.isStale);break;default:y=y.filter(C=>C.violations.some(I=>I.criterion===a));break}return y},[H,r,a]),M=()=>{const y=Ch(B),C=new Date().toISOString().split("T")[0];Bn(y,`issue-compliance-report-${C}.csv`)},R=()=>{const I=ht().teamMembers?.find(k=>k.role==="Scrum Master")?.email||"",_=`Issue Quality Compliance Report - ${new Date().toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}`,P=B.length,X=B.filter(k=>k.violations.some(A=>A.severity==="high")).length,z=B.filter(k=>k.violations.some(A=>A.severity==="medium")).length,T=B.filter(k=>k.violations.some(A=>A.severity==="low")).length,N=`Hi,

Please find the Issue Quality Compliance Report attached.

Summary:
- Total non-compliant issues: ${P}
- High severity: ${X}
- Medium severity: ${z}
- Low severity: ${T}
- Compliance rate: ${U?.complianceRate}%

The CSV report has been downloaded to your Downloads folder. Please attach it to this email before sending.

Best regards`,K=Ch(B),te=new Date().toISOString().split("T")[0];Bn(K,`issue-compliance-report-${te}.csv`);const q=`mailto:${I}?subject=${encodeURIComponent(_)}&body=${encodeURIComponent(N)}`;window.location.href=q},L=y=>{d(a===y?null:y)},O=y=>{switch(y){case"high":return"#DC2626";case"medium":return"#D97706";case"low":return"#2563EB";default:return"#6B7280"}};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Issue Quality Compliance"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Quality criteria validation for all issues"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{className:"btn",onClick:()=>g(!0),style:{display:"flex",alignItems:"center",gap:"6px"},children:"Configure Criteria"}),B.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary",onClick:R,children:"Email Report"}),e.jsx("button",{className:"btn",onClick:M,children:"Export CSV"})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"2px solid #E5E7EB",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>x("quality"),style:{padding:"12px 24px",background:f==="quality"?"white":"transparent",border:"none",borderBottom:f==="quality"?"3px solid #E60000":"3px solid transparent",fontSize:"14px",fontWeight:f==="quality"?"600":"500",color:f==="quality"?"#E60000":"#6B7280",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:"Quality Criteria"}),e.jsx("button",{onClick:()=>x("byauthor"),style:{padding:"12px 24px",background:f==="byauthor"?"white":"transparent",border:"none",borderBottom:f==="byauthor"?"3px solid #E60000":"3px solid transparent",fontSize:"14px",fontWeight:f==="byauthor"?"600":"500",color:f==="byauthor"?"#E60000":"#6B7280",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:"By Author"}),e.jsx("button",{onClick:()=>x("dod"),style:{padding:"12px 24px",background:f==="dod"?"white":"transparent",border:"none",borderBottom:f==="dod"?"3px solid #E60000":"3px solid transparent",fontSize:"14px",fontWeight:f==="dod"?"600":"500",color:f==="dod"?"#E60000":"#6B7280",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:"Definition of Done"})]}),(f==="quality"||f==="byauthor")&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"#F9FAFB",borderRadius:"6px",marginBottom:"-2px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:"#374151"},children:[e.jsx("input",{type:"checkbox",checked:m,onChange:w,style:{width:"16px",height:"16px",cursor:"pointer"}}),e.jsx("span",{children:"Show open issues only"})]}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",padding:"2px 8px",background:m?"#DCFCE7":"#FEF3C7",borderRadius:"10px",fontWeight:"600"},children:m?"Open only":"All issues"})]})]}),e.jsx(Ov,{isOpen:u,onClose:()=>g(!1)}),f==="dod"?e.jsx(Gv,{issues:c}):f==="byauthor"?e.jsx(Vv,{nonCompliantIssues:H}):e.jsxs(e.Fragment,{children:[e.jsx(yd,{value:r,onChange:l,placeholder:"Search issues by title, labels, assignees, epic, milestone, description...",onClear:()=>d(null)}),U&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Compliance Rate"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:U.complianceRate>=80?"#059669":U.complianceRate>=60?"#D97706":"#DC2626"},children:[U.complianceRate,"%"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[U.compliant," / ",U.total," issues"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Non-Compliant"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#DC2626"},children:U.nonCompliant}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Need attention"})]}),e.jsxs("div",{className:"card",onClick:()=>L("highSeverity"),style:{borderLeft:"4px solid #DC2626",cursor:"pointer",transform:a==="highSeverity"?"scale(0.98)":"scale(1)",boxShadow:a==="highSeverity"?"0 0 0 3px #DC262633":void 0,transition:"all 0.2s"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:["High Severity ",a==="highSeverity"&&"[Active]"]}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#DC2626"},children:U.highSeverity}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:a==="highSeverity"?"Click to clear filter":"Click to filter"})]}),e.jsxs("div",{className:"card",onClick:()=>L("mediumSeverity"),style:{borderLeft:"4px solid #D97706",cursor:"pointer",transform:a==="mediumSeverity"?"scale(0.98)":"scale(1)",boxShadow:a==="mediumSeverity"?"0 0 0 3px #D9770633":void 0,transition:"all 0.2s"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:["Medium Severity ",a==="mediumSeverity"&&"[Active]"]}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#D97706"},children:U.mediumSeverity}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:a==="mediumSeverity"?"Click to clear filter":"Click to filter"})]}),e.jsxs("div",{className:"card",onClick:()=>L("lowSeverity"),style:{borderLeft:"4px solid #6B7280",cursor:"pointer",transform:a==="lowSeverity"?"scale(0.98)":"scale(1)",boxShadow:a==="lowSeverity"?"0 0 0 3px rgba(107, 114, 128, 0.2)":void 0,transition:"all 0.2s"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:["Low Severity ",a==="lowSeverity"&&"[Active]"]}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#6B7280"},children:U.lowSeverity}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:a==="lowSeverity"?"Click to clear filter":"Click to filter"})]}),e.jsxs("div",{className:"card",onClick:()=>L("stale"),style:{borderLeft:"4px solid #9CA3AF",cursor:"pointer",transform:a==="stale"?"scale(0.98)":"scale(1)",boxShadow:a==="stale"?"0 0 0 3px rgba(156, 163, 175, 0.2)":void 0,transition:"all 0.2s"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:["Stale Issues ",a==="stale"&&"[Active]"]}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#6B7280"},children:U.staleIssues.total}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:a==="stale"?"Click to clear filter":`${U.staleIssues.critical} critical, ${U.staleIssues.warning} warning`})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F0F9FF",borderColor:"#3B82F6"},children:[e.jsxs("div",{onClick:j,style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:v?"0":"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1E40AF",margin:0},children:" Color Coding Guide"}),e.jsx("span",{style:{fontSize:"14px",color:"#1E40AF",transform:v?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.2s",display:"inline-block"},children:""})]}),!v&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#1E40AF",marginBottom:"8px"},children:"Compliance Score Calculation"}),e.jsxs("div",{style:{fontSize:"13px",color:"#1E3A8A",padding:"12px",background:"#DBEAFE",borderRadius:"6px",marginBottom:"4px",border:"1px solid #93C5FD"},children:[e.jsx("strong",{children:"Score = (Passed Criteria / Total Criteria)  100"}),e.jsx("div",{style:{marginTop:"8px",lineHeight:"1.5"},children:"Each issue is checked against all enabled quality criteria (assignee, weight, epic, description, labels, milestone, due date, priority, stale). The score reflects how many criteria the issue passes. For example, if 6 out of 9 criteria pass, the score is 67%."})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#1E40AF",marginBottom:"8px"},children:"Issue Card Backgrounds"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"24px",background:"#FEF2F2",border:"1px solid #FEE2E2",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"Red/pink background = Compliance score below 50% (critical)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"24px",background:"white",border:"1px solid #E5E7EB",borderRadius:"4px"}}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"White background = Compliance score 50% or above"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#1E40AF",marginBottom:"8px"},children:"Left Border Colors"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"4px",height:"24px",background:"#DC2626",borderRadius:"2px"}}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"Red = Score below 50%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"4px",height:"24px",background:"#D97706",borderRadius:"2px"}}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"Orange = Score 50-74%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"4px",height:"24px",background:"#2563EB",borderRadius:"2px"}}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"Blue = Score 75% or above"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#1E40AF",marginBottom:"8px"},children:"Violation Badges"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{padding:"4px 8px",background:"#FEE2E2",color:"#991B1B",fontSize:"11px",fontWeight:"500",borderRadius:"4px"},children:"HIGH"}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"High severity violations (red background)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{padding:"4px 8px",background:"#FEF3C7",color:"#92400E",fontSize:"11px",fontWeight:"500",borderRadius:"4px"},children:"MED"}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"Medium severity violations (yellow background)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{padding:"4px 8px",background:"#DBEAFE",color:"#1E40AF",fontSize:"11px",fontWeight:"500",borderRadius:"4px"},children:"LOW"}),e.jsx("span",{style:{fontSize:"13px",color:"#374151"},children:"Low severity violations (blue background)"})]})]})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F9FAFB"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Issue Quality Criteria"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"12px"},children:$.map(y=>{const C=a===y.key,I=U?.violationsByCriterion[y.key]||0;return e.jsxs("div",{onClick:()=>I>0&&L(y.key),style:{display:"flex",gap:"12px",padding:"12px",background:"white",borderRadius:"6px",border:C?`2px solid ${O(y.severity)}`:"1px solid #E5E7EB",cursor:I>0?"pointer":"default",opacity:I===0?.5:1,transform:C?"scale(0.98)":"scale(1)",boxShadow:C?`0 0 0 3px ${O(y.severity)}33`:void 0,transition:"all 0.2s"},children:[e.jsx("div",{style:{width:"8px",background:O(y.severity),borderRadius:"4px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:[y.name," ",C&&"[Active]"]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:y.description}),U&&e.jsxs("div",{style:{fontSize:"11px",color:I>0?"#DC2626":"#6B7280",marginTop:"6px",fontWeight:I>0?"600":"400"},children:[I," violation",I!==1?"s":"",I>0&&"  Click to filter"]})]})]},y.key)})})]}),a&&B.length>0&&e.jsxs("div",{style:{marginBottom:"20px",padding:"12px 16px",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:"Filtered by:"}),e.jsxs("span",{style:{padding:"4px 12px",background:"#E5E7EB",color:"#1F2937",borderRadius:"12px",fontSize:"13px",fontWeight:"600"},children:[a==="highSeverity"&&"High Severity",a==="mediumSeverity"&&"Medium Severity",a==="lowSeverity"&&"Low Severity",a==="stale"&&"Stale Issues",!["highSeverity","mediumSeverity","lowSeverity","stale"].includes(a)&&($.find(y=>y.key===a)?.name||a)]}),e.jsxs("span",{style:{fontSize:"13px",color:"#6B7280"},children:["(",B.length," ",B.length===1?"issue":"issues",")"]})]}),e.jsx("button",{onClick:()=>d(null),style:{padding:"4px 12px",background:"#E60000",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Clear Filter"})]}),B.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("h3",{className:"mb-2",children:H.length===0?"All Issues Compliant!":"No Issues in Selected Filter"}),e.jsx("p",{className:"text-muted",children:H.length===0?"All issues meet quality criteria. Great work!":"Try selecting a different severity filter."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:B.map(y=>{const C=y.violations.filter(P=>P.severity==="high"),I=y.violations.filter(P=>P.severity==="medium"),_=y.violations.filter(P=>P.severity==="low");return e.jsxs("div",{className:"card",style:{borderLeft:`4px solid ${y.complianceScore<50?"#DC2626":y.complianceScore<75?"#D97706":"#2563EB"}`,background:y.complianceScore<50?"#FEF2F2":"white"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#6B7280"},children:["#",y.iid]}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937",margin:0},children:y.title}),e.jsx("span",{style:{padding:"4px 8px",background:y.state==="opened"?"#DBEAFE":"#D1FAE5",color:y.state==="opened"?"#1E40AF":"#065F46",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"capitalize"},children:y.state}),y.staleStatus?.isStale&&e.jsxs("span",{style:{padding:"4px 8px",background:y.staleStatus.severity==="critical"?"#FEE2E2":"#FEF3C7",color:y.staleStatus.severity==="critical"?"#991B1B":"#92400E",borderRadius:"4px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[y.staleStatus.daysOpen," days open"]})]})}),e.jsxs("div",{style:{minWidth:"80px",textAlign:"center",padding:"8px 12px",background:y.complianceScore<50?"#DC262620":y.complianceScore<75?"#D9770620":"#2563EB20",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px"},children:"Score"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:y.complianceScore<50?"#DC2626":y.complianceScore<75?"#D97706":"#2563EB"},children:[y.complianceScore,"%"]})]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:["Violations (",y.violations.length,")"]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[C.map((P,X)=>e.jsxs("span",{style:{padding:"4px 12px",background:"#FEE2E2",color:"#991B1B",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:[P.name,P.criterion==="stale"&&P.daysOpen&&` (${P.daysOpen}d)`]},X)),I.map((P,X)=>e.jsxs("span",{style:{padding:"4px 12px",background:"#FEF3C7",color:"#92400E",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:[P.name,P.criterion==="stale"&&P.daysOpen&&` (${P.daysOpen}d)`]},X)),_.map((P,X)=>e.jsxs("span",{style:{padding:"4px 12px",background:"#DBEAFE",color:"#1E40AF",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:[P.name,P.criterion==="stale"&&P.daysOpen&&` (${P.daysOpen}d)`]},X))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"12px",padding:"12px",background:"#F9FAFB",borderRadius:"6px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"CREATED"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:new Date(y.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"UPDATED"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:new Date(y.updatedAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"AUTHOR"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:y.author?y.author.name:"Unknown"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"ASSIGNEES"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:y.assignees.length>0?y.assignees.map(P=>P.name).join(", "):"None"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"EPIC"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:y.epic?y.epic.title:"None"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"MILESTONE"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:y.milestone?y.milestone.title:"None"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"WEIGHT"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:y.weight||"Not set"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"DUE DATE"}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937"},children:y.dueDate?new Date(y.dueDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}):"Not set"})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:y.webUrl&&e.jsx("a",{href:y.webUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary",style:{fontSize:"13px",padding:"6px 12px",textDecoration:"none"},children:"View in GitLab "})})]},y.issueId)})}),H.length>0&&e.jsxs("div",{className:"card",style:{marginTop:"30px",background:"#EFF6FF",borderColor:"#BFDBFE"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1E40AF",marginBottom:"12px"},children:"Summary for Scrum Master"}),e.jsxs("div",{style:{fontSize:"14px",color:"#1E40AF",lineHeight:"1.6"},children:[e.jsxs("p",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:H.length})," issue(s) need attention to meet quality standards."]}),e.jsx("p",{style:{marginBottom:"12px"},children:"Top violations:"}),e.jsx("ul",{style:{marginLeft:"20px",marginBottom:"12px"},children:Object.entries(U.violationsByCriterion).sort((y,C)=>C[1]-y[1]).slice(0,5).filter(([y,C])=>C>0).map(([y,C])=>{const I=$.find(_=>_.key===y);return e.jsxs("li",{children:[e.jsxs("strong",{children:[I.name,":"]})," ",C," issues"]},y)})}),e.jsx("p",{style:{fontSize:"13px",color:"#1E40AF"},children:'Click "Export CSV Report" above to download the full report for review.'})]})]})]})]})}function Yv({issues:o}){const{filteredIssues:c}=qi(),[r,l]=W.useState("all"),[a,d]=W.useState(!1),[u,g]=W.useState(null),[f,x]=W.useState(!0),[m,b]=W.useState(""),[v,D]=W.useState("leadTime"),[j,w]=W.useState(()=>localStorage.getItem("cycleTime.bottleneckCollapsed")==="true"),H=()=>{w(y=>{const C=!y;return localStorage.setItem("cycleTime.bottleneckCollapsed",String(C)),C})},U=W.useMemo(()=>m?gg(c,m):c,[c,m]),{labelEventsMap:G,hasData:$}=rg(U);W.useEffect(()=>{async function y(){const C=Kt();if(!C){x(!1);return}const I=await ey(C.gitlabUrl,C.projectId,C.token);g(I),x(!1)}y()},[]);const B=W.useMemo(()=>{if(!U||U.length===0)return null;let y;return $&&G?(y=Yh(U,G),console.log("CycleTimeView: Using enhanced cycle time with label events:",{accurateCount:y.accurateCount,estimatedCount:y.estimatedCount})):y=Vh(U),{cycleTimeStats:y,phaseDistribution:qh(U),avgTimePerPhase:Uy(U),bottlenecks:Hy(U),leadTimeDistribution:Gy(U),controlChartData:Vy(U,v),detectedLabels:qy(U)}},[U,v,$,G]),M=W.useMemo(()=>!U||r==="all"?U:U.filter(y=>td(y).currentPhase===r),[U,r]),R=()=>{const y=Yy(U),C=new Date().toISOString().split("T")[0];Qy(y,`cycle-time-report-${C}.csv`)};if(!B)return e.jsx("div",{className:"container",children:e.jsx("div",{className:"card text-center",children:e.jsx("p",{children:"No data available"})})});U.filter(y=>y.state==="opened");const L=Object.entries(B.phaseDistribution).filter(([y])=>y!=="done"&&y!=="cancelled").reduce((y,[C,I])=>y+I.length,0),O=B.phaseDistribution.cancelled?.length||0;return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Cycle Time Analytics"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Issue lifecycle and workflow efficiency metrics"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>d(!a),children:" Detected Labels"}),e.jsx("button",{className:"btn btn-primary",onClick:R,children:" Export CSV"})]})]}),e.jsx(yd,{value:m,onChange:b,placeholder:"Search issues by title, labels, assignees, epic, milestone, description..."}),!f&&u&&e.jsx("div",{className:"card",style:{marginBottom:"30px",background:u.hasLabelHistory?"#D1FAE5":"#FEF3C7",borderColor:u.hasLabelHistory?"#10B981":"#F59E0B"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{fontSize:"24px"},children:u.hasLabelHistory?"":""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:u.hasLabelHistory?"#065F46":"#92400E",marginBottom:"4px"},children:u.hasLabelHistory?"GitLab Premium/Ultimate Detected":"GitLab Free/Community Edition Detected"}),e.jsx("p",{style:{fontSize:"12px",color:u.hasLabelHistory?"#065F46":"#92400E",margin:0},children:u.hasLabelHistory?" Label history API available - Precise cycle time tracking enabled":" Using estimated cycle times. Upgrade to Premium/Ultimate for exact label-change history and more accurate metrics."})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Avg Lead Time"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#3B82F6"},children:B.cycleTimeStats.avgLeadTime}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"days (created  closed)"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Avg Cycle Time"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#8B5CF6"},children:B.cycleTimeStats.avgCycleTime}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"days (work started  closed)"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Avg Wait Time"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#F59E0B"},children:B.cycleTimeStats.avgWaitTime}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"days in backlog"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Median Lead Time"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#3B82F6"},children:B.cycleTimeStats.medianLeadTime}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"days (50th percentile)"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Median Cycle Time"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#8B5CF6"},children:B.cycleTimeStats.medianCycleTime}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"days (50th percentile)"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Completed Issues"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#10B981"},children:B.cycleTimeStats.count}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"closed"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"In Progress"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#F59E0B"},children:L}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"currently active"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Cancelled"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#6B7280"},children:O}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"rejected/cancelled"})]})]}),a&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F0F9FF",borderColor:"#BFDBFE"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1E40AF"},children:" Detected Labels in Your Project"}),e.jsx("button",{onClick:()=>d(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6B7280"},children:""})]}),e.jsx("p",{style:{fontSize:"13px",color:"#1E40AF",marginBottom:"16px"},children:"Cycle time detection uses these labels to identify issue phases. If your labels don't match, the system will use fallback detection based on issue state."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:Object.entries(B.detectedLabels).map(([y,C])=>C.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1E40AF",marginBottom:"8px",textTransform:"capitalize"},children:[y," Labels"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:C.map(I=>e.jsx("span",{style:{padding:"4px 8px",background:"#DBEAFE",color:"#1E40AF",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:I},I))})]},y))})]}),B.bottlenecks.length>0&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#FEF3C7",borderColor:"#FCD34D"},children:[e.jsxs("div",{onClick:H,style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:j?"0":"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#92400E",margin:0},children:" Bottleneck Analysis"}),e.jsx("span",{style:{fontSize:"14px",color:"#92400E",transform:j?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.2s",display:"inline-block"},children:""})]}),!j&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:B.bottlenecks.map(y=>e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px",borderLeft:`4px solid ${y.severity==="high"?"#DC2626":y.severity==="medium"?"#F59E0B":"#3B82F6"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:Yn(y.phase)}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:y.reason})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1F2937"},children:y.count}),e.jsx("div",{style:{fontSize:"10px",color:"#6B7280"},children:"issues"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#F59E0B"},children:y.avgTimeInPhase}),e.jsx("div",{style:{fontSize:"10px",color:"#6B7280"},children:"avg days"})]})]})]}),(y.rootCauses?.length>0||y.recommendedActions?.length>0)&&e.jsxs("div",{style:{borderTop:"1px solid #E5E7EB",paddingTop:"12px",marginTop:"12px"},children:[y.rootCauses?.length>0&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"#92400E",marginBottom:"4px",textTransform:"uppercase"},children:" Likely Root Cause:"}),y.rootCauses.map((C,I)=>e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"2px"},children:[" ",C]},I))]}),y.recommendedActions?.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"#92400E",marginBottom:"4px",textTransform:"uppercase"},children:" Recommended Action:"}),y.recommendedActions.map((C,I)=>e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"2px"},children:[" ",C]},I))]})]})]},y.phase))})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Phase Distribution (Open Issues)"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},children:Object.entries(B.phaseDistribution).filter(([y])=>y!=="done"&&y!=="cancelled").map(([y,C])=>e.jsxs("div",{onClick:()=>l(r===y?"all":y),style:{padding:"16px",background:r===y?vi(y)+"20":"#F9FAFB",borderRadius:"8px",border:`2px solid ${r===y?vi(y):"#E5E7EB"}`,cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px",textTransform:"uppercase",fontWeight:"600"},children:Yn(y)}),e.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:vi(y)},children:C.length}),e.jsxs("div",{style:{fontSize:"10px",color:"#6B7280",marginTop:"4px"},children:[L>0?Math.round(C.length/L*100):0,"% of open"]})]},y))})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"Estimated Time Per Phase"}),e.jsx("p",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"16px"},children:"Based on closed issues (averages). Note: These are estimates without full label history."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:Object.entries(B.avgTimePerPhase).filter(([y])=>y!=="total").map(([y,C])=>e.jsxs("div",{style:{textAlign:"center",padding:"12px",background:"#F9FAFB",borderRadius:"6px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"#6B7280",marginBottom:"4px",textTransform:"uppercase"},children:Yn(y)}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:vi(y)},children:C}),e.jsx("div",{style:{fontSize:"10px",color:"#6B7280",marginTop:"2px"},children:"days avg"})]},y))})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600"},children:["Control Chart - ",v==="leadTime"?"Lead Time":"Cycle Time"," Trends"]}),e.jsxs("div",{style:{display:"flex",background:"#F3F4F6",borderRadius:"8px",padding:"4px"},children:[e.jsx("button",{onClick:()=>D("leadTime"),style:{padding:"6px 16px",background:v==="leadTime"?"white":"transparent",color:v==="leadTime"?"#1F2937":"#6B7280",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:v==="leadTime"?"600":"400",cursor:"pointer",boxShadow:v==="leadTime"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:"Lead Time"}),e.jsx("button",{onClick:()=>D("cycleTime"),style:{padding:"6px 16px",background:v==="cycleTime"?"white":"transparent",color:v==="cycleTime"?"#1F2937":"#6B7280",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:v==="cycleTime"?"600":"400",cursor:"pointer",boxShadow:v==="cycleTime"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:"Cycle Time"})]})]}),B.controlChartData.dataPoints.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",marginBottom:"20px",padding:"16px",background:"#F9FAFB",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Average"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937"},children:[B.controlChartData.average,"d"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Median (50th)"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#3B82F6"},children:[B.controlChartData.median,"d"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"85th Percentile"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#8B5CF6"},children:[B.controlChartData.percentile85,"d"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"95th Percentile"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#EF4444"},children:[B.controlChartData.percentile95,"d"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Std Dev"}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",color:"#6B7280"},children:[B.controlChartData.stdDev,"d"]})]})]}),e.jsxs("div",{style:{position:"relative",height:"450px",background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px"},children:[e.jsx("div",{style:{position:"absolute",left:"0",top:"20px",bottom:"70px",width:"50px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[B.controlChartData.upperControlLimit,B.controlChartData.percentile95,B.controlChartData.average,B.controlChartData.lowerControlLimit].map((y,C)=>e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",textAlign:"right",paddingRight:"8px"},children:[y,"d"]},C))}),e.jsxs("div",{style:{position:"absolute",left:"60px",right:"20px",top:"20px",bottom:"70px"},children:[[{value:B.controlChartData.upperControlLimit,color:"#EF4444",label:"Upper Control Limit",dash:!0},{value:B.controlChartData.percentile95,color:"#F59E0B",label:"95th %ile",dash:!1},{value:B.controlChartData.percentile85,color:"#8B5CF6",label:"85th %ile",dash:!1},{value:B.controlChartData.median,color:"#3B82F6",label:"Median",dash:!1},{value:B.controlChartData.average,color:"#10B981",label:"Average",dash:!1},{value:B.controlChartData.lowerControlLimit,color:"#EF4444",label:"Lower Control Limit",dash:!0}].map((y,C)=>{const I=Math.max(B.controlChartData.upperControlLimit,...B.controlChartData.dataPoints.map(P=>P.value)),_=100-y.value/I*100;return e.jsx("div",{style:{position:"absolute",left:0,right:0,top:`${_}%`,height:"1px",background:y.color,borderTop:y.dash?`2px dashed ${y.color}`:`1px solid ${y.color}`,opacity:.6},title:`${y.label}: ${y.value} days`},C)}),B.controlChartData.dataPoints.map((y,C)=>{const I=Math.max(B.controlChartData.upperControlLimit,...B.controlChartData.dataPoints.map(z=>z.value)),_=C/(B.controlChartData.dataPoints.length-1)*100,P=100-y.value/I*100,X=y.value>B.controlChartData.upperControlLimit||y.value<B.controlChartData.lowerControlLimit;return e.jsx("div",{onClick:()=>window.open(y.issue.web_url,"_blank"),style:{position:"absolute",left:`${_}%`,top:`${P}%`,width:"8px",height:"8px",borderRadius:"50%",background:X?"#EF4444":"#3B82F6",border:"2px solid white",cursor:"pointer",transform:"translate(-50%, -50%)",zIndex:10,transition:"transform 0.2s"},onMouseEnter:z=>{z.currentTarget.style.transform="translate(-50%, -50%) scale(1.5)"},onMouseLeave:z=>{z.currentTarget.style.transform="translate(-50%, -50%)"},title:`#${y.issue.iid}: ${y.issue.title}
${y.value} days (${y.dateStr})`},C)})]}),e.jsx("div",{style:{position:"absolute",left:"60px",right:"20px",bottom:"0px",height:"40px"},children:(()=>{const y=B.controlChartData.dataPoints;if(y.length===0)return null;const C=y[0].date,I=y[y.length-1].date,_=Math.ceil((I-C)/(1e3*60*60*24));let P="",X=1,z={};_<=7?(P="Daily View",X=1,z={month:"short",day:"numeric"}):_<=31?(P="Weekly View",X=Math.ceil(y.length/7),z={month:"short",day:"numeric"}):_<=90?(P="Monthly View",X=Math.ceil(y.length/12),z={month:"short",day:"numeric"}):_<=365?(P="Quarterly View",X=Math.ceil(y.length/16),z={month:"short",year:"numeric"}):(P="Yearly View",X=Math.ceil(y.length/20),z={month:"short",year:"numeric"});const T=[];T.push(e.jsx("div",{style:{position:"absolute",left:"0%",fontSize:"10px",color:"#6B7280",transform:"translateX(0)",whiteSpace:"nowrap"},children:y[0].date.toLocaleDateString("de-DE",z)},0));for(let N=X;N<y.length-1;N+=X){const K=N/(y.length-1)*100;T.push(e.jsx("div",{style:{position:"absolute",left:`${K}%`,fontSize:"10px",color:"#6B7280",transform:"translateX(-50%)",whiteSpace:"nowrap"},children:y[N].date.toLocaleDateString("de-DE",z)},N))}return T.push(e.jsx("div",{style:{position:"absolute",right:"0%",fontSize:"10px",color:"#6B7280",transform:"translateX(0)",whiteSpace:"nowrap",textAlign:"right"},children:y[y.length-1].date.toLocaleDateString("de-DE",z)},y.length-1)),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"relative",height:"18px",marginTop:"4px"},children:T}),e.jsxs("div",{style:{fontSize:"10px",color:"#9CA3AF",textAlign:"center",marginTop:"2px",fontStyle:"italic"},children:[P," (",_," days span)"]})]})})()})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px",marginTop:"16px",padding:"12px",background:"#F9FAFB",borderRadius:"8px",fontSize:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#3B82F6"}}),e.jsx("span",{style:{color:"#6B7280"},children:"Normal Issue"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#EF4444"}}),e.jsx("span",{style:{color:"#6B7280"},children:"Outlier (Outside Control Limits)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"20px",height:"2px",background:"#10B981"}}),e.jsx("span",{style:{color:"#6B7280"},children:"Average"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"20px",height:"2px",background:"#3B82F6"}}),e.jsx("span",{style:{color:"#6B7280"},children:"Median"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"20px",height:"2px",background:"#8B5CF6"}}),e.jsx("span",{style:{color:"#6B7280"},children:"85th Percentile"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"20px",height:"2px",background:"#F59E0B"}}),e.jsx("span",{style:{color:"#6B7280"},children:"95th Percentile"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"20px",height:"2px",borderTop:"2px dashed #EF4444"}}),e.jsx("span",{style:{color:"#6B7280"},children:"Control Limits (3)"})]})]})]}):e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:"Not enough closed issues to generate control chart"})]}),e.jsxs("div",{className:"card",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Lead Time Distribution (Closed Issues)"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(B.leadTimeDistribution).map(([y,C])=>{const I=Math.max(...Object.values(B.leadTimeDistribution)),_=I>0?C/I*100:0;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{minWidth:"90px",fontSize:"12px",color:"#6B7280"},children:y}),e.jsx("div",{style:{flex:1,height:"24px",background:"#F3F4F6",borderRadius:"4px",overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${_}%`,height:"100%",background:"#6B7280",transition:"width 0.3s"}})}),e.jsx("div",{style:{minWidth:"40px",fontSize:"14px",fontWeight:"600",color:"#1F2937",textAlign:"right"},children:C})]},y)})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600"},children:["Issue Lifecycle Details",r!=="all"&&` - ${Yn(r)}`]}),r!=="all"&&e.jsx("button",{onClick:()=>l("all"),className:"btn btn-secondary",style:{fontSize:"12px",padding:"4px 12px"},children:"Show All"})]}),e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#F9FAFB",borderBottom:"2px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Issue"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Phase"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Lead Time"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Cycle Time"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Time in Phase"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Assignees"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Updated"})]})}),e.jsx("tbody",{children:M.slice(0,50).map(y=>{const C=td(y);return e.jsxs("tr",{onClick:()=>window.open(y.web_url,"_blank"),style:{borderBottom:"1px solid #E5E7EB",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:I=>I.currentTarget.style.backgroundColor="#F9FAFB",onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:[e.jsx("td",{style:{padding:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:["#",C.iid]}),e.jsx("span",{style:{fontSize:"13px",color:"#1F2937"},children:C.title})]})}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"4px 8px",background:vi(C.currentPhase)+"20",color:vi(C.currentPhase),borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:Yn(C.currentPhase)})}),e.jsxs("td",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:"600",color:"#1F2937"},children:[C.leadTime,"d"]}),e.jsx("td",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:"600",color:"#8B5CF6"},children:C.cycleTime!==null?`${C.cycleTime}d`:"-"}),e.jsxs("td",{style:{padding:"12px",textAlign:"center",fontSize:"13px",color:"#6B7280"},children:[C.timeInCurrentPhase,"d"]}),e.jsx("td",{style:{padding:"12px",fontSize:"12px",color:"#6B7280"},children:C.assignees.length>0?C.assignees.map(I=>I.name).join(", "):"Unassigned"}),e.jsx("td",{style:{padding:"12px",fontSize:"12px",color:"#6B7280"},children:new Date(C.updatedAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]},y.id)})})]}),M.length>50&&e.jsxs("div",{style:{padding:"16px",textAlign:"center",fontSize:"12px",color:"#6B7280",background:"#F9FAFB"},children:["Showing first 50 of ",M.length," issues"]})]})]})]})}const $o="1.0.0";function vd(){return{gitlabUrl:"gitlab_url",gitlabToken:"gitlab_token",projectId:"gitlab_project",groupPath:"gitlab_group_path",filter2025:"gitlab_filter_2025",mode:"gitlab_mode",portfolioProjects:"portfolio_projects",activeProject:"active_project_id",projectGroups:"gitlab-pm-project-groups",portfolioGroups:"portfolio_groups",activeGroup:"active_group_id",risks:"project_risks",teamConfigBase:"gitlab_team_config",sprintCapacityBase:"gitlab_sprint_capacity",capacitySettingsBase:"gitlab_capacity_settings",absencesBase:"gitlab-pm-absences",stakeholders:"stakeholders",communicationHistory:"communication_history",communicationTemplates:"communication_templates",decisions:"decisions",documents:"documents",healthScoreConfig:"healthScoreConfig",criteriaConfig:"criteriaConfig",dodTemplates:"dodTemplates",sprintGoals:"sprint_goals",retroActions:"retro_actions",backlogHealthHistory:"backlogHealthHistory",userRole:"user_role",viewPreference:"view_preference",favoriteViews:"favorite_views",qualityShowOpenOnly:"quality.showOpenOnly",qualityLegendCollapsed:"quality.legendCollapsed",cycleTimeBottleneckCollapsed:"cycleTime.bottleneckCollapsed"}}function ra(o){const c={projectKeys:{},podKeys:{}};for(let r=0;r<localStorage.length;r++){const l=localStorage.key(r);if(l&&l.startsWith(o)){if(l===o)c.projectKeys.default=l;else if(l.startsWith(`${o}_pod_`)){const a=l.substring(`${o}_pod_`.length);c.podKeys[a]=l}else if(l.startsWith(`${o}_`)){const a=l.substring(o.length+1);a.startsWith("pod_")||(c.projectKeys[a]=l)}}}return c}function be(o){try{const c=localStorage.getItem(o);return c?JSON.parse(c):null}catch(c){return console.warn(`Failed to load ${o}:`,c),null}}function Me(o,c){try{return localStorage.setItem(o,JSON.stringify(c)),!0}catch(r){return console.error(`Failed to save ${o}:`,r),!1}}function Yc(o){return!o||o.length<8?"***":o.substring(0,4)+"***"+o.substring(o.length-4)}function Qv(o={}){const{includeTokens:c=!1,encrypt:r=!1,password:l=null}=o,a=vd(),d=[],u={},g=(T,N,K=null)=>{const te=be(N);te!==null&&(u[T]=K?K(te):te,d.push(T))},f=be(a.gitlabToken),x=be(a.gitlabUrl),m=be(a.projectId),b=be(a.groupPath),v=be(a.filter2025),D=be(a.mode);(f||x||m||b||v||D)&&(u.gitlabConfig={gitlabUrl:x,gitlabToken:c?f:f?Yc(f):null,projectId:m,groupPath:b,filter2025:v,mode:D},d.push("gitlabConfig"));const j=be(a.portfolioProjects);j&&(!c&&Array.isArray(j)?u.portfolioProjects=j.map(T=>({...T,token:T.token?Yc(T.token):null})):u.portfolioProjects=j,d.push("portfolioProjects")),g("activeProject",a.activeProject),g("projectGroups",a.projectGroups);const w=be(a.portfolioGroups);w&&(!c&&Array.isArray(w)?u.portfolioGroups=w.map(T=>({...T,token:T.token?Yc(T.token):null})):u.portfolioGroups=w,d.push("portfolioGroups")),g("activeGroup",a.activeGroup),g("risks",a.risks);const H=ra(a.teamConfigBase),U=ra(a.sprintCapacityBase),G=ra(a.capacitySettingsBase);if(Object.keys(H.projectKeys).length>0||Object.keys(H.podKeys).length>0||Object.keys(U.projectKeys).length>0||Object.keys(U.podKeys).length>0||Object.keys(G.projectKeys).length>0||Object.keys(G.podKeys).length>0){u.teamConfiguration={projectLevel:{teamConfigs:{},sprintCapacities:{},capacitySettings:{}},podLevel:{teamConfigs:{},sprintCapacities:{},capacitySettings:{}}},Object.entries(H.projectKeys).forEach(([K,te])=>{const q=be(te);q&&(u.teamConfiguration.projectLevel.teamConfigs[K]=q)}),Object.entries(H.podKeys).forEach(([K,te])=>{const q=be(te);q&&(u.teamConfiguration.podLevel.teamConfigs[K]=q)}),Object.entries(U.projectKeys).forEach(([K,te])=>{const q=be(te);q&&(u.teamConfiguration.projectLevel.sprintCapacities[K]=q)}),Object.entries(U.podKeys).forEach(([K,te])=>{const q=be(te);q&&(u.teamConfiguration.podLevel.sprintCapacities[K]=q)}),Object.entries(G.projectKeys).forEach(([K,te])=>{const q=be(te);q&&(u.teamConfiguration.projectLevel.capacitySettings[K]=q)}),Object.entries(G.podKeys).forEach(([K,te])=>{const q=be(te);q&&(u.teamConfiguration.podLevel.capacitySettings[K]=q)});const T=Object.keys(u.teamConfiguration.projectLevel.teamConfigs).length>0||Object.keys(u.teamConfiguration.projectLevel.sprintCapacities).length>0||Object.keys(u.teamConfiguration.projectLevel.capacitySettings).length>0,N=Object.keys(u.teamConfiguration.podLevel.teamConfigs).length>0||Object.keys(u.teamConfiguration.podLevel.sprintCapacities).length>0||Object.keys(u.teamConfiguration.podLevel.capacitySettings).length>0;T||N?d.push("teamConfiguration"):delete u.teamConfiguration}const B=ra(a.absencesBase);if(Object.keys(B.projectKeys).length>0||Object.keys(B.podKeys).length>0){u.absences={projectLevel:{},podLevel:{}},Object.entries(B.projectKeys).forEach(([K,te])=>{const q=be(te);q&&(u.absences.projectLevel[K]=q)}),Object.entries(B.podKeys).forEach(([K,te])=>{const q=be(te);q&&(u.absences.podLevel[K]=q)});const T=Object.keys(u.absences.projectLevel).length>0,N=Object.keys(u.absences.podLevel).length>0;T||N?d.push("absences"):delete u.absences}const R=be(a.stakeholders),L=be(a.communicationHistory),O=be(a.communicationTemplates),y=be(a.decisions),C=be(a.documents);(R||L||O||y||C)&&(u.stakeholderHub={stakeholders:R,communicationHistory:L,communicationTemplates:O,decisions:y,documents:C},d.push("stakeholderHub")),g("healthScoreConfig",a.healthScoreConfig),g("criteriaConfig",a.criteriaConfig),g("dodTemplates",a.dodTemplates),g("sprintGoals",a.sprintGoals),g("retroActions",a.retroActions),g("backlogHealthHistory",a.backlogHealthHistory),g("userRole",a.userRole),g("viewPreference",a.viewPreference),g("favoriteViews",a.favoriteViews);const I={},_=be(a.qualityShowOpenOnly),P=be(a.qualityLegendCollapsed),X=be(a.cycleTimeBottleneckCollapsed);return(_!==null||P!==null||X!==null)&&(I.qualityShowOpenOnly=_,I.qualityLegendCollapsed=P,I.cycleTimeBottleneckCollapsed=X,u.uiState=I,d.push("uiState")),{metadata:{version:$o,timestamp:new Date().toISOString(),appVersion:"1.0.0",backupType:r?"encrypted":"plain",includedData:d,tokensIncluded:c,itemCount:Object.keys(u).length},data:u}}function Xv(o,c=null){const l=`gitlab-pm-backup-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.json`,a=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),d=URL.createObjectURL(a),u=document.createElement("a");return u.href=d,u.download=c||l,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),c||l}async function Kv(o){return new Promise((c,r)=>{const l=new FileReader;l.onload=a=>{try{const d=JSON.parse(a.target.result);if(!d.metadata||!d.data){r(new Error("Invalid backup file structure"));return}d.metadata.version!==$o&&console.warn(`Backup version ${d.metadata.version} may not be fully compatible with current version ${$o}`),c(d)}catch(d){r(new Error("Failed to parse backup file: "+d.message))}},l.onerror=()=>{r(new Error("Failed to read file"))},l.readAsText(o)})}function Jv(o){const c={valid:!0,warnings:[],errors:[],info:{}};if(!o.metadata||!o.data)return c.valid=!1,c.errors.push("Invalid backup structure: missing metadata or data"),c;if(o.metadata.version!==$o&&c.warnings.push(`Backup version (${o.metadata.version}) differs from current version (${$o})`),!o.metadata.tokensIncluded){let r=!1;o.data.gitlabConfig&&o.data.gitlabConfig.gitlabToken&&o.data.gitlabConfig.gitlabToken.includes("***")&&(r=!0),o.data.portfolioProjects&&Array.isArray(o.data.portfolioProjects)&&o.data.portfolioProjects.some(l=>l.token&&l.token.includes("***"))&&(r=!0),o.data.portfolioGroups&&Array.isArray(o.data.portfolioGroups)&&o.data.portfolioGroups.some(l=>l.token&&l.token.includes("***"))&&(r=!0),r&&c.warnings.push("Access tokens are masked - you will need to re-enter them manually")}return c.info={createdAt:o.metadata.timestamp,itemCount:o.metadata.itemCount,includedData:o.metadata.includedData||[],backupAge:Math.floor((Date.now()-new Date(o.metadata.timestamp).getTime())/(1e3*60*60*24))+" days"},c}function Zv(o,c={}){const{overwrite:r=!0,merge:l=!1,selectiveRestore:a=null}=c,d=vd(),u={success:!0,restored:[],failed:[],skipped:[]};return(a||Object.keys(o.data)).forEach(f=>{const x=o.data[f];if(!x&&x!==!1&&x!==0&&x!==""){u.skipped.push(f);return}try{switch(f){case"gitlabConfig":r||!be(d.gitlabUrl)?(x.gitlabUrl&&Me(d.gitlabUrl,x.gitlabUrl),x.gitlabToken&&Me(d.gitlabToken,x.gitlabToken),x.projectId&&Me(d.projectId,x.projectId),x.groupPath&&Me(d.groupPath,x.groupPath),x.filter2025!==null&&x.filter2025!==void 0&&Me(d.filter2025,x.filter2025),x.mode&&Me(d.mode,x.mode),u.restored.push("gitlabConfig")):u.skipped.push("gitlabConfig (already exists)");break;case"portfolioProjects":if(r||!be(d.portfolioProjects))Me(d.portfolioProjects,x),u.restored.push("portfolioProjects");else if(l&&Array.isArray(x)){const D=[...be(d.portfolioProjects)||[],...x];Me(d.portfolioProjects,D),u.restored.push("portfolioProjects (merged)")}else u.skipped.push("portfolioProjects (already exists)");break;case"activeProject":(r||!be(d.activeProject))&&(Me(d.activeProject,x),u.restored.push("activeProject"));break;case"projectGroups":if(r||!be(d.projectGroups))Me(d.projectGroups,x),u.restored.push("projectGroups");else if(l&&Array.isArray(x)){const D=[...be(d.projectGroups)||[],...x];Me(d.projectGroups,D),u.restored.push("projectGroups (merged)")}else u.skipped.push("projectGroups (already exists)");break;case"portfolioGroups":if(r||!be(d.portfolioGroups))Me(d.portfolioGroups,x),u.restored.push("portfolioGroups");else if(l&&Array.isArray(x)){const D=[...be(d.portfolioGroups)||[],...x];Me(d.portfolioGroups,D),u.restored.push("portfolioGroups (merged)")}else u.skipped.push("portfolioGroups (already exists)");break;case"activeGroup":(r||!be(d.activeGroup))&&(Me(d.activeGroup,x),u.restored.push("activeGroup"));break;case"risks":(r||!be(d.risks))&&(Me(d.risks,x),u.restored.push("risks"));break;case"teamConfiguration":let m=0;x.projectLevel||x.podLevel?(x.projectLevel&&(x.projectLevel.teamConfigs&&Object.entries(x.projectLevel.teamConfigs).forEach(([v,D])=>{const j=v==="default"?d.teamConfigBase:`${d.teamConfigBase}_${v}`;(r||!be(j))&&(Me(j,D),m++)}),x.projectLevel.sprintCapacities&&Object.entries(x.projectLevel.sprintCapacities).forEach(([v,D])=>{const j=v==="default"?d.sprintCapacityBase:`${d.sprintCapacityBase}_${v}`;(r||!be(j))&&(Me(j,D),m++)}),x.projectLevel.capacitySettings&&Object.entries(x.projectLevel.capacitySettings).forEach(([v,D])=>{const j=v==="default"?d.capacitySettingsBase:`${d.capacitySettingsBase}_${v}`;(r||!be(j))&&(Me(j,D),m++)})),x.podLevel&&(x.podLevel.teamConfigs&&Object.entries(x.podLevel.teamConfigs).forEach(([v,D])=>{const j=`${d.teamConfigBase}_pod_${v}`;(r||!be(j))&&(Me(j,D),m++)}),x.podLevel.sprintCapacities&&Object.entries(x.podLevel.sprintCapacities).forEach(([v,D])=>{const j=`${d.sprintCapacityBase}_pod_${v}`;(r||!be(j))&&(Me(j,D),m++)}),x.podLevel.capacitySettings&&Object.entries(x.podLevel.capacitySettings).forEach(([v,D])=>{const j=`${d.capacitySettingsBase}_pod_${v}`;(r||!be(j))&&(Me(j,D),m++)}))):(x.teamConfigs&&Object.entries(x.teamConfigs).forEach(([v,D])=>{const j=v==="default"?d.teamConfigBase:`${d.teamConfigBase}_${v}`;(r||!be(j))&&(Me(j,D),m++)}),x.sprintCapacities&&Object.entries(x.sprintCapacities).forEach(([v,D])=>{const j=v==="default"?d.sprintCapacityBase:`${d.sprintCapacityBase}_${v}`;(r||!be(j))&&(Me(j,D),m++)}),x.capacitySettings&&Object.entries(x.capacitySettings).forEach(([v,D])=>{const j=v==="default"?d.capacitySettingsBase:`${d.capacitySettingsBase}_${v}`;(r||!be(j))&&(Me(j,D),m++)})),m>0&&u.restored.push(`teamConfiguration (${m} items)`);break;case"absences":let b=0;x.projectLevel||x.podLevel?(x.projectLevel&&Object.entries(x.projectLevel).forEach(([v,D])=>{const j=v==="default"?d.absencesBase:`${d.absencesBase}_${v}`;(r||!be(j))&&(Me(j,D),b++)}),x.podLevel&&Object.entries(x.podLevel).forEach(([v,D])=>{const j=`${d.absencesBase}_pod_${v}`;(r||!be(j))&&(Me(j,D),b++)})):Object.entries(x).forEach(([v,D])=>{const j=v==="default"?d.absencesBase:`${d.absencesBase}_${v}`;(r||!be(j))&&(Me(j,D),b++)}),b>0&&u.restored.push(`absences (${b} items)`);break;case"stakeholderHub":x.stakeholders&&(r||!be(d.stakeholders))&&(Me(d.stakeholders,x.stakeholders),u.restored.push("stakeholders")),x.communicationHistory&&(r||!be(d.communicationHistory))&&(Me(d.communicationHistory,x.communicationHistory),u.restored.push("communicationHistory")),x.communicationTemplates&&(r||!be(d.communicationTemplates))&&(Me(d.communicationTemplates,x.communicationTemplates),u.restored.push("communicationTemplates")),x.decisions&&(r||!be(d.decisions))&&(Me(d.decisions,x.decisions),u.restored.push("decisions")),x.documents&&(r||!be(d.documents))&&(Me(d.documents,x.documents),u.restored.push("documents"));break;case"healthScoreConfig":(r||!be(d.healthScoreConfig))&&(Me(d.healthScoreConfig,x),u.restored.push("healthScoreConfig"));break;case"criteriaConfig":(r||!be(d.criteriaConfig))&&(Me(d.criteriaConfig,x),u.restored.push("criteriaConfig"));break;case"dodTemplates":(r||!be(d.dodTemplates))&&(Me(d.dodTemplates,x),u.restored.push("dodTemplates"));break;case"sprintGoals":(r||!be(d.sprintGoals))&&(Me(d.sprintGoals,x),u.restored.push("sprintGoals"));break;case"retroActions":(r||!be(d.retroActions))&&(Me(d.retroActions,x),u.restored.push("retroActions"));break;case"backlogHealthHistory":(r||!be(d.backlogHealthHistory))&&(Me(d.backlogHealthHistory,x),u.restored.push("backlogHealthHistory"));break;case"userRole":(r||!be(d.userRole))&&(Me(d.userRole,x),u.restored.push("userRole"));break;case"viewPreference":(r||!be(d.viewPreference))&&(Me(d.viewPreference,x),u.restored.push("viewPreference"));break;case"favoriteViews":(r||!be(d.favoriteViews))&&(Me(d.favoriteViews,x),u.restored.push("favoriteViews"));break;case"uiState":x.qualityShowOpenOnly!==null&&x.qualityShowOpenOnly!==void 0&&Me(d.qualityShowOpenOnly,x.qualityShowOpenOnly),x.qualityLegendCollapsed!==null&&x.qualityLegendCollapsed!==void 0&&Me(d.qualityLegendCollapsed,x.qualityLegendCollapsed),x.cycleTimeBottleneckCollapsed!==null&&x.cycleTimeBottleneckCollapsed!==void 0&&Me(d.cycleTimeBottleneckCollapsed,x.cycleTimeBottleneckCollapsed),u.restored.push("uiState");break;default:u.skipped.push(f+" (unknown category)")}}catch(m){console.error(`Failed to restore ${f}:`,m),u.failed.push(f),u.success=!1}}),u}function e1(){const o=vd(),c={totalItems:0,categories:[],estimatedSize:0};return Object.entries(o).forEach(([r,l])=>{const a=be(l);if(a){c.totalItems++,c.categories.push(r);const d=JSON.stringify(a);c.estimatedSize+=d.length}}),c.estimatedSizeKB=Math.round(c.estimatedSize/1024),c}function t1(){const[o,c]=W.useState(!1),[r,l]=W.useState(null),[a,d]=W.useState(null),[u,g]=W.useState(null),[f,x]=W.useState(null),[m,b]=W.useState(null),[v,D]=W.useState(!1),j=W.useRef(null);Rh.useEffect(()=>{w()},[]);const w=()=>{const M=e1();l(M)},H=()=>{try{D(!0),b(null);const M=Qv({includeTokens:o}),R=Xv(M);d({filename:R,timestamp:M.metadata.timestamp,itemCount:M.metadata.itemCount,includedData:M.metadata.includedData,tokensIncluded:o}),w()}catch(M){b("Failed to create backup: "+M.message)}finally{D(!1)}},U=()=>{j.current?.click()},G=async M=>{const R=M.target.files?.[0];if(R)try{D(!0),b(null),x(null),g(null);const L=await Kv(R),O=Jv(L);if(x(O),!O.valid){b("Backup validation failed: "+O.errors.join(", "));return}window.__pendingBackup=L}catch(L){b("Failed to import backup: "+L.message)}finally{D(!1),M.target.value=""}},$=(M=!0)=>{try{D(!0),b(null);const R=window.__pendingBackup;if(!R){b("No backup loaded. Please import a backup file first.");return}const L=Zv(R,{overwrite:M});g(L),L.success&&(delete window.__pendingBackup,x(null),w(),setTimeout(()=>{window.confirm("Backup restored successfully! Refresh the page to apply changes?")&&window.location.reload()},500))}catch(R){b("Failed to restore backup: "+R.message)}finally{D(!1)}},B=()=>{delete window.__pendingBackup,x(null),g(null)};return e.jsxs("div",{className:"backup-restore-view",children:[e.jsxs("div",{className:"view-header",children:[e.jsx("h2",{children:"Backup & Restore"}),e.jsx("p",{className:"subtitle",children:"Export and import all your configurations to share with team members or backup your settings"})]}),m&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx("strong",{children:"Error:"})," ",m]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Current Data"}),r&&e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-label",children:"Total Categories"}),e.jsx("div",{className:"stat-value",children:r.totalItems})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-label",children:"Estimated Size"}),e.jsxs("div",{className:"stat-value",children:[r.estimatedSizeKB," KB"]})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-label",children:"Categories"}),e.jsx("div",{className:"stat-value-small",children:r.categories.join(", ")})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Export Backup"}),e.jsx("p",{children:"Create a backup file that can be shared with team members or stored for safekeeping."}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:o,onChange:M=>c(M.target.checked)}),"Include access tokens ( sensitive data)"]}),e.jsx("p",{className:"help-text",children:"By default, access tokens are masked for security. Enable this only if you need to share functional configurations with trusted team members."})]}),e.jsx("button",{className:"btn btn-primary",onClick:H,disabled:v,children:v?"Creating Backup...":"Export Backup"}),a&&e.jsxs("div",{className:"alert alert-success",style:{marginTop:"1rem"},children:[e.jsx("strong",{children:"Backup Created!"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 1rem"},children:[e.jsxs("li",{children:["File: ",a.filename]}),e.jsxs("li",{children:["Items: ",a.itemCount," categories"]}),e.jsxs("li",{children:["Tokens: ",a.tokensIncluded?"Included":"Masked"]}),e.jsxs("li",{children:["Time: ",new Date(a.timestamp).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Import Backup"}),e.jsx("p",{children:"Restore configurations from a backup file. This can overwrite existing data."}),e.jsx("input",{ref:j,type:"file",accept:".json",onChange:G,style:{display:"none"}}),e.jsx("button",{className:"btn btn-secondary",onClick:U,disabled:v,children:v?"Loading Backup...":"Select Backup File"}),f&&e.jsxs("div",{className:"validation-results",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:`alert ${f.valid?"alert-info":"alert-error"}`,children:[e.jsx("h4",{children:"Backup Validation"}),f.errors.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Errors:"}),e.jsx("ul",{children:f.errors.map((M,R)=>e.jsx("li",{children:M},R))})]}),f.warnings.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Warnings:"}),e.jsx("ul",{children:f.warnings.map((M,R)=>e.jsx("li",{children:M},R))})]}),f.info&&e.jsxs("div",{children:[e.jsx("strong",{children:"Backup Info:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Created: ",new Date(f.info.createdAt).toLocaleString()]}),e.jsxs("li",{children:["Age: ",f.info.backupAge]}),e.jsxs("li",{children:["Items: ",f.info.itemCount]}),e.jsxs("li",{children:["Categories: ",f.info.includedData.join(", ")]})]})]})]}),f.valid&&e.jsxs("div",{className:"restore-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>$(!0),disabled:v,children:"Restore & Overwrite"}),e.jsx("button",{className:"btn btn-secondary",onClick:B,disabled:v,children:"Cancel"}),e.jsx("p",{className:"help-text",children:'"Restore & Overwrite" will replace existing data with backup data.'})]})]}),u&&e.jsxs("div",{className:"alert alert-success",style:{marginTop:"1rem"},children:[e.jsx("h4",{children:"Restore Complete"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Restored: ",u.restored.join(", ")]}),u.skipped.length>0&&e.jsxs("li",{children:["Skipped: ",u.skipped.join(", ")]}),u.failed.length>0&&e.jsxs("li",{style:{color:"red"},children:["Failed: ",u.failed.join(", ")]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Team Collaboration"}),e.jsx("p",{children:e.jsx("strong",{children:"To share configurations with team members:"})}),e.jsxs("ol",{children:[e.jsx("li",{children:'Export a backup using the "Export Backup" button above'}),e.jsx("li",{children:"Share the downloaded JSON file with your team member (via email, Slack, etc.)"}),e.jsx("li",{children:"Team member opens the GitLab PM Dashboard in their browser"}),e.jsx("li",{children:'Team member imports the file using "Select Backup File"'}),e.jsx("li",{children:'Team member clicks "Restore & Overwrite" to apply your configurations'})]}),e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("strong",{children:"Important:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Access tokens are masked by default for security"}),e.jsx("li",{children:"Team members will need to enter their own GitLab access tokens after restore"}),e.jsx("li",{children:"Backup files contain all project configurations, team settings, and custom rules"}),e.jsx("li",{children:"Restoring will overwrite existing configurations"})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .backup-restore-view {
          padding: 1rem;
          max-width: 1000px;
        }

        .view-header {
          margin-bottom: 2rem;
        }

        .view-header h2 {
          margin: 0 0 0.5rem 0;
          font-size: 1.8rem;
        }

        .subtitle {
          color: #666;
          margin: 0;
        }

        .card {
          background: white;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1.5rem;
          margin-bottom: 1.5rem;
        }

        .card h3 {
          margin: 0 0 1rem 0;
          font-size: 1.3rem;
        }

        .card p {
          margin: 0 0 1rem 0;
          color: #666;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 1rem;
          margin-top: 1rem;
        }

        .stat-item {
          padding: 1rem;
          background: #f5f5f5;
          border-radius: 6px;
        }

        .stat-label {
          font-size: 0.85rem;
          color: #666;
          margin-bottom: 0.5rem;
        }

        .stat-value {
          font-size: 1.5rem;
          font-weight: bold;
          color: #333;
        }

        .stat-value-small {
          font-size: 0.9rem;
          color: #333;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          cursor: pointer;
        }

        .help-text {
          font-size: 0.85rem;
          color: #666;
          margin: 0.5rem 0 0 1.5rem;
        }

        .btn {
          padding: 0.6rem 1.2rem;
          border: none;
          border-radius: 6px;
          font-size: 0.95rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-primary {
          background: #1f77b4;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #155a8a;
        }

        .btn-secondary {
          background: #6c757d;
          color: white;
          margin-left: 0.5rem;
        }

        .btn-secondary:hover:not(:disabled) {
          background: #545b62;
        }

        .alert {
          padding: 1rem;
          border-radius: 6px;
          margin-bottom: 1rem;
        }

        .alert h4 {
          margin: 0 0 0.5rem 0;
        }

        .alert ul {
          margin: 0.5rem 0 0 1rem;
        }

        .alert-success {
          background: #d4edda;
          border: 1px solid #c3e6cb;
          color: #155724;
        }

        .alert-error {
          background: #f8d7da;
          border: 1px solid #f5c6cb;
          color: #721c24;
        }

        .alert-warning {
          background: #fff3cd;
          border: 1px solid #ffeeba;
          color: #856404;
        }

        .alert-info {
          background: #d1ecf1;
          border: 1px solid #bee5eb;
          color: #0c5460;
        }

        .restore-actions {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid #ddd;
        }

        .validation-results {
          border-top: 1px solid #ddd;
          padding-top: 1rem;
        }

        ol {
          margin: 0.5rem 0 1rem 1.5rem;
        }

        ol li {
          margin-bottom: 0.5rem;
        }
      `})]})}function n1({epics:o,issues:c}){const r=W.useMemo(()=>!o||o.length===0?[]:o.map(a=>{const d=a.issues||[],u=d.length,g=d.filter(b=>b.state==="opened").length,f=d.filter(b=>b.state==="closed").length,x=u>0?Math.round(f/u*100):0,m=i1({completionRate:x,openIssues:g,totalIssues:u,startDate:a.start_date,dueDate:a.end_date});return{...a,totalIssues:u,openIssues:g,closedIssues:f,completionRate:x,health:m}}).sort((a,d)=>a.state!==d.state?a.state==="opened"?-1:1:d.health.score-a.health.score),[o]),l=W.useMemo(()=>{if(r.length===0)return null;const a=r.filter(x=>x.state==="opened"),d=r.reduce((x,m)=>x+m.totalIssues,0),u=r.reduce((x,m)=>x+m.closedIssues,0),g=Math.round(r.reduce((x,m)=>x+m.completionRate,0)/r.length),f=Math.round(r.reduce((x,m)=>x+m.health.score,0)/r.length);return{totalEpics:r.length,openEpics:a.length,totalIssues:d,closedIssues:u,avgCompletion:g,avgHealth:f}},[r]);return!o||o.length===0?e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Epics Found"}),e.jsxs("p",{className:"text-muted",children:["Epic support requires GitLab Premium or Ultimate.",e.jsx("br",{}),"Configure your Group Path in settings to enable epic tracking."]})]})}):e.jsxs("div",{className:"container-fluid",children:[l&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Total Epics"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937"},children:l.totalEpics}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[l.openEpics," in progress"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Total Issues"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937"},children:l.totalIssues}),e.jsxs("div",{style:{fontSize:"12px",color:"#059669",marginTop:"4px"},children:[l.closedIssues," completed"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Avg. Completion"}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"600",color:"#2563EB"},children:[l.avgCompletion,"%"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Portfolio Health"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:Wo(l.avgHealth)},children:l.avgHealth}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:yg(l.avgHealth)})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:r.map(a=>e.jsxs("div",{className:"card",style:{borderLeft:`4px solid ${Wo(a.health.score)}`,opacity:a.state==="closed"?.7:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",margin:0},children:a.title}),e.jsx("span",{style:{padding:"4px 8px",background:a.state==="opened"?"#DBEAFE":"#D1FAE5",color:a.state==="opened"?"#1E40AF":"#065F46",borderRadius:"4px",fontSize:"12px",fontWeight:"600",textTransform:"capitalize"},children:a.state})]}),a.description&&e.jsxs("p",{style:{fontSize:"14px",color:"#6B7280",margin:"8px 0",lineHeight:"1.5"},children:[a.description.substring(0,200),a.description.length>200&&"..."]}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#6B7280",marginTop:"8px"},children:[a.start_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Start:"})," ",new Date(a.start_date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),a.end_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Due:"})," ",new Date(a.end_date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),a.web_url&&e.jsx("div",{children:e.jsx("a",{href:a.web_url,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB"},children:"View in GitLab "})})]})]}),e.jsxs("div",{style:{minWidth:"100px",textAlign:"center",padding:"12px",background:Wo(a.health.score)+"20",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Health"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:Wo(a.health.score)},children:a.health.score}),e.jsx("div",{style:{fontSize:"10px",color:"#6B7280",marginTop:"4px"},children:a.health.label})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Issues"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#1F2937"},children:a.totalIssues})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Open Issues"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#DC2626"},children:a.openIssues})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Closed Issues"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#059669"},children:a.closedIssues})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Completion"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2563EB"},children:[a.completionRate,"%"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"6px"},children:["Progress: ",a.closedIssues," / ",a.totalIssues," issues completed"]}),e.jsx("div",{style:{width:"100%",height:"12px",background:"#E5E7EB",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${a.completionRate}%`,height:"100%",background:Wo(a.health.score),transition:"width 0.3s ease"}})})]}),a.health.issues.length>0&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#FEF3C7",borderRadius:"8px",fontSize:"12px"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400E",marginBottom:"6px"},children:" Health Issues:"}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#78350F"},children:a.health.issues.map((d,u)=>e.jsx("li",{children:d},u))})]})]},a.id))})]})}function i1({completionRate:o,openIssues:c,totalIssues:r,startDate:l,dueDate:a}){let d=100;const u=[];if(o<30?(d-=30,u.push("Low completion rate (<30%)")):o<50?(d-=20,u.push("Below average completion rate")):o<70&&(d-=10),r>0){const g=c/r;g>.8?(d-=25,u.push("Most issues still open (>80%)")):g>.6&&(d-=15)}if(a){const g=new Date,f=new Date(a),x=l?new Date(l):null;if(f<g&&c>0)d-=30,u.push("Overdue with open issues");else if(x&&f){const m=f-x,v=(g-x)/m;v>.8&&o<60?(d-=20,u.push("Behind schedule (80% time, <60% complete)")):v>.5&&o<40&&(d-=15,u.push("Behind schedule (50% time, <40% complete)"))}}return d=Math.max(0,Math.min(100,d)),{score:Math.round(d),label:yg(d),issues:u}}function Wo(o){return o>=80?"#059669":o>=60?"#D97706":"#DC2626"}function yg(o){return o>=80?"Healthy":o>=60?"At Risk":"Critical"}function s1(o,c){if(!o||!c)return 10;const r=new Date(o),l=new Date(c);let a=0;const d=new Date(r);for(;d<=l;){const u=d.getDay();u!==0&&u!==6&&a++,d.setDate(d.getDate()+1)}return a}function Vi(o){if(o.weight&&o.weight>0)return o.weight;const c=o.labels?.find(r=>{const l=r.toLowerCase();return l.includes("weight")||l.includes("points")||l.includes("days")});if(c){const r=c.match(/\d+/);if(r)return parseInt(r[0],10)}return o.state==="closed"?0:o.labels?.some(r=>r.toLowerCase().includes("small"))?1:3}function o1(o,c=10){const r=new Map;return o.forEach(l=>{if(l.state==="closed")return;const a=Vi(l),d=l.assignees||[];if(d.length===0){r.has("Unassigned")||r.set("Unassigned",{name:"Unassigned",username:null,issues:[],totalWeight:0,capacity:0,utilizationPercent:0,status:"unassigned"});const u=r.get("Unassigned");u.issues.push(l),u.totalWeight+=a}else{const u=a/d.length;d.forEach(g=>{const f=g.username||g.name;r.has(f)||r.set(f,{name:g.name,username:g.username,avatar:g.avatar_url,issues:[],totalWeight:0,capacity:c,utilizationPercent:0,status:"ok"});const x=r.get(f);x.issues.push(l),x.totalWeight+=u})}}),r.forEach((l,a)=>{a!=="Unassigned"&&(l.utilizationPercent=Math.round(l.totalWeight/l.capacity*100),l.utilizationPercent>120?l.status="critical":l.utilizationPercent>100?l.status="overallocated":l.utilizationPercent>80?l.status="full":l.utilizationPercent<50?l.status="underutilized":l.status="ok")}),Array.from(r.values()).sort((l,a)=>{const d={critical:0,overallocated:1,full:2,ok:3,underutilized:4,unassigned:5};return d[l.status]!==d[a.status]?d[l.status]-d[a.status]:a.utilizationPercent-l.utilizationPercent})}function l1(o){const c=[],r=o.filter(d=>d.username&&(d.status==="critical"||d.status==="overallocated")),l=o.filter(d=>d.username&&d.status==="underutilized"),a=o.find(d=>d.name==="Unassigned");if(r.forEach(d=>{const u=d.totalWeight-d.capacity,g=l.filter(f=>f.capacity-f.totalWeight>=2);if(g.length>0){const f=g[0],x=f.capacity-f.totalWeight,m=d.issues.filter(D=>D.state==="opened").sort((D,j)=>Vi(D)-Vi(j)),b=[];let v=0;for(const D of m){const j=Vi(D);if(v+j<=Math.min(u,x)&&(b.push(D),v+=j),v>=u*.5)break}b.length>0&&c.push({type:"rebalance",priority:"high",from:d.name,to:f.name,issues:b,weight:v,reason:`${d.name} is ${d.utilizationPercent}% utilized (${Math.round(u)} days over). Move ${v} days to ${f.name} (${f.utilizationPercent}% utilized).`})}else c.push({type:"warning",priority:"high",person:d.name,weight:Math.round(d.totalWeight-d.capacity),reason:`${d.name} is overallocated by ${Math.round(d.totalWeight-d.capacity)} days (${d.utilizationPercent}% capacity). Consider reducing scope or extending timeline.`})}),a&&a.totalWeight>0){const d=o.filter(u=>u.username&&u.utilizationPercent<90).sort((u,g)=>u.utilizationPercent-g.utilizationPercent);d.length>0?a.issues.forEach(u=>{const g=Vi(u),f=d.find(x=>x.capacity-x.totalWeight>=g)||d[0];c.push({type:"assign",priority:"medium",to:f.name,toUsername:f.username,issues:[u],weight:g,reason:`Assign unassigned issue "${u.title}" (${g} days) to ${f.name} (${f.utilizationPercent}% utilized).`}),f.totalWeight+=g,f.utilizationPercent=Math.round(f.totalWeight/f.capacity*100)}):c.push({type:"warning",priority:"medium",weight:Math.round(a.totalWeight),reason:`${a.totalWeight} days of unassigned work. All team members are at capacity.`})}return l.forEach(d=>{d.utilizationPercent<30&&c.push({type:"info",priority:"low",person:d.name,capacity:Math.round(d.capacity-d.totalWeight),reason:`${d.name} has ${Math.round(d.capacity-d.totalWeight)} days available (${d.utilizationPercent}% utilized). Consider assigning more work.`})}),c.sort((d,u)=>{const g={high:0,medium:1,low:2};return g[d.priority]-g[u.priority]})}function Qc(o){switch(o){case"critical":return"#DC2626";case"overallocated":return"#D97706";case"full":return"#2563EB";case"ok":return"#059669";case"underutilized":return"#6B7280";case"unassigned":return"#9CA3AF";default:return"#6B7280"}}function a1(o){switch(o){case"critical":return" Critical";case"overallocated":return" Overallocated";case"full":return" At Capacity";case"ok":return" Healthy";case"underutilized":return" Underutilized";case"unassigned":return" Unassigned";default:return"Unknown"}}function r1(o){return{icon:{rebalance:"",assign:"",warning:"",info:""}[o.type]||"",...o}}function c1(o,c){if(!o.end_date)return null;const r=new Date,l=new Date(o.end_date),a=new Map;c.forEach(g=>{if(g.iteration?.start_date){const f=kt(g.labels,g.iteration);f&&!a.has(f)&&a.set(f,{name:f,startDate:new Date(g.iteration.start_date),dueDate:g.iteration.due_date?new Date(g.iteration.due_date):null})}});const d=Array.from(a.values()).filter(g=>g.startDate>r&&g.startDate<=l);if(d.length>0)return d.length;const u=Math.max(0,(l-r)/(1e3*60*60*24));return Math.max(0,Math.floor(u/14))}function d1(o,c){const r=c.filter(u=>u.state==="closed"&&u.closed_at);if(r.length===0)return 0;const l=new Map;r.forEach(u=>{const g=kt(u.labels,u.iteration);g&&(l.has(g)||l.set(g,{name:g,count:0,startDate:u.iteration?.start_date||null}),l.get(g).count++)});const a=Array.from(l.values()).filter(u=>u.startDate).sort((u,g)=>new Date(g.startDate)-new Date(u.startDate)).slice(0,3);return a.length===0?r.length:a.reduce((u,g)=>u+g.count,0)/a.length}function p1(o){if(!xa(o.labels))return 0;const c=new Date,r=new Date(o.updated_at),l=Math.ceil((c-r)/(1e3*60*60*24));return Math.max(0,l)}function u1(o){const c=new Map;return o.filter(r=>r.state==="opened").forEach(r=>{const l=r.assignees||[],a=Vi(r);l.forEach(d=>{c.has(d.username)||c.set(d.username,{name:d.name,username:d.username,totalWeight:0,issueCount:0});const u=c.get(d.username);u.totalWeight+=a/l.length,u.issueCount++})}),Array.from(c.values())}function vg(o,c,r=null){const l=c.filter(N=>N.state==="opened"),a=c.filter(N=>N.state==="closed"),d=c.length;if(d===0)return{status:"green",reason:"No issues in epic",severity:"healthy",factors:[],actions:[],projection:null};const u=a.length/d*100,g=l.length,f=c1(o,c),x=d1(o,c),m=f>0?g/f:g,b=m>0?x/m:1,v=l.filter(N=>xa(N.labels)),D=v.length,w=v.filter(N=>p1(N)>15).length,H=l.reduce((N,K)=>N+Vi(K),0);let U=0;if(r?.avgCycleTime){const N=r.avgCycleTime*g;U=N>0?(H-N)/N*100:0}const G=o.end_date?(new Date(o.end_date)-new Date)/(1e3*60*60*24):null,$=G!==null&&G<0&&l.length>0,B=l.length===0&&o.end_date&&a.some(N=>N.closed_at?new Date(N.closed_at)>new Date(o.end_date):!1),R=u1(c).filter(N=>N.totalWeight/10*100>120).length,L=[],O=[];if($&&(L.push({severity:"critical",category:"timeline",title:"Epic is overdue",description:`Due date ${new Date(o.end_date).toLocaleDateString()} has passed with ${l.length} issue${l.length>1?"s":""} still open`,impact:"Cannot deliver on committed timeline"}),O.push({priority:"critical",title:"Negotiate timeline extension",description:"Schedule stakeholder meeting to extend deadline",estimatedEffort:"1 day",impact:"Align expectations with reality"})),B){const N=a.filter(K=>K.closed_at?new Date(K.closed_at)>new Date(o.end_date):!1);L.push({severity:"warning",category:"timeline",title:"Epic completed late",description:`All issues closed but ${N.length} issue${N.length>1?"s":""} finished after due date ${new Date(o.end_date).toLocaleDateString()}`,impact:"Delivered late but complete"}),O.push({priority:"medium",title:"Review timeline planning",description:"Analyze why epic took longer than expected to improve future estimates",estimatedEffort:"1 day",impact:"Better planning for future epics"})}b<.7&&m>0&&(L.push({severity:"critical",category:"velocity",title:"Velocity crisis",description:`Need ${m.toFixed(1)} issues/iter, currently ${x.toFixed(1)} issues/iter (${(b*100).toFixed(0)}% of required)`,impact:`${Math.abs(f*(m-x)).toFixed(0)} issues short at current pace`}),O.push({priority:"critical",title:"Increase team capacity or reduce scope",description:`Option A: Add ${Math.ceil((m-x)/2)} developers. Option B: Reduce scope by ${Math.ceil(g*(1-b))} issues`,estimatedEffort:"1 week",impact:`Achieve required velocity of ${m.toFixed(1)} issues/iter`})),(w>0||D>=4)&&(L.push({severity:"critical",category:"blockers",title:`${D} blocked issues`,description:w>0?`${w} blocked for >15 days, ${D} total blocked`:`${D} issues currently blocked`,impact:`${(D/d*100).toFixed(0)}% of epic work is blocked`}),O.push({priority:"critical",title:"Executive escalation for blockers",description:`Escalate to CTO/VP level: ${v.slice(0,3).map(N=>`#${N.iid}`).join(", ")}`,estimatedEffort:"2 days",impact:`Unblock ${D} issues, potential +${(D/(f||1)).toFixed(1)} issues/iter`})),U<-40&&(L.push({severity:"critical",category:"estimation",title:"Severe underestimation",description:`Team estimated ${H} days, historical data suggests ${(H/(1+U/100)).toFixed(0)} days (${Math.abs(U).toFixed(0)}% variance)`,impact:"Estimates not grounded in reality"}),O.push({priority:"high",title:"Re-estimate with senior team",description:"Conduct estimation workshop with team leads and historical data",estimatedEffort:"1 day",impact:"Realistic timeline and scope expectations"})),f!==null&&f<1&&g>3&&(L.push({severity:"critical",category:"timeline",title:"Insufficient time remaining",description:`${g} issues remaining, less than 1 iteration left`,impact:"Mathematically impossible to complete"}),O.push({priority:"critical",title:"Emergency scope reduction",description:`Reduce to ${Math.ceil(x)} must-have issues, defer ${g-Math.ceil(x)} to next release`,estimatedEffort:"2 days",impact:"Deliver core value on time"})),u<30&&f!==null&&f<3&&(L.push({severity:"critical",category:"progress",title:"Critically behind schedule",description:`Only ${u.toFixed(0)}% complete with ${f} iterations left`,impact:"Epic has barely started with deadline approaching"}),O.push({priority:"critical",title:"Scope reduction or timeline extension",description:"Stakeholder decision needed: reduce scope by 60% OR extend deadline by 8 weeks",estimatedEffort:"1 day",impact:"Align scope with reality"})),b>=.7&&b<1&&m>0&&(L.push({severity:"warning",category:"velocity",title:"Velocity gap",description:`Need ${m.toFixed(1)} issues/iter, currently ${x.toFixed(1)} issues/iter (${(b*100).toFixed(0)}% of required)`,impact:`${(m-x).toFixed(1)} issues/iter shortfall`}),O.push({priority:"high",title:"Focus team and remove distractions",description:"Eliminate non-essential meetings, defer low-priority work on other epics",estimatedEffort:"1 day",impact:`Close velocity gap of ${(m-x).toFixed(1)} issues/iter`})),D>=2&&D<4&&(L.push({severity:"warning",category:"blockers",title:`${D} blocked issues`,description:`Issues: ${v.slice(0,2).map(N=>`#${N.iid}`).join(", ")}`,impact:"Slowing team progress"}),O.push({priority:"medium",title:"Escalate blockers to team leads",description:`Work with dependent teams to unblock: ${v.slice(0,2).map(N=>`#${N.iid} ${N.title.substring(0,30)}`).join(", ")}`,estimatedEffort:"2 days",impact:`Unblock ${D} issues`})),U<-20&&U>=-40&&(L.push({severity:"warning",category:"estimation",title:"Optimistic estimates",description:`Team estimated ${H} days, historical average suggests ${(H/(1+U/100)).toFixed(0)} days (${Math.abs(U).toFixed(0)}% lower than history)`,impact:"May need more time than planned"}),O.push({priority:"medium",title:"Add buffer to timeline",description:"Add 3-5 day buffer per remaining issue based on historical data",estimatedEffort:"1 day",impact:"Realistic expectations"})),f!==null&&f<=1.5&&g>0&&(L.push({severity:"warning",category:"timeline",title:"No schedule buffer",description:"Will finish in last iteration, no room for delays",impact:"Any setback will cause delay"}),O.push({priority:"medium",title:"Prevent scope creep",description:"Lock scope, defer all new requests to next release, close issues faster than starting new ones",estimatedEffort:"Ongoing",impact:"Protect timeline"})),u<50&&f!==null&&f<4&&f>=3&&(L.push({severity:"warning",category:"progress",title:"Behind schedule",description:`${u.toFixed(0)}% complete with ${f} iterations left`,impact:"Need to accelerate"}),O.push({priority:"high",title:"Accelerate closures",description:"Focus on closing in-progress issues before starting new work, identify quick wins",estimatedEffort:"Ongoing",impact:"Increase completion rate"})),R>=1&&(L.push({severity:"warning",category:"capacity",title:`${R} team member(s) overallocated`,description:"Team members at >120% capacity",impact:"Burnout risk, quality issues"}),O.push({priority:"medium",title:"Re-balance workload",description:"Move issues from overallocated to underutilized team members",estimatedEffort:"1 day",impact:"Sustainable pace, better quality"}));const y={critical:0,warning:1,info:2};L.sort((N,K)=>y[N.severity]-y[K.severity]);const C={critical:0,high:1,medium:2,low:3};O.sort((N,K)=>C[N.priority]-C[K.priority]);let I="green",_=`On track: ${x.toFixed(1)} issues/iter`,P="healthy";const X=L.some(N=>N.severity==="critical"),z=L.some(N=>N.severity==="warning");X?(I="red",P="critical",_=L.find(K=>K.severity==="critical").title):z?(I="amber",P="warning",_=L.find(K=>K.severity==="warning").title):m>0&&(_=`On track: ${x.toFixed(1)} issues/iter (need ${m.toFixed(1)})`);let T=null;if(f!==null&&x>0){const N=Math.ceil(g/x),K=N*2,te=new Date;te.setDate(te.getDate()+K*7);const q=G!==null?(te-new Date(o.end_date))/(1e3*60*60*24):null;T={date:te,iterationsNeeded:N,weeksNeeded:K,daysVariance:q,onTime:q!==null&&q<=0}}return{status:I,reason:_,severity:P,factors:L,actions:O,metrics:{progressPercent:u,remainingIssues:g,closedIssues:a.length,totalIssues:d,remainingIterations:f,currentVelocity:x,requiredVelocity:m,velocityRatio:b,blockedCount:D,totalWeight:H,weightVariance:U,daysUntilDue:G,overallocatedMembers:R},projection:T}}function bg(o){if(!o||o.length===0)return{avgCycleTime:7,medianCycleTime:5};const c=o.filter(d=>d.created_at&&d.closed_at).map(d=>{const u=new Date(d.created_at);return(new Date(d.closed_at)-u)/(1e3*60*60*24)}).filter(d=>d>0&&d<365);if(c.length===0)return{avgCycleTime:7,medianCycleTime:5};const r=c.reduce((d,u)=>d+u,0)/c.length,l=c.sort((d,u)=>d-u),a=l[Math.floor(l.length/2)];return{avgCycleTime:Math.round(r),medianCycleTime:Math.round(a)}}function x1(o){if(o.state==="closed")return 100;const c=Ws(o);return c==="testing"?85:c==="review"?70:c==="inProgress"?40:c==="todo"?5:0}function h1(o){if(!o)return"";const c=[`Status: ${o.status.toUpperCase()}`];return c.push(`Reason: ${o.reason}`),o.factors.length>0&&(c.push(""),c.push("Key Factors:"),o.factors.slice(0,2).forEach((r,l)=>{c.push(`${l+1}. ${r.title}`),c.push(`   ${r.description}`)})),c.join(`
`)}function g1({issues:o,epics:c,crossProjectData:r}){const[l,a]=W.useState(new Date().getFullYear()),[d,u]=W.useState([1,2,3,4]),[g,f]=W.useState(new Set),[x,m]=W.useState(new Set),[b,v]=W.useState(!0),[D,j]=W.useState([]),[w,H]=W.useState(new Map),U=(A,V)=>{if(!(V.ctrlKey||V.metaKey))u([A]);else if(d.includes(A)){if(d.length===1)return;A===Math.min(...d)?u(d.filter(ae=>ae!==A)):A===Math.max(...d)&&u(d.filter(ae=>ae!==A))}else{const ae=[...d,A].sort((xe,ze)=>xe-ze),re=Math.min(...ae),ue=Math.max(...ae),fe=[];for(let xe=re;xe<=ue;xe++)fe.push(xe);u(fe)}},G=()=>{u([1,2,3,4])},$=A=>{j(V=>V.includes(A)?V.filter(Q=>Q!==A):[...V,A])},B=()=>{j([])},M=A=>{H(V=>{const Q=new Map(V),ae=Q.get(A)||20;return Q.set(A,ae+10),Q})},R=W.useMemo(()=>{const A=Math.min(...d),V=Math.max(...d),Q=(A-1)*3,ae=V*3-1,re=new Date(l,Q,1);re.setHours(0,0,0,0);const ue=new Date(l,ae+1,0);return ue.setHours(23,59,59,999),{start:re,end:ue}},[l,d]),L=W.useMemo(()=>{const A=d.length;return A===4?"year":A>=2?"quarter":"month"},[d]),{epics:O,epicIssuesMap:y}=W.useMemo(()=>{if(!c||!o)return{epics:[],epicIssuesMap:new Map};const A=R.start,V=R.end,Q=new Map;return o.forEach(re=>{const ue=re.epic?.id;if(!ue)return;const fe=new Date(re.created_at),xe=re.due_date?new Date(re.due_date):null,ze=re.milestone?.due_date?new Date(re.milestone.due_date):null;(fe>=A&&fe<=V||xe&&xe>=A&&xe<=V||ze&&ze>=A&&ze<=V)&&(Q.has(ue)||Q.set(ue,[]),Q.get(ue).push(re))}),{epics:c.filter(re=>Q.has(re.id)).filter(re=>{if(re.start_date||re.end_date){const ue=re.start_date?new Date(re.start_date):null,fe=re.end_date?new Date(re.end_date):null;return ue&&ue>=A&&ue<=V||fe&&fe>=A&&fe<=V||ue&&fe&&ue<=V&&fe>=A}return!0}),epicIssuesMap:Q}},[c,o,R]),C=W.useMemo(()=>{const A=bg(o.filter(Q=>Q.state==="closed")),V=new Map;return O.forEach(Q=>{const ae=y.get(Q.id)||[],re=vg(Q,ae,A);V.set(Q.id,re)}),V},[O,y,o]),I=W.useMemo(()=>{const A=O.length,V=Array.from(C.values()).filter(ze=>ze.status==="red").length,Q=Array.from(C.values()).filter(ze=>ze.status==="amber").length,ae=Array.from(C.values()).filter(ze=>ze.status==="green").length,re=Array.from(y.values()).flat().length,ue=Array.from(y.values()).flat().filter(ze=>ze.state==="opened").length,fe=re-ue,xe=re>0?fe/re*100:0;return{total:A,red:V,amber:Q,green:ae,totalIssues:re,openIssues:ue,closedIssues:fe,overallProgress:xe}},[O,C,y]),_=W.useMemo(()=>{const A=new Set;return o.forEach(V=>{const Q=new Date(V.created_at).getFullYear();A.add(Q),V.due_date&&A.add(new Date(V.due_date).getFullYear())}),Array.from(A).sort((V,Q)=>Q-V)},[o]),P=A=>{const V=new Set(g);V.has(A)?V.delete(A):V.add(A),f(V)},X=A=>{const V=(y.get(A)||[]).map(ae=>({...ae,_isCrossProject:!1,_sourceProject:null}));let Q=[];return r&&r.epicToIssuesMap&&(Q=(r.epicToIssuesMap.get(A)||[]).filter(re=>!V.some(ue=>ue.id===re.id)).map(re=>({...re,_isCrossProject:!0,_sourceProject:re._projectName||re._projectId||"Other Project"}))),[...V,...Q].sort((ae,re)=>new Date(ae.created_at)-new Date(re.created_at))},z=A=>{const V=new Set(x);V.has(A)?V.delete(A):V.add(A),m(V)},T=A=>A==="red"?"#EF4444":A==="amber"?"#F59E0B":"#10B981",N=A=>A==="red"?"#FEE2E2":A==="amber"?"#FEF3C7":"#D1FAE5",K=A=>A==="red"?"Critical":A==="amber"?"At Risk":"On Track",te=(A,V)=>{if(!A||!V)return null;const Q=new Date(A),ae=new Date(V),{start:re,end:ue}=R,fe=(ue-re)/(1e3*60*60*24),xe=Math.max(0,(Q-re)/(1e3*60*60*24)),ze=(ae-Q)/(1e3*60*60*24);return{left:`${Math.min(100,xe/fe*100)}%`,width:`${Math.max(2,Math.min(100-xe/fe*100,ze/fe*100))}%`}},k=(()=>{const A=new Date;if(A.setHours(0,0,0,0),A<R.start||A>R.end)return null;const{start:V,end:Q}=R,ae=(Q-V)/(1e3*60*60*24);return`${(A-V)/(1e3*60*60*24)/ae*100}%`})();return O.length===0?e.jsxs("div",{className:"container-fluid",style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"4px"},children:"Executive Gantt Chart"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",margin:0},children:"Epic-level timeline with RAG status and risk analysis"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Year"}),e.jsx("select",{value:l,onChange:A=>a(parseInt(A.target.value)),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white",cursor:"pointer"},children:_.map(A=>e.jsx("option",{value:A,children:A},A))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Time Range"}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[[1,2,3,4].map(A=>{const V=d.includes(A);return e.jsxs("button",{onClick:Q=>U(A,Q),style:{padding:"8px 16px",background:V?"#3B82F6":"white",color:V?"white":"#374151",border:V?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:V?"600":"500",cursor:"pointer",transition:"all 0.15s",minWidth:"48px"},children:["Q",A]},A)}),e.jsx("button",{onClick:G,style:{padding:"8px 16px",background:d.length===4?"#10B981":"white",color:d.length===4?"white":"#374151",border:d.length===4?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:d.length===4?"600":"500",cursor:"pointer",transition:"all 0.15s"},children:"Full Year"})]})]})]})]}),e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Epics Found"}),e.jsx("p",{className:"text-muted",children:d.length===4?`No epics with work in ${l}. Try selecting a different year or time range.`:`No epics with work in ${l} Q${Math.min(...d)}${d.length>1?`-Q${Math.max(...d)}`:""}. Try selecting a different time range.`})]})]}):e.jsxs("div",{className:"container-fluid",style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"4px"},children:"Executive Gantt Chart"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",margin:0},children:"Epic-level timeline with RAG status and risk analysis"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Year"}),e.jsx("select",{value:l,onChange:A=>a(parseInt(A.target.value)),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",background:"white",cursor:"pointer"},children:_.map(A=>e.jsx("option",{value:A,children:A},A))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Time Range"}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[[1,2,3,4].map(A=>{const V=d.includes(A);return A===Math.min(...d)||Math.max(...d),d.length,e.jsxs("button",{onClick:Q=>U(A,Q),style:{padding:"8px 16px",background:V?"#3B82F6":"white",color:V?"white":"#374151",border:V?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:V?"600":"500",cursor:"pointer",transition:"all 0.15s",minWidth:"48px"},title:`Quarter ${A}`,children:["Q",A]},A)}),e.jsx("button",{onClick:G,style:{padding:"8px 16px",background:d.length===4?"#10B981":"white",color:d.length===4?"white":"#374151",border:d.length===4?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:d.length===4?"600":"500",cursor:"pointer",transition:"all 0.15s"},title:"View full year",children:"Full Year"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"600"},children:"Filter by Status"}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",maxWidth:"400px"},children:[["backlog","inProgress","review","testing","awaitingRelease","blocked","done"].map(A=>{const V=D.includes(A),Q=vi(A);return e.jsx("button",{onClick:()=>$(A),style:{padding:"6px 12px",background:V?Q:"white",color:V?"white":"#374151",border:V?"none":"1px solid #D1D5DB",borderRadius:"6px",fontSize:"11px",fontWeight:V?"600":"500",cursor:"pointer",transition:"all 0.15s",boxShadow:V?"0 1px 3px rgba(0,0,0,0.2)":"none"},title:`Filter ${Yn(A)} issues`,children:Yn(A)},A)}),D.length>0&&e.jsxs("button",{onClick:B,style:{padding:"6px 12px",background:"#EF4444",color:"white",border:"none",borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s"},title:"Clear all filters",children:["Clear (",D.length,")"]})]})]}),e.jsxs("button",{onClick:()=>v(!b),style:{padding:"8px 16px",background:b?"#3B82F6":"white",color:b?"white":"#1F2937",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",cursor:"pointer",marginTop:"20px"},children:[b?"":""," Executive Summary"]})]})]}),b&&e.jsxs("div",{className:"card",style:{marginBottom:"30px",background:"#F9FAFB",borderColor:"#E5E7EB"},children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:[l," ",d.length===4?"Portfolio Health":d.length===1?`Q${d[0]} Portfolio Health`:`Q${Math.min(...d)}-Q${Math.max(...d)} Portfolio Health`]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Epics"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1F2937"},children:I.total}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px",display:"flex",gap:"8px"},children:[e.jsxs("span",{style:{color:"#EF4444"},children:[" ",I.red]}),e.jsxs("span",{style:{color:"#F59E0B"},children:[" ",I.amber]}),e.jsxs("span",{style:{color:"#10B981"},children:[" ",I.green]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Issues"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1F2937"},children:I.totalIssues}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px"},children:[I.openIssues," open, ",I.closedIssues," closed"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Overall Progress"}),e.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1F2937"},children:[I.overallProgress.toFixed(0),"%"]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#E5E7EB",borderRadius:"3px",marginTop:"8px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${I.overallProgress}%`,height:"100%",background:"linear-gradient(90deg, #3B82F6, #10B981)",transition:"width 0.3s"}})})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"20px",overflow:"visible",position:"relative"},children:[k&&e.jsx("div",{style:{position:"absolute",left:`calc(350px + (100% - 350px) * ${parseFloat(k)/100})`,top:0,bottom:0,width:"2px",background:"#EF4444",zIndex:5,cursor:"help"},title:`Today: ${new Date().toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`,children:e.jsx("div",{style:{position:"absolute",top:"8px",left:"-18px",fontSize:"10px",color:"#EF4444",fontWeight:"600",whiteSpace:"nowrap",background:"white",padding:"2px 4px",borderRadius:"3px",border:"1px solid #EF4444",pointerEvents:"none"},children:" TODAY"})}),e.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #E5E7EB",paddingBottom:"4px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"350px",fontWeight:"600",fontSize:"12px",color:"#6B7280",textTransform:"uppercase"},children:"Epic"}),e.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[L==="year"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:["Q1","Q2","Q3","Q4"].map((A,V)=>e.jsxs("div",{style:{flex:1,textAlign:"center",borderRight:V<3?"1px dashed #D1D5DB":"none"},children:[A," ",l]},A))}),e.jsx("div",{style:{display:"flex",fontSize:"10px",color:"#9CA3AF",borderTop:"1px solid #E5E7EB",paddingTop:"4px"},children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((A,V)=>e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:V<11?"1px dotted #E5E7EB":"none",padding:"2px 0"},children:A},A))})]}),L==="quarter"&&(()=>{const A=(Math.min(...d)-1)*3,V=Math.max(...d)*3-1,Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ae=[];for(let fe=A;fe<=V;fe++)ae.push({name:Q[fe],index:fe});const re=[];let ue=new Date(R.start);for(;ue<=R.end;)re.push(new Date(ue)),ue.setDate(ue.getDate()+7);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",fontSize:"12px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:ae.map((fe,xe)=>e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:xe<ae.length-1?"1px dashed #D1D5DB":"none"},children:fe.name},fe.index))}),e.jsx("div",{style:{display:"flex",fontSize:"9px",color:"#9CA3AF",borderTop:"1px solid #E5E7EB",paddingTop:"4px"},children:re.map((fe,xe)=>e.jsxs("div",{style:{flex:1,textAlign:"center",borderRight:xe<re.length-1?"1px dotted #E5E7EB":"none",padding:"2px 0",fontSize:"9px"},title:fe.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),children:[fe.getDate(),"/",fe.getMonth()+1]},xe))})]})})(),L==="month"&&(()=>{const A=[];let V=new Date(R.start);for(;V<=R.end;)A.push(new Date(V)),V.setDate(V.getDate()+7);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",fontSize:"11px",color:"#6B7280",fontWeight:"600",marginBottom:"4px"},children:A.map((Q,ae)=>e.jsxs("div",{style:{flex:1,textAlign:"center",borderRight:ae<A.length-1?"1px dashed #D1D5DB":"none"},children:["Week ",ae+1]},ae))}),e.jsx("div",{style:{display:"flex",fontSize:"9px",color:"#9CA3AF",borderTop:"1px solid #E5E7EB",paddingTop:"4px"},children:A.map((Q,ae)=>e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:ae<A.length-1?"1px dotted #E5E7EB":"none",padding:"2px 0"},children:Q.toLocaleDateString("de-DE",{month:"short",day:"numeric"})},ae))})]})})()]})]}),O.map(A=>{const V=y.get(A.id)||[],Q=C.get(A.id),ae=g.has(A.id),re=te(A.start_date,A.end_date),ue=V.filter(ge=>ge.state==="opened"),fe=V.filter(ge=>ge.state==="closed"),xe=ue.filter(ge=>{const Be=Ws(ge);return Be==="inProgress"||Be==="review"||Be==="testing"}),ze=Q.metrics.progressPercent;return e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{width:"350px",paddingRight:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("button",{onClick:()=>P(A.id),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",padding:"0 4px",color:"#6B7280"},children:ae?"":""}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("a",{href:A.web_url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",textDecoration:"none"},onMouseEnter:ge=>ge.target.style.textDecoration="underline",onMouseLeave:ge=>ge.target.style.textDecoration="none",children:A.title}),e.jsx("div",{style:{padding:"2px 8px",background:N(Q.status),color:T(Q.status),borderRadius:"4px",fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap"},children:K(Q.status)})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:[fe.length,"/",V.length," closed"," | ",ue.length," open",xe.length>0&&` | ${xe.length} in progress`]})]})]})}),e.jsx("div",{style:{flex:1,position:"relative",height:"40px"},children:re&&e.jsxs("div",{style:{position:"absolute",left:re.left,width:re.width,height:"32px",background:"#E5E7EB",borderRadius:"6px",overflow:"hidden",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",border:`1px solid ${T(Q.status)}40`},onClick:()=>window.open(A.web_url,"_blank"),title:h1(Q),children:[e.jsx("div",{style:{width:`${ze}%`,height:"100%",background:`linear-gradient(90deg, ${T(Q.status)}, ${T(Q.status)}DD)`,transition:"width 0.3s ease"}}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("span",{style:{color:ze>30?"white":"#1F2937",fontSize:"12px",fontWeight:"600",textShadow:ze>30?"0 1px 2px rgba(0,0,0,0.3)":"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 8px"},children:[ze.toFixed(0),"%"]})})]})})]}),ae&&(()=>{const ge=X(A.id),Be=ge.filter(Ae=>!Ae._isCrossProject).length,Je=ge.filter(Ae=>Ae._isCrossProject).length;return e.jsxs("div",{style:{marginTop:"12px",marginLeft:"32px",paddingLeft:"16px",borderLeft:"2px solid #E5E7EB"},children:[Je>0&&e.jsxs("div",{style:{padding:"8px 12px",background:"#EFF6FF",border:"1px solid #BFDBFE",borderRadius:"6px",marginBottom:"12px",fontSize:"12px",color:"#1E40AF"},children:[e.jsxs("strong",{children:[" Showing ",Be," local + ",Je," cross-project issues"]}),e.jsx("div",{style:{fontSize:"11px",color:"#3B82F6",marginTop:"2px"},children:"Cross-project issues are highlighted with a blue left border"})]}),(()=>{const Ae=D.length===0?ge:ge.filter(De=>D.includes(Ws(De))),Ye=w.get(A.id)||20,pe=Ae.slice(0,Ye),Qe=Ae.length>Ye;return e.jsxs(e.Fragment,{children:[pe.map(De=>{const jt=x1(De),Z=te(De.created_at,De.due_date||De.milestone?.due_date||A.end_date),we=Ws(De),At=vi(we);return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px 0",paddingLeft:De._isCrossProject?"12px":"0",borderBottom:"1px solid #F3F4F6",borderLeft:De._isCrossProject?"4px solid #3B82F6":"none",background:De._isCrossProject?"#F0F9FF":"transparent",marginLeft:De._isCrossProject?"-12px":"0",borderRadius:De._isCrossProject?"4px":"0"},children:[e.jsxs("div",{style:{width:"318px",paddingRight:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsxs("a",{href:De.web_url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"12px",color:De.state==="closed"?"#6B7280":"#1F2937",textDecoration:"none",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},onMouseEnter:pn=>pn.target.style.textDecoration="underline",onMouseLeave:pn=>pn.target.style.textDecoration="none",children:["#",De.iid," ",De.title]}),De._isCrossProject&&e.jsx("span",{style:{fontSize:"9px",padding:"2px 5px",background:"#3B82F6",color:"white",borderRadius:"3px",fontWeight:"600",whiteSpace:"nowrap"},title:`From: ${De._sourceProject}`,children:De._sourceProject})]}),e.jsxs("div",{style:{fontSize:"10px",color:"#6B7280"},children:[De.assignees?.[0]?.name||"Unassigned","  ",e.jsx("span",{style:{color:At,fontWeight:"600"},children:Yn(we)})]})]}),e.jsx("div",{style:{flex:1,position:"relative",height:"24px"},children:Z&&e.jsxs("div",{style:{position:"absolute",left:Z.left,width:Z.width,height:"20px",background:"#F3F4F6",borderRadius:"4px",overflow:"hidden",cursor:"pointer",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:`1px solid ${At}40`},onClick:()=>window.open(De.web_url,"_blank"),title:`${De.title} - ${jt}% complete`,children:[e.jsx("div",{style:{width:`${jt}%`,height:"100%",background:At,transition:"width 0.3s ease"}}),jt>20&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("span",{style:{color:jt>30?"white":"#1F2937",fontSize:"10px",fontWeight:"600",textShadow:jt>30?"0 1px 2px rgba(0,0,0,0.3)":"none"},children:[jt,"%"]})})]})})]},De.id)}),Qe&&e.jsxs("button",{onClick:()=>M(A.id),style:{width:"100%",padding:"12px",marginTop:"8px",background:"#F3F4F6",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:"#3B82F6",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:De=>{De.currentTarget.style.background="#E5E7EB",De.currentTarget.style.borderColor="#3B82F6"},onMouseLeave:De=>{De.currentTarget.style.background="#F3F4F6",De.currentTarget.style.borderColor="#D1D5DB"},children:["Load +10 More Issues (",Ae.length-Ye," remaining)"]})]})})()]})})(),ae&&Q.factors.length>0&&e.jsxs("div",{style:{marginTop:"12px",marginLeft:"32px"},children:[e.jsxs("button",{onClick:()=>z(A.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"600",color:"#1F2937",width:"100%",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px"},children:""}),e.jsx("span",{children:"Analysis & Recommendations"}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:"400",color:"#6B7280"},children:["(",Q.factors.length," factors, ",Q.actions.length," actions)"]})]}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:x.has(A.id)?"":""})]}),x.has(A.id)&&e.jsxs("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"6px",padding:"16px",marginTop:"12px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937",margin:0},children:["Why ",K(Q.status),"?"]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#6B7280",marginBottom:"8px"},children:[" Primary Issue: ",Q.reason]}),Q.factors.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#6B7280",marginTop:"12px",marginBottom:"8px"},children:" Contributing Factors:"}),Q.factors.slice(0,3).map((ge,Be)=>e.jsxs("div",{style:{padding:"10px",background:"white",borderLeft:`3px solid ${ge.severity==="critical"?"#EF4444":"#F59E0B"}`,borderRadius:"4px",marginBottom:"8px"},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:[Be+1,". [",ge.severity==="critical"?" Critical":" Medium","] ",ge.title]}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px"},children:ge.description}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",fontStyle:"italic"},children:["Impact: ",ge.impact]})]},Be))]})]}),Q.actions.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#6B7280",marginBottom:"8px"},children:" Recommended Actions:"}),Q.actions.slice(0,3).map((ge,Be)=>e.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"4px",marginBottom:"8px",borderLeft:`3px solid ${ge.priority==="critical"?"#EF4444":ge.priority==="high"?"#F59E0B":"#3B82F6"}`},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#1F2937",marginBottom:"4px"},children:[ge.priority==="critical"?" [Critical]":ge.priority==="high"?" [High]":" [Medium]"," ",ge.title]}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px"},children:ge.description}),e.jsxs("div",{style:{fontSize:"10px",color:"#6B7280"},children:["Effort: ",ge.estimatedEffort,"  Impact: ",ge.impact]})]},Be))]}),Q.projection&&e.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:Q.projection.onTime?"#D1FAE5":"#FEE2E2",borderRadius:"4px"},children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:Q.projection.onTime?"#065F46":"#991B1B"},children:[" Projection: ",Q.projection.onTime?"On time":`${Math.abs(Math.round(Q.projection.daysVariance))} days late`]}),e.jsxs("div",{style:{fontSize:"11px",color:Q.projection.onTime?"#065F46":"#991B1B",marginTop:"2px"},children:["Expected completion: ",Q.projection.date.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})," (",Q.projection.iterationsNeeded," iterations at current velocity)"]})]})]})]}),!1]},A.id)})]})]})}function f1({epics:o,issues:c}){const[r,l]=W.useState(""),[a,d]=W.useState("current"),u=W.useMemo(()=>{const v=new Set,D=new Date,j=`Q${Math.floor(D.getMonth()/3)+1} ${D.getFullYear()}`;return v.add(j),o.forEach(w=>{if(w.start_date||w.due_date||w.end_date){const H=new Date(w.start_date||w.due_date||w.end_date),U=`Q${Math.floor(H.getMonth()/3)+1} ${H.getFullYear()}`;v.add(U)}}),Array.from(v).sort((w,H)=>{const[U,G]=w.split(" "),[$,B]=H.split(" "),M=parseInt(U.substring(1)),R=parseInt($.substring(1));return B!==G?parseInt(B)-parseInt(G):R-M})},[o]),g=W.useMemo(()=>o.map(v=>{const D=v.issues||[],j=D.length,w=D.filter(O=>O.state==="closed").length,H=j>0?Math.round(w/j*100):0,U=new Set;D.forEach(O=>{if(O.iteration){const y=typeof O.iteration=="object"?O.iteration.title:O.iteration;y&&U.add(y)}});let G="green",$=[];const B=new Date,M=v.due_date||v.end_date;if(M){const O=new Date(M),y=Math.floor((O-B)/(1e3*60*60*24));v.state==="opened"&&(y<0?(G="red",$.push(`Overdue by ${Math.abs(y)} days`)):y<14&&H<80&&(G=G==="red"?"red":"amber",$.push(`Due in ${y} days, only ${H}% complete`)))}H<30&&v.state==="opened"&&(G=G==="red"?"red":"amber",$.push(`Low completion rate: ${H}%`));const R=D.filter(O=>O.labels?.some(y=>y.toLowerCase().includes("block"))).length;R>0&&(G=G==="red"?"red":"amber",$.push(`${R} blocked issue${R>1?"s":""}`));let L=null;if(v.start_date||v.due_date||v.end_date){const O=new Date(v.start_date||v.due_date||v.end_date);L=`Q${Math.floor(O.getMonth()/3)+1} ${O.getFullYear()}`}return{...v,totalIssues:j,closedIssues:w,completionRate:H,iterations:Array.from(U).sort(),rag:G,ragReason:$.length>0?$:["On track"],quarter:L,blockedIssues:R}}).sort((v,D)=>{const j={red:0,amber:1,green:2};return j[v.rag]!==j[D.rag]?j[v.rag]-j[D.rag]:v.completionRate-D.completionRate}),[o]),f=W.useMemo(()=>{let v=g;if(a!=="all")if(a==="current"){const D=new Date,j=`Q${Math.floor(D.getMonth()/3)+1} ${D.getFullYear()}`;v=v.filter(w=>w.quarter===j)}else v=v.filter(D=>D.quarter===a);return r&&(v=Nv(v,r)),v},[g,a,r]),x=W.useMemo(()=>{const v={red:0,amber:0,green:0,total:f.length};return f.forEach(D=>{v[D.rag]++}),v},[f]),m=v=>{switch(v){case"red":return"#DC2626";case"amber":return"#D97706";case"green":return"#059669";default:return"#6B7280"}},b=()=>{const v=R0(f),D=new Date().toISOString().split("T")[0];Bn(v,`quarterly-epic-tracker-${a}-${D}.csv`)};return!o||o.length===0?e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Epics Found"}),e.jsxs("p",{className:"text-muted",children:["Epic support requires GitLab Premium/Ultimate.",e.jsx("br",{}),"Configure your Group Path in settings to enable epic tracking."]})]})}):e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Quarterly Epic Tracker"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Track key epics per quarter with RAG status and iteration progress"})]}),f.length>0&&e.jsxs("button",{className:"btn btn-primary",onClick:b,children:[" Export CSV (",f.length," epics)"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap"},children:[e.jsx("button",{className:`btn ${a==="current"?"btn-primary":"btn-secondary"}`,onClick:()=>d("current"),children:"Current Quarter"}),u.map(v=>e.jsx("button",{className:`btn ${a===v?"btn-primary":"btn-secondary"}`,onClick:()=>d(v),children:v},v)),e.jsx("button",{className:`btn ${a==="all"?"btn-primary":"btn-secondary"}`,onClick:()=>d("all"),children:"All Quarters"})]}),e.jsx(yd,{value:r,onChange:l,placeholder:"Search epics by title, labels, description..."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Total Epics"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#1F2937"},children:x.total}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:a==="current"?"This quarter":a})]}),e.jsxs("div",{className:"card",style:{borderLeft:"4px solid #DC2626"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:" Red"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#DC2626"},children:x.red}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"Critical attention needed"})]}),e.jsxs("div",{className:"card",style:{borderLeft:"4px solid #D97706"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:" Amber"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#D97706"},children:x.amber}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"At risk, needs monitoring"})]}),e.jsxs("div",{className:"card",style:{borderLeft:"4px solid #059669"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:" Green"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"600",color:"#059669"},children:x.green}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"On track"})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:f.length===0?e.jsxs("div",{className:"card text-center",style:{padding:"40px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Epics Found"}),e.jsx("p",{className:"text-muted",children:r?"Try a different search term":`No epics for ${a}`})]}):f.map(v=>e.jsxs("div",{className:"card",style:{borderLeft:`6px solid ${m(v.rag)}`,opacity:v.state==="closed"?.7:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",margin:0},children:v.title}),e.jsx("span",{style:{padding:"4px 8px",background:v.state==="opened"?"#DBEAFE":"#D1FAE5",color:v.state==="opened"?"#1E40AF":"#065F46",borderRadius:"4px",fontSize:"12px",fontWeight:"600",textTransform:"capitalize"},children:v.state})]}),v.description&&e.jsxs("p",{style:{fontSize:"14px",color:"#6B7280",margin:"8px 0",lineHeight:"1.5"},children:[v.description.substring(0,200),v.description.length>200&&"..."]}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#6B7280",marginTop:"8px"},children:[v.quarter&&e.jsxs("div",{children:[e.jsx("strong",{children:"Quarter:"})," ",v.quarter]}),v.start_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Start:"})," ",new Date(v.start_date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),(v.due_date||v.end_date)&&e.jsxs("div",{children:[e.jsx("strong",{children:"Due:"})," ",new Date(v.due_date||v.end_date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),v.web_url&&e.jsx("div",{children:e.jsx("a",{href:v.web_url,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB"},children:"View in GitLab "})})]})]}),e.jsxs("div",{style:{minWidth:"120px",textAlign:"center",padding:"16px",background:m(v.rag)+"20",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"RAG Status"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:m(v.rag)},children:v.rag==="red"?"":v.rag==="amber"?"":""}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:m(v.rag),textTransform:"uppercase"},children:v.rag})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Completion"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2563EB"},children:[v.completionRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Issues"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#1F2937"},children:v.totalIssues})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Completed"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#059669"},children:v.closedIssues})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Iterations"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:v.iterations.length>0?v.iterations.join(", "):"None"})]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"6px"},children:["Progress: ",v.closedIssues," / ",v.totalIssues," issues completed"]}),e.jsx("div",{style:{width:"100%",height:"12px",background:"#E5E7EB",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${v.completionRate}%`,height:"100%",background:m(v.rag),transition:"width 0.3s ease"}})})]}),e.jsxs("div",{style:{padding:"12px",background:m(v.rag)+"15",borderRadius:"8px",fontSize:"13px"},children:[e.jsx("div",{style:{fontWeight:"600",color:m(v.rag),marginBottom:"6px"},children:"Status Details:"}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:"#1F2937"},children:v.ragReason.map((D,j)=>e.jsx("li",{children:D},j))})]})]},v.id))})]})}function m1({epics:o,issues:c,crossProjectData:r}){const[l,a]=W.useState("portfolio");return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Epic Management"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Manage epics across portfolio, timeline, and quarterly views"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",borderBottom:"2px solid #E5E7EB",marginBottom:"24px"},children:[e.jsx("button",{onClick:()=>a("portfolio"),style:{padding:"12px 24px",background:l==="portfolio"?"white":"transparent",border:"none",borderBottom:l==="portfolio"?"3px solid #E60000":"3px solid transparent",fontSize:"14px",fontWeight:l==="portfolio"?"600":"500",color:l==="portfolio"?"#E60000":"#6B7280",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:"Portfolio"}),e.jsx("button",{onClick:()=>a("timeline"),style:{padding:"12px 24px",background:l==="timeline"?"white":"transparent",border:"none",borderBottom:l==="timeline"?"3px solid #E60000":"3px solid transparent",fontSize:"14px",fontWeight:l==="timeline"?"600":"500",color:l==="timeline"?"#E60000":"#6B7280",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:"Timeline"}),e.jsx("button",{onClick:()=>a("quarterly"),style:{padding:"12px 24px",background:l==="quarterly"?"white":"transparent",border:"none",borderBottom:l==="quarterly"?"3px solid #E60000":"3px solid transparent",fontSize:"14px",fontWeight:l==="quarterly"?"600":"500",color:l==="quarterly"?"#E60000":"#6B7280",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:"Quarterly"})]}),e.jsxs("div",{children:[l==="portfolio"&&e.jsx(n1,{epics:o,issues:c,crossProjectData:r}),l==="timeline"&&e.jsx(g1,{epics:o,issues:c,crossProjectData:r}),l==="quarterly"&&e.jsx(f1,{epics:o,issues:c,crossProjectData:r})]})]})}function y1({epics:o,issues:c}){const[r,l]=W.useState(null),[a,d]=W.useState("all"),u=W.useMemo(()=>{if(!o||!c)return[];const v=bg(c.filter(j=>j.state==="closed"));return o.map(j=>{const w=c.filter(U=>U.epic?.id===j.id),H=vg(j,w,v);return{epic:j,issues:w,...H}}).sort((j,w)=>{const H={red:0,amber:1,green:2};return H[j.status]-H[w.status]})},[o,c]),g=W.useMemo(()=>a==="all"?u:u.filter(v=>v.status===a),[u,a]),f=W.useMemo(()=>{const v=u.filter(H=>H.status==="red").length,D=u.filter(H=>H.status==="amber").length,j=u.filter(H=>H.status==="green").length,w=u.length;return{red:v,amber:D,green:j,total:w}},[u]),x=v=>v==="red"?"#EF4444":v==="amber"?"#F59E0B":"#10B981",m=v=>v==="red"?"#FEE2E2":v==="amber"?"#FEF3C7":"#D1FAE5",b=v=>v==="red"?"Critical":v==="amber"?"At Risk":"On Track";return!o||o.length===0?e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Epics Available"}),e.jsx("p",{className:"text-muted",children:"Add epics to your project to see risk analysis."})]})}):e.jsxs("div",{className:"container-fluid",style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"4px"},children:"Risk Analysis Dashboard"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Deep-dive root cause analysis with actionable recommendations"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card",onClick:()=>d(a==="red"?"all":"red"),style:{cursor:"pointer",borderLeft:"4px solid #EF4444",background:a==="red"?"#FEE2E2":"white"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:" Critical Epics"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#EF4444"},children:f.red}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px"},children:[f.total>0?Math.round(f.red/f.total*100):0,"% of portfolio"]})]}),e.jsxs("div",{className:"card",onClick:()=>d(a==="amber"?"all":"amber"),style:{cursor:"pointer",borderLeft:"4px solid #F59E0B",background:a==="amber"?"#FEF3C7":"white"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:" At Risk Epics"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#F59E0B"},children:f.amber}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px"},children:[f.total>0?Math.round(f.amber/f.total*100):0,"% of portfolio"]})]}),e.jsxs("div",{className:"card",onClick:()=>d(a==="green"?"all":"green"),style:{cursor:"pointer",borderLeft:"4px solid #10B981",background:a==="green"?"#D1FAE5":"white"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:" On Track Epics"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#10B981"},children:f.green}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px"},children:[f.total>0?Math.round(f.green/f.total*100):0,"% of portfolio"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Epics"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1F2937"},children:f.total}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px"},children:a!=="all"?`Showing ${g.length}`:"All epics"})]})]}),g.length===0?e.jsx("div",{className:"card text-center",style:{padding:"40px"},children:e.jsx("p",{style:{color:"#6B7280"},children:"No epics match the selected filter."})}):g.map(v=>{const D=r===v.epic.id,j=v.status==="red"||v.status==="amber";return e.jsx("div",{style:{marginBottom:"20px"},children:e.jsxs("div",{className:"card",style:{borderLeft:`4px solid ${x(v.status)}`,background:D?m(v.status):"white"},children:[e.jsxs("div",{onClick:()=>l(D?null:v.epic.id),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:D?"20px":"0"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("a",{href:v.epic.web_url,target:"_blank",rel:"noopener noreferrer",onClick:w=>w.stopPropagation(),style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",textDecoration:"none"},onMouseEnter:w=>w.target.style.textDecoration="underline",onMouseLeave:w=>w.target.style.textDecoration="none",children:v.epic.title}),e.jsx("div",{style:{padding:"4px 12px",background:x(v.status),color:"white",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:b(v.status)}),v.status!=="green"&&e.jsxs("span",{style:{fontSize:"14px",color:"#6B7280"},children:[D?"":""," Click for details"]})]}),e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:v.reason}),v.metrics&&e.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"13px",color:"#6B7280"},children:[e.jsxs("span",{children:[v.metrics.closedIssues,"/",v.metrics.totalIssues," issues closed (",v.metrics.progressPercent.toFixed(0),"%)"]}),v.metrics.remainingIterations!==null&&e.jsxs("span",{children:[v.metrics.remainingIterations," iterations left"]}),v.metrics.currentVelocity>0&&e.jsxs("span",{children:["Velocity: ",v.metrics.currentVelocity.toFixed(1)," (need ",v.metrics.requiredVelocity.toFixed(1),")"]})]})]}),v.metrics&&e.jsxs("div",{style:{minWidth:"120px",textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Progress"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:x(v.status)},children:[v.metrics.progressPercent.toFixed(0),"%"]})]})]}),D&&j&&e.jsx("div",{children:e.jsxs("div",{style:{borderTop:"1px solid #E5E7EB",paddingTop:"20px",marginTop:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937",marginBottom:"16px"},children:"Root Cause Analysis"}),v.factors.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#6B7280",marginBottom:"12px"},children:" Contributing Factors"}),v.factors.map((w,H)=>e.jsxs("div",{style:{padding:"12px",background:"white",borderLeft:`4px solid ${w.severity==="critical"?"#EF4444":"#F59E0B"}`,borderRadius:"6px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:[H+1,". ",w.title]}),e.jsx("div",{style:{padding:"2px 8px",background:w.severity==="critical"?"#FEE2E2":"#FEF3C7",color:w.severity==="critical"?"#DC2626":"#D97706",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:w.severity==="critical"?"CRITICAL":"WARNING"})]}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"6px"},children:w.description}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",fontStyle:"italic"},children:[e.jsx("strong",{children:"Impact:"})," ",w.impact]})]},H))]}),v.actions.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#6B7280",marginBottom:"12px"},children:" Recommended Action Plan"}),v.actions.map((w,H)=>e.jsxs("div",{style:{padding:"12px",background:"white",borderLeft:`4px solid ${w.priority==="critical"?"#EF4444":w.priority==="high"?"#F59E0B":"#3B82F6"}`,borderRadius:"6px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:[w.priority==="critical"?"":w.priority==="high"?"":""," ",w.title]}),e.jsx("div",{style:{padding:"2px 8px",background:w.priority==="critical"?"#FEE2E2":w.priority==="high"?"#FEF3C7":"#DBEAFE",color:w.priority==="critical"?"#DC2626":w.priority==="high"?"#D97706":"#1E40AF",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:w.priority})]}),e.jsx("div",{style:{fontSize:"13px",color:"#1F2937",marginBottom:"6px"},children:w.description}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#6B7280"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Effort:"})," ",w.estimatedEffort]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Impact:"})," ",w.impact]})]})]},H))]}),v.projection&&e.jsxs("div",{style:{padding:"16px",background:v.projection.onTime?"#D1FAE5":"#FEE2E2",borderRadius:"8px",border:`2px solid ${v.projection.onTime?"#10B981":"#EF4444"}`},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:v.projection.onTime?"#065F46":"#991B1B",marginBottom:"8px"},children:" Completion Projection"}),e.jsxs("div",{style:{fontSize:"13px",color:v.projection.onTime?"#065F46":"#991B1B"},children:[e.jsxs("div",{children:["Expected completion: ",e.jsx("strong",{children:v.projection.date.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsxs("div",{children:["At current velocity: ",e.jsxs("strong",{children:[v.projection.iterationsNeeded," iterations"]})," (",v.projection.weeksNeeded," weeks)"]}),v.projection.daysVariance!==null&&e.jsx("div",{style:{marginTop:"8px",fontSize:"14px",fontWeight:"600"},children:v.projection.onTime?` On time (${Math.abs(Math.round(v.projection.daysVariance))} days early)`:` ${Math.abs(Math.round(v.projection.daysVariance))} days late`})]})]})]})}),D&&v.status==="green"&&e.jsx("div",{style:{borderTop:"1px solid #E5E7EB",paddingTop:"16px",marginTop:"16px"},children:e.jsxs("div",{style:{padding:"16px",background:"#D1FAE5",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#065F46",marginBottom:"8px"},children:" Epic is on track"}),e.jsxs("div",{style:{fontSize:"13px",color:"#065F46"},children:["Current velocity (",v.metrics.currentVelocity.toFixed(1)," issues/iter) is sufficient to complete remaining ",v.metrics.remainingIssues," issues in ",v.metrics.remainingIterations," iterations."]}),v.projection&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"13px",color:"#065F46"},children:["Projected completion: ",e.jsx("strong",{children:v.projection.date.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}),v.projection.daysVariance<0&&` (${Math.abs(Math.round(v.projection.daysVariance))} days ahead of schedule)`]})]})})]})},v.epic.id)})]})}function v1(){const{risks:o,addRisk:c,updateRisk:r,getRiskScore:l}=rd(),[a,d]=W.useState(!1),[u,g]=W.useState({title:"",description:"",probability:2,impact:2,owner:"",status:"open"}),f=()=>{u.title&&(c(u),g({title:"",description:"",probability:2,impact:2,owner:"",status:"open"}),d(!1))},x={};for(let b=3;b>=1;b--)for(let v=1;v<=3;v++){const D=`${b}-${v}`;x[D]=o.filter(j=>j.probability===b&&j.impact===v&&j.status==="open").length}const m=o.filter(b=>b.status==="open");return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"card mb-3",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[e.jsx("h2",{children:"Risk Register"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>d(!0),children:"Add Risk"})]}),e.jsx("h3",{className:"mb-3",style:{fontWeight:"500"},children:"Probability  Impact Matrix"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto repeat(3, 1fr)",gap:"8px",marginBottom:"32px"},children:[e.jsx("div",{}),e.jsx("div",{className:"text-center metric-label",children:"LOW IMPACT"}),e.jsx("div",{className:"text-center metric-label",children:"MEDIUM IMPACT"}),e.jsx("div",{className:"text-center metric-label",children:"HIGH IMPACT"}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"12px"},children:e.jsx("span",{className:"metric-label",children:"HIGH PROB"})}),e.jsx(Vn,{score:l({probability:3,impact:1}),count:x["3-1"]}),e.jsx(Vn,{score:l({probability:3,impact:2}),count:x["3-2"]}),e.jsx(Vn,{score:l({probability:3,impact:3}),count:x["3-3"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"12px"},children:e.jsx("span",{className:"metric-label",children:"MED PROB"})}),e.jsx(Vn,{score:l({probability:2,impact:1}),count:x["2-1"]}),e.jsx(Vn,{score:l({probability:2,impact:2}),count:x["2-2"]}),e.jsx(Vn,{score:l({probability:2,impact:3}),count:x["2-3"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"12px"},children:e.jsx("span",{className:"metric-label",children:"LOW PROB"})}),e.jsx(Vn,{score:l({probability:1,impact:1}),count:x["1-1"]}),e.jsx(Vn,{score:l({probability:1,impact:2}),count:x["1-2"]}),e.jsx(Vn,{score:l({probability:1,impact:3}),count:x["1-3"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"mb-3",children:"Active Risks"}),m.length===0?e.jsxs("div",{className:"text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("p",{className:"text-muted",children:'No active risks. Click "Add Risk" to create one.'})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:m.map(b=>e.jsx("div",{className:"card",style:{background:"var(--bg-secondary)",borderLeft:`4px solid ${l(b)>=6?"var(--danger)":l(b)>=3?"var(--warning)":"var(--success)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{marginBottom:"8px"},children:b.title}),e.jsx("p",{className:"text-muted mb-2",style:{fontSize:"14px"},children:b.description}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Probability:"})," ",b.probability===3?"High":b.probability===2?"Medium":"Low"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Impact:"})," ",b.impact===3?"High":b.impact===2?"Medium":"Low"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Score:"})," ",l(b)]}),b.owner&&e.jsxs("span",{children:[e.jsx("strong",{children:"Owner:"})," ",b.owner]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn",onClick:()=>r(b.id,{status:"monitoring"}),style:{fontSize:"13px",padding:"6px 12px"},children:"Monitor"}),e.jsx("button",{className:"btn",onClick:()=>r(b.id,{status:"closed"}),style:{fontSize:"13px",padding:"6px 12px"},children:"Close"})]})]})},b.id))})]}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:e.jsxs("div",{className:"modal",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Add New Risk"}),e.jsx("button",{className:"btn",onClick:()=>d(!1),style:{padding:"4px 8px"},children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title *"}),e.jsx("input",{type:"text",className:"form-input",value:u.title,onChange:b=>g({...u,title:b.target.value}),placeholder:"Brief risk description"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-textarea",value:u.description,onChange:b=>g({...u,description:b.target.value}),placeholder:"Detailed risk description",rows:3})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Probability"}),e.jsxs("select",{className:"form-select",value:u.probability,onChange:b=>g({...u,probability:parseInt(b.target.value)}),children:[e.jsx("option",{value:1,children:"Low"}),e.jsx("option",{value:2,children:"Medium"}),e.jsx("option",{value:3,children:"High"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Impact"}),e.jsxs("select",{className:"form-select",value:u.impact,onChange:b=>g({...u,impact:parseInt(b.target.value)}),children:[e.jsx("option",{value:1,children:"Low"}),e.jsx("option",{value:2,children:"Medium"}),e.jsx("option",{value:3,children:"High"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Owner"}),e.jsx("input",{type:"text",className:"form-input",value:u.owner,onChange:b=>g({...u,owner:b.target.value}),placeholder:"Risk owner name"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn",onClick:()=>d(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:f,disabled:!u.title,children:"Add Risk"})]})]})})]})}function Vn({score:o,count:c}){const l=o>=6?{bg:"#FEE2E2",text:"#DC2626"}:o>=3?{bg:"#FEF3C7",text:"#D97706"}:{bg:"#D1FAE5",text:"#059669"};return e.jsx("div",{style:{background:l.bg,color:l.text,padding:"24px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"32px",fontWeight:"700",minHeight:"80px"},children:c})}function b1({epics:o,issues:c}){const{risks:r}=rd(),l=()=>{const a=I0(r),d=new Date().toISOString().split("T")[0];Bn(a,`risk-register-${d}.csv`)};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"30px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Risk Management"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Comprehensive risk analysis, tracking, and mitigation"})]}),e.jsx("button",{className:"btn btn-primary",onClick:l,disabled:!r||r.length===0,style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{children:"Export Risks CSV"})})]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("div",{style:{padding:"12px 16px",background:"#F9FAFB",borderBottom:"2px solid #E60000",marginBottom:"20px"},children:e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",margin:0},children:"Risk Analysis & Trends"})}),e.jsx(y1,{epics:o,issues:c})]}),e.jsxs("div",{children:[e.jsx("div",{style:{padding:"12px 16px",background:"#F9FAFB",borderBottom:"2px solid #E60000",marginBottom:"20px"},children:e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",margin:0},children:"Risk Register"})}),e.jsx(v1,{})]})]})}function j1({issues:o}){const[c,r]=W.useState(null),l=W.useMemo(()=>{const d=new Map;o.forEach(g=>{const f=kt(g.labels,g.iteration);if(f&&!d.has(f)){const x=g.iteration?.start_date||null;d.set(f,x)}});const u=new Set(o.map(g=>kt(g.labels,g.iteration)));return Array.from(u).filter(Boolean).sort((g,f)=>{const x=d.get(g),m=d.get(f);return x&&m?new Date(m)-new Date(x):x&&!m?-1:!x&&m?1:g.localeCompare(f)})},[o]),a=d=>{if(d.state==="closed")return 100;const u=d.labels.map(g=>g.toLowerCase());return u.some(g=>g.includes("review")||g.includes("testing"))?75:u.some(g=>g.includes("progress")||g.includes("wip"))?50:u.some(g=>g.includes("started"))?25:0};return l.length===0?e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",style:{padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:""}),e.jsx("h3",{className:"mb-2",children:"No Sprints/Iterations Found"}),e.jsx("p",{className:"text-muted",children:'Add iterations to your issues in GitLab, or add "Sprint X" / "Iteration X" labels to see the sprint board.'})]})}):e.jsxs("div",{className:"container-fluid",children:[e.jsx("h2",{className:"mb-3",children:"Sprint Board"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:l.map(d=>{const u=o.filter(B=>kt(B.labels,B.iteration)===d),g=u.filter(B=>B.state==="closed").length,f=u.length,x=f>0?Math.round(g/f*100):0,b=u.find(B=>B.iteration)?.iteration,v=b?.start_date,D=b?.due_date,j={todo:u.filter(B=>B.state==="opened"&&a(B)===0),progress:u.filter(B=>B.state==="opened"&&a(B)>0&&a(B)<100),done:u.filter(B=>B.state==="closed")},w={todo:j.todo.reduce((B,M)=>B+(M.weight||0),0),progress:j.progress.reduce((B,M)=>B+(M.weight||0),0),done:j.done.reduce((B,M)=>B+(M.weight||0),0)},H=s1(v,D),U=o1(u,H),G=l1(U),$=G.filter(B=>B.priority==="high").length>0;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"4px"},children:d}),(v||D)&&e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280"},children:[v&&new Date(v).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),v&&D&&" - ",D&&new Date(D).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--primary)"},children:[x,"%"]}),e.jsxs("div",{className:"text-small text-muted",children:[g," / ",f]})]})]}),e.jsx("div",{className:"progress-bar mb-3",children:e.jsx("div",{className:"progress-fill",style:{width:`${x}%`}})}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:$?"#FEF3C7":"#EFF6FF",borderRadius:"8px",cursor:"pointer",marginBottom:"12px"},onClick:()=>r(c===d?null:d),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:c===d?"":""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:$?"#92400E":"#1E40AF"},children:$?" Team Capacity Issues":" Team Capacity"}),e.jsxs("div",{style:{fontSize:"12px",color:$?"#78350F":"#1E40AF"},children:[U.length," team members, ",H," working days",G.length>0&&`  ${G.length} recommendation${G.length>1?"s":""}`]})]})]}),e.jsxs("div",{style:{fontSize:"12px",color:$?"#92400E":"#1E40AF"},children:["Click to ",c===d?"hide":"show"," details"]})]}),c===d&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",padding:"16px",background:"#F9FAFB",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"Team Workload"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"12px"},children:U.map(B=>e.jsxs("div",{style:{padding:"12px",background:"white",borderRadius:"6px",borderLeft:`4px solid ${Qc(B.status)}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937"},children:B.name}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:a1(B.status)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:Qc(B.status)},children:[B.utilizationPercent,"%"]}),e.jsxs("div",{style:{fontSize:"10px",color:"#6B7280"},children:[B.totalWeight.toFixed(1),"d / ",B.capacity,"d"]})]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[B.issues.length," issue",B.issues.length!==1?"s":""]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden",marginTop:"8px"},children:e.jsx("div",{style:{width:`${Math.min(B.utilizationPercent,100)}%`,height:"100%",background:Qc(B.status),transition:"width 0.3s ease"}})})]},B.username||B.name))})]}),G.length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"Smart Recommendations"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:G.map((B,M)=>{const R=r1(B),L=B.priority==="high"?"#FEF3C7":B.priority==="medium"?"#DBEAFE":"#F3F4F6",O=B.priority==="high"?"#78350F":B.priority==="medium"?"#1E40AF":"#374151";return e.jsx("div",{style:{padding:"12px",background:L,borderRadius:"6px",fontSize:"12px",color:O},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:R.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:[B.type==="rebalance"&&`Move ${B.weight.toFixed(1)} days from ${B.from} to ${B.to}`,B.type==="assign"&&`Assign to ${B.to}`,B.type==="warning"&&"Capacity Warning",B.type==="info"&&"Available Capacity"]}),e.jsx("div",{children:B.reason}),B.issues&&B.issues.length>0&&e.jsxs("div",{style:{marginTop:"6px",fontSize:"11px"},children:["Issues: ",B.issues.map(y=>`#${y.iid}`).join(", ")]})]})]})},M)})})]})]})]}),e.jsxs("div",{className:"grid grid-3",style:{gap:"16px"},children:[e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"16px",borderRadius:"8px"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:[" To Do (",j.todo.length,")"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:[w.todo," story points"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[j.todo.map(B=>e.jsxs("div",{className:"card",style:{padding:"12px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>window.open(B.web_url,"_blank"),onMouseOver:M=>M.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",onMouseOut:M=>M.currentTarget.style.boxShadow="0 1px 2px rgba(0,0,0,0.05)",children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:["#",B.iid," ",B.title]}),e.jsxs("div",{className:"text-small text-muted",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:B.assignees?.[0]?.name||"Unassigned"}),B.weight&&e.jsxs("span",{style:{fontWeight:"600"},children:[B.weight," pts"]})]})]},B.id)),j.todo.length===0&&e.jsx("div",{className:"text-center text-muted",style:{padding:"20px"},children:"No items"})]})]}),e.jsxs("div",{style:{background:"#DBEAFE",padding:"16px",borderRadius:"8px"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:[" In Progress (",j.progress.length,")"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:[w.progress," story points"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[j.progress.map(B=>e.jsxs("div",{className:"card",style:{padding:"12px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>window.open(B.web_url,"_blank"),onMouseOver:M=>M.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",onMouseOut:M=>M.currentTarget.style.boxShadow="0 1px 2px rgba(0,0,0,0.05)",children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:["#",B.iid," ",B.title]}),e.jsxs("div",{className:"text-small text-muted",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:B.assignees?.[0]?.name||"Unassigned"}),B.weight&&e.jsxs("span",{style:{fontWeight:"600"},children:[B.weight," pts"]})]})]},B.id)),j.progress.length===0&&e.jsx("div",{className:"text-center text-muted",style:{padding:"20px"},children:"No items"})]})]}),e.jsxs("div",{style:{background:"#D1FAE5",padding:"16px",borderRadius:"8px"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:[" Done (",j.done.length,")"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280"},children:[w.done," story points"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[j.done.map(B=>e.jsx("div",{className:"card",style:{padding:"12px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>window.open(B.web_url,"_blank"),onMouseOver:M=>M.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)",onMouseOut:M=>M.currentTarget.style.boxShadow="0 1px 2px rgba(0,0,0,0.05)",children:e.jsxs("div",{style:{fontSize:"13px",fontWeight:"500",textDecoration:"line-through",color:"var(--text-secondary)"},children:["#",B.iid," ",B.title]})},B.id)),j.done.length===0&&e.jsx("div",{className:"text-center text-muted",style:{padding:"20px"},children:"No items"})]})]})]})]},d)})})]})}const jg="sprintGoals";function Da(){try{const o=localStorage.getItem(jg);return o?JSON.parse(o):[]}catch(o){return console.error("Error loading sprint goals:",o),[]}}function S1(o="current"){return Da().find(r=>r.sprintId===o)||null}function zh(o){const c=Da(),r=c.findIndex(l=>l.sprintId===o.sprintId);return r>=0?c[r]={...c[r],...o,updatedAt:new Date().toISOString()}:c.push({...o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),localStorage.setItem(jg,JSON.stringify(c)),c}function D1(){return Da().sort((c,r)=>new Date(r.createdAt)-new Date(c.createdAt))}function B1(){const o=Da(),c=o.filter(g=>g.achievement!==void 0&&g.achievement!==null);if(c.length===0)return{totalGoals:o.length,achievedCount:0,partialCount:0,missedCount:0,achievementRate:0};const r=c.filter(g=>g.achievement==="met").length,l=c.filter(g=>g.achievement==="partial").length,a=c.filter(g=>g.achievement==="not-met").length,d=r*100+l*50,u=Math.round(d/c.length);return{totalGoals:o.length,goalsWithStatus:c.length,achievedCount:r,partialCount:l,missedCount:a,achievementRate:u}}function C1(){const o=D1(),c=B1(),r=o.slice(0,5),l=r.filter(a=>a.achievement==="met").length;return{...c,recentSprints:r.length,recentAchieved:l,recentRate:r.length>0?Math.round(l/r.length*100):0,hasGoals:o.length>0}}function E1({sprintId:o="current",sprintName:c="Current Sprint"}){const[r,l]=W.useState(null),[a,d]=W.useState(!1),[u,g]=W.useState(""),[f,x]=W.useState(null);W.useEffect(()=>{m(),b()},[o]);const m=()=>{const G=S1(o);l(G),G&&g(G.goal||"")},b=()=>{const G=C1();x(G)},v=()=>{const G={sprintId:o,sprintName:c,goal:u,achievement:r?.achievement||null,notes:r?.notes||""};zh(G),m(),b(),d(!1)},D=()=>{g(r?.goal||""),d(!1)},j=G=>{const $={...r,sprintId:o,sprintName:c,achievement:G};zh($),m(),b()},w=G=>{switch(G){case"met":return"#10B981";case"partial":return"#F59E0B";case"not-met":return"#EF4444";default:return"#6B7280"}},H=G=>{switch(G){case"met":return"";case"partial":return"";case"not-met":return"";default:return""}},U=G=>{switch(G){case"met":return"Met";case"partial":return"Partially Met";case"not-met":return"Not Met";default:return"In Progress"}};return e.jsx("div",{className:"card",style:{marginBottom:"24px"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #E5E7EB"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",marginBottom:"4px",fontWeight:"600",color:"#1F2937"},children:"Sprint Goal"}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280"},children:c})]}),f&&f.hasGoals&&e.jsxs("div",{style:{background:"#F3F4F6",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:"#374151"},children:["Achievement: ",f.achievementRate,"%"]})]}),a?e.jsxs("div",{children:[e.jsx("textarea",{value:u,onChange:G=>g(G.target.value),placeholder:"Enter your sprint goal (e.g., 'Deliver MVP user authentication with OAuth and email verification')",style:{width:"100%",minHeight:"100px",padding:"12px",background:"white",border:"2px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",color:"#1F2937",resize:"vertical",marginBottom:"12px",fontFamily:"inherit"},autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:v,className:"btn btn-primary",style:{fontSize:"13px"},children:"Save Goal"}),e.jsx("button",{onClick:D,className:"btn btn-secondary",style:{fontSize:"13px"},children:"Cancel"})]})]}):e.jsxs("div",{children:[r&&r.goal?e.jsxs("div",{style:{background:"#F9FAFB",padding:"16px",borderRadius:"6px",marginBottom:"16px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:"500",lineHeight:"1.6",marginBottom:"12px",color:"#1F2937"},children:r.goal}),r.achievement&&e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",background:"white",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:w(r.achievement),border:`2px solid ${w(r.achievement)}`},children:[H(r.achievement)," ",U(r.achievement)]})]}):e.jsxs("div",{style:{background:"#F9FAFB",padding:"24px",borderRadius:"6px",marginBottom:"16px",textAlign:"center",border:"2px dashed #D1D5DB"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"4px"},children:"No sprint goal set yet"}),e.jsx("div",{style:{fontSize:"12px",color:"#9CA3AF"},children:'Click "Set Goal" to define your sprint objective'})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>d(!0),className:"btn btn-secondary",style:{fontSize:"13px"},children:r&&r.goal?"Edit Goal":"Set Goal"}),r&&r.goal&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",fontWeight:"500",marginLeft:"4px"},children:"Mark as:"}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:()=>j("met"),style:{padding:"6px 12px",background:r.achievement==="met"?"#D1FAE5":"white",color:r.achievement==="met"?"#059669":"#6B7280",border:`2px solid ${r.achievement==="met"?"#10B981":"#E5E7EB"}`,borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},title:"Mark as Met",children:" Met"}),e.jsx("button",{onClick:()=>j("partial"),style:{padding:"6px 12px",background:r.achievement==="partial"?"#FEF3C7":"white",color:r.achievement==="partial"?"#D97706":"#6B7280",border:`2px solid ${r.achievement==="partial"?"#F59E0B":"#E5E7EB"}`,borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},title:"Mark as Partially Met",children:" Partial"}),e.jsx("button",{onClick:()=>j("not-met"),style:{padding:"6px 12px",background:r.achievement==="not-met"?"#FEE2E2":"white",color:r.achievement==="not-met"?"#DC2626":"#6B7280",border:`2px solid ${r.achievement==="not-met"?"#EF4444":"#E5E7EB"}`,borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},title:"Mark as Not Met",children:" Not Met"})]})]})]})]})]})})}const Ba="retroActions";function Qi(){try{const o=localStorage.getItem(Ba);return o?JSON.parse(o):[]}catch(o){return console.error("Error loading retro actions:",o),[]}}function w1(o="current"){return Qi().filter(r=>r.sprintId===o)}function z1(){return Qi().filter(c=>c.status==="open"||c.status==="in-progress")}function Sg(){const o=z1(),c=new Date;return o.filter(r=>r.dueDate?new Date(r.dueDate)<c:!1)}function kh(o){const c=Qi();if(o.id){const r=c.findIndex(l=>l.id===o.id);r>=0&&(c[r]={...c[r],...o,updatedAt:new Date().toISOString()})}else{const r={...o,id:Date.now().toString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c.push(r)}return localStorage.setItem(Ba,JSON.stringify(c)),c}function k1(o){const r=Qi().filter(l=>l.id!==o);return localStorage.setItem(Ba,JSON.stringify(r)),r}function A1(o){const c=Qi(),r=c.find(l=>l.id===o);return r&&(r.status="done",r.completedAt=new Date().toISOString(),r.updatedAt=new Date().toISOString(),localStorage.setItem(Ba,JSON.stringify(c))),c}function T1(){const o=Qi();if(o.length===0)return{totalActions:0,openActions:0,inProgressActions:0,completedActions:0,overdueActions:0,completionRate:0,avgDaysToComplete:0};const c=o.filter(f=>f.status==="open").length,r=o.filter(f=>f.status==="in-progress").length,l=o.filter(f=>f.status==="done").length,a=Sg().length,d=Math.round(l/o.length*100),u=o.filter(f=>f.status==="done"&&f.completedAt&&f.createdAt);let g=0;if(u.length>0){const f=u.reduce((x,m)=>{const b=new Date(m.createdAt),v=new Date(m.completedAt),D=Math.ceil((v-b)/(1e3*60*60*24));return x+D},0);g=Math.round(f/u.length)}return{totalActions:o.length,openActions:c,inProgressActions:r,completedActions:l,overdueActions:a,completionRate:d,avgDaysToComplete:g}}function F1(){const o=Qi(),c=["ID","Sprint","Action","Owner","Status","Due Date","Created At","Completed At","Carried From","Days Open"],r=o.map(a=>{const d=new Date(a.createdAt),u=a.completedAt?new Date(a.completedAt):new Date,g=Math.ceil((u-d)/(1e3*60*60*24));return[a.id,a.sprintName||a.sprintId,`"${a.action.replace(/"/g,'""')}"`,a.owner||"Unassigned",a.status,a.dueDate||"N/A",new Date(a.createdAt).toLocaleDateString(),a.completedAt?new Date(a.completedAt).toLocaleDateString():"N/A",a.carriedFrom||"N/A",g]});return[c.join(","),...r.map(a=>a.join(","))].join(`
`)}function R1(o,c="retro-actions.csv"){const r=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),a=URL.createObjectURL(r);l.setAttribute("href",a),l.setAttribute("download",c),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function M1(o="current",c="Current Sprint"){return{sprintId:o,sprintName:c,action:"",owner:"",dueDate:"",status:"open",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}function I1({sprintId:o="current",sprintName:c="Current Sprint"}){const[r,l]=W.useState([]),[a,d]=W.useState(null),[u,g]=W.useState(!1),[f,x]=W.useState(null),[m,b]=W.useState("all");W.useEffect(()=>{v(),D()},[o]);const v=()=>{const R=w1(o);l(R)},D=()=>{const R=T1();d(R)},j=R=>{kh({...R,sprintId:o,sprintName:c}),v(),D(),g(!1),x(null)},w=R=>{confirm("Are you sure you want to delete this action?")&&(k1(R),v(),D())},H=(R,L)=>{if(L==="done")A1(R);else{const O=r.find(y=>y.id===R);O&&kh({...O,status:L})}v(),D()},U=()=>{const R=F1();R1(R)},G=R=>{switch(R){case"done":return"#10B981";case"in-progress":return"#3B82F6";case"open":return"#6B7280";case"wont-do":return"#EF4444";default:return"#6B7280"}},$=R=>{switch(R){case"done":return" Done";case"in-progress":return" In Progress";case"open":return" Open";case"wont-do":return" Won't Do";default:return R}},B=R=>!R.dueDate||R.status==="done"||R.status==="wont-do"?!1:new Date(R.dueDate)<new Date,M=r.filter(R=>m==="open"?R.status==="open"||R.status==="in-progress":m==="overdue"?B(R):!0);return e.jsxs("div",{children:[a&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Total Actions"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#1F2937"},children:a.totalActions})]}),e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Open Actions"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:"#3B82F6"},children:a.openActions+a.inProgressActions})]}),e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Completion Rate"}),e.jsxs("div",{style:{fontSize:"36px",fontWeight:"700",color:a.completionRate>=70?"#10B981":a.completionRate>=50?"#F59E0B":"#EF4444"},children:[a.completionRate,"%"]})]}),e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"8px"},children:"Overdue"}),e.jsx("div",{style:{fontSize:"36px",fontWeight:"700",color:a.overdueActions>0?"#EF4444":"#10B981"},children:a.overdueActions})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>b("all"),style:{padding:"6px 14px",background:m==="all"?"#E60000":"#F3F4F6",color:m==="all"?"white":"#4B5563",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:["All (",r.length,")"]}),e.jsxs("button",{onClick:()=>b("open"),style:{padding:"6px 14px",background:m==="open"?"#E60000":"#F3F4F6",color:m==="open"?"white":"#4B5563",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:["Open (",r.filter(R=>R.status==="open"||R.status==="in-progress").length,")"]}),e.jsxs("button",{onClick:()=>b("overdue"),style:{padding:"6px 14px",background:m==="overdue"?"#E60000":"#F3F4F6",color:m==="overdue"?"white":"#4B5563",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:["Overdue (",Sg().length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:U,style:{padding:"6px 12px",background:"#F3F4F6",color:"#4B5563",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Export CSV"}),e.jsx("button",{onClick:()=>{g(!0),x(M1(o,c))},style:{padding:"6px 16px",background:"#E60000",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"+ Add Action"})]})]}),(u||f)&&f&&e.jsxs("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB",border:"2px solid #E60000"},children:[e.jsx("div",{style:{marginBottom:"16px",fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:u?" Add New Action":" Edit Action"}),e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#4B5563",marginBottom:"6px"},children:"Action Item *"}),e.jsx("textarea",{value:f.action,onChange:R=>x({...f,action:R.target.value}),placeholder:"Describe the improvement action...",style:{width:"100%",minHeight:"80px",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#4B5563",marginBottom:"6px"},children:"Owner"}),e.jsx("input",{type:"text",value:f.owner,onChange:R=>x({...f,owner:R.target.value}),placeholder:"Assignee name",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#4B5563",marginBottom:"6px"},children:"Due Date"}),e.jsx("input",{type:"date",value:f.dueDate,onChange:R=>x({...f,dueDate:R.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",color:"#4B5563",marginBottom:"6px"},children:"Status"}),e.jsxs("select",{value:f.status,onChange:R=>x({...f,status:R.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"}),e.jsx("option",{value:"wont-do",children:"Won't Do"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{g(!1),x(null)},style:{padding:"8px 16px",background:"#F3F4F6",color:"#4B5563",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:()=>j(f),disabled:!f.action.trim(),style:{padding:"8px 20px",background:f.action.trim()?"#10B981":"#D1D5DB",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:f.action.trim()?"pointer":"not-allowed"},children:u?"Add Action":"Save Changes"})]})]})]}),M.length>0?e.jsx("div",{style:{display:"grid",gap:"12px"},children:M.map(R=>{const L=B(R);return e.jsx("div",{className:"card",style:{border:L?"2px solid #EF4444":"1px solid #E5E7EB",background:L?"#FEF2F2":"white"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{display:"inline-block",padding:"4px 10px",background:G(R.status)+"20",color:G(R.status),borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:$(R.status)}),L&&e.jsx("span",{style:{display:"inline-block",padding:"4px 10px",background:"#FEE2E2",color:"#DC2626",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:" Overdue"}),R.carriedFrom&&e.jsx("span",{style:{display:"inline-block",padding:"4px 10px",background:"#FEF3C7",color:"#D97706",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:" Carried Over"})]}),e.jsx("div",{style:{fontSize:"14px",color:"#1F2937",marginBottom:"12px",lineHeight:"1.5",textDecoration:R.status==="done"?"line-through":"none",opacity:R.status==="done"?.6:1},children:R.action}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#6B7280"},children:[R.owner&&e.jsxs("div",{children:[e.jsx("strong",{children:"Owner:"})," ",R.owner]}),R.dueDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Due:"})," ",new Date(R.dueDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(R.createdAt).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginLeft:"16px"},children:[R.status!=="done"&&R.status!=="wont-do"&&e.jsxs(e.Fragment,{children:[R.status==="open"&&e.jsx("button",{onClick:()=>H(R.id,"in-progress"),style:{padding:"6px 12px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},title:"Start",children:""}),e.jsx("button",{onClick:()=>H(R.id,"done"),style:{padding:"6px 12px",background:"#10B981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},title:"Complete",children:""})]}),e.jsx("button",{onClick:()=>{g(!1),x(R)},style:{padding:"6px 12px",background:"#F3F4F6",color:"#4B5563",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},title:"Edit",children:""}),e.jsx("button",{onClick:()=>w(R.id),style:{padding:"6px 12px",background:"#FEE2E2",color:"#DC2626",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},title:"Delete",children:""})]})]})},R.id)})}):e.jsxs("div",{className:"card",style:{padding:"40px",textAlign:"center",background:"#F9FAFB",border:"2px dashed #D1D5DB"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#4B5563",marginBottom:"8px"},children:["No ",m!=="all"?m:""," actions yet"]}),e.jsx("div",{style:{fontSize:"14px",color:"#6B7280"},children:"Add retrospective action items to track continuous improvements"})]})]})}const N1=W.lazy(()=>pa(()=>Promise.resolve().then(()=>Tb),void 0,import.meta.url));function O1({issues:o,onNavigate:c}){const[r,l]=W.useState(!1),[a,d]=W.useState(!1);return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Sprint Management"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Plan sprints, manage board, and track team capacity"})]}),e.jsx(E1,{sprintId:"current",sprintName:"Current Sprint"}),e.jsxs("div",{className:"card",style:{marginBottom:"24px"},children:[e.jsxs("button",{onClick:()=>d(!a),style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"16px",background:"#F9FAFB",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>u.currentTarget.style.background="#F3F4F6",onMouseLeave:u=>u.currentTarget.style.background="#F9FAFB",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:a?"":""}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:" Retrospective Actions"}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginTop:"2px"},children:"Track continuous improvement actions from retros"})]})]}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:a?"Click to collapse":"Click to expand"})]}),a&&e.jsx("div",{style:{padding:"20px",borderTop:"1px solid #E5E7EB"},children:e.jsx(I1,{sprintId:"current",sprintName:"Current Sprint"})})]}),e.jsxs("div",{className:"card",style:{marginBottom:"24px"},children:[e.jsxs("button",{onClick:()=>l(!r),style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"16px",background:"#F9FAFB",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>u.currentTarget.style.background="#F3F4F6",onMouseLeave:u=>u.currentTarget.style.background="#F9FAFB",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:r?"":""}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:" Sprint Planning"}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginTop:"2px"},children:"Plan capacity, assign issues, and set up sprints"})]})]}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",fontWeight:"500"},children:r?"Click to collapse":"Click to expand"})]}),r&&e.jsx("div",{style:{padding:"20px",borderTop:"1px solid #E5E7EB"},children:e.jsx(W.Suspense,{fallback:e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:[e.jsx("div",{style:{display:"inline-block",width:"32px",height:"32px",border:"3px solid #E5E7EB",borderTop:"3px solid #E60000",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginBottom:"12px"}}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"500"},children:"Loading Sprint Planning..."})]}),children:e.jsx(N1,{issues:o,onNavigate:c})})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{padding:"12px 16px",background:"#F9FAFB",borderBottom:"2px solid #E60000",marginBottom:"20px"},children:e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937",margin:0},children:" Sprint Board"})}),e.jsx(j1,{issues:o})]})]})}function Po(o){if(!o||o.length===0)return null;const c=["team::","squad::","group::"];for(const r of c){const l=o.find(a=>a.toLowerCase().startsWith(r));if(l)return l.replace(new RegExp(r,"i"),"").split("::")[0].replace(/-/g," ").replace(/\b\w/g,a=>a.toUpperCase())}return null}function W1(o){const c=new Map;return o.forEach(r=>{const l=Po(r.labels);if(l){c.has(l)||c.set(l,{name:l,issueCount:0,openIssueCount:0,closedIssueCount:0,members:new Set,issues:[]});const a=c.get(l);a.issueCount++,r.state==="opened"&&a.openIssueCount++,r.state==="closed"&&a.closedIssueCount++,a.issues.push(r),r.assignees?.forEach(d=>{a.members.add(d.username)})}}),Array.from(c.values()).map(r=>({...r,members:Array.from(r.members),memberCount:r.members.size}))}function _1(o,c){const r=[];return o.forEach(l=>{const a=new Map;l.issues.forEach(u=>{const g=Po(u.labels);if(g){a.has(g)||a.set(g,{team:g,issueCount:0,openIssues:0,closedIssues:0,storyPoints:0,members:new Set,issues:[]});const f=a.get(g);f.issueCount++,f.issues.push(u),u.state==="opened"&&f.openIssues++,u.state==="closed"&&f.closedIssues++;const x=u.labels?.find(m=>m.toLowerCase().startsWith("sp::"));if(x){const m=parseInt(x.split("::")[1],10);isNaN(m)||(f.storyPoints+=m)}u.assignees?.forEach(m=>{f.members.add(m.username)})}});const d=Array.from(a.values()).map(u=>({...u,members:Array.from(u.members),memberCount:u.members.size,percentage:Math.round(u.issueCount/l.issues.length*100),completionRate:u.issueCount>0?Math.round(u.closedIssues/u.issueCount*100):0}));d.sort((u,g)=>g.issueCount-u.issueCount),r.push({initiativeId:l.id,initiativeName:l.name,teams:d,primaryTeam:d[0]?.team||"Unassigned",isMultiTeam:d.length>1,teamCount:d.length,unassignedIssues:l.issues.filter(u=>!Po(u.labels)).length})}),r}function L1(o,c){const r=new Map;return o.forEach(a=>{a.progress>=100||a.issues.forEach(d=>{if(d.state!=="opened")return;const u=d.labels?.some(g=>g.toLowerCase().includes("priority::high")||g.toLowerCase().includes("priority::critical"));d.assignees?.forEach(g=>{r.has(g.username)||r.set(g.username,{username:g.username,name:g.name,avatar:g.avatar_url,initiatives:new Set,highPriorityInitiatives:new Set,totalIssues:0,highPriorityIssues:0,teams:new Set});const f=r.get(g.username);f.initiatives.add(a.id),f.totalIssues++,u&&(f.highPriorityInitiatives.add(a.id),f.highPriorityIssues++);const x=Po(d.labels);x&&f.teams.add(x)})})}),Array.from(r.values()).map(a=>({...a,initiatives:Array.from(a.initiatives),highPriorityInitiatives:Array.from(a.highPriorityInitiatives),teams:Array.from(a.teams),initiativeCount:a.initiatives.size,highPriorityCount:a.highPriorityInitiatives.size,isContended:a.initiatives.size>=3||a.highPriorityInitiatives.size>=2,contentionLevel:$1(a.initiatives.size,a.highPriorityInitiatives.size,a.totalIssues)})).filter(a=>a.isContended).sort((a,d)=>d.contentionLevel-a.contentionLevel)}function $1(o,c,r){let l=Math.min((o-2)*20,50);return l+=c*15,r>=10?l+=20:r>=5&&(l+=10),Math.min(l,100)}function P1(o,c){return o.map(r=>{const l=c.filter(f=>f.issues.some(x=>Po(x.labels)===r.name)),a=l.filter(f=>f.progress<100),d=r.issues.filter(f=>f.state==="opened").length,u=r.issueCount>0?Math.round(r.closedIssueCount/r.issueCount*100):0;let g="available";return a.length>=4||d>=30?g="overloaded":(a.length>=2||d>=15)&&(g="at-capacity"),{teamName:r.name,memberCount:r.members.length||r.memberCount,initiativeCount:l.length,activeInitiativeCount:a.length,openIssueCount:d,totalIssueCount:r.issueCount,completionRate:u,capacityStatus:g,capacityScore:U1(a.length,d,r.members.length||r.memberCount),initiatives:l.map(f=>({id:f.id,name:f.name,progress:f.progress,status:f.status}))}}).sort((r,l)=>{const a={overloaded:3,"at-capacity":2,available:1};return a[l.capacityStatus]-a[r.capacityStatus]})}function U1(o,c,r){const l=r>0?1/Math.sqrt(r):1,a=Math.min(o*30*l,60),d=Math.min(c*2*l,40);return Math.min(Math.round(a+d),100)}function H1(o){const c=new Map;o.forEach(l=>{const a=new Set;l.issues.forEach(d=>{d.assignees?.forEach(u=>{a.add(u.username)})}),a.forEach(d=>{c.has(d)||c.set(d,[]),c.get(d).push({id:l.id,name:l.name,status:l.status,progress:l.progress})})});const r=[];return c.forEach((l,a)=>{l.length>1&&r.push({username:a,initiativeCount:l.length,initiatives:l.sort((d,u)=>d.name.localeCompare(u.name))})}),r.sort((l,a)=>a.initiativeCount-l.initiativeCount)}function G1(o){const c=["Initiative","Primary Team","Team Count","Is Multi-Team","Unassigned Issues","Team","Issue Count","Open Issues","Closed Issues","Completion Rate %","Story Points","Member Count","Percentage of Initiative"],r=[];return o.forEach(a=>{a.teams.length===0?r.push([a.initiativeName,a.primaryTeam,a.teamCount,a.isMultiTeam?"Yes":"No",a.unassignedIssues,"No teams assigned","-","-","-","-","-","-","-"]):a.teams.forEach((d,u)=>{r.push([u===0?a.initiativeName:"",u===0?a.primaryTeam:"",u===0?a.teamCount:"",u===0?a.isMultiTeam?"Yes":"No":"",u===0?a.unassignedIssues:"",d.team,d.issueCount,d.openIssues,d.closedIssues,`${d.completionRate}%`,d.storyPoints,d.memberCount,`${d.percentage}%`])})}),[c.join(","),...r.map(a=>a.map(d=>typeof d=="string"&&d.includes(",")?`"${d}"`:d).join(","))].join(`
`)}function V1(o){const c=["Name","Username","Initiative Count","High Priority Initiatives","Total Open Issues","High Priority Issues","Teams","Contention Level","Status"],r=o.map(a=>[a.name,a.username,a.initiativeCount,a.highPriorityCount,a.totalIssues,a.highPriorityIssues,`"${a.teams.join(", ")}"`,a.contentionLevel,a.contentionLevel>=70?"Critical":a.contentionLevel>=40?"High":"Medium"]);return[c.join(","),...r.map(a=>a.join(","))].join(`
`)}function q1(o){const c=["Team","Member Count","Total Initiatives","Active Initiatives","Open Issues","Total Issues","Completion Rate %","Capacity Status","Capacity Score","Initiative List"],r=o.map(a=>[a.teamName,a.memberCount,a.initiativeCount,a.activeInitiativeCount,a.openIssueCount,a.totalIssueCount,`${a.completionRate}%`,a.capacityStatus,a.capacityScore,`"${a.initiatives.map(d=>`${d.name} (${d.progress}%)`).join("; ")}"`]);return[c.join(","),...r.map(a=>a.join(","))].join(`
`)}function bd(o,c){const r=ja(c),l=[];return o.forEach(a=>{const d=new Map;a.issues.forEach(u=>{const g=r.get(u.iid);g&&g.dependencies.length>0&&g.dependencies.forEach(f=>{const x=o.find(m=>m.issues.some(b=>b.iid===f.iid));if(x&&x.id!==a.id){d.has(x.id)||d.set(x.id,{initiative:x,dependencyCount:0,openDependencies:0,blockedIssues:[],blockingIssues:[]});const m=d.get(x.id);m.dependencyCount++,f.state==="opened"&&m.openDependencies++,m.blockedIssues.push({iid:u.iid,title:u.title,state:u.state}),m.blockingIssues.push({iid:f.iid,title:f.title,state:f.state})}})}),d.size>0&&l.push({initiativeId:a.id,initiativeName:a.name,initiativeStatus:a.status,initiativeProgress:a.progress,dependsOn:Array.from(d.values()).map(u=>({initiativeId:u.initiative.id,initiativeName:u.initiative.name,initiativeStatus:u.initiative.status,initiativeProgress:u.initiative.progress,dependencyCount:u.dependencyCount,openDependencies:u.openDependencies,isBlocking:u.openDependencies>0,severity:Y1(u.openDependencies,u.dependencyCount,u.initiative.status,u.initiative.progress),blockedIssues:u.blockedIssues,blockingIssues:u.blockingIssues}))})}),l}function Y1(o,c,r,l){return o===0?"low":o>=3||r==="delayed"||l<50?"high":o>=1||r==="at-risk"?"medium":"low"}function Q1(o,c){const r=bd(o,c),l=[];return o.forEach(a=>{const d={initiative:a.name,initiativeId:a.id,status:a.status,dependencies:{}};o.forEach(u=>{if(a.id===u.id)d.dependencies[u.id]={type:"self"};else{const f=r.find(x=>x.initiativeId===a.id)?.dependsOn.find(x=>x.initiativeId===u.id);f?d.dependencies[u.id]={type:"depends",count:f.dependencyCount,openCount:f.openDependencies,isBlocking:f.isBlocking,severity:f.severity}:d.dependencies[u.id]={type:"none"}}}),l.push(d)}),{matrix:l,initiatives:o.map(a=>({id:a.id,name:a.name,status:a.status,progress:a.progress}))}}function X1(o,c){const r=bd(o,c),l=new Map;return r.forEach(a=>{a.dependsOn.forEach(d=>{if(d.isBlocking){l.has(d.initiativeId)||l.set(d.initiativeId,{initiativeId:d.initiativeId,initiativeName:d.initiativeName,initiativeStatus:d.initiativeStatus,initiativeProgress:d.initiativeProgress,blockedInitiatives:[],totalBlockedIssues:0,highestSeverity:"low"});const u=l.get(d.initiativeId);u.blockedInitiatives.push({initiativeId:a.initiativeId,initiativeName:a.initiativeName,openDependencies:d.openDependencies,severity:d.severity}),u.totalBlockedIssues+=d.openDependencies,d.severity==="high"?u.highestSeverity="high":d.severity==="medium"&&u.highestSeverity!=="high"&&(u.highestSeverity="medium")}})}),Array.from(l.values()).sort((a,d)=>{const u={high:3,medium:2,low:1},g=u[d.highestSeverity]-u[a.highestSeverity];return g!==0?g:d.blockedInitiatives.length-a.blockedInitiatives.length})}function K1(o){const c=["Initiative","Status","Progress %","Depends On Initiative","Dependency Status","Dependency Progress %","Total Dependencies","Open Dependencies","Severity","Is Blocking"],r=[];return o.forEach(a=>{a.dependsOn.length===0?r.push([a.initiativeName,a.initiativeStatus,a.initiativeProgress,"No dependencies","-","-","0","0","-","No"]):a.dependsOn.forEach((d,u)=>{r.push([u===0?a.initiativeName:"",u===0?a.initiativeStatus:"",u===0?a.initiativeProgress:"",d.initiativeName,d.initiativeStatus,d.initiativeProgress,d.dependencyCount,d.openDependencies,d.severity,d.isBlocking?"Yes":"No"])})}),[c.join(","),...r.map(a=>a.map(d=>typeof d=="string"&&d.includes(",")?`"${d}"`:d).join(","))].join(`
`)}function J1(o,c,r=null){const l=o.issues.filter(w=>w.state==="opened");if(l.length===0)return{isComplete:!0,forecastDate:new Date,confidence:100,weeksRemaining:0,variance:{optimistic:0,pessimistic:0}};const a=Z1(o);if(a.weeklyAverage===0)return{isComplete:!1,forecastDate:null,confidence:0,weeksRemaining:null,variance:{optimistic:null,pessimistic:null},reason:"No historical velocity data available"};const d=l.length;let u=0,g=!1;l.forEach(w=>{const H=w.labels?.find(U=>U.toLowerCase().startsWith("sp::"));if(H){g=!0;const U=parseInt(H.split("::")[1],10);isNaN(U)||(u+=U)}});const f=g?"storyPoints":"issueCount",x=g?u:d,m=g?a.weeklyPointsAverage:a.weeklyAverage,b=Math.ceil(x/m),v=ib(a.trend,a.consistency),D=sb(b,a.consistency),j=new Date;return j.setDate(j.getDate()+b*7),{isComplete:!1,forecastDate:j,confidence:v,weeksRemaining:b,variance:D,velocity:{weeklyAverage:a.weeklyAverage,weeklyPointsAverage:a.weeklyPointsAverage,trend:a.trend,consistency:a.consistency},remainingWork:{issues:d,storyPoints:g?u:null,metric:f}}}function Z1(o,c){const r=o.issues.filter(m=>m.state==="closed");if(r.length===0)return{weeklyAverage:0,weeklyPointsAverage:0,trend:0,consistency:0};const l=new Map;r.forEach(m=>{if(!m.closed_at)return;const b=new Date(m.closed_at),v=eb(b);l.has(v)||l.set(v,{issueCount:0,storyPoints:0,week:v});const D=l.get(v);D.issueCount++;const j=m.labels?.find(w=>w.toLowerCase().startsWith("sp::"));if(j){const w=parseInt(j.split("::")[1],10);isNaN(w)||(D.storyPoints+=w)}});const d=Array.from(l.values()).sort((m,b)=>b.week.localeCompare(m.week)).slice(0,8),u=d.length>0?d.reduce((m,b)=>m+b.issueCount,0)/d.length:0,g=d.length>0?d.reduce((m,b)=>m+b.storyPoints,0)/d.length:0,f=tb(d.map(m=>m.issueCount)),x=nb(d.map(m=>m.issueCount));return{weeklyAverage:u,weeklyPointsAverage:g,trend:f,consistency:x}}function eb(o){const c=o.getFullYear(),r=new Date(c,0,1),l=Math.floor((o-r)/(1440*60*1e3)),a=Math.ceil((l+r.getDay()+1)/7);return`${c}-${a.toString().padStart(2,"0")}`}function tb(o){if(o.length<2)return 0;const c=o.length,r=c*(c-1)/2,l=o.reduce((f,x)=>f+x,0),a=o.reduce((f,x,m)=>f+m*x,0),d=c*(c-1)*(2*c-1)/6,u=(c*a-r*l)/(c*d-r*r),g=l/c;return g!==0?u/g*100:0}function nb(o){if(o.length<2)return 100;const c=o.reduce((d,u)=>d+u,0)/o.length,r=o.reduce((d,u)=>d+Math.pow(u-c,2),0)/o.length,l=Math.sqrt(r),a=c!==0?l/c*100:0;return Math.max(0,100-a)}function ib(o,c){let r=c;return o>10?r=Math.min(100,r+10):o<-10&&(r=Math.max(0,r-15)),Math.round(r)}function sb(o,c,r){const l=(100-c)/100,a=Math.max(1,Math.ceil(o*(1-.2*(c/100)))),d=Math.ceil(o*(1+(.5+l*.5)));return{optimistic:a,pessimistic:d}}function ob(o,c){if(!o.dueDate||!c.forecastDate)return{hasDueDate:!1,hasOutlooking:c.forecastDate!==null,gap:null,status:"unknown"};const r=new Date(o.dueDate),l=c.forecastDate,a=Math.round((l-r)/(1e3*60*60*24));let d="on-track";return a>14?d="at-risk":a>7?d="warning":a<-14&&(d="ahead"),{hasDueDate:!0,hasForecast:!0,dueDate:r,forecastDate:l,gap:a,status:d,isLate:a>0,weeksGap:Math.round(a/7)}}function lb(o,c){return o.map(r=>{const l=J1(r),a=ob(r,l);return{initiativeId:r.id,initiativeName:r.name,initiativeStatus:r.status,initiativeProgress:r.progress,dueDate:r.dueDate,...l,comparison:a}}).sort((r,l)=>r.comparison.hasDueDate?l.comparison.hasDueDate?l.comparison.gap-r.comparison.gap:-1:1)}function ab(o){const c=["Initiative","Status","Progress %","Due Date","Forecast Date","Gap (Days)","Gap (Weeks)","Forecast Status","Weeks Remaining","Confidence %","Optimistic (Weeks)","Pessimistic (Weeks)","Weekly Velocity","Remaining Issues"],r=o.map(a=>[a.initiativeName,a.initiativeStatus,a.initiativeProgress,a.dueDate?new Date(a.dueDate).toLocaleDateString():"No due date",a.forecastDate?a.forecastDate.toLocaleDateString():"Cannot forecast",a.comparison.hasDueDate&&a.comparison.hasForecast?a.comparison.gap:"-",a.comparison.hasDueDate&&a.comparison.hasForecast?a.comparison.weeksGap:"-",a.comparison.status||"unknown",a.weeksRemaining||"-",a.confidence||"-",a.variance?.optimistic||"-",a.variance?.pessimistic||"-",a.velocity?.weeklyAverage?.toFixed(1)||"-",a.remainingWork?.issues||"-"]);return[c.join(","),...r.map(a=>a.map(d=>typeof d=="string"&&d.includes(",")?`"${d}"`:d).join(","))].join(`
`)}function Ah(o){if(!o)return"N/A";const c={month:"short",day:"numeric",year:"numeric"};return o.toLocaleDateString("en-US",c)}function rb(o){const c={"on-track":{label:"On Track",color:"#059669",background:"#D1FAE5"},warning:{label:"Minor Delay",color:"#D97706",background:"#FEF3C7"},"at-risk":{label:"At Risk",color:"#DC2626",background:"#FEE2E2"},ahead:{label:"Ahead",color:"#0891B2",background:"#CFFAFE"},unknown:{label:"Unknown",color:"#6B7280",background:"#F3F4F6"}};return c[o]||c.unknown}function cb({issues:o,epics:c,milestones:r}){const[l,a]=W.useState("overview"),[d,u]=W.useState(null),g=W.useMemo(()=>!c||!o?[]:Ph(c,o),[c,o]),f=W.useMemo(()=>W1(o||[]),[o]),x=W.useMemo(()=>_1(g),[g,o]),m=W.useMemo(()=>P1(f,g),[f,g]),b=W.useMemo(()=>L1(g),[g,o]),v=W.useMemo(()=>bd(g,o||[]),[g,o]),D=W.useMemo(()=>Q1(g,o||[]),[g,o]),j=W.useMemo(()=>X1(g,o||[]),[g,o]),w=W.useMemo(()=>lb(g),[g,o]),H=W.useMemo(()=>H1(g),[g]),U=()=>{const R=G1(x),L=new Date().toISOString().split("T")[0];Bn(R,`team-attribution-${L}.csv`)},G=()=>{const R=V1(b),L=new Date().toISOString().split("T")[0];Bn(R,`resource-contention-${L}.csv`)},$=()=>{const R=q1(m),L=new Date().toISOString().split("T")[0];Bn(R,`team-capacity-${L}.csv`)},B=()=>{const R=K1(v),L=new Date().toISOString().split("T")[0];Bn(R,`initiative-dependencies-${L}.csv`)},M=()=>{const R=ab(w),L=new Date().toISOString().split("T")[0];Bn(R,`initiative-forecasts-${L}.csv`)};return g.length===0?e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{padding:"60px 40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"20px",marginBottom:"12px",color:"var(--text-secondary)"},children:"No Initiatives Found"}),e.jsx("p",{style:{fontSize:"14px",color:"var(--text-tertiary)",marginBottom:"20px"},children:'Tag epics with "initiative::name" labels to start tracking cross-team coordination'}),e.jsxs("p",{style:{fontSize:"13px",color:"var(--text-tertiary)"},children:["Example: ",e.jsx("code",{style:{padding:"2px 6px",background:"var(--bg-secondary)",borderRadius:"4px"},children:"initiative::platform-modernization"})]})]})}):e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:"Cross-Team Coordination"}),e.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Manage cross-team initiatives with team attribution, dependencies, and forecasting"})]}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"30px",borderBottom:"2px solid var(--border-light)",paddingBottom:"0"},children:[{id:"overview",label:"Overview"},{id:"teams",label:"Team Capacity"},{id:"dependencies",label:"Dependencies"},{id:"forecasts",label:"Forecasts"},{id:"resources",label:"Resource Contention"}].map(R=>e.jsx("button",{onClick:()=>a(R.id),style:{padding:"12px 20px",background:"none",border:"none",borderBottom:l===R.id?"2px solid var(--primary)":"2px solid transparent",color:l===R.id?"var(--primary)":"var(--text-secondary)",fontWeight:l===R.id?"600":"400",fontSize:"14px",cursor:"pointer",marginBottom:"-2px",transition:"all 0.2s"},children:R.label},R.id))}),l==="overview"&&e.jsx(db,{initiatives:g,teams:f,teamCapacity:m,resourceContention:b,blockingInitiatives:j,forecasts:w}),l==="teams"&&e.jsx(pb,{teamCapacity:m,initiativeAttributions:x,onExportAttribution:U,onExportCapacity:$}),l==="dependencies"&&e.jsx(ub,{initiativeDependencies:v,dependencyMatrix:D,blockingInitiatives:j,onExport:B}),l==="forecasts"&&e.jsx(xb,{forecasts:w,initiatives:g,onExport:M}),l==="resources"&&e.jsx(hb,{resourceContention:b,sharedResources:H,onExport:G})]})}function db({initiatives:o,teams:c,teamCapacity:r,resourceContention:l,blockingInitiatives:a,forecasts:d}){const u=d.filter(x=>x.comparison.status==="at-risk"||x.comparison.status==="warning"),g=r.filter(x=>x.capacityStatus==="overloaded"),f=l.filter(x=>x.contentionLevel>=70);return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-4",style:{marginBottom:"30px"},children:[e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Total Initiatives"}),e.jsx("div",{className:"metric-value",style:{color:"var(--info)"},children:o.length}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:[o.filter(x=>x.progress<100).length," active"]})]}),e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Teams Involved"}),e.jsx("div",{className:"metric-value",style:{color:"var(--primary)"},children:c.length}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:[g.length," overloaded"]})]}),e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"At-Risk Forecasts"}),e.jsx("div",{className:"metric-value",style:{color:"var(--danger)"},children:u.length}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:"Delayed delivery risk"})]}),e.jsxs("div",{className:"card metric-card",children:[e.jsx("div",{className:"metric-label",children:"Resource Conflicts"}),e.jsx("div",{className:"metric-value",style:{color:"var(--warning)"},children:f.length}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:"Critical contention"})]})]}),e.jsxs("div",{className:"grid grid-2",style:{gap:"30px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Blocking Initiatives"}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"20px"},children:"Initiatives that are blocking other initiatives"}),a.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"No blocking dependencies found"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:a.slice(0,3).map(x=>e.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px",borderLeft:`4px solid ${x.highestSeverity==="high"?"var(--danger)":x.highestSeverity==="medium"?"var(--warning)":"var(--info)"}`},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"8px"},children:x.initiativeName}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"8px"},children:["Blocking ",x.blockedInitiatives.length," initiative",x.blockedInitiatives.length!==1?"s":"","  ",x.totalBlockedIssues," open dependencies"]}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:["Status: ",e.jsx("strong",{style:{textTransform:"capitalize"},children:x.initiativeStatus}),"  Progress: ",e.jsxs("strong",{children:[x.initiativeProgress,"%"]})]})]},x.initiativeId))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Overloaded Teams"}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"20px"},children:"Teams at or above capacity"}),g.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",background:"var(--bg-secondary)",borderRadius:"8px"},children:e.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"No overloaded teams"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:g.slice(0,3).map(x=>e.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"15px",fontWeight:"600"},children:x.teamName}),e.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",color:"var(--danger)",background:"#FEE2E2"},children:"Overloaded"})]}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"8px"},children:[x.activeInitiativeCount," active initiatives  ",x.openIssueCount," open issues"]}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:[x.memberCount," member",x.memberCount!==1?"s":"","  Capacity: ",x.capacityScore,"/100"]})]},x.teamName))})]})]})]})}function pb({teamCapacity:o,initiativeAttributions:c,onExportAttribution:r,onExportCapacity:l}){return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Team Capacity Overview"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Export Capacity"}),e.jsx("button",{className:"btn btn-primary",onClick:r,children:"Export Attribution"})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map(a=>{const d=a.capacityStatus==="overloaded"?"var(--danger)":a.capacityStatus==="at-capacity"?"var(--warning)":"var(--success)";return e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:a.teamName}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[a.memberCount," member",a.memberCount!==1?"s":"","  ",a.completionRate,"% completion rate"]})]}),e.jsx("span",{style:{padding:"6px 14px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:d,background:`${d}15`,textTransform:"capitalize"},children:a.capacityStatus.replace("-"," ")})]}),e.jsxs("div",{className:"grid grid-3",style:{marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Active Initiatives"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--primary)"},children:a.activeInitiativeCount})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Open Issues"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--warning)"},children:a.openIssueCount})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Capacity Score"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:d},children:a.capacityScore})]})]}),a.initiatives.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"var(--text-tertiary)",marginBottom:"8px",fontWeight:"600"},children:"Initiatives:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:a.initiatives.map(u=>e.jsxs("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",background:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[u.name," (",u.progress,"%)"]},u.id))})]})]},a.teamName)})})]})}function ub({initiativeDependencies:o,blockingInitiatives:c,onExport:r}){return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Initiative Dependencies"}),e.jsx("button",{className:"btn btn-primary",onClick:r,children:"Export Dependencies"})]}),o.length===0?e.jsx("div",{className:"card",style:{padding:"60px 40px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"16px",color:"var(--text-secondary)"},children:"No cross-initiative dependencies found"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map(l=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:l.initiativeName}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["Depends on ",l.dependsOn.length," initiative",l.dependsOn.length!==1?"s":""]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.dependsOn.map(a=>e.jsx("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"6px",borderLeft:`4px solid ${a.severity==="high"?"var(--danger)":a.severity==="medium"?"var(--warning)":"var(--success)"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:a.initiativeName}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[a.dependencyCount," dependencies  ",a.openDependencies," open",a.isBlocking&&e.jsx("span",{style:{color:"var(--danger)",marginLeft:"8px"},children:" Blocking"})]})]}),e.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textTransform:"capitalize",color:a.severity==="high"?"var(--danger)":a.severity==="medium"?"var(--warning)":"var(--success)",background:a.severity==="high"?"#FEE2E2":a.severity==="medium"?"#FEF3C7":"#D1FAE5"},children:a.severity})]})},a.initiativeId))})]},l.initiativeId))})]})}function xb({forecasts:o,onExport:c}){return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Initiative Forecasts"}),e.jsx("button",{className:"btn btn-primary",onClick:c,children:"Export Forecasts"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map(r=>{const l=rb(r.comparison.status);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:r.initiativeName}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["Progress: ",r.initiativeProgress,"%  Status: ",e.jsx("span",{style:{textTransform:"capitalize"},children:r.initiativeStatus})]})]}),r.comparison.hasDueDate&&r.comparison.hasForecast&&e.jsx("span",{style:{padding:"6px 14px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:l.color,background:l.background},children:l.label})]}),e.jsxs("div",{className:"grid grid-3",style:{marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Due Date"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:r.dueDate?Ah(new Date(r.dueDate)):"Not set"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Forecast Date"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:r.forecastDate?Ah(r.forecastDate):"No forecast"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Gap"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:r.comparison.isLate?"var(--danger)":"var(--success)"},children:r.comparison.hasDueDate&&r.comparison.hasForecast?`${Math.abs(r.comparison.weeksGap)} week${Math.abs(r.comparison.weeksGap)!==1?"s":""} ${r.comparison.isLate?"late":"early"}`:"N/A"})]})]}),r.velocity&&e.jsxs("div",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"6px",fontSize:"12px",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Velocity:"})," ",r.velocity.weeklyAverage.toFixed(1)," issues/week ",e.jsx("strong",{style:{marginLeft:"12px"},children:"Confidence:"})," ",r.confidence,"% ",e.jsx("strong",{style:{marginLeft:"12px"},children:"Range:"})," ",r.variance?.optimistic,"-",r.variance?.pessimistic," weeks"]})]},r.initiativeId)})})]})}function hb({resourceContention:o,sharedResources:c,onExport:r}){return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Resource Contention"}),e.jsx("button",{className:"btn btn-primary",onClick:r,children:"Export Contention"})]}),o.length===0?e.jsx("div",{className:"card",style:{padding:"60px 40px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"16px",color:"var(--text-secondary)"},children:"No resource contention detected"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:o.map(l=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px"},children:l.name}),e.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["@",l.username]})]}),e.jsxs("span",{style:{padding:"6px 14px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:l.contentionLevel>=70?"var(--danger)":l.contentionLevel>=40?"var(--warning)":"var(--info)",background:l.contentionLevel>=70?"#FEE2E2":l.contentionLevel>=40?"#FEF3C7":"#DBEAFE"},children:["Level ",l.contentionLevel]})]}),e.jsxs("div",{className:"grid grid-3",style:{marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Initiatives"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--primary)"},children:l.initiativeCount})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"High Priority"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--danger)"},children:l.highPriorityCount})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginBottom:"4px"},children:"Open Issues"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--warning)"},children:l.totalIssues})]})]}),l.teams.length>0&&e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Teams:"})," ",l.teams.join(", ")]})]},l.username))})]})}function gb(o){const c=new Map;return o.forEach(r=>{if(r.assignee){const l=r.assignee.username;c.has(l)||c.set(l,{username:r.assignee.username,name:r.assignee.name||r.assignee.username,avatarUrl:r.assignee.avatar_url||r.assignee.web_url?.replace(/users\/.*/,`users/${r.assignee.username}.png`),role:"Developer",defaultCapacity:40,source:"gitlab",lastSeen:r.updated_at})}if(r.author&&r.author.username!==r.assignee?.username){const l=r.author.username;c.has(l)||c.set(l,{username:r.author.username,name:r.author.name||r.author.username,avatarUrl:r.author.avatar_url||r.author.web_url?.replace(/users\/.*/,`users/${r.author.username}.png`),role:"Developer",defaultCapacity:40,source:"gitlab",lastSeen:r.updated_at})}}),Array.from(c.values())}function Th(o,c,r=90){const l=new Date;l.setDate(l.getDate()-r);const a=o.filter(x=>x.assignee?.username!==c.username?!1:x.state==="closed"&&x.closed_at?new Date(x.closed_at)>=l:!1);let d=0,u=0,g=0;a.forEach(x=>{const m=x.labels?.find(b=>b.startsWith("sp::"));if(m){const b=parseInt(m.replace("sp::",""));isNaN(b)||(d+=b)}x.time_stats?.total_time_spent&&(u+=x.time_stats.total_time_spent/3600),g++});const f=r/7;return{totalPoints:d,totalTimeSpent:Math.round(u),issueCount:g,averagePointsPerWeek:f>0?Math.round(d/f*10)/10:0,averageHoursPerWeek:f>0?Math.round(u/f*10)/10:0,periodDays:r}}function fb(o,c,r){const l=new Map;o.forEach(d=>{l.set(d.username,{...d})}),c.forEach(d=>{if(l.has(d.username)){const u=l.get(d.username);l.set(d.username,{...u,name:d.name||u.name,avatarUrl:d.avatarUrl||u.avatarUrl,lastSeen:d.lastSeen})}else{const u=Th(r,d);let g=40;u.averageHoursPerWeek>0&&(g=Math.round(u.averageHoursPerWeek/5)*5,g=Math.max(10,Math.min(60,g))),l.set(d.username,{...d,defaultCapacity:g,velocity:u})}});const a=Array.from(l.values());return a.forEach(d=>{d.velocity||(d.velocity=Th(r,d))}),a}function mb(o,c={}){const{autoDetectRoles:r=!0,preserveCustomSettings:l=!0,velocityPeriodDays:a=90}=c,u=ht().teamMembers||[],g=gb(o);r&&g.forEach(x=>{const m=o.filter(j=>j.assignee?.username===x.username||j.author?.username===x.username),b=m.some(j=>j.labels?.some(w=>w.toLowerCase().includes("test")||w.toLowerCase().includes("qa"))),v=m.some(j=>j.labels?.some(w=>w.toLowerCase().includes("devops")||w.toLowerCase().includes("infrastructure"))),D=m.some(j=>j.labels?.some(w=>w.toLowerCase().includes("analysis")||w.toLowerCase().includes("requirement")));b?x.role="QA Engineer":v?x.role="DevOps Engineer":D&&(x.role="Business Analyst")});const f=l?fb(u,g,o):g;return{members:f,imported:g.length,existing:u.length,new:f.length-u.length}}function yb(o,c,r=90){const l=new Date;l.setDate(l.getDate()-r);const a=o.filter(m=>m.state!=="closed"||!m.closed_at?!1:new Date(m.closed_at)>=l);let d=0,u=0,g=0;a.forEach(m=>{const b=m.labels?.find(v=>v.startsWith("sp::"));if(b){const v=parseInt(b.replace("sp::",""));isNaN(v)||(d+=v)}m.time_stats&&(m.time_stats.total_time_spent&&(u+=m.time_stats.total_time_spent/3600),m.time_stats.time_estimate&&(g+=m.time_stats.time_estimate/3600))});const f=r/7;let x=6;return d>0&&u>0&&(x=Math.round(u/d*10)/10),{periodDays:r,closedIssues:a.length,totalPoints:d,totalHoursSpent:Math.round(u),totalHoursEstimated:Math.round(g),averagePointsPerWeek:f>0?Math.round(d/f*10)/10:0,averageHoursPerWeek:f>0?Math.round(u/f*10)/10:0,hoursPerStoryPoint:x,estimateAccuracy:g>0?Math.round(u/g*100):null}}function vb({isCrossProject:o,onTeamUpdate:c,issues:r=[]}){const[l,a]=W.useState([]),[d,u]=W.useState(null),[g,f]=W.useState({username:"",name:"",gpn:"",tNumber:"",avatarUrl:"",role:"Developer",defaultCapacity:40}),[x,m]=W.useState(null),[b,v]=W.useState(!1),[D,j]=W.useState(null);W.useEffect(()=>{w()},[]),W.useEffect(()=>{if(l.length>0&&r.length>0){const B=yb(r);j(B)}},[l,r]);const w=()=>{const B=ht();a(B.teamMembers||[])},H=()=>{if(r.length===0){m({type:"error",message:"No issues available to import from"});return}const B=mb(r,{autoDetectRoles:!0,preserveCustomSettings:!0,velocityPeriodDays:90});a(B.members),m({type:"success",message:`Imported ${B.imported} members (${B.new} new, ${B.existing} existing)`});const M=ht();M.teamMembers=B.members,Ui(M),c(),setTimeout(()=>m(null),5e3)},U=()=>{if(!g.username.trim()){alert("Please enter a username");return}if(l.find(L=>L.username===g.username)){alert("Team member already exists");return}const M=[...l,{...g}];a(M),f({username:"",name:"",gpn:"",tNumber:"",avatarUrl:"",role:"Developer",defaultCapacity:40});const R=ht();R.teamMembers=M,Ui(R),c()},G=(B,M,R)=>{const L=[...l];L[B]={...L[B],[M]:R},a(L);const O=ht();O.teamMembers=L,Ui(O),c()},$=B=>{if(confirm(`Remove ${l[B].username} from the team?`)){const M=l.filter((L,O)=>O!==B);a(M);const R=ht();R.teamMembers=M,Ui(R),c()}};return o?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{style:{color:"#374151",marginBottom:"8px"},children:"Team Configuration Unavailable"}),e.jsx("p",{style:{color:"#6B7280"},children:"Please select a specific project to manage team members. Different projects have different teams."})]}):e.jsxs("div",{children:[x&&e.jsx("div",{style:{padding:"12px 16px",background:x.type==="error"?"#FEE2E2":"#D1FAE5",color:x.type==="error"?"#DC2626":"#065F46",border:`1px solid ${x.type==="error"?"#FCA5A5":"#6EE7B7"}`,borderRadius:"6px",marginBottom:"16px",fontSize:"14px"},children:x.message}),D&&e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:"Team Velocity (Last 90 Days)"}),e.jsxs("button",{onClick:()=>v(!b),style:{padding:"4px 8px",background:"transparent",color:"#3B82F6",border:"none",fontSize:"12px",cursor:"pointer"},children:[b?"Hide":"Show"," Details"]})]}),b&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Closed Issues"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1F2937"},children:D.closedIssues})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Total Points"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#3B82F6"},children:D.totalPoints})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Avg Points/Week"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#10B981"},children:D.averagePointsPerWeek})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Hours/Story Point"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#F59E0B"},children:[D.hoursPerStoryPoint,"h"]})]}),D.estimateAccuracy!==null&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Estimate Accuracy"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:D.estimateAccuracy>120?"#DC2626":D.estimateAccuracy<80?"#F59E0B":"#10B981"},children:[D.estimateAccuracy,"%"]})]})]})]}),e.jsxs("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:"Team Roster"}),e.jsx("button",{onClick:H,style:{padding:"8px 16px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:"Import from Issues"})]}),l.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("p",{children:"No team members configured yet. Add your first team member below."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map((B,M)=>e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{children:B.avatarUrl?e.jsx("img",{src:B.avatarUrl,alt:B.name||B.username,style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover",border:"2px solid #E5E7EB"},onError:R=>{R.target.style.display="none"}}):e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#E5E7EB",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#9CA3AF",fontWeight:"600"},children:(B.name||B.username).charAt(0).toUpperCase()})}),e.jsx("div",{style:{flex:1},children:d===M?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"Name"}),e.jsx("input",{type:"text",value:B.name||"",onChange:R=>G(M,"name",R.target.value),placeholder:"Full Name",style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"Username"}),e.jsx("input",{type:"text",value:B.username,onChange:R=>G(M,"username",R.target.value),style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"GPN"}),e.jsx("input",{type:"text",value:B.gpn||"",onChange:R=>G(M,"gpn",R.target.value),placeholder:"Employee Number",style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"T-Number"}),e.jsx("input",{type:"text",value:B.tNumber||"",onChange:R=>G(M,"tNumber",R.target.value),placeholder:"T-Number",style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"Avatar URL"}),e.jsx("input",{type:"text",value:B.avatarUrl||"",onChange:R=>G(M,"avatarUrl",R.target.value),placeholder:"https://...",style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"Role"}),e.jsx("select",{value:B.role,onChange:R=>G(M,"role",R.target.value),style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"},children:Pi.map(R=>e.jsx("option",{value:R,children:R},R))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#6B7280",marginBottom:"4px",fontWeight:"500"},children:"Weekly Capacity"}),e.jsx("input",{type:"number",value:B.defaultCapacity,onChange:R=>G(M,"defaultCapacity",parseInt(R.target.value)),style:{padding:"6px 10px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",width:"100%"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:B.name||B.username}),e.jsx("span",{style:{padding:"3px 10px",background:"#EEF2FF",color:"#4F46E5",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:B.role}),e.jsxs("span",{style:{padding:"3px 10px",background:"#F3F4F6",color:"#6B7280",borderRadius:"12px",fontSize:"11px",fontWeight:"500"},children:[B.defaultCapacity,"h/week"]})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[B.username&&e.jsxs("span",{children:["@",B.username]}),B.gpn&&e.jsxs("span",{children:["GPN: ",B.gpn]}),B.tNumber&&e.jsxs("span",{children:["T-Number: ",B.tNumber]}),B.velocity&&B.velocity.averagePointsPerWeek>0&&e.jsxs("span",{style:{color:"#10B981"},children:[B.velocity.averagePointsPerWeek," pts/week"]})]})]})}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:d===M?e.jsx("button",{onClick:()=>u(null),style:{padding:"8px 16px",background:"#10B981",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Done"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(M),style:{padding:"8px 16px",background:"#F3F4F6",color:"#374151",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Edit"}),e.jsx("button",{onClick:()=>$(M),style:{padding:"8px 16px",background:"#FEE2E2",color:"#DC2626",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Remove"})]})})]},M))})]}),e.jsxs("div",{style:{background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{marginBottom:"16px",fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:"Add Team Member"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:"Name"}),e.jsx("input",{type:"text",value:g.name,onChange:B=>f({...g,name:B.target.value}),placeholder:"Full Name",style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:"Username"}),e.jsx("input",{type:"text",value:g.username,onChange:B=>f({...g,username:B.target.value}),placeholder:"e.g., john.doe",style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:["GPN ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(optional)"})]}),e.jsx("input",{type:"text",value:g.gpn,onChange:B=>f({...g,gpn:B.target.value}),placeholder:"Employee Number",style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:["T-Number ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(optional)"})]}),e.jsx("input",{type:"text",value:g.tNumber,onChange:B=>f({...g,tNumber:B.target.value}),placeholder:"T-Number",style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:"12px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:["Avatar URL ",e.jsx("span",{style:{color:"#9CA3AF",fontWeight:"normal"},children:"(optional)"})]}),e.jsx("input",{type:"text",value:g.avatarUrl,onChange:B=>f({...g,avatarUrl:B.target.value}),placeholder:"https://...",style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:"Role"}),e.jsx("select",{value:g.role,onChange:B=>f({...g,role:B.target.value}),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"},children:Pi.map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"500",color:"#374151"},children:"Hours/Week"}),e.jsx("input",{type:"number",value:g.defaultCapacity,onChange:B=>f({...g,defaultCapacity:parseInt(B.target.value)}),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),e.jsx("button",{onClick:U,style:{padding:"8px 20px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"},children:"+ Add"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"#F0FDF4",border:"1px solid #BBF7D0",borderRadius:"6px",marginTop:"20px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{style:{fontSize:"14px",color:"#065F46"},children:" Changes are saved automatically and update all views"})}),e.jsx("button",{onClick:()=>{if(confirm("Reset all team settings? This will clear the entire team roster.")){a([]);const B=ht();B.teamMembers=[],Ui(B),c()}},style:{padding:"6px 12px",background:"white",color:"#DC2626",border:"1px solid #FCA5A5",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Reset All"})]})]})}function bb({issues:o,isCrossProject:c,refreshKey:r,onAbsenceUpdate:l}){const[a,d]=W.useState([]),[u,g]=W.useState([]),[f,x]=W.useState(3),[m,b]=W.useState(new Date().getFullYear()),[v,D]=W.useState(new Date().getMonth()),[j,w]=W.useState(null),[H,U]=W.useState(null),[G,$]=W.useState("vacation"),B=W.useRef(null),M=[{id:"vacation",label:"Vacation",color:"#3B82F6",bgColor:"#DBEAFE"},{id:"training",label:"Training",color:"#8B5CF6",bgColor:"#EDE9FE"},{id:"sick",label:"Sick Leave",color:"#F59E0B",bgColor:"#FEF3C7"},{id:"other",label:"Other",color:"#6B7280",bgColor:"#F3F4F6"}];W.useEffect(()=>{const k=ht();d(k.teamMembers||[]),R()},[r]);const R=()=>{if(c){const k=u0();g(k)}else{const k=Yi();g(k.absences||[])}},L=W.useMemo(()=>{const k=new Date(m,v,1),A=new Date(m,v+f,0);return{start:k,end:A}},[m,v,f]),O=W.useMemo(()=>{const k=[],A=new Date(L.start);for(;A<=L.end;)k.push(new Date(A)),A.setDate(A.getDate()+1);return k},[L]),y=W.useMemo(()=>o?fa(o).map(A=>{const V=o.find(Q=>Ps(Q.iteration)===A);return{name:A,id:V?.iteration?.id||A,startDate:V?.iteration?.start_date?new Date(V.iteration.start_date):null,dueDate:V?.iteration?.due_date?new Date(V.iteration.due_date):null}}).filter(A=>A.startDate&&A.dueDate).filter(A=>A.startDate<=L.end&&A.dueDate>=L.start).sort((A,V)=>A.startDate-V.startDate):[],[o,L]),C=(k,A)=>{if(!c)if(j){const V=j.startDate<A?j.startDate:A,Q=j.startDate<A?A:j.startDate;x0(j.username,V,Q,"Absence",G),R(),l(),w(null)}else w({username:k,startDate:A})},I=(k,A)=>{j&&j.username===k&&w({...j,currentDate:A})},_=()=>{w(null)},P=k=>{h0(k),R(),l(),U(null)},X=(k,A,V=null)=>u.some(Q=>Q.username===k&&Q.id!==V&&A>=Q.startDate&&A<=Q.endDate),z=(k,A)=>{if(!j||j.username!==k)return!1;const V=j.currentDate||j.startDate,Q=j.startDate<V?j.startDate:V,ae=j.startDate<V?V:j.startDate;return A>=Q&&A<=ae},T=(k,A)=>u.find(V=>V.username===k&&A>=V.startDate&&A<=V.endDate),N=k=>{const A=k.getDay();return A===0||A===6},K=()=>{const k=y0(L.start,L.end),A=new Blob([k],{type:"text/csv"}),V=URL.createObjectURL(A),Q=document.createElement("a");Q.href=V,Q.download=`absences-${L.start.toISOString().split("T")[0]}-to-${L.end.toISOString().split("T")[0]}.csv`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(V)},te=W.useMemo(()=>og(a,L.start,L.end),[a,u,L]),q=W.useMemo(()=>{const k=[];let A=null,V=0;return O.forEach(Q=>{const ae=`${Q.getFullYear()}-${Q.getMonth()}`;ae!==A?(A!==null&&k.push({...k[k.length-1],dayCount:V}),A=ae,V=1,k.push({year:Q.getFullYear(),month:Q.getMonth(),monthName:Q.toLocaleDateString("en-US",{month:"short",year:"numeric"}),dayCount:0})):V++}),k.length>0&&(k[k.length-1].dayCount=V),k},[O]);return a.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{style:{color:"#374151",marginBottom:"8px"},children:"No Team Members"}),e.jsx("p",{style:{color:"#6B7280"},children:"Please add team members in the Team Setup tab first."})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase",marginRight:"4px"},children:"Year"}),e.jsx("button",{onClick:()=>b(m-1),style:{padding:"4px 8px",background:"white",border:"1px solid #D1D5DB",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",color:"#374151"},children:""}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"700",minWidth:"60px",textAlign:"center",color:"#1F2937"},children:m}),e.jsx("button",{onClick:()=>b(m+1),style:{padding:"4px 8px",background:"white",border:"1px solid #D1D5DB",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",color:"#374151"},children:""})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"},children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((k,A)=>e.jsx("button",{onClick:()=>D(A),style:{padding:"4px 8px",background:v===A?"#3B82F6":"white",color:v===A?"white":"#374151",border:v===A?"none":"1px solid #D1D5DB",borderRadius:"4px",fontSize:"11px",fontWeight:v===A?"600":"500",cursor:"pointer",transition:"all 0.15s"},children:k},A))}),e.jsx("div",{style:{width:"1px",height:"24px",background:"#D1D5DB"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase",marginRight:"4px"},children:"Months"}),[1,2,3,6,9,12].map(k=>e.jsx("button",{onClick:()=>x(k),style:{padding:"4px 8px",background:f===k?"#3B82F6":"white",color:f===k?"white":"#374151",border:f===k?"none":"1px solid #D1D5DB",borderRadius:"4px",fontSize:"11px",fontWeight:f===k?"600":"500",cursor:"pointer",transition:"all 0.15s",minWidth:"28px"},children:k},k))]}),e.jsx("div",{style:{flex:1}}),e.jsx("button",{onClick:K,style:{padding:"6px 14px",background:"white",border:"1px solid #D1D5DB",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:e.jsx("span",{children:"Export CSV"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:"Absence Type"}),M.map(k=>e.jsx("button",{onClick:()=>{c||$(k.id)},disabled:c,style:{padding:"6px 14px",background:G===k.id?k.color:"white",color:G===k.id?"white":k.color,border:G===k.id?`2px solid ${k.color}`:`1px solid ${k.color}`,borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:c?"not-allowed":"pointer",transition:"all 0.15s",opacity:c?.5:1,userSelect:"none"},onMouseEnter:A=>{!c&&G!==k.id&&(A.target.style.transform="scale(1.05)",A.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)")},onMouseLeave:A=>{A.target.style.transform="scale(1)",A.target.style.boxShadow="none"},children:k.label},k.id))]})]}),e.jsx("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB",border:"1px solid #E5E7EB"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"TOTAL ABSENCES"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937"},children:te.totalAbsences})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"DAYS OFF"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#2563EB"},children:te.totalDaysOff})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"CAPACITY IMPACT"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#DC2626"},children:[te.totalHoursImpact,"h"]})]})]})}),j&&e.jsx("div",{className:"card",style:{marginBottom:"20px",background:"#EFF6FF",border:"1px solid #3B82F6"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#1E40AF"},children:"Selecting absence period"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1E40AF"},children:"Click on another date to complete the selection, or press ESC to cancel"})]}),e.jsx("button",{onClick:_,style:{padding:"6px 12px",background:"white",border:"1px solid #3B82F6",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",color:"#1E40AF"},children:"Cancel"})]})}),e.jsx("div",{ref:B,style:{overflowX:"auto",overflowY:"visible",border:"1px solid #E5E7EB",borderRadius:"8px",background:"white"},onMouseLeave:_,children:e.jsxs("div",{style:{minWidth:`${Math.max(1200,O.length*24)}px`},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #E5E7EB",background:"#F9FAFB",position:"sticky",top:0,zIndex:10},children:[e.jsx("div",{style:{width:"200px",minWidth:"200px",padding:"12px",fontWeight:"600",fontSize:"12px",color:"#6B7280",borderRight:"2px solid #E5E7EB",background:"#F9FAFB",position:"sticky",left:0,zIndex:11},children:"TEAM MEMBER"}),e.jsx("div",{style:{display:"flex",flex:1},children:q.map((k,A)=>e.jsx("div",{style:{width:`${k.dayCount*24}px`,padding:"12px 8px",textAlign:"center",fontWeight:"600",fontSize:"12px",color:"#1F2937",borderRight:A<q.length-1?"1px solid #D1D5DB":"none"},children:k.monthName},A))})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E5E7EB",background:"#FAFAFA"},children:[e.jsx("div",{style:{width:"200px",minWidth:"200px",borderRight:"2px solid #E5E7EB",background:"#FAFAFA",position:"sticky",left:0,zIndex:9}}),e.jsx("div",{style:{display:"flex",flex:1},children:O.map((k,A)=>{const V=N(k);return e.jsx("div",{style:{width:"24px",minWidth:"24px",padding:"4px 0",textAlign:"center",fontSize:"10px",color:V?"#DC2626":"#6B7280",fontWeight:V?"600":"400",background:V?"#FEF2F2":"transparent"},children:k.getDate()},A)})})]}),y.length>0&&e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E5E7EB",background:"#F0F9FF",height:"24px"},children:[e.jsx("div",{style:{width:"200px",minWidth:"200px",borderRight:"2px solid #E5E7EB",padding:"4px 8px",fontSize:"10px",fontWeight:"600",color:"#1E40AF",background:"#F0F9FF",position:"sticky",left:0,zIndex:9},children:"SPRINTS"}),e.jsx("div",{style:{position:"relative",flex:1},children:y.map((k,A)=>{const V=O.findIndex(ue=>ue>=k.startDate),Q=O.findIndex(ue=>ue>k.dueDate),re=((Q===-1?O.length:Q)-V)*24;return V===-1||re<=0?null:e.jsx("div",{style:{position:"absolute",left:`${V*24}px`,width:`${re}px`,height:"20px",background:"#DBEAFE",border:"1px solid #3B82F6",borderRadius:"4px",fontSize:"9px",padding:"2px 4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#1E40AF",fontWeight:"600"},title:k.name,children:k.name},A)})})]}),a.map((k,A)=>{const V=u.filter(Q=>Q.username===k.username);return e.jsxs("div",{style:{display:"flex",borderBottom:A<a.length-1?"1px solid #E5E7EB":"none"},children:[e.jsxs("div",{style:{width:"200px",minWidth:"200px",padding:"12px",borderRight:"2px solid #E5E7EB",background:"white",position:"sticky",left:0,zIndex:8},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1F2937",marginBottom:"2px"},children:k.name||k.username}),e.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:k.role||"Team Member"}),e.jsxs("div",{style:{fontSize:"10px",color:"#9CA3AF",marginTop:"4px"},children:[k.defaultCapacity!==void 0&&k.defaultCapacity!==null?k.defaultCapacity:40,"h/week"]})]}),e.jsxs("div",{style:{display:"flex",flex:1,position:"relative"},children:[O.map((Q,ae)=>{const re=N(Q),ue=X(k.username,Q),fe=z(k.username,Q),xe=T(k.username,Q),ze=M.find(ge=>ge.id===G)?.bgColor||"#DBEAFE";return e.jsx("div",{onClick:()=>!ue&&!c&&C(k.username,Q),onMouseEnter:()=>!c&&I(k.username,Q),style:{width:"24px",minWidth:"24px",height:"60px",background:fe?ze:ue?"#FEE2E2":re?"#F9FAFB":"white",borderRight:ae<O.length-1?"1px solid #F3F4F6":"none",cursor:c?"default":ue?"pointer":"crosshair",position:"relative",opacity:c?.7:1},title:xe?`${xe.reason} (${xe.type})`:c?"Select a project to edit absences":""},ae)}),V.map((Q,ae)=>{const re=O.findIndex(Be=>Be>=Q.startDate),ue=O.findIndex(Be=>Be>Q.endDate),xe=((ue===-1?O.length:ue)-re)*24;if(re===-1||xe<=0)return null;const ze={vacation:{bg:"#DBEAFE",border:"#3B82F6",text:"#1E40AF"},training:{bg:"#EDE9FE",border:"#8B5CF6",text:"#5B21B6"},sick:{bg:"#FEF3C7",border:"#F59E0B",text:"#92400E"},other:{bg:"#F3F4F6",border:"#6B7280",text:"#374151"}},ge=ze[Q.type]||ze.other;return e.jsxs("div",{onClick:Be=>{Be.stopPropagation(),c||U(Q)},style:{position:"absolute",left:`${re*24}px`,top:"8px",width:`${xe}px`,height:"44px",background:ge.bg,border:`2px solid ${ge.border}`,borderRadius:"6px",padding:"4px 6px",fontSize:"11px",fontWeight:"600",color:ge.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:c?"default":"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:5,opacity:c?.7:1},title:c?`${Q.reason||Q.type} (Project: ${Q._projectId||"default"})
Read-only in cross-project view`:`${Q.reason||Q.type}
Click to edit`,children:[Q.reason||Q.type,c&&Q._projectId&&e.jsxs("span",{style:{fontSize:"9px",opacity:.7,marginLeft:"4px"},children:["[",Q._projectId,"]"]})]},ae)})]})]},k.username)})]})}),H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>U(null),children:e.jsxs("div",{className:"card",style:{width:"400px",maxWidth:"90%"},onClick:k=>k.stopPropagation(),children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Absence Details"}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Team Member:"})," ",H.username]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Period:"})," ",H.startDate.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})," - ",H.endDate.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Type:"})," ",H.type]}),H.reason&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Reason:"})," ",H.reason]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Working Days:"})," ",(a.find(A=>A.username===H.username),Us(H.startDate,H.endDate))]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Capacity Impact:"})," ",(()=>{const k=a.find(re=>re.username===H.username),A=k?.defaultCapacity!==void 0&&k?.defaultCapacity!==null?k.defaultCapacity:40,V=Us(H.startDate,H.endDate),Q=A/5;return`${Math.round(V*Q*10)/10}h`})()]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e.jsx("button",{onClick:()=>P(H.id),style:{flex:1,padding:"10px",background:"#DC2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Delete"}),e.jsx("button",{onClick:()=>U(null),style:{flex:1,padding:"10px",background:"#F3F4F6",color:"#1F2937",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Close"})]})]})}),e.jsxs("div",{className:"card",style:{marginTop:"20px",background:"#F9FAFB"},children:[e.jsx("h4",{style:{marginBottom:"12px"},children:"How to use"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"#6B7280",lineHeight:"1.6"},children:[e.jsx("li",{children:"Click on a day to start marking an absence"}),e.jsx("li",{children:"Click on another day to complete the absence period"}),e.jsx("li",{children:"Click on an existing absence to view details or delete"}),e.jsx("li",{children:"Weekends are automatically excluded from capacity calculations"}),e.jsx("li",{children:"Absences automatically reduce sprint capacity based on affected days"})]})]})]})}function Fh({issues:o,initialTab:c="team"}){const[r,l]=W.useState(c),d=fn()==="cross-project",[u,g]=W.useState(0),f=()=>g(m=>m+1),x=[{id:"team",label:"Team Setup"},{id:"absences",label:"Absence Calendar"},{id:"forecast",label:"Capacity Forecast"},{id:"scenario",label:"Scenario Planning"}];return e.jsxs("div",{className:"container",style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h1",{children:" Resource Planning"}),e.jsx("p",{style:{color:"#6B7280",marginBottom:"20px"},children:"Manage your team, plan absences, and monitor sprint capacity in one integrated view"}),d&&e.jsxs("div",{style:{background:"#FEF3C7",border:"1px solid #F59E0B",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400E",marginBottom:"4px"},children:"Cross-Project View"}),e.jsx("div",{style:{fontSize:"13px",color:"#92400E"},children:"You're viewing data from all projects. Team configuration and absence editing are disabled in cross-project mode. Select a specific project to manage resources."})]})]}),e.jsx("div",{style:{display:"flex",gap:"4px",borderBottom:"2px solid #E5E7EB",marginBottom:"24px"},children:x.map(m=>e.jsx("button",{onClick:()=>l(m.id),style:{padding:"12px 24px",background:r===m.id?"white":"transparent",color:r===m.id?"#3B82F6":"#6B7280",border:"none",borderBottom:r===m.id?"3px solid #3B82F6":"3px solid transparent",borderRadius:"6px 6px 0 0",fontSize:"14px",fontWeight:r===m.id?"600":"500",cursor:"pointer",transition:"all 0.2s",marginBottom:"-2px"},children:m.label},m.id))})]}),e.jsxs("div",{children:[r==="team"&&e.jsx(vb,{isCrossProject:d,onTeamUpdate:f}),r==="absences"&&e.jsx(bb,{issues:o,isCrossProject:d,refreshKey:u,onAbsenceUpdate:f}),r==="forecast"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"Capacity Forecast"}),e.jsx("p",{style:{color:"#6B7280"},children:"Coming soon: Forecast future sprint capacity based on historical velocity, planned absences, and team changes."})]}),r==="scenario"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"Scenario Planning"}),e.jsx("p",{style:{color:"#6B7280"},children:"Coming soon: What-if scenario planning for resource allocation and capacity forecasting."})]})]})]})}function jb({issues:o=[],epics:c=[],milestones:r=[]}){const[l,a]=W.useState("all"),[d,u]=W.useState(null),[g,f]=W.useState(!0),[x,m]=W.useState("graph"),b=W.useMemo(()=>{const G=[],$=new Map;return c.forEach(B=>{$.set(`epic-${B.id}`,{id:`epic-${B.id}`,type:"epic",title:B.title,state:B.state,dueDate:B.due_date,labels:B.labels||[],webUrl:B.web_url});const M=/depends on:?\s*(#\d+|epic-\d+|story-\d+)/gi,R=/blocked by:?\s*(#\d+|epic-\d+|story-\d+)/gi,L=B.description||"";let O;for(;(O=M.exec(L))!==null;)G.push({id:`dep-${G.length}`,from:`epic-${B.id}`,to:O[1].replace("#","issue-"),type:"depends_on",level:"epic"});for(;(O=R.exec(L))!==null;)G.push({id:`dep-${G.length}`,from:`epic-${B.id}`,to:O[1].replace("#","issue-"),type:"blocked_by",level:"epic"})}),o.forEach(B=>{const M=`issue-${B.iid}`;let R="story";B.labels?.some(y=>y.startsWith("initiative::"))?R="initiative":B.epic&&(R="epic-child"),$.set(M,{id:M,type:"issue",title:B.title,state:B.state,dueDate:B.due_date,assignee:B.assignee,labels:B.labels||[],webUrl:B.web_url,level:R,milestone:B.milestone?.title});const L=B.description||"";B.labels?.includes("blocking")&&B.blocking_issues?.forEach(y=>{G.push({id:`dep-${G.length}`,from:M,to:`issue-${y}`,type:"blocks",level:R})}),[{regex:/depends on:?\s*(#\d+|epic-\d+)/gi,type:"depends_on"},{regex:/blocked by:?\s*(#\d+|epic-\d+)/gi,type:"blocked_by"},{regex:/blocks:?\s*(#\d+|epic-\d+)/gi,type:"blocks"},{regex:/required for:?\s*(#\d+|epic-\d+)/gi,type:"required_for"}].forEach(({regex:y,type:C})=>{let I;for(;(I=y.exec(L))!==null;){const _=I[1].replace("#","issue-");G.push({id:`dep-${G.length}`,from:M,to:_,type:C,level:R})}}),B.notes&&B.notes.forEach(y=>{const C=/mentioned in (#\d+)/gi;let I;for(;(I=C.exec(y.body))!==null;)G.push({id:`dep-${G.length}`,from:M,to:I[1].replace("#","issue-"),type:"related",level:R})})}),{dependencies:G,items:$}},[o,c]),v=W.useMemo(()=>{if(!g)return[];const{dependencies:G,items:$}=b,B=new Map,M=new Map;G.forEach(y=>{B.has(y.from)||B.set(y.from,[]),M.has(y.to)||M.set(y.to,[]),B.get(y.from).push(y.to),M.get(y.to).push(y.from)});const R=[];$.forEach((y,C)=>{(!M.has(C)||M.get(C).length===0)&&R.push(C)}),$.forEach((y,C)=>{(!B.has(C)||B.get(C).length===0)&&M.has(C)});const L=y=>{const C=new Map,I=new Map,_=[y];for(C.set(y,0);_.length>0;){const N=_.shift(),K=C.get(N);(B.get(N)||[]).forEach(q=>{const k=K+1;(!C.has(q)||C.get(q)<k)&&(C.set(q,k),I.set(q,N),_.push(q))})}let P=0,X=y;C.forEach((N,K)=>{N>P&&(P=N,X=K)});const z=[];let T=X;for(;T;)z.unshift(T),T=I.get(T);return{path:z,length:P}};let O={path:[],length:0};return R.forEach(y=>{const C=L(y);C.length>O.length&&(O=C)}),O.path},[b,g]),D=W.useMemo(()=>{const{dependencies:G}=b,$=new Map,B=[];G.forEach(y=>{$.has(y.from)||$.set(y.from,new Set),$.get(y.from).add(y.to)});const M=new Set,R=new Set,L=[],O=y=>{M.add(y),R.add(y),L.push(y);const C=$.get(y)||new Set;for(const I of C)if(M.has(I)){if(R.has(I)){const _=L.indexOf(I);return B.push(L.slice(_)),!0}}else if(O(I))return!0;return L.pop(),R.delete(y),!1};return $.forEach((y,C)=>{M.has(C)||O(C)}),B},[b]),j=W.useMemo(()=>{if(l==="all")return b;const G=b.dependencies.filter($=>l==="initiative"?$.level==="initiative":l==="epic"?$.level==="epic"||$.level==="epic-child":l==="story"?$.level==="story":!0);return{...b,dependencies:G}},[b,l]),w=()=>{const{dependencies:G,items:$}=j,B={initiative:[],epic:[],story:[]};return $.forEach((M,R)=>{M.level==="initiative"?B.initiative.push(R):M.type==="epic"||M.level==="epic-child"?B.epic.push(R):B.story.push(R)}),e.jsxs("div",{style:{position:"relative",minHeight:"600px",background:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px",overflow:"auto"},children:[e.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1},children:G.map(M=>{const R=$.get(M.from),L=$.get(M.to);if(!R||!L)return null;const O=document.getElementById(`node-${M.from}`),y=document.getElementById(`node-${M.to}`);if(!O||!y)return null;const C=O.getBoundingClientRect(),I=y.getBoundingClientRect(),_=O.offsetParent?.getBoundingClientRect();if(!_)return null;const P=C.left+C.width/2-_.left,X=C.top+C.height/2-_.top,z=I.left+I.width/2-_.left,T=I.top+I.height/2-_.top,N=v.includes(M.from)&&v.includes(M.to);return e.jsxs("g",{children:[e.jsx("defs",{children:e.jsx("marker",{id:`arrowhead-${M.id}`,markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:N?"#DC2626":M.type==="blocks"?"#F59E0B":"#6B7280"})})}),e.jsx("line",{x1:P,y1:X,x2:z,y2:T,stroke:N?"#DC2626":M.type==="blocks"?"#F59E0B":"#6B7280",strokeWidth:N?3:2,markerEnd:`url(#arrowhead-${M.id})`,strokeDasharray:M.type==="related"?"5,5":"none"})]},M.id)})}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[B.initiative.length>0&&e.jsxs("div",{style:{marginBottom:"40px"},children:[e.jsx("h4",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",marginBottom:"12px"},children:"INITIATIVES"}),e.jsx("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:B.initiative.map(M=>{const R=$.get(M),L=v.includes(M);return e.jsxs("div",{id:`node-${M}`,onClick:()=>u(R),style:{padding:"12px",background:L?"#FEE2E2":"white",border:`2px solid ${L?"#DC2626":"#E5E7EB"}`,borderRadius:"8px",minWidth:"200px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:O=>O.currentTarget.style.transform="translateY(-2px)",onMouseLeave:O=>O.currentTarget.style.transform="translateY(0)",children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1F2937"},children:R.title}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"4px"},children:[R.state,"  ",R.milestone||"No milestone"]})]},M)})})]}),B.epic.length>0&&e.jsxs("div",{style:{marginBottom:"40px"},children:[e.jsx("h4",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",marginBottom:"12px"},children:"EPICS"}),e.jsx("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:B.epic.map(M=>{const R=$.get(M),L=v.includes(M);return e.jsxs("div",{id:`node-${M}`,onClick:()=>u(R),style:{padding:"10px",background:L?"#FEF3C7":"white",border:`2px solid ${L?"#F59E0B":"#D1D5DB"}`,borderRadius:"6px",minWidth:"180px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#374151"},children:R.title}),R.assignee&&e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"2px"},children:["@",R.assignee.username]})]},M)})})]}),B.story.length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"12px",fontWeight:"600",color:"#6B7280",marginBottom:"12px"},children:"STORIES"}),e.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[B.story.slice(0,20).map(M=>{const R=$.get(M),L=v.includes(M);return e.jsx("div",{id:`node-${M}`,onClick:()=>u(R),style:{padding:"8px",background:L?"#F0F9FF":"white",border:`1px solid ${L?"#3B82F6":"#E5E7EB"}`,borderRadius:"4px",minWidth:"150px",fontSize:"12px",cursor:"pointer"},children:e.jsxs("div",{style:{fontWeight:"500",color:"#4B5563"},children:[R.title.substring(0,50),"..."]})},M)}),B.story.length>20&&e.jsxs("div",{style:{padding:"8px",color:"#6B7280",fontSize:"12px"},children:["+",B.story.length-20," more stories"]})]})]})]})]})},H=()=>{const{dependencies:G,items:$}=j,B=Array.from($.values()).slice(0,20);return e.jsx("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px",overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"8px",borderBottom:"2px solid #E5E7EB"},children:"From / To"}),B.map(M=>e.jsx("th",{style:{padding:"8px",borderBottom:"2px solid #E5E7EB",writingMode:"vertical-lr",textOrientation:"mixed",height:"100px",fontSize:"10px"},children:M.title.substring(0,30)},M.id))]})}),e.jsx("tbody",{children:B.map(M=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px",borderRight:"2px solid #E5E7EB",fontWeight:"500"},children:M.title.substring(0,30)}),B.map(R=>{const L=G.find(O=>O.from===M.id&&O.to===R.id);return e.jsx("td",{style:{padding:"4px",border:"1px solid #F3F4F6",textAlign:"center",background:L?L.type==="blocks"?"#FEF3C7":L.type==="blocked_by"?"#FEE2E2":"#E0F2FE":"white"},children:L&&e.jsx("span",{style:{fontSize:"10px"},children:L.type==="blocks"?"":L.type==="blocked_by"?"":L.type==="depends_on"?"":""})},R.id)})]},M.id))})]})})},U=()=>{const{dependencies:G,items:$}=j;return e.jsx("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#F9FAFB"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600"},children:"From"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600"},children:"Relationship"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600"},children:"To"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600"},children:"Level"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600"},children:"Critical Path"})]})}),e.jsx("tbody",{children:G.map((B,M)=>{const R=$.get(B.from),L=$.get(B.to);if(!R||!L)return null;const O=v.includes(B.from)&&v.includes(B.to);return e.jsxs("tr",{style:{borderTop:M>0?"1px solid #E5E7EB":"none",background:O?"#FEF9C3":"white"},children:[e.jsxs("td",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500"},children:R.title}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[R.type,"  ",R.state]})]}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"4px 8px",background:B.type==="blocks"?"#FEF3C7":B.type==="blocked_by"?"#FEE2E2":B.type==="depends_on"?"#E0F2FE":"#F3F4F6",color:B.type==="blocks"?"#92400E":B.type==="blocked_by"?"#991B1B":B.type==="depends_on"?"#075985":"#374151",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:B.type.replace("_"," ").toUpperCase()})}),e.jsxs("td",{style:{padding:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500"},children:L.title}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[L.type,"  ",L.state]})]}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"2px 6px",background:"#EEF2FF",color:"#4F46E5",borderRadius:"3px",fontSize:"11px"},children:B.level})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:O&&e.jsx("span",{style:{color:"#DC2626",fontSize:"16px"},children:""})})]},B.id)})})]})})};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:"Dependency Management"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"Track and visualize dependencies across initiatives, epics, and stories"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Dependencies"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#1F2937"},children:b.dependencies.length})]}),e.jsxs("div",{style:{background:v.length>0?"#FEF3C7":"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Critical Path Length"}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"600",color:"#92400E"},children:[v.length," items"]})]}),e.jsxs("div",{style:{background:D.length>0?"#FEE2E2":"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Circular Dependencies"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:D.length>0?"#DC2626":"#10B981"},children:D.length})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Blocking Issues"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#F59E0B"},children:b.dependencies.filter(G=>G.type==="blocks").length})]})]}),D.length>0&&e.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#FEE2E2",border:"1px solid #FECACA",borderRadius:"8px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#DC2626",marginBottom:"8px"},children:" Circular Dependencies Detected"}),e.jsx("div",{style:{fontSize:"13px",color:"#991B1B"},children:D.map((G,$)=>e.jsxs("div",{style:{marginBottom:"4px"},children:[" ",G.join("  "),"  ",G[0]]},$))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("div",{style:{display:"flex",gap:"4px"},children:["graph","table","matrix"].map(G=>e.jsx("button",{onClick:()=>m(G),style:{padding:"8px 16px",background:x===G?"#3B82F6":"white",color:x===G?"white":"#374151",border:"1px solid #D1D5DB",borderRadius:G==="graph"?"6px 0 0 6px":G==="matrix"?"0 6px 6px 0":"0",fontSize:"13px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize"},children:G},G))}),e.jsxs("select",{value:l,onChange:G=>a(G.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px"},children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"initiative",children:"Initiatives Only"}),e.jsx("option",{value:"epic",children:"Epics Only"}),e.jsx("option",{value:"story",children:"Stories Only"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("label",{style:{fontSize:"13px",display:"flex",alignItems:"center",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:g,onChange:G=>f(G.target.checked),style:{marginRight:"6px"}}),"Show Critical Path"]}),e.jsx("button",{onClick:()=>window.location.href="#export",style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Export"})]})]}),x==="graph"&&w(),x==="table"&&U(),x==="matrix"&&H(),d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>u(null),children:e.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"24px",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",width:"90%"},onClick:G=>G.stopPropagation(),children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:d.title}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Type"}),e.jsx("div",{style:{fontSize:"14px"},children:d.type})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"State"}),e.jsx("div",{style:{fontSize:"14px"},children:d.state})]}),d.assignee&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Assignee"}),e.jsxs("div",{style:{fontSize:"14px"},children:["@",d.assignee.username]})]}),d.milestone&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Milestone"}),e.jsx("div",{style:{fontSize:"14px"},children:d.milestone})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e.jsx("a",{href:d.webUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"8px 16px",background:"#3B82F6",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"500",textDecoration:"none"},children:"View in GitLab"}),e.jsx("button",{onClick:()=>u(null),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"})]})]})})]})}function Sb({issues:o=[],milestones:c=[],epics:r=[]}){const[l,a]=W.useState([]),[d,u]=W.useState(null),[g,f]=W.useState(!1),[x,m]=W.useState("calendar"),[b,v]=W.useState({}),[D,j]=W.useState(null);W.useEffect(()=>{w(),U()},[]);const w=()=>{try{const y=localStorage.getItem("gitlab-pm-releases");if(y){const C=JSON.parse(y);a(C.releases||[]),C.releases?.length>0&&!d&&u(C.releases[0].id)}}catch(y){console.error("Error loading releases:",y)}},H=y=>{try{localStorage.setItem("gitlab-pm-releases",JSON.stringify({releases:y,updatedAt:new Date().toISOString()}))}catch(C){console.error("Error saving releases:",C)}},U=()=>{try{const y=localStorage.getItem("gitlab-pm-feature-toggles");y&&v(JSON.parse(y))}catch(y){console.error("Error loading feature toggles:",y)}},G=y=>{const C={id:`release-${Date.now()}`,...y,createdAt:new Date().toISOString(),status:"planning",deploymentWindows:[],includedIssues:[],includedEpics:[],featureFlags:[]},I=[...l,C];return a(I),H(I),u(C.id),C},$=l.find(y=>y.id===d),B=W.useMemo(()=>{if(!$)return{issues:[],epics:[],milestones:[]};const y=o.filter(_=>{if(_.labels?.includes(`release::${$.version}`)||$.milestone&&_.milestone?.title===$.milestone||$.includedIssues?.includes(_.iid))return!0;if(_.due_date){const P=new Date(_.due_date),X=new Date($.targetDate),z=new Date($.startDate);return P>=z&&P<=X}return!1}),C=r.filter(_=>{if(_.labels?.includes(`release::${$.version}`)||$.includedEpics?.includes(_.id))return!0;if(_.due_date){const P=new Date(_.due_date),X=new Date($.targetDate);return P<=X}return!1}),I=c.filter(_=>{if(_.title===$.milestone)return!0;if(_.due_date){const P=new Date(_.due_date),X=new Date($.targetDate),z=new Date($.startDate);return P>=z&&P<=X}return!1});return{issues:y,epics:C,milestones:I}},[$,o,r,c]),M=W.useMemo(()=>{const y={features:[],enhancements:[],bugFixes:[],security:[],performance:[],documentation:[],other:[]};return B.issues.forEach(C=>{const I=C.labels||[];I.some(_=>_.toLowerCase().includes("feature")||_.toLowerCase().includes("new"))?y.features.push(C):I.some(_=>_.toLowerCase().includes("enhancement")||_.toLowerCase().includes("improvement"))?y.enhancements.push(C):I.some(_=>_.toLowerCase().includes("bug")||_.toLowerCase().includes("fix"))?y.bugFixes.push(C):I.some(_=>_.toLowerCase().includes("security"))?y.security.push(C):I.some(_=>_.toLowerCase().includes("performance"))?y.performance.push(C):I.some(_=>_.toLowerCase().includes("documentation")||_.toLowerCase().includes("docs"))?y.documentation.push(C):y.other.push(C)}),y},[B]),R=()=>{if(!$)return"";let y=`# Release ${$.version}

`;y+=`**Release Date:** ${new Date($.targetDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}
`,y+=`**Status:** ${$.status}

`,$.description&&(y+=`## Overview
${$.description}

`),M.features.length>0&&(y+=`##  New Features
`,M.features.forEach(_=>{y+=`- ${_.title} (#${_.iid})
`}),y+=`
`),M.enhancements.length>0&&(y+=`##  Enhancements
`,M.enhancements.forEach(_=>{y+=`- ${_.title} (#${_.iid})
`}),y+=`
`),M.bugFixes.length>0&&(y+=`##  Bug Fixes
`,M.bugFixes.forEach(_=>{y+=`- ${_.title} (#${_.iid})
`}),y+=`
`),M.security.length>0&&(y+=`##  Security Updates
`,M.security.forEach(_=>{y+=`- ${_.title} (#${_.iid})
`}),y+=`
`),M.performance.length>0&&(y+=`##  Performance Improvements
`,M.performance.forEach(_=>{y+=`- ${_.title} (#${_.iid})
`}),y+=`
`);const C=Object.entries(b).filter(([_,P])=>P.release===$.version);C.length>0&&(y+=`##  Feature Toggles
`,C.forEach(([_,P])=>{y+=`- **${_}**: ${P.enabled?"Enabled":"Disabled"} - ${P.description||"No description"}
`}),y+=`
`),$.deploymentWindows?.length>0&&(y+=`##  Deployment Windows
`,$.deploymentWindows.forEach(_=>{y+=`- ${_.environment}: ${new Date(_.startTime).toLocaleString()} - ${new Date(_.endTime).toLocaleString()}
`}),y+=`
`);const I=new Set;return B.issues.forEach(_=>{_.assignee&&I.add(_.assignee.username),_.author&&I.add(_.author.username)}),I.size>0&&(y+=`##  Contributors
`,y+=Array.from(I).map(_=>`@${_}`).join(", ")+`

`),y},L=()=>{const y=new Date,C=new Date(y.getFullYear(),y.getMonth(),1),I=new Date(y.getFullYear(),y.getMonth()+3,0),_=[];let P=[],X=new Date(C);for(X.setDate(X.getDate()-X.getDay());X<=I;)P.push(new Date(X)),P.length===7&&(_.push(P),P=[]),X.setDate(X.getDate()+1);return P.length>0&&_.push(P),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Release Calendar"}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(z=>e.jsx("th",{style:{padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"12px",fontWeight:"600",color:"#6B7280",textAlign:"center"},children:z},z))})}),e.jsx("tbody",{children:_.map((z,T)=>e.jsx("tr",{children:z.map((N,K)=>{const te=N.toISOString().split("T")[0],q=l.filter(Q=>new Date(Q.targetDate).toISOString().split("T")[0]===te),k=l.some(Q=>Q.deploymentWindows?.some(ae=>new Date(ae.startTime).toISOString().split("T")[0]===te)),A=N.toDateString()===y.toDateString(),V=N.getMonth()===y.getMonth();return e.jsxs("td",{style:{padding:"4px",border:"1px solid #F3F4F6",height:"80px",verticalAlign:"top",background:A?"#F0F9FF":V?"white":"#FAFAFA",position:"relative"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:A?"600":"400",color:A?"#0369A1":"#6B7280",marginBottom:"4px"},children:N.getDate()}),q.map(Q=>e.jsxs("div",{onClick:()=>j(Q),style:{padding:"2px 4px",background:Q.status==="released"?"#D1FAE5":Q.status==="deploying"?"#FEF3C7":"#E0E7FF",color:Q.status==="released"?"#065F46":Q.status==="deploying"?"#92400E":"#3730A3",borderRadius:"3px",fontSize:"10px",fontWeight:"600",marginBottom:"2px",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["v",Q.version]},Q.id)),k&&e.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"8px",height:"8px",background:"#F59E0B",borderRadius:"50%"}})]},K)})},T))})]})})]})},O=()=>{const y=["planning","development","testing","staging","deploying","released"];return e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${y.length}, minmax(250px, 1fr))`,gap:"16px",overflowX:"auto"},children:y.map(C=>{const I=l.filter(_=>_.status===C);return e.jsxs("div",{style:{background:"#F9FAFB",borderRadius:"8px",padding:"12px",minHeight:"400px"},children:[e.jsxs("h4",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"12px",textTransform:"capitalize"},children:[C," (",I.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:I.map(_=>e.jsxs("div",{onClick:()=>j(_),style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"6px",padding:"12px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:P=>P.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",onMouseLeave:P=>P.currentTarget.style.boxShadow="none",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:["v",_.version]}),e.jsx("span",{style:{padding:"2px 6px",background:"#EEF2FF",color:"#4F46E5",borderRadius:"3px",fontSize:"10px",fontWeight:"600"},children:_.type})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:new Date(_.targetDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280"},children:[B.issues.filter(P=>P.labels?.includes(`release::${_.version}`)).length," issues"]}),_.deploymentWindows?.length>0&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #F3F4F6"},children:[e.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#6B7280",marginBottom:"4px"},children:"Deployment Windows:"}),_.deploymentWindows.map((P,X)=>e.jsxs("div",{style:{fontSize:"10px",color:"#9CA3AF"},children:[P.environment,": ",new Date(P.startTime).toLocaleTimeString()]},X))]})]},_.id))})]},C)})})};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:"Release Planning"}),e.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"Manage release trains, deployment windows, and generate release notes"})]}),e.jsx("button",{onClick:()=>f(!0),style:{padding:"10px 20px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"+ New Release"})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px",marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flex:1},children:[e.jsx("label",{style:{fontSize:"13px",fontWeight:"500",color:"#374151"},children:"Active Release:"}),e.jsxs("select",{value:d||"",onChange:y=>u(y.target.value),style:{padding:"6px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"13px",maxWidth:"300px"},children:[e.jsx("option",{value:"",children:"Select a release..."}),l.map(y=>e.jsxs("option",{value:y.id,children:["v",y.version," - ",y.name," (",y.status,")"]},y.id))]}),$&&e.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px"},children:[e.jsxs("span",{style:{color:"#6B7280"},children:["Target: ",new Date($.targetDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.jsx("span",{style:{padding:"2px 8px",background:$.status==="released"?"#D1FAE5":$.status==="deploying"?"#FEF3C7":"#F3F4F6",color:$.status==="released"?"#065F46":$.status==="deploying"?"#92400E":"#374151",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:$.status})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:["calendar","board","timeline"].map(y=>e.jsx("button",{onClick:()=>m(y),style:{padding:"6px 12px",background:x===y?"#3B82F6":"white",color:x===y?"white":"#374151",border:"1px solid #D1D5DB",borderRadius:y==="calendar"?"6px 0 0 6px":y==="timeline"?"0 6px 6px 0":"0",fontSize:"12px",fontWeight:"500",cursor:"pointer",textTransform:"capitalize"},children:y},y))})]}),$&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Total Issues"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#1F2937"},children:B.issues.length})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Completed"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#10B981"},children:B.issues.filter(y=>y.state==="closed").length})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"In Progress"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#F59E0B"},children:B.issues.filter(y=>y.labels?.some(C=>C.toLowerCase().includes("doing"))).length})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Feature Toggles"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#8B5CF6"},children:Object.entries(b).filter(([y,C])=>C.release===$.version).length})]})]}),x==="calendar"&&L(),x==="board"&&O(),$&&x!=="calendar"&&x!=="board"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Release Content"}),Object.entries(M).map(([y,C])=>C.length===0?null:e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px",textTransform:"capitalize"},children:[y.replace(/([A-Z])/g," $1").trim()," (",C.length,")"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[C.slice(0,5).map(I=>e.jsx("div",{style:{padding:"8px",background:"#F9FAFB",borderRadius:"4px",fontSize:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["#",I.iid," ",I.title.substring(0,50)]}),e.jsx("span",{style:{padding:"2px 6px",background:I.state==="closed"?"#D1FAE5":"#FEF3C7",color:I.state==="closed"?"#065F46":"#92400E",borderRadius:"3px",fontSize:"10px",fontWeight:"600"},children:I.state})]})},I.iid)),C.length>5&&e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",padding:"4px 8px"},children:["+",C.length-5," more"]})]})]},y))]}),e.jsxs("div",{style:{background:"white",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Release Notes Preview"}),e.jsx("button",{onClick:()=>{const y=R();navigator.clipboard.writeText(y),alert("Release notes copied to clipboard!")},style:{padding:"6px 12px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:"Copy to Clipboard"})]}),e.jsx("pre",{style:{background:"#F9FAFB",padding:"16px",borderRadius:"6px",fontSize:"12px",lineHeight:"1.6",overflow:"auto",maxHeight:"400px",whiteSpace:"pre-wrap"},children:R()})]})]}),g&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>f(!1),children:e.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"24px",maxWidth:"600px",width:"90%"},onClick:y=>y.stopPropagation(),children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"20px"},children:"Create New Release"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Version"}),e.jsx("input",{id:"release-version",type:"text",placeholder:"1.0.0",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Name"}),e.jsx("input",{id:"release-name",type:"text",placeholder:"Q1 2024 Release",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Type"}),e.jsxs("select",{id:"release-type",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:[e.jsx("option",{value:"major",children:"Major"}),e.jsx("option",{value:"minor",children:"Minor"}),e.jsx("option",{value:"patch",children:"Patch"}),e.jsx("option",{value:"hotfix",children:"Hotfix"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Target Date"}),e.jsx("input",{id:"release-date",type:"date",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Start Date"}),e.jsx("input",{id:"release-start-date",type:"date",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Milestone (optional)"}),e.jsxs("select",{id:"release-milestone",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"None"}),c.map(y=>e.jsx("option",{value:y.title,children:y.title},y.id))]})]})]}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"4px"},children:"Description"}),e.jsx("textarea",{id:"release-description",rows:4,placeholder:"Release description...",style:{width:"100%",padding:"8px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx("button",{onClick:()=>f(!1),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:()=>{const y=document.getElementById("release-version").value,C=document.getElementById("release-name").value,I=document.getElementById("release-type").value,_=document.getElementById("release-date").value,P=document.getElementById("release-start-date").value,X=document.getElementById("release-milestone").value,z=document.getElementById("release-description").value;y&&C&&_&&P&&(G({version:y,name:C,type:I,targetDate:_,startDate:P,milestone:X,description:z}),f(!1))},style:{padding:"8px 16px",background:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Create Release"})]})]})})]})}function Db(){console.log("App: Component initializing...");const[o,c]=W.useState("executive");console.log("App: activeView state initialized:",o);const r=qn();console.log("App: Configuration check:",r);const[l,a]=W.useState(!r),[d,u]=W.useState(!1),[g,f]=W.useState(Sy()==="grouped");console.log("App: showConfigModal:",!r),console.log("App: Calling useGitLabData hook...");const{issues:x,milestones:m,epics:b,crossProjectData:v,loading:D,error:j,refresh:w}=cy();console.log("App: GitLab data:",{issuesCount:x?.length,milestonesCount:m?.length,epicsCount:b?.length,loading:D,error:j}),v&&console.log("App: Cross-project data available:",v.statistics),console.log("App: Calling useHealthScore hook...");const{stats:H,healthScore:U}=gy(x,m);console.log("App: Health data:",{stats:H,healthScore:U}),console.log("App: Calling useRisks hook...");const{risks:G}=rd();console.log("App: Risks data:",{risksCount:G?.length});const $=()=>{console.log("App: handleConfigSave called"),a(!1),w()},B=M=>{console.log("App: handleProjectSwitch called with:",M),w(),c("executive")};return console.log("App: About to render, current state:",{activeView:o,showConfigModal:l,configured:r,issuesCount:x?.length,loading:D}),e.jsx(yy,{issues:x,children:e.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx(vy,{stats:H,healthScore:U,onRefresh:w,onConfigure:()=>a(!0),onChangeRole:()=>u(!0),loading:D}),g?e.jsx(Cy,{activeView:o,onViewChange:c,onProjectChange:qn()?M=>{M==="cross-project"?(console.log("Cross-project view activated - refreshing data"),w()):B(M)}:null}):e.jsx(by,{activeView:o,onViewChange:c}),qn()&&x.length>0&&["executive","insights","compliance","cycletime","resources","resourceplanning","teammanagement","velocity","sprintmanagement","epicmanagement","riskmanagement","roadmap","stakeholders","crossteam","dependencies","releases"].includes(o)&&e.jsx("div",{style:{position:"sticky",top:"0",zIndex:800,background:"white",padding:"12px 20px",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"flex-end"},children:e.jsx(wy,{})}),e.jsxs("div",{style:{flex:1,paddingTop:"20px"},children:[j&&e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{background:"#FEE2E2",borderColor:"#DC2626",color:"#DC2626"},children:[e.jsx("strong",{children:"Error:"})," ",j]})}),D&&!x.length&&e.jsx("div",{className:"container",children:e.jsx("div",{className:"card text-center",children:e.jsx("p",{children:"Loading GitLab data..."})})}),!D&&!j&&!x.length&&qn()&&e.jsx("div",{className:"container",children:e.jsx("div",{className:"card text-center",children:e.jsx("p",{children:"No issues found. Please check your configuration."})})}),!qn()&&!l&&e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card text-center",children:[e.jsx("h2",{className:"mb-2",children:"Welcome to GitLab Project Management"}),e.jsx("p",{className:"mb-2",children:"Please configure your GitLab connection to get started."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>a(!0),children:"Configure Now"})]})}),o==="backup"&&e.jsx(t1,{}),qn()&&x.length>0&&e.jsxs(e.Fragment,{children:[o==="executive"&&e.jsx(k0,{stats:H,healthScore:U,issues:x,milestones:m,epics:b,risks:G}),o==="insights"&&e.jsx(Ev,{issues:x,milestones:m,epics:b,stats:H,healthScore:U,risks:G}),o==="compliance"&&e.jsx(qv,{issues:x}),o==="cycletime"&&e.jsx(Yv,{issues:x}),o==="epicmanagement"&&e.jsx(m1,{epics:b,issues:x,crossProjectData:v}),o==="riskmanagement"&&e.jsx(b1,{epics:b,issues:x}),o==="roadmap"&&e.jsx(T0,{issues:x,milestones:m}),o==="sprintmanagement"&&e.jsx(O1,{issues:x,onNavigate:c}),o==="velocity"&&e.jsx(N0,{issues:x}),o==="resources"&&e.jsx(H0,{issues:x}),o==="resourceplanning"&&e.jsx(Fh,{issues:x}),o==="teammanagement"&&e.jsx(Fh,{issues:x}),o==="stakeholders"&&e.jsx(lv,{stats:H,healthScore:U}),o==="crossteam"&&e.jsx(cb,{issues:x,epics:b,milestones:m}),o==="dependencies"&&e.jsx(jb,{issues:x,epics:b,milestones:m}),o==="releases"&&e.jsx(Sb,{issues:x,milestones:m,epics:b})]})]}),e.jsx(ky,{show:l,onClose:()=>a(!1),onSave:$,onProjectSwitch:B}),e.jsx(Ey,{show:d,onClose:()=>u(!1)})]})})}class Bb extends Rh.Component{constructor(c){super(c),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(c){return console.error("ErrorBoundary: Error caught:",c),{hasError:!0}}componentDidCatch(c,r){console.error("ErrorBoundary: Component error details:",{error:c.toString(),errorInfo:r,componentStack:r.componentStack}),this.setState({error:c,errorInfo:r})}render(){return this.state.hasError?(console.log("ErrorBoundary: Rendering error UI"),e.jsxs("div",{style:{padding:"40px",fontFamily:"sans-serif",maxWidth:"800px",margin:"0 auto"},children:[e.jsx("h1",{style:{color:"#DC2626"},children:"Something went wrong"}),e.jsx("h2",{children:"Error Details:"}),e.jsxs("pre",{style:{background:"#FEE2E2",padding:"16px",borderRadius:"8px",overflowX:"auto",fontSize:"14px"},children:[this.state.error&&this.state.error.toString(),`

`,this.state.errorInfo&&this.state.errorInfo.componentStack]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",background:"#E60000",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Reload Page"}),e.jsx("p",{style:{marginTop:"20px",color:"#6B7280"},children:"Please open the browser console (F12) and share the error details with the developer."})]})):this.props.children}}console.log("=== GitLab PM Dashboard - Starting ===");console.log("Environment:",{protocol:window.location.protocol,pathname:window.location.pathname,userAgent:navigator.userAgent,reactVersion:W.StrictMode?"React 18+":"Unknown"});try{console.log("Step 1: Looking for root element...");const o=document.getElementById("root");if(!o)throw console.error("ERROR: Root element not found!"),document.body.innerHTML='<div style="padding: 40px; font-family: sans-serif;"><h1>Error: Root element missing</h1><p>Cannot find element with id="root"</p></div>',new Error("Root element not found");console.log("Step 2: Root element found:",o),console.log("Step 3: Creating React root...");const c=Um.createRoot(o);console.log("Step 4: React root created successfully"),console.log("Step 5: Rendering App component with ErrorBoundary..."),c.render(e.jsx(W.StrictMode,{children:e.jsx(Bb,{children:e.jsx(Db,{})})})),console.log(" App rendered successfully!")}catch(o){console.error(" FATAL ERROR during initialization:",o),console.error("Error stack:",o.stack),document.body.innerHTML=`
    <div style="padding: 40px; font-family: sans-serif; max-width: 800px; margin: 0 auto;">
      <h1 style="color: #DC2626;">GitLab PM Dashboard - Initialization Error</h1>
      <h2>Error Details:</h2>
      <pre style="background: #FEE2E2; padding: 16px; border-radius: 8px; overflow-x: auto;">${o.message}

${o.stack}</pre>
      <h2>Debug Information:</h2>
      <pre style="background: #F3F4F6; padding: 16px; border-radius: 8px; overflow-x: auto;">${JSON.stringify({protocol:window.location.protocol,pathname:window.location.pathname,userAgent:navigator.userAgent},null,2)}</pre>
      <p>Please check the browser console (F12) for more details and share this with the developer.</p>
    </div>
  `}function Cb(o){if(!o||o.length===0)return{rootEpics:[],epicMap:new Map};const c=new Map,r=[];o.forEach(a=>{c.set(a.id,{...a,children:[],level:0,path:[a.id]})}),o.forEach(a=>{const d=c.get(a.id);if(a.parent_id&&c.has(a.parent_id)){const u=c.get(a.parent_id);u.children.push(d),d.parent=u,d.level=u.level+1,d.path=[...u.path,a.id]}else r.push(d)});const l=a=>{a.children.sort((d,u)=>d.start_date&&u.start_date?new Date(d.start_date)-new Date(u.start_date):(d.title||"").localeCompare(u.title||"")),a.children.forEach(l)};return r.forEach(l),{rootEpics:r,epicMap:c}}function Eb(o,c){const r=new Map,l=new Map,a=[];return c.forEach(d=>{r.set(d.id,{epic:d,issues:[],projects:new Set,crossProjectIssues:[]})}),o.forEach(d=>{if(!d.epic)return;const u=r.get(d.epic.id);if(!u)return;u.issues.push(d);const g=d.project_id||d.project?.id;g&&(u.projects.add(g),u.epic.group_id!==d.namespace?.id&&(u.crossProjectIssues.push(d),a.push({epic:u.epic,issue:d,type:"cross-project",epicProject:u.epic.group_id,issueProject:g}))),l.has(g)||l.set(g,new Set),l.get(g).add(d.epic.id)}),{epicIssueMap:r,projectEpicMap:l,crossProjectLinks:a,statistics:wb(r,a)}}function wb(o,c){const r={totalEpics:o.size,epicsWithIssues:0,epicsWithCrossProjectIssues:0,totalCrossProjectLinks:c.length,projectCount:new Set,avgProjectsPerEpic:0};return o.forEach((l,a)=>{l.issues.length>0&&r.epicsWithIssues++,l.crossProjectIssues.length>0&&r.epicsWithCrossProjectIssues++,l.projects.forEach(d=>r.projectCount.add(d))}),r.projectCount=r.projectCount.size,r.avgProjectsPerEpic=r.epicsWithIssues>0?Math.round(r.projectCount/r.epicsWithIssues*10)/10:0,r}function zb(o,c){const{epicIssueMap:r,projectEpicMap:l,crossProjectLinks:a}=c;return o.map(d=>{const u=r.get(d.id)||{issues:[],projects:new Set,crossProjectIssues:[]};return{...d,_crossProject:{issueCount:u.issues.length,projectCount:u.projects.size,projects:Array.from(u.projects),crossProjectIssueCount:u.crossProjectIssues.length,hasMultipleProjects:u.projects.size>1,complexity:u.projects.size>3?"high":u.projects.size>1?"medium":"low"},issues:u.issues}})}function kb(o){return o.filter(c=>!c.epic&&c.labels?.some(r=>r.toLowerCase().includes("epic")||r.toLowerCase().includes("feature")))}const od=Object.freeze(Object.defineProperty({__proto__:null,buildEpicHierarchy:Cb,enhanceEpicsWithCrossProjectData:zb,findOrphanedIssues:kb,linkCrossProjectIssues:Eb},Symbol.toStringTag,{value:"Module"}));function Xc({value:o,onChange:c,options:r,placeholder:l="Select...",label:a,style:d={}}){const[u,g]=W.useState(!1),[f,x]=W.useState(""),m=W.useRef(null);W.useEffect(()=>{const j=w=>{m.current&&!m.current.contains(w.target)&&(g(!1),x(""))};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const b=r.filter(j=>j.label.toLowerCase().includes(f.toLowerCase())),v=r.find(j=>j.value===o),D=v?v.label:l;return e.jsxs("div",{ref:m,style:{position:"relative",...d},children:[a&&e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"6px",color:"#6B7280"},children:a}),e.jsxs("div",{onClick:()=>g(!u),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",cursor:"pointer",background:"white",display:"flex",justifyContent:"space-between",alignItems:"center",color:o?"#1F2937":"#9CA3AF"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D}),e.jsx("span",{style:{fontSize:"10px",color:"#6B7280"},children:u?"":""})]}),u&&e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 4px)",left:0,right:0,background:"white",border:"1px solid #D1D5DB",borderRadius:"6px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"300px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("input",{type:"text",value:f,onChange:j=>x(j.target.value),placeholder:"Search...",autoFocus:!0,style:{width:"100%",padding:"6px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"13px",outline:"none"},onClick:j=>j.stopPropagation()})}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"250px"},children:b.length===0?e.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#9CA3AF",fontSize:"13px"},children:"No results found"}):b.map(j=>e.jsxs("div",{onClick:()=>{c(j.value),g(!1),x("")},style:{padding:"10px 12px",fontSize:"14px",cursor:"pointer",background:o===j.value?"#EFF6FF":"white",color:o===j.value?"#2563EB":"#1F2937",fontWeight:o===j.value?"600":"400",borderBottom:"1px solid #F3F4F6",transition:"background 0.1s"},onMouseEnter:w=>{o!==j.value&&(w.currentTarget.style.background="#F9FAFB")},onMouseLeave:w=>{o!==j.value&&(w.currentTarget.style.background="white")},children:[j.label,j.subtitle&&e.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginTop:"2px"},children:j.subtitle})]},j.value))})]})]})}function Ab({issues:o,onNavigate:c}){const{filteredIssues:r}=qi(),[l,a]=W.useState({teamMembers:[]}),[d,u]=W.useState({}),[g,f]=W.useState({sprints:[]}),[x,m]=W.useState(null),[b,v]=W.useState(null),[D,j]=W.useState(!0),[w,H]=W.useState("all"),[U,G]=W.useState("all"),[$,B]=W.useState("all"),[M,R]=W.useState("");W.useEffect(()=>{a(ht()),u(va()),f(ya())},[]);const L=W.useMemo(()=>{const z=new Date;return z.setMonth(z.getMonth()-6),r.filter(T=>T.state==="opened"?!0:T.closed_at?new Date(T.closed_at)>=z:T.updated_at?new Date(T.updated_at)>=z:T.due_date?new Date(T.due_date)>=z:!1)},[r]),O=W.useMemo(()=>fa(L).map(T=>{const N=L.find(K=>Ps(K.iteration)===T);return{name:T,id:N?.iteration?.id||T,startDate:N?.iteration?.start_date,dueDate:N?.iteration?.due_date}}).sort((T,N)=>T.startDate?N.startDate?new Date(N.startDate)-new Date(T.startDate):-1:1),[L]);W.useEffect(()=>{if(O.length>0&&!x){const z=new Date,T=O.find(N=>N.startDate&&N.dueDate&&new Date(N.startDate)<=z&&new Date(N.dueDate)>=z);m(T||O[0])}},[O,x]);const y=W.useMemo(()=>{const z=new Map;return L.forEach(T=>{T.epic&&z.set(T.epic.id,T.epic)}),Array.from(z.values()).sort((T,N)=>T.title.localeCompare(N.title))},[L]),C=W.useMemo(()=>{const z=new Map;return L.forEach(T=>{T.assignees?.forEach(N=>{z.set(N.username,N)})}),Array.from(z.values()).sort((T,N)=>T.name.localeCompare(N.name))},[L]),{sprintIssues:I,backlogIssues:_}=W.useMemo(()=>{const z=[],T=[];return L.forEach(N=>{if(!(w!=="all"&&N.epic?.id!==w)&&!(U!=="all"&&!N.assignees?.some(K=>K.username===U))&&!($!=="all"&&($==="none"&&N.weight||$==="low"&&(!N.weight||N.weight>3)||$==="medium"&&(!N.weight||N.weight<4||N.weight>7)||$==="high"&&(!N.weight||N.weight<8)))){if(M){const K=M.toLowerCase(),te=N.title.toLowerCase().includes(K),q=N.epic?.title.toLowerCase().includes(K),k=N.assignees?.some(Q=>Q.name.toLowerCase().includes(K)||Q.username.toLowerCase().includes(K)),A=N.weight&&N.weight.toString().includes(K),V=N.iid.toString().includes(K);if(!te&&!q&&!k&&!A&&!V)return}N.state==="opened"&&(x&&N.iteration?.id===x.id?z.push(N):T.push(N))}}),{sprintIssues:z,backlogIssues:T}},[L,x,w,U,$,M]),P=W.useMemo(()=>{if(!x||l.teamMembers.length===0)return null;const z=g.sprints.find(q=>q.sprintId===x.id),T=l.teamMembers.map(q=>{const k=z?.memberCapacity.find(ue=>ue.username===q.username),A=k?k.availableHours:q.defaultCapacity,V=k?.reason||"",Q=I.filter(ue=>ue.assignees?.some(fe=>fe.username===q.username)),ae=Q.reduce((ue,fe)=>ue+Gi(fe,d),0),re=A>0?ae/A*100:0;return{...q,availableHours:A,allocatedHours:Math.round(ae*10)/10,remainingHours:Math.round((A-ae)*10)/10,utilization:Math.round(re),reason:V,issueCount:Q.length,issues:Q}}),N=T.reduce((q,k)=>q+k.availableHours,0),K=T.reduce((q,k)=>q+k.allocatedHours,0),te=N-K;return{members:T,totalAvailable:Math.round(N),totalAllocated:Math.round(K*10)/10,totalRemaining:Math.round(te*10)/10,teamUtilization:N>0?Math.round(K/N*100):0}},[x,l,d,g,I]),X=W.useMemo(()=>{const z=_.reduce((K,te)=>K+(te.weight||0),0),T=_.reduce((K,te)=>K+Gi(te,d),0),N=_.filter(K=>!K.assignees||K.assignees.length===0).length;return{count:_.length,totalWeight:z,totalHours:Math.round(T*10)/10,unassigned:N}},[_,d]);return x?e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card",style:{marginBottom:"24px",background:"#FFFFFF",border:"1px solid #E5E7EB"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:"600",color:"#1F2937"},children:["Sprint Planning: ",x?.name]}),e.jsx("div",{style:{fontSize:"14px",color:"#6B7280"},children:"Plan your sprints with real-time capacity tracking. Use the iteration filter at the top to switch sprints."})]}),x.startDate&&(()=>{const z=new Date,T=new Date(x.startDate),N=x.dueDate?new Date(x.dueDate):null,K=N?Math.ceil((N-T)/(1e3*60*60*24)):0,te=Math.max(0,Math.ceil((z-T)/(1e3*60*60*24))),q=N?Math.max(0,Math.ceil((N-z)/(1e3*60*60*24))):0,k=N&&K>0?Math.min(100,te/K*100):0,A=N&&z>N,V=T<=z&&(!N||N>=z);return e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#F9FAFB",borderRadius:"8px",fontSize:"13px",border:"1px solid #E5E7EB"},children:[e.jsxs("div",{style:{display:"flex",gap:"24px",marginBottom:N?"12px":"0"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"Start:"})," ",e.jsx("strong",{style:{color:"#1F2937"},children:T.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"End:"})," ",e.jsx("strong",{style:{color:"#1F2937"},children:N.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"Duration:"})," ",e.jsxs("strong",{style:{color:"#1F2937"},children:[K," days"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:A?"Overdue:":V?"Remaining:":"Starts in:"})," ",e.jsx("strong",{style:{color:A?"#DC2626":"#E60000"},children:A?`${Math.abs(q)} days`:V?`${q} days`:`${Math.abs(te)} days`})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6B7280"},children:"Progress:"})," ",e.jsxs("strong",{style:{color:"#1F2937"},children:[Math.round(k),"%"]})]})]})]}),N&&e.jsx("div",{style:{width:"100%",height:"6px",background:"#E5E7EB",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${k}%`,height:"100%",background:A?"#DC2626":"#E60000",transition:"width 0.3s ease"}})})]})})()]}),l.teamMembers.length===0&&e.jsx("div",{className:"card",style:{marginBottom:"24px",background:"#FEF3C7",border:"2px solid #F59E0B"},children:e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"16px"},children:[e.jsx("div",{style:{fontSize:"32px"},children:""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600",color:"#92400E"},children:"Team Configuration Required"}),e.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#78350F",lineHeight:"1.5"},children:"To use Sprint Planning and capacity tracking, you need to configure your team members first. Team configuration is project-specific, so each project in your portfolio needs its own team setup."}),c&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx("button",{onClick:()=>c("resources"),style:{padding:"12px 24px",background:"#E60000",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(230, 0, 0, 0.2)"},onMouseEnter:z=>{z.currentTarget.style.background="#B80000",z.currentTarget.style.boxShadow="0 4px 8px rgba(230, 0, 0, 0.3)"},onMouseLeave:z=>{z.currentTarget.style.background="#E60000",z.currentTarget.style.boxShadow="0 2px 4px rgba(230, 0, 0, 0.2)"},children:"Go to Team Configuration "})}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:"white",borderRadius:"6px",fontSize:"13px",border:"1px solid #F59E0B"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400E",marginBottom:"4px"},children:"Step 1: Configure Team"}),e.jsx("div",{style:{color:"#78350F"},children:"Add team members and assign roles"})]}),e.jsxs("div",{style:{padding:"12px 16px",background:"white",borderRadius:"6px",fontSize:"13px",border:"1px solid #F59E0B"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400E",marginBottom:"4px"},children:"Step 2: Set Capacity"}),e.jsx("div",{style:{color:"#78350F"},children:"Configure weekly capacity and story point conversion rates"})]}),e.jsxs("div",{style:{padding:"12px 16px",background:"white",borderRadius:"6px",fontSize:"13px",border:"1px solid #F59E0B"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400E",marginBottom:"4px"},children:"Quick Start"}),e.jsxs("div",{style:{color:"#78350F"},children:["Use ",e.jsx("strong",{children:'"Import from Issues"'})," to automatically detect team members"]})]})]})]})]})}),P&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"8px"},children:"Team Capacity"}),e.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:"#1F2937"},children:[P.totalAvailable,"h"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[l.teamMembers.length," team members"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"8px"},children:"Allocated"}),e.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:"#DC2626"},children:[P.totalAllocated,"h"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:[I.length," issues"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"8px"},children:"Remaining"}),e.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:P.totalRemaining<0?"#DC2626":"#059669"},children:[P.totalRemaining,"h"]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:P.totalRemaining<0?"Over capacity!":"Available"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"8px"},children:"Utilization"}),e.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:P.teamUtilization>=100?"#DC2626":P.teamUtilization>=80?"#D97706":"#059669"},children:[P.teamUtilization,"%"]}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:P.teamUtilization>=100?"Overloaded":P.teamUtilization>=80?"At capacity":"Healthy"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:D?"1fr 400px":"1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"card",style:{marginBottom:"20px",background:"#F9FAFB"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"6px",color:"#6B7280"},children:"Search Issues"}),e.jsx("input",{type:"text",value:M,onChange:z=>R(z.target.value),placeholder:"Search by title, epic, assignee, weight, or #ID...",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),e.jsx(Xc,{label:"Filter by Epic",value:w,onChange:H,placeholder:"All Epics",options:[{value:"all",label:"All Epics"},...y.map(z=>({value:z.id,label:z.title}))]}),e.jsx(Xc,{label:"Filter by Assignee",value:U,onChange:G,placeholder:"All Assignees",options:[{value:"all",label:"All Assignees"},...C.map(z=>({value:z.username,label:z.name,subtitle:z.username}))]}),e.jsx(Xc,{label:"Filter by Weight",value:$,onChange:B,placeholder:"All Weights",options:[{value:"all",label:"All Weights"},{value:"none",label:"No Weight"},{value:"low",label:"Low (1-3)"},{value:"medium",label:"Medium (4-7)"},{value:"high",label:"High (8+)"}]})]})}),P&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Team Capacity Breakdown"}),e.jsxs("button",{onClick:()=>j(!D),style:{padding:"8px 16px",background:D?"#DC2626":"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[D?"Hide":"Show"," Backlog"]})]}),P.members.map(z=>{const T=z.utilization>=100,N=z.utilization>=80&&z.utilization<100,K=b===z.username;return e.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:T?"#FEF2F2":N?"#FEF3C7":"#F9FAFB",borderRadius:"8px",border:`2px solid ${T?"#FEE2E2":N?"#FDE68A":"#E5E7EB"}`},children:[e.jsxs("div",{onClick:()=>v(K?null:z.username),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937"},children:z.name}),e.jsx("span",{style:{padding:"3px 8px",background:"#EFF6FF",color:"#2563EB",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:z.role}),z.reason&&e.jsx("span",{style:{padding:"3px 8px",background:"#FEF3C7",color:"#92400E",borderRadius:"12px",fontSize:"11px",fontWeight:"500"},children:z.reason})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280"},children:[z.allocatedHours,"h / ",z.availableHours,"h","  ",z.issueCount," issues","  ",e.jsxs("span",{style:{fontWeight:"600",color:T?"#DC2626":N?"#D97706":"#059669"},children:[z.utilization,"% utilization"]})]})]}),e.jsx("div",{style:{fontSize:"20px",color:"#9CA3AF"},children:K?"":""})]}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsx("div",{style:{width:"100%",height:"10px",background:"#E5E7EB",borderRadius:"5px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(z.utilization,100)}%`,height:"100%",background:T?"#DC2626":N?"#D97706":"#059669",transition:"width 0.3s ease"}})})}),K&&z.issues.length>0&&e.jsx("div",{style:{marginTop:"16px"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"ID"}),e.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"Title"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"Weight"}),e.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",fontWeight:"600",color:"#6B7280"},children:"Hours"})]})}),e.jsx("tbody",{children:z.issues.map(te=>{const q=Gi(te,d);return e.jsxs("tr",{style:{borderBottom:"1px solid #F3F4F6"},children:[e.jsxs("td",{style:{padding:"8px",color:"#6B7280"},children:["#",te.iid]}),e.jsx("td",{style:{padding:"8px",color:"#374151"},children:e.jsx("div",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:te.title})}),e.jsx("td",{style:{padding:"8px",textAlign:"center"},children:te.weight?e.jsx("span",{style:{padding:"2px 6px",background:"#DBEAFE",color:"#1E40AF",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:te.weight}):"-"}),e.jsxs("td",{style:{padding:"8px",textAlign:"center",fontWeight:"600",color:"#374151"},children:[q.toFixed(1),"h"]})]},te.id)})})]})})]},z.username)})]})]}),D&&e.jsx("div",{children:e.jsxs("div",{className:"card",style:{position:"sticky",top:"20px",maxHeight:"calc(100vh - 40px)",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:"Backlog"}),e.jsxs("div",{style:{fontSize:"13px",color:"#6B7280"},children:[X.count," issues  ",X.totalWeight," points  ",X.totalHours,"h",X.unassigned>0&&e.jsxs("span",{style:{color:"#D97706",fontWeight:"600"},children:[" ","  ",X.unassigned," unassigned"]})]})]}),_.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#9CA3AF",fontSize:"14px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("div",{children:"All issues are assigned to sprints!"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.map(z=>{const T=Gi(z,d);return e.jsxs("div",{style:{padding:"12px",background:"#F9FAFB",borderRadius:"6px",border:"1px solid #E5E7EB",fontSize:"13px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"between",alignItems:"start",gap:"8px",marginBottom:"6px"},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"4px"},children:["#",z.iid," ",z.title]}),z.epic&&e.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:[" ",z.epic.title]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[z.weight&&e.jsxs("span",{style:{padding:"2px 6px",background:"#DBEAFE",color:"#1E40AF",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:[z.weight," pts"]}),e.jsxs("span",{style:{padding:"2px 6px",background:"#F3F4F6",color:"#6B7280",borderRadius:"4px",fontSize:"11px",fontWeight:"500"},children:[T.toFixed(1),"h"]}),z.assignees&&z.assignees.length>0&&e.jsx("span",{style:{padding:"2px 6px",background:"#DCFCE7",color:"#166534",borderRadius:"4px",fontSize:"11px",fontWeight:"500"},children:z.assignees[0].name})]})]})}),e.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"6px"},children:" Tip: Assign to sprint in GitLab to move from backlog"})]},z.id)})})]})})]})]}):e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card",style:{textAlign:"center",padding:"60px",color:"#6B7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No Sprints Found"}),e.jsx("div",{style:{fontSize:"14px"},children:"Make sure your issues have iterations assigned to see sprint planning"})]})})}const Tb=Object.freeze(Object.defineProperty({__proto__:null,default:Ab},Symbol.toStringTag,{value:"Module"}));</script>
    <style rel="stylesheet" crossorigin>:root{--primary: #E60000;--primary-dark: #B80000;--bg-primary: #FFFFFF;--bg-secondary: #F8F9FA;--bg-tertiary: #F3F4F6;--text-primary: #1F2937;--text-secondary: #6B7280;--text-tertiary: #9CA3AF;--border-light: #E5E7EB;--border-medium: #D1D5DB;--success: #059669;--warning: #D97706;--danger: #DC2626;--info: #2563EB}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Arial,sans-serif;background:var(--bg-secondary);color:var(--text-primary);line-height:1.6}.header{background:var(--bg-primary);border-bottom:1px solid var(--border-light);box-shadow:0 1px 3px #0000000d}.card{background:var(--bg-primary);border:1px solid var(--border-light);border-radius:8px;padding:24px;box-shadow:0 1px 2px #0000000d}.card:hover{box-shadow:0 4px 6px #00000012}.btn{padding:10px 20px;font-size:14px;font-weight:500;border:1px solid var(--border-medium);border-radius:6px;cursor:pointer;transition:all .2s;background:var(--bg-primary);color:var(--text-primary)}.btn:hover{border-color:var(--border-medium);background:var(--bg-tertiary)}.btn-primary{background:var(--primary);color:#fff;border-color:var(--primary)}.btn-primary:hover{background:var(--primary-dark);border-color:var(--primary-dark)}h1{font-size:28px;font-weight:600;line-height:1.2}h2{font-size:24px;font-weight:600;line-height:1.3}h3{font-size:18px;font-weight:600;line-height:1.4}.container{max-width:1400px;margin:0 auto;padding:20px}.container-fluid{width:100%;padding:20px;margin:0}.container-timeline{width:100%;padding:20px 10px;margin:0}.grid{display:grid;gap:20px}.grid-2{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:repeat(3,1fr)}.grid-4{grid-template-columns:repeat(4,1fr)}.metric-card{text-align:center;padding:20px}.metric-value{font-size:32px;font-weight:700;color:var(--text-primary);margin:8px 0}.metric-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary)}.health-circle{width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto;font-size:32px;font-weight:700;color:#fff}.health-good{background:var(--success)}.health-warning{background:var(--warning)}.health-danger{background:var(--danger)}.badge{display:inline-block;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.badge-success{background:#d1fae5;color:var(--success)}.badge-warning{background:#fef3c7;color:var(--warning)}.badge-danger{background:#fee2e2;color:var(--danger)}.badge-info{background:#dbeafe;color:var(--info)}.progress-bar{width:100%;height:8px;background:var(--bg-tertiary);border-radius:4px;overflow:hidden}.progress-fill{height:100%;background:var(--primary);transition:width .3s ease}table{width:100%;border-collapse:collapse}th,td{padding:12px;text-align:left;border-bottom:1px solid var(--border-light)}th{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);background:var(--bg-secondary)}tr:hover{background:var(--bg-secondary)}.tabs{display:flex;gap:4px;border-bottom:1px solid var(--border-light);background:var(--bg-primary);padding:0 20px}.tab{padding:12px 20px;font-size:14px;font-weight:500;color:var(--text-secondary);background:transparent;border:none;border-bottom:2px solid transparent;cursor:pointer;transition:all .2s}.tab:hover{color:var(--text-primary)}.tab.active{color:var(--primary);border-bottom-color:var(--primary)}.modal-overlay{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal{background:var(--bg-primary);border-radius:8px;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 25px -5px #0000001a}.modal-header{padding:24px;border-bottom:1px solid var(--border-light);display:flex;justify-content:space-between;align-items:center}.modal-body{padding:24px}.modal-footer{padding:24px;border-top:1px solid var(--border-light);display:flex;justify-content:flex-end;gap:12px}.form-group{margin-bottom:20px}.form-label{display:block;font-size:13px;font-weight:500;color:var(--text-primary);margin-bottom:6px}.form-input,.form-select,.form-textarea{width:100%;padding:10px 12px;font-size:14px;border:1px solid var(--border-medium);border-radius:6px;background:var(--bg-primary);color:var(--text-primary)}.form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #e600001a}.form-textarea{resize:vertical;min-height:100px}.text-center{text-align:center}.text-right{text-align:right}.mb-1{margin-bottom:8px}.mb-2{margin-bottom:16px}.mb-3{margin-bottom:24px}.mt-1{margin-top:8px}.mt-2{margin-top:16px}.mt-3{margin-top:24px}.text-muted{color:var(--text-secondary)}.text-small{font-size:12px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes pulse{0%,to{opacity:1;border-color:#3b82f6}50%{opacity:.7;border-color:#60a5fa}}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
